var Pb=Object.defineProperty,Fb=Object.defineProperties,Lb=Object.getOwnPropertyDescriptors,KE=Object.getOwnPropertySymbols,Vb=Object.prototype.hasOwnProperty,Bb=Object.prototype.propertyIsEnumerable,ZE=(tn,ot,H)=>ot in tn?Pb(tn,ot,{enumerable:!0,configurable:!0,writable:!0,value:H}):tn[ot]=H,QE=(tn,ot)=>{for(var H in ot||(ot={}))Vb.call(ot,H)&&ZE(tn,H,ot[H]);if(KE)for(var H of KE(ot))Bb.call(ot,H)&&ZE(tn,H,ot[H]);return tn},XE=(tn,ot)=>Fb(tn,Lb(ot));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6439:(tn,ot,H)=>{"use strict";var a=H(2313),ne=H(5e3),z=H(4740),ke=H(4153);const Le=[{path:"",loadChildren:()=>H.e(3196).then(H.bind(H,3196)).then(h=>h.TabsPageModule)}];let he=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h}),h.\u0275inj=ne.cJS({imports:[z.Bz.forRoot(Le,{preloadingStrategy:z.wm}),z.Bz]}),h})(),Ee=(()=>{class h{constructor(){}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275cmp=ne.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(c,y){1&c&&(ne.TgZ(0,"ion-app"),ne._UZ(1,"ion-router-outlet"),ne.qZA())},dependencies:[ke.dr,ke.jP]}),h})();var pe=H(2011),be=H(353),ce=H(6498),de=H(1086),ie=H(6787),Ie=H(4850),Ge=H(2474),st=H(7545),nt=H(2014),Re=H(5778),De=H(826),ct=H(448);class vt{constructor(u,c){this.observables=u,this.project=c}call(u,c){return c.subscribe(new gt(u,this.observables,this.project))}}class gt extends De.L{constructor(u,c,y){super(u),this.observables=c,this.project=y,this.toRespond=[];const D=c.length;this.values=new Array(D);for(let P=0;P<D;P++)this.toRespond.push(P);for(let P=0;P<D;P++)this.add((0,ct.D)(this,c[P],void 0,P))}notifyNext(u,c,y){this.values[y]=c;const D=this.toRespond;if(D.length>0){const P=D.indexOf(y);-1!==P&&D.splice(P,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const c=[u,...this.values];this.project?this._tryProject(c):this.destination.next(c)}}_tryProject(u){let c;try{c=this.project.apply(this,u)}catch(y){return void this.destination.error(y)}this.destination.next(c)}}var xt=H(3489);class mt{constructor(u){this.predicate=u}call(u,c){return c.subscribe(new ye(u,this.predicate))}}class ye extends xt.L{constructor(u,c){super(u),this.predicate=c,this.skipping=!0,this.index=0}_next(u){const c=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||c.next(u)}tryCallPredicate(u){try{const c=this.predicate(u,this.index++);this.skipping=Boolean(c)}catch(c){this.destination.error(c)}}}var Oe=H(6351),ae=(H(1277),H(3942)),Ce=H(4859),Se=H(5861),lt=H(9681),J=H(2090),Gt=H(1877);const bt="@firebase/database",at="0.13.10";let $e="";function Ue(h){$e=h}class Xe{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,J.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,J.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Qe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,J.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const ht=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Xe(u)}}catch(u){}return new Qe},ft=ht("localStorage"),Ft=ht("sessionStorage"),Nt=new Gt.Yd("@firebase/database"),bn=function(){let h=1;return function(){return h++}}(),In=function(h){const u=(0,J.dS)(h),c=new J.gQ;c.update(u);const y=c.digest();return J.US.encodeByteArray(y)},Qn=function(...h){let u="";for(let c=0;c<h.length;c++){const y=h[c];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?u+=Qn.apply(null,y):u+="object"==typeof y?(0,J.Wl)(y):y,u+=" "}return u};let Rn=null,Wn=!0;const ur=function(h,u){(0,J.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Nt.logLevel=Gt.in.VERBOSE,Rn=Nt.log.bind(Nt),u&&Ft.set("logging_enabled",!0)):"function"==typeof h?Rn=h:(Rn=null,Ft.remove("logging_enabled"))},Un=function(...h){if(!0===Wn&&(Wn=!1,null===Rn&&!0===Ft.get("logging_enabled")&&ur(!0)),Rn){const u=Qn.apply(null,h);Rn(u)}},or=function(h){return function(...u){Un(h,...u)}},mr=function(...h){const u="FIREBASE INTERNAL ERROR: "+Qn(...h);Nt.error(u)},zt=function(...h){const u=`FIREBASE FATAL ERROR: ${Qn(...h)}`;throw Nt.error(u),new Error(u)},rr=function(...h){const u="FIREBASE WARNING: "+Qn(...h);Nt.warn(u)},tr=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Cr="[MIN_NAME]",an="[MAX_NAME]",fr=function(h,u){if(h===u)return 0;if(h===Cr||u===an)return-1;if(u===Cr||h===an)return 1;{const c=Yr(h),y=Yr(u);return null!==c?null!==y?c-y==0?h.length-u.length:c-y:-1:null!==y?1:h<u?-1:1}},Tn=function(h,u){return h===u?0:h<u?-1:1},gn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,J.Wl)(u))},Tt=function(h){if("object"!=typeof h||null===h)return(0,J.Wl)(h);const u=[];for(const y in h)u.push(y);u.sort();let c="{";for(let y=0;y<u.length;y++)0!==y&&(c+=","),c+=(0,J.Wl)(u[y]),c+=":",c+=Tt(h[u[y]]);return c+="}",c},yr=function(h,u){const c=h.length;if(c<=u)return[h];const y=[];for(let D=0;D<c;D+=u)y.push(h.substring(D,D+u>c?c:D+u));return y};function Bn(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const Dr=function(h){(0,J.hu)(!tr(h),"Invalid JSON number");const y=1023;let D,P,W,se,xe;0===h?(P=0,W=0,D=1/h==-1/0?1:0):(D=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(se=Math.min(Math.floor(Math.log(h)/Math.LN2),y),P=se+y,W=Math.round(h*Math.pow(2,52-se)-Math.pow(2,52))):(P=0,W=Math.round(h/Math.pow(2,-1074))));const We=[];for(xe=52;xe;xe-=1)We.push(W%2?1:0),W=Math.floor(W/2);for(xe=11;xe;xe-=1)We.push(P%2?1:0),P=Math.floor(P/2);We.push(D?1:0),We.reverse();const Vt=We.join("");let Bt="";for(xe=0;xe<64;xe+=8){let qt=parseInt(Vt.substr(xe,8),2).toString(16);1===qt.length&&(qt="0"+qt),Bt+=qt}return Bt.toLowerCase()},Fn=new RegExp("^-?(0*)\\d{1,10}$"),si=-2147483648,ir=2147483647,Yr=function(h){if(Fn.test(h)){const u=Number(h);if(u>=si&&u<=ir)return u}return null},ni=function(h){try{h()}catch(u){setTimeout(()=>{throw rr("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},$t=function(h,u){const c=setTimeout(h,u);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class un{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(y=>this.appCheck=y)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,y)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(y=>y.addTokenListener(u))}notifyForInvalidToken(){rr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Ln{constructor(u,c,y){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(D=>this.auth_=D)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(Un("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,y)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rr(u)}}let Sn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const rt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wr="websocket",Nr="long_polling";class pt{constructor(u,c,y,D,P=!1,W="",se=!1){this.secure=c,this.namespace=y,this.webSocketOnly=D,this.nodeAdmin=P,this.persistenceKey=W,this.includeNamespaceInQueryParams=se,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ft.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&ft.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Me(h,u,c){let y;if((0,J.hu)("string"==typeof u,"typeof type must == string"),(0,J.hu)("object"==typeof c,"typeof params must == object"),u===wr)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==Nr)throw new Error("Unknown connection type: "+u);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Ve(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const D=[];return Bn(c,(P,W)=>{D.push(P+"="+W)}),y+D.join("&")}class Et{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,J.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,J.p$)(this.counters_)}}const Mt={},hn={};function fn(h){const u=h.toString();return Mt[u]||(Mt[u]=new Et),Mt[u]}class Cn{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let D=0;D<y.length;++D)y[D]&&ni(()=>{this.onMessage_(y[D])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fi{constructor(u,c,y,D,P,W,se){this.connId=u,this.repoInfo=c,this.applicationId=y,this.appCheckToken=D,this.authToken=P,this.transportSessionId=W,this.lastSessionId=se,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=or(u),this.stats_=fn(c),this.urlFn=xe=>(this.appCheckToken&&(xe.ac=this.appCheckToken),Me(c,Nr,xe))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Cn(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,J.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fi((...P)=>{const[W,se,xe,We,Vt]=P;if(this.incrementIncomingBytes_(P),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===W)this.id=se,this.password=xe;else{if("close"!==W)throw new Error("Unrecognized command received: "+W);se?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(se,()=>{this.onClosed_()})):this.onClosed_()}},(...P)=>{const[W,se]=P;this.incrementIncomingBytes_(P),this.myPacketOrderer.handleResponse(W,se)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(y.r="f");const D=this.urlFn(y);this.log_("Connecting via long-poll to "+D),this.scriptTagHolder.addTag(D,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fi.forceAllow_=!0}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!fi.forceAllow_&&(fi.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,J.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const y=(0,J.h$)(c),D=yr(y,1840);for(let P=0;P<D.length;P++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[P]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=u,y.pw=c,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,J.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Fi{constructor(u,c,y,D){if(this.onDisconnect=y,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=bn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Fi.createIFrame_();let P="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(P='<script>document.domain="'+document.domain+'";<\/script>');const W="<html><body>"+P+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(W),this.myIFrame.doc.close()}catch(se){Un("frame writing exception"),se.stack&&Un(se.stack),Un(se)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Un("No IE domain setting required")}catch(c){const y=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),y="",D=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const W=this.pendingSegs.shift();y=y+"&seg"+D+"="+W.seg+"&ts"+D+"="+W.ts+"&d"+D+"="+W.d,D++}return c+=y,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,y){this.pendingSegs.push({seg:u,ts:c,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const y=()=>{this.outstandingRequests.delete(c),this.newRequest_()},D=setTimeout(y,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(D),y()})}addTag(u,c){(0,J.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=u,y.onload=y.onreadystatechange=function(){const D=y.readyState;(!D||"loaded"===D||"complete"===D)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),c())},y.onerror=()=>{Un("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch(y){}},Math.floor(1))}}let Ke=null;"undefined"!=typeof MozWebSocket?Ke=MozWebSocket:"undefined"!=typeof WebSocket&&(Ke=WebSocket);let Je=(()=>{class h{constructor(c,y,D,P,W,se,xe){this.connId=c,this.applicationId=D,this.appCheckToken=P,this.authToken=W,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=or(this.connId),this.stats_=fn(y),this.connURL=h.connectionURL_(y,se,xe,P,D),this.nodeAdmin=y.nodeAdmin}static connectionURL_(c,y,D,P,W){const se={v:"5"};return!(0,J.Yr)()&&"undefined"!=typeof location&&location.hostname&&rt.test(location.hostname)&&(se.r="f"),y&&(se.s=y),D&&(se.ls=D),P&&(se.ac=P),W&&(se.p=W),Me(c,wr,se)}open(c,y){this.onDisconnect=y,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ft.set("previous_websocket_failure",!0);try{let D;if((0,J.Yr)()){D={headers:{"User-Agent":`Firebase/5/${$e}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(D.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(D.headers["X-Firebase-AppCheck"]=this.appCheckToken);const W=process.env,se=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;se&&(D.proxy={origin:se})}this.mySock=new Ke(this.connURL,[],D)}catch(D){this.log_("Error instantiating WebSocket.");const P=D.message||D.data;return P&&this.log_(P),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=D=>{this.handleIncomingFrame(D)},this.mySock.onerror=D=>{this.log_("WebSocket error.  Closing connection.");const P=D.message||D.data;P&&this.log_(P),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const D=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);D&&D.length>1&&parseFloat(D[1])<4.4&&(c=!0)}return!c&&null!==Ke&&!h.forceDisallow_}static previouslyFailed(){return ft.isInMemoryStorage||!0===ft.get("previous_websocket_failure")}markConnectionHealthy(){ft.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const D=(0,J.cI)(y);this.onMessage(D)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const y=Number(c);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const y=c.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const D=this.extractFrameCount_(y);null!==D&&this.appendFrame_(D)}}send(c){this.resetKeepAlive();const y=(0,J.Wl)(c);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const D=yr(y,16384);D.length>1&&this.sendString_(String(D.length));for(let P=0;P<D.length;P++)this.sendString_(D[P])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Ct=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[fi,Je]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const y=Je&&Je.isAvailable();let D=y&&!Je.previouslyFailed();if(c.webSocketOnly&&(y||rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),D=!0),D)this.transports_=[Je];else{const P=this.transports_=[];for(const W of h.ALL_TRANSPORTS)W&&W.isAvailable()&&P.push(W);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class en{constructor(u,c,y,D,P,W,se,xe,We,Vt){this.id=u,this.repoInfo_=c,this.applicationId_=y,this.appCheckToken_=D,this.authToken_=P,this.onMessage_=W,this.onReady_=se,this.onDisconnect_=xe,this.onKill_=We,this.lastSessionId=Vt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=or("c:"+this.id+":"),this.transportManager_=new Ct(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,y)},Math.floor(0));const D=u.healthyTimeout||0;D>0&&(this.healthyTimeout_=$t(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(D)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=gn("t",u),y=gn("d",u);if("c"===c)this.onSecondaryControl_(y);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=gn("t",u),y=gn("d",u);"c"===c?this.onControl_(y):"d"===c&&this.onDataMessage_(y)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=gn("t",u);if("d"in u){const y=u.d;if("h"===c)this.onHandshake_(y);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(y):"r"===c?this.onReset_(y):"e"===c?mr("Server Error: "+y):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mr("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,y=u.v,D=u.h;this.sessionId=u.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==y&&rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,y),$t(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$t(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ft.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Dn{put(u,c,y,D){}merge(u,c,y,D){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,y){}onDisconnectMerge(u,c,y){}onDisconnectCancel(u,c){}reportStats(u){}}class Yn{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,J.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const y=[...this.listeners_[u]];for(let D=0;D<y.length;D++)y[D].callback.apply(y[D].context,c)}}on(u,c,y){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:y});const D=this.getInitialEvent(u);D&&c.apply(y,D)}off(u,c,y){this.validateEventType_(u);const D=this.listeners_[u]||[];for(let P=0;P<D.length;P++)if(D[P].callback===c&&(!y||y===D[P].context))return void D.splice(P,1)}validateEventType_(u){(0,J.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class ui extends Yn{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ui}getInitialEvent(u){return(0,J.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Sr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let y=0;for(let D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[y]=this.pieces_[D],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Ir(){return new Sr("")}function Xn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function Ji(h){return h.pieces_.length-h.pieceNum_}function Zr(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Sr(h.pieces_,u)}function Us(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function es(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function js(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new Sr(u,0)}function Ar(h,u){const c=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)c.push(h.pieces_[y]);if(u instanceof Sr)for(let y=u.pieceNum_;y<u.pieces_.length;y++)c.push(u.pieces_[y]);else{const y=u.split("/");for(let D=0;D<y.length;D++)y[D].length>0&&c.push(y[D])}return new Sr(c,0)}function cr(h){return h.pieceNum_>=h.pieces_.length}function mi(h,u){const c=Xn(h),y=Xn(u);if(null===c)return u;if(c===y)return mi(Zr(h),Zr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Js(h,u){const c=es(h,0),y=es(u,0);for(let D=0;D<c.length&&D<y.length;D++){const P=fr(c[D],y[D]);if(0!==P)return P}return c.length===y.length?0:c.length<y.length?-1:1}function Hs(h,u){if(Ji(h)!==Ji(u))return!1;for(let c=h.pieceNum_,y=u.pieceNum_;c<=h.pieces_.length;c++,y++)if(h.pieces_[c]!==u.pieces_[y])return!1;return!0}function pi(h,u){let c=h.pieceNum_,y=u.pieceNum_;if(Ji(h)>Ji(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[y])return!1;++c,++y}return!0}class os{constructor(u,c){this.errorPrefix_=c,this.parts_=es(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,J.ug)(this.parts_[y]);ps(this)}}function ps(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Di(h))}function Di(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class No extends Yn{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const y=!document[u];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new No}getInitialEvent(u){return(0,J.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Hi=1e3;let Ns,gi=(()=>{class h extends Dn{constructor(c,y,D,P,W,se,xe,We){if(super(),this.repoInfo_=c,this.applicationId_=y,this.onDataUpdate_=D,this.onConnectStatus_=P,this.onServerInfoUpdate_=W,this.authTokenProvider_=se,this.appCheckTokenProvider_=xe,this.authOverride_=We,this.id=h.nextPersistentConnectionId_++,this.log_=or("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,We&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");No.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&ui.getInstance().on("online",this.onOnline_,this)}sendRequest(c,y,D){const P=++this.requestNumber_,W={r:P,a:c,b:y};this.log_((0,J.Wl)(W)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(W),D&&(this.requestCBHash_[P]=D)}get(c){this.initConnection_();const y=new J.BH,D={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:D,onComplete:se=>{const xe=se.d;"ok"===se.s?y.resolve(xe):y.reject(xe)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(c,y,D,P){this.initConnection_();const W=c._queryIdentifier,se=c._path.toString();this.log_("Listen called for "+se+" "+W),this.listens.has(se)||this.listens.set(se,new Map),(0,J.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(se).has(W),"listen() called twice for same path/queryId.");const xe={onComplete:P,hashFn:y,query:c,tag:D};this.listens.get(se).set(W,xe),this.connected_&&this.sendListen_(xe)}sendGet_(c){const y=this.outstandingGets_[c];this.sendRequest("g",y.request,D=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(D)})}sendListen_(c){const y=c.query,D=y._path.toString(),P=y._queryIdentifier;this.log_("Listen on "+D+" for "+P);const W={p:D};c.tag&&(W.q=y._queryObject,W.t=c.tag),W.h=c.hashFn(),this.sendRequest("q",W,xe=>{const We=xe.d,Vt=xe.s;h.warnOnListenWarnings_(We,y),(this.listens.get(D)&&this.listens.get(D).get(P))===c&&(this.log_("listen response",xe),"ok"!==Vt&&this.removeListen_(D,P),c.onComplete&&c.onComplete(Vt,We))})}static warnOnListenWarnings_(c,y){if(c&&"object"==typeof c&&(0,J.r3)(c,"w")){const D=(0,J.DV)(c,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){const P='".indexOn": "'+y._queryParams.getIndex().toString()+'"',W=y._path.toString();rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${P} at ${W} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,J.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,y=(0,J.w9)(c)?"auth":"gauth",D={cred:c};null===this.authOverride_?D.noauth=!0:"object"==typeof this.authOverride_&&(D.authvar=this.authOverride_),this.sendRequest(y,D,P=>{const W=P.s,se=P.d||"error";this.authToken_===c&&("ok"===W?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(W,se))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const y=c.s,D=c.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,D)})}unlisten(c,y){const D=c._path.toString(),P=c._queryIdentifier;this.log_("Unlisten called for "+D+" "+P),(0,J.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,P)&&this.connected_&&this.sendUnlisten_(D,P,c._queryObject,y)}sendUnlisten_(c,y,D,P){this.log_("Unlisten on "+c+" for "+y);const W={p:c};P&&(W.q=D,W.t=P),this.sendRequest("n",W)}onDisconnectPut(c,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,y,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:y,onComplete:D})}onDisconnectMerge(c,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,y,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:y,onComplete:D})}onDisconnectCancel(c,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,y):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(c,y,D,P){const W={p:y,d:D};this.log_("onDisconnect "+c,W),this.sendRequest(c,W,se=>{P&&setTimeout(()=>{P(se.s,se.d)},Math.floor(0))})}put(c,y,D,P){this.putInternal("p",c,y,D,P)}merge(c,y,D,P){this.putInternal("m",c,y,D,P)}putInternal(c,y,D,P,W){this.initConnection_();const se={p:y,d:D};void 0!==W&&(se.h=W),this.outstandingPuts_.push({action:c,request:se,onComplete:P}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(c){const y=this.outstandingPuts_[c].action,D=this.outstandingPuts_[c].request,P=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(y,D,W=>{this.log_(y+" response",W),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),P&&P(W.s,W.d)})}reportStats(c){if(this.connected_){const y={c};this.log_("reportStats",y),this.sendRequest("s",y,D=>{"ok"!==D.s&&this.log_("reportStats","Error sending stats: "+D.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,J.Wl)(c));const y=c.r,D=this.requestCBHash_[y];D&&(delete this.requestCBHash_[y],D(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,y){this.log_("handleServerMessage",c,y),"d"===c?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===c?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===c?this.onListenRevoked_(y.p,y.q):"ac"===c?this.onAuthRevoked_(y.s,y.d):"apc"===c?this.onAppCheckRevoked_(y.s,y.d):"sd"===c?this.onSecurityDebugPacket_(y):mr("Unrecognized action received from server: "+(0,J.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-c);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Se.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const y=c.onDataMessage_.bind(c),D=c.onReady_.bind(c),P=c.onRealtimeDisconnect_.bind(c),W=c.id+":"+h.nextConnectionId_++,se=c.lastSessionId;let xe=!1,We=null;const Vt=function(){We?We.close():(xe=!0,P())};c.realtime_={close:Vt,sendRequest:function(Mn){(0,J.hu)(We,"sendRequest call when we're not connected not allowed."),We.sendRequest(Mn)}};const qt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Mn,dr]=yield Promise.all([c.authTokenProvider_.getToken(qt),c.appCheckTokenProvider_.getToken(qt)]);xe?Un("getToken() completed but was canceled"):(Un("getToken() completed. Creating connection."),c.authToken_=Mn&&Mn.accessToken,c.appCheckToken_=dr&&dr.token,We=new en(W,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,y,D,P,Si=>{rr(Si+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},se))}catch(Mn){c.log_("Failed to get token: "+Mn),xe||(c.repoInfo_.nodeAdmin&&rr(Mn),Vt())}}})()}interrupt(c){Un("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Un("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const y=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const y=this.outstandingPuts_[c];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,y){let D;D=y?y.map(W=>Tt(W)).join("$"):"default";const P=this.removeListen_(c,D);P&&P.onComplete&&P.onComplete("permission_denied")}removeListen_(c,y){const D=new Sr(c).toString();let P;if(this.listens.has(D)){const W=this.listens.get(D);P=W.get(y),W.delete(y),0===W.size&&this.listens.delete(D)}else P=void 0;return P}onAuthRevoked_(c,y){Un("Auth token revoked: "+c+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,y){Un("App check token revoked: "+c+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const y of c.values())this.sendListen_(y);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let y="js";(0,J.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+y+"."+$e.replace(/\./g,"-")]=1,(0,J.uI)()?c["framework.cordova"]=1:(0,J.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=ui.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class Jn{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new Jn(u,c)}}class _s{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const y=new Jn(Cr,u),D=new Jn(Cr,c);return 0!==this.compare(y,D)}minPost(){return Jn.MIN}}class Rr extends _s{static get __EMPTY_NODE(){return Ns}static set __EMPTY_NODE(u){Ns=u}compare(u,c){return fr(u.name,c.name)}isDefinedOn(u){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return Jn.MIN}maxPost(){return new Jn(an,Ns)}makePost(u,c){return(0,J.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new Jn(u,Ns)}toString(){return".key"}}const as=new Rr;class Ts{constructor(u,c,y,D,P=null){this.isReverse_=D,this.resultGenerator_=P,this.nodeStack_=[];let W=1;for(;!u.isEmpty();)if(W=c?y(u.key,c):1,D&&(W*=-1),W<0)u=this.isReverse_?u.left:u.right;else{if(0===W){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let eo,ls=(()=>{class h{constructor(c,y,D,P,W){this.key=c,this.value=y,this.color=null!=D?D:h.RED,this.left=null!=P?P:Ri.EMPTY_NODE,this.right=null!=W?W:Ri.EMPTY_NODE}copy(c,y,D,P,W){return new h(null!=c?c:this.key,null!=y?y:this.value,null!=D?D:this.color,null!=P?P:this.left,null!=W?W:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,y,D){let P=this;const W=D(c,P.key);return P=W<0?P.copy(null,null,null,P.left.insert(c,y,D),null):0===W?P.copy(null,y,null,null,null):P.copy(null,null,null,null,P.right.insert(c,y,D)),P.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ri.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,y){let D,P;if(D=this,y(c,D.key)<0)!D.left.isEmpty()&&!D.left.isRed_()&&!D.left.left.isRed_()&&(D=D.moveRedLeft_()),D=D.copy(null,null,null,D.left.remove(c,y),null);else{if(D.left.isRed_()&&(D=D.rotateRight_()),!D.right.isEmpty()&&!D.right.isRed_()&&!D.right.left.isRed_()&&(D=D.moveRedRight_()),0===y(c,D.key)){if(D.right.isEmpty())return Ri.EMPTY_NODE;P=D.right.min_(),D=D.copy(P.key,P.value,null,null,D.right.removeMin_())}D=D.copy(null,null,null,null,D.right.remove(c,y))}return D.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,y)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Ri{constructor(u,c=Ri.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new Ri(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,ls.BLACK,null,null))}remove(u){return new Ri(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,ls.BLACK,null,null))}get(u){let c,y=this.root_;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c)return y.value;c<0?y=y.left:c>0&&(y=y.right)}return null}getPredecessorKey(u){let c,y=this.root_,D=null;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c){if(y.left.isEmpty())return D?D.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}c<0?y=y.left:c>0&&(D=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Ts(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Ts(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Ts(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Ts(this.root_,null,this.comparator_,!0,u)}}function Vr(h,u){return fr(h.name,u.name)}function Kn(h,u){return fr(h,u)}Ri.EMPTY_NODE=new class Es{copy(u,c,y,D,P){return this}insert(u,c,y){return new ls(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ks=function(h){return"number"==typeof h?"number:"+Dr(h):"string:"+h},Ho=function(h){if(h.isLeafNode()){const u=h.val();(0,J.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,J.r3)(u,".sv"),"Priority must be a string or number.")}else(0,J.hu)(h===eo||h.isEmpty(),"priority of unexpected type.");(0,J.hu)(h===eo||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ga,xa,bo,ks=(()=>{class h{constructor(c,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=y,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ho(this.priorityNode_)}static set __childrenNodeConstructor(c){ga=c}static get __childrenNodeConstructor(){return ga}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return cr(c)?this:".priority"===Xn(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,y){return null}updateImmediateChild(c,y){return".priority"===c?this.updatePriority(y):y.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,y).updatePriority(this.priorityNode_)}updateChild(c,y){const D=Xn(c);return null===D?y:y.isEmpty()&&".priority"!==D?this:((0,J.hu)(".priority"!==D||1===Ji(c),".priority must be the last token in a path"),this.updateImmediateChild(D,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zr(c),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,y){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Ks(this.priorityNode_.val())+":");const y=typeof this.value_;c+=y+":",c+="number"===y?Dr(this.value_):this.value_,this.lazyHash_=In(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,J.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const y=typeof c.value_,D=typeof this.value_,P=h.VALUE_TYPE_ORDER.indexOf(y),W=h.VALUE_TYPE_ORDER.indexOf(D);return(0,J.hu)(P>=0,"Unknown leaf type: "+y),(0,J.hu)(W>=0,"Unknown leaf type: "+D),P===W?"object"===D?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:W-P}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const y=c;return this.value_===y.value_&&this.priorityNode_.equals(y.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const ri=new class na extends _s{compare(u,c){const y=u.node.getPriority(),D=c.node.getPriority(),P=y.compareTo(D);return 0===P?fr(u.name,c.name):P}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return Jn.MIN}maxPost(){return new Jn(an,new ks("[PRIORITY-POST]",bo))}makePost(u,c){const y=xa(u);return new Jn(c,new ks("[PRIORITY-POST]",y))}toString(){return".priority"}},Li=Math.log(2);class ko{constructor(u){this.count=parseInt(Math.log(u+1)/Li,10),this.current_=this.count-1;const D=(P=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&D}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Gi=function(h,u,c,y){h.sort(u);const D=function(xe,We){const Vt=We-xe;let Bt,qt;if(0===Vt)return null;if(1===Vt)return Bt=h[xe],qt=c?c(Bt):Bt,new ls(qt,Bt.node,ls.BLACK,null,null);{const Mn=parseInt(Vt/2,10)+xe,dr=D(xe,Mn),Si=D(Mn+1,We);return Bt=h[Mn],qt=c?c(Bt):Bt,new ls(qt,Bt.node,ls.BLACK,dr,Si)}},se=function(xe){let We=null,Vt=null,Bt=h.length;const qt=function(dr,Si){const Oo=Bt-dr,Qa=Bt;Bt-=dr;const wl=D(Oo+1,Qa),zc=h[Oo],wd=c?c(zc):zc;Mn(new ls(wd,zc.node,Si,null,wl))},Mn=function(dr){We?(We.left=dr,We=dr):(Vt=dr,We=dr)};for(let dr=0;dr<xe.count;++dr){const Si=xe.nextBitIsOne(),Oo=Math.pow(2,xe.count-(dr+1));Si?qt(Oo,ls.BLACK):(qt(Oo,ls.BLACK),qt(Oo,ls.RED))}return Vt}(new ko(h.length));return new Ri(y||u,se)};let Is;const Ss={};class G{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,J.hu)(Ss&&ri,"ChildrenNode.ts has not been loaded"),Is=Is||new G({".priority":Ss},{".priority":ri}),Is}get(u){const c=(0,J.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof Ri?c:null}hasIndex(u){return(0,J.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,J.hu)(u!==as,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let D=!1;const P=c.getIterator(Jn.Wrap);let se,W=P.getNext();for(;W;)D=D||u.isDefinedOn(W.node),y.push(W),W=P.getNext();se=D?Gi(y,u.getCompare()):Ss;const xe=u.toString(),We=Object.assign({},this.indexSet_);We[xe]=u;const Vt=Object.assign({},this.indexes_);return Vt[xe]=se,new G(Vt,We)}addToIndexes(u,c){const y=(0,J.UI)(this.indexes_,(D,P)=>{const W=(0,J.DV)(this.indexSet_,P);if((0,J.hu)(W,"Missing index implementation for "+P),D===Ss){if(W.isDefinedOn(u.node)){const se=[],xe=c.getIterator(Jn.Wrap);let We=xe.getNext();for(;We;)We.name!==u.name&&se.push(We),We=xe.getNext();return se.push(u),Gi(se,W.getCompare())}return Ss}{const se=c.get(u.name);let xe=D;return se&&(xe=xe.remove(new Jn(u.name,se))),xe.insert(u,u.node)}});return new G(y,this.indexSet_)}removeFromIndexes(u,c){const y=(0,J.UI)(this.indexes_,D=>{if(D===Ss)return D;{const P=c.get(u.name);return P?D.remove(new Jn(u.name,P)):D}});return new G(y,this.indexSet_)}}let B,N=(()=>{class h{constructor(c,y,D){this.children_=c,this.priorityNode_=y,this.indexMap_=D,this.lazyHash_=null,this.priorityNode_&&Ho(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return B||(B=new h(new Ri(Kn),null,G.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||B}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const y=this.children_.get(c);return null===y?B:y}}getChild(c){const y=Xn(c);return null===y?this:this.getImmediateChild(y).getChild(Zr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,y){if((0,J.hu)(y,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(y);{const D=new Jn(c,y);let P,W;y.isEmpty()?(P=this.children_.remove(c),W=this.indexMap_.removeFromIndexes(D,this.children_)):(P=this.children_.insert(c,y),W=this.indexMap_.addToIndexes(D,this.children_));const se=P.isEmpty()?B:this.priorityNode_;return new h(P,se,W)}}updateChild(c,y){const D=Xn(c);if(null===D)return y;{(0,J.hu)(".priority"!==Xn(c)||1===Ji(c),".priority must be the last token in a path");const P=this.getImmediateChild(D).updateChild(Zr(c),y);return this.updateImmediateChild(D,P)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const y={};let D=0,P=0,W=!0;if(this.forEachChild(ri,(se,xe)=>{y[se]=xe.val(c),D++,W&&h.INTEGER_REGEXP_.test(se)?P=Math.max(P,Number(se)):W=!1}),!c&&W&&P<2*D){const se=[];for(const xe in y)se[xe]=y[xe];return se}return c&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Ks(this.getPriority().val())+":"),this.forEachChild(ri,(y,D)=>{const P=D.hash();""!==P&&(c+=":"+y+":"+P)}),this.lazyHash_=""===c?"":In(c)}return this.lazyHash_}getPredecessorChildName(c,y,D){const P=this.resolveIndex_(D);if(P){const W=P.getPredecessorKey(new Jn(c,y));return W?W.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const y=this.resolveIndex_(c);if(y){const D=y.minKey();return D&&D.name}return this.children_.minKey()}getFirstChild(c){const y=this.getFirstChildName(c);return y?new Jn(y,this.children_.get(y)):null}getLastChildName(c){const y=this.resolveIndex_(c);if(y){const D=y.maxKey();return D&&D.name}return this.children_.maxKey()}getLastChild(c){const y=this.getLastChildName(c);return y?new Jn(y,this.children_.get(y)):null}forEachChild(c,y){const D=this.resolveIndex_(c);return D?D.inorderTraversal(P=>y(P.name,P.node)):this.children_.inorderTraversal(y)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,y){const D=this.resolveIndex_(y);if(D)return D.getIteratorFrom(c,P=>P);{const P=this.children_.getIteratorFrom(c.name,Jn.Wrap);let W=P.peek();for(;null!=W&&y.compare(W,c)<0;)P.getNext(),W=P.peek();return P}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,y){const D=this.resolveIndex_(y);if(D)return D.getReverseIteratorFrom(c,P=>P);{const P=this.children_.getReverseIteratorFrom(c.name,Jn.Wrap);let W=P.peek();for(;null!=W&&y.compare(W,c)>0;)P.getNext(),W=P.peek();return P}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===k?-1:0}withIndex(c){if(c===as||this.indexMap_.hasIndex(c))return this;{const y=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(c){return c===as||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const y=c;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const D=this.getIterator(ri),P=y.getIterator(ri);let W=D.getNext(),se=P.getNext();for(;W&&se;){if(W.name!==se.name||!W.node.equals(se.node))return!1;W=D.getNext(),se=P.getNext()}return null===W&&null===se}return!1}return!1}}resolveIndex_(c){return c===as?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const k=new class m extends N{constructor(){super(new Ri(Kn),N.EMPTY_NODE,G.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return N.EMPTY_NODE}isEmpty(){return!1}};function V(h,u=null){if(null===h)return N.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,J.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ks(h,V(u));if(h instanceof Array){let c=N.EMPTY_NODE;return Bn(h,(y,D)=>{if((0,J.r3)(h,y)&&"."!==y.substring(0,1)){const P=V(D);(P.isLeafNode()||!P.isEmpty())&&(c=c.updateImmediateChild(y,P))}}),c.updatePriority(V(u))}{const c=[];let y=!1;if(Bn(h,(W,se)=>{if("."!==W.substring(0,1)){const xe=V(se);xe.isEmpty()||(y=y||!xe.getPriority().isEmpty(),c.push(new Jn(W,xe)))}}),0===c.length)return N.EMPTY_NODE;const P=Gi(c,Vr,W=>W.name,Kn);if(y){const W=Gi(c,ri.getCompare());return new N(P,V(u),new G({".priority":W},{".priority":ri}))}return new N(P,V(u),G.Default)}}Object.defineProperties(Jn,{MIN:{value:new Jn(Cr,N.EMPTY_NODE)},MAX:{value:new Jn(an,k)}}),Rr.__EMPTY_NODE=N.EMPTY_NODE,ks.__childrenNodeConstructor=N,function pa(h){eo=h}(k),function br(h){bo=h}(k),function Yt(h){xa=h}(V);class oe extends _s{constructor(u){super(),this.indexPath_=u,(0,J.hu)(!cr(u)&&".priority"!==Xn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const y=this.extractChild(u.node),D=this.extractChild(c.node),P=y.compareTo(D);return 0===P?fr(u.name,c.name):P}makePost(u,c){const y=V(u),D=N.EMPTY_NODE.updateChild(this.indexPath_,y);return new Jn(c,D)}maxPost(){const u=N.EMPTY_NODE.updateChild(this.indexPath_,k);return new Jn(an,u)}toString(){return es(this.indexPath_,0).join("/")}}const Xt=new class ut extends _s{compare(u,c){const y=u.node.compareTo(c.node);return 0===y?fr(u.name,c.name):y}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return Jn.MIN}maxPost(){return Jn.MAX}makePost(u,c){const y=V(u);return new Jn(c,y)}toString(){return".value"}},mn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ci=function(){let h=0;const u=[];return function(c){const y=c===h;let D;h=c;const P=new Array(8);for(D=7;D>=0;D--)P[D]=mn.charAt(c%64),c=Math.floor(c/64);(0,J.hu)(0===c,"Cannot push at time == 0");let W=P.join("");if(y){for(D=11;D>=0&&63===u[D];D--)u[D]=0;u[D]++}else for(D=0;D<12;D++)u[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)W+=mn.charAt(u[D]);return(0,J.hu)(20===W.length,"nextPushId: Length should be 20."),W}}(),ns=function(h){if(h===""+ir)return"-";const u=Yr(h);if(null!=u)return""+(u+1);const c=new Array(h.length);for(let W=0;W<c.length;W++)c[W]=h.charAt(W);if(c.length<786)return c.push("-"),c.join("");let y=c.length-1;for(;y>=0&&"z"===c[y];)y--;if(-1===y)return an;const P=mn.charAt(mn.indexOf(c[y])+1);return c[y]=P,c.slice(0,y+1).join("")},ws=function(h){if(h===""+si)return Cr;const u=Yr(h);if(null!=u)return""+(u-1);const c=new Array(h.length);for(let y=0;y<c.length;y++)c[y]=h.charAt(y);return"-"===c[c.length-1]?1===c.length?""+ir:(delete c[c.length-1],c.join("")):(c[c.length-1]=mn.charAt(mn.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function bs(h){return{type:"value",snapshotNode:h}}function us(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function Ps(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function Co(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Zs{constructor(u){this.index_=u}updateChild(u,c,y,D,P,W){(0,J.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const se=u.getImmediateChild(c);return se.getChild(D).equals(y.getChild(D))&&se.isEmpty()===y.isEmpty()||(null!=W&&(y.isEmpty()?u.hasChild(c)?W.trackChildChange(Ps(c,se)):(0,J.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):se.isEmpty()?W.trackChildChange(us(c,y)):W.trackChildChange(Co(c,y,se))),u.isLeafNode()&&y.isEmpty())?u:u.updateImmediateChild(c,y).withIndex(this.index_)}updateFullNode(u,c,y){return null!=y&&(u.isLeafNode()||u.forEachChild(ri,(D,P)=>{c.hasChild(D)||y.trackChildChange(Ps(D,P))}),c.isLeafNode()||c.forEachChild(ri,(D,P)=>{if(u.hasChild(D)){const W=u.getImmediateChild(D);W.equals(P)||y.trackChildChange(Co(D,P,W))}else y.trackChildChange(us(D,P))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?N.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ia{constructor(u){this.indexedFilter_=new Zs(u.getIndex()),this.index_=u.getIndex(),this.startPost_=ia.getStartPost_(u),this.endPost_=ia.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,y,D,P,W){return this.matches(new Jn(c,y))||(y=N.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,y,D,P,W)}updateFullNode(u,c,y){c.isLeafNode()&&(c=N.EMPTY_NODE);let D=c.withIndex(this.index_);D=D.updatePriority(N.EMPTY_NODE);const P=this;return c.forEachChild(ri,(W,se)=>{P.matches(new Jn(W,se))||(D=D.updateImmediateChild(W,N.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,D,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class F{constructor(u){this.rangedFilter_=new ia(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,y,D,P,W){return this.rangedFilter_.matches(new Jn(c,y))||(y=N.EMPTY_NODE),u.getImmediateChild(c).equals(y)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,y,D,P,W):this.fullLimitUpdateChild_(u,c,y,P,W)}updateFullNode(u,c,y){let D;if(c.isLeafNode()||c.isEmpty())D=N.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let P;D=N.EMPTY_NODE.withIndex(this.index_),P=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let W=0;for(;P.hasNext()&&W<this.limit_;){const se=P.getNext();let xe;if(xe=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),se)<=0:this.index_.compare(se,this.rangedFilter_.getEndPost())<=0,!xe)break;D=D.updateImmediateChild(se.name,se.node),W++}}else{let P,W,se,xe;if(D=c.withIndex(this.index_),D=D.updatePriority(N.EMPTY_NODE),this.reverse_){xe=D.getReverseIterator(this.index_),P=this.rangedFilter_.getEndPost(),W=this.rangedFilter_.getStartPost();const Bt=this.index_.getCompare();se=(qt,Mn)=>Bt(Mn,qt)}else xe=D.getIterator(this.index_),P=this.rangedFilter_.getStartPost(),W=this.rangedFilter_.getEndPost(),se=this.index_.getCompare();let We=0,Vt=!1;for(;xe.hasNext();){const Bt=xe.getNext();!Vt&&se(P,Bt)<=0&&(Vt=!0),Vt&&We<this.limit_&&se(Bt,W)<=0?We++:D=D.updateImmediateChild(Bt.name,N.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,D,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,y,D,P){let W;if(this.reverse_){const Bt=this.index_.getCompare();W=(qt,Mn)=>Bt(Mn,qt)}else W=this.index_.getCompare();const se=u;(0,J.hu)(se.numChildren()===this.limit_,"");const xe=new Jn(c,y),We=this.reverse_?se.getFirstChild(this.index_):se.getLastChild(this.index_),Vt=this.rangedFilter_.matches(xe);if(se.hasChild(c)){const Bt=se.getImmediateChild(c);let qt=D.getChildAfterChild(this.index_,We,this.reverse_);for(;null!=qt&&(qt.name===c||se.hasChild(qt.name));)qt=D.getChildAfterChild(this.index_,qt,this.reverse_);const Mn=null==qt?1:W(qt,xe);if(Vt&&!y.isEmpty()&&Mn>=0)return null!=P&&P.trackChildChange(Co(c,y,Bt)),se.updateImmediateChild(c,y);{null!=P&&P.trackChildChange(Ps(c,Bt));const Si=se.updateImmediateChild(c,N.EMPTY_NODE);return null!=qt&&this.rangedFilter_.matches(qt)?(null!=P&&P.trackChildChange(us(qt.name,qt.node)),Si.updateImmediateChild(qt.name,qt.node)):Si}}return y.isEmpty()?u:Vt&&W(We,xe)>=0?(null!=P&&(P.trackChildChange(Ps(We.name,We.node)),P.trackChildChange(us(c,y))),se.updateImmediateChild(c,y).updateImmediateChild(We.name,N.EMPTY_NODE)):u}}class Z{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:an}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ri}copy(){const u=new Z;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function Dt(h,u,c){const y=h.copy();return y.startSet_=!0,void 0===u&&(u=null),y.indexStartValue_=u,null!=c?(y.startNameSet_=!0,y.indexStartName_=c):(y.startNameSet_=!1,y.indexStartName_=""),y}function xn(h,u,c){const y=h.copy();return y.endSet_=!0,void 0===u&&(u=null),y.indexEndValue_=u,void 0!==c?(y.endNameSet_=!0,y.indexEndName_=c):(y.endNameSet_=!1,y.indexEndName_=""),y}function Gr(h,u){const c=h.copy();return c.index_=u,c}function Wr(h){const u={};if(h.isDefault())return u;let c;return h.index_===ri?c="$priority":h.index_===Xt?c="$value":h.index_===as?c="$key":((0,J.hu)(h.index_ instanceof oe,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,J.Wl)(c),h.startSet_&&(u.startAt=(0,J.Wl)(h.indexStartValue_),h.startNameSet_&&(u.startAt+=","+(0,J.Wl)(h.indexStartName_))),h.endSet_&&(u.endAt=(0,J.Wl)(h.indexEndValue_),h.endNameSet_&&(u.endAt+=","+(0,J.Wl)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function $r(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_)),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_)),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==ri&&(u.i=h.index_.toString()),u}class Oi extends Dn{constructor(u,c,y,D){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=y,this.appCheckTokenProvider_=D,this.log_=or("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,J.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,y,D){const P=u._path.toString();this.log_("Listen called for "+P+" "+u._queryIdentifier);const W=Oi.getListenId_(u,y),se={};this.listens_[W]=se;const xe=Wr(u._queryParams);this.restRequest_(P+".json",xe,(We,Vt)=>{let Bt=Vt;if(404===We&&(Bt=null,We=null),null===We&&this.onDataUpdate_(P,Bt,!1,y),(0,J.DV)(this.listens_,W)===se){let qt;qt=We?401===We?"permission_denied":"rest_error:"+We:"ok",D(qt,null)}})}unlisten(u,c){const y=Oi.getListenId_(u,c);delete this.listens_[y]}get(u){const c=Wr(u._queryParams),y=u._path.toString(),D=new J.BH;return this.restRequest_(y+".json",c,(P,W)=>{let se=W;404===P&&(se=null,P=null),null===P?(this.onDataUpdate_(y,se,!1,null),D.resolve(se)):D.reject(new Error(se))}),D.promise}refreshAuthToken(u){}restRequest_(u,c={},y){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([D,P])=>{D&&D.accessToken&&(c.auth=D.accessToken),P&&P.token&&(c.ac=P.token);const W=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,J.xO)(c);this.log_("Sending REST request for "+W);const se=new XMLHttpRequest;se.onreadystatechange=()=>{if(y&&4===se.readyState){this.log_("REST Response for "+W+" received. status:",se.status,"response:",se.responseText);let xe=null;if(se.status>=200&&se.status<300){try{xe=(0,J.cI)(se.responseText)}catch(We){rr("Failed to parse JSON response for "+W+": "+se.responseText)}y(null,xe)}else 401!==se.status&&404!==se.status&&rr("Got unsuccessful REST response for "+W+" Status: "+se.status),y(se.status);y=null}},se.open("GET",W,!0),se.send()})}}class ii{constructor(){this.rootNode_=N.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function xi(){return{value:null,children:new Map}}function ms(h,u,c){if(cr(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const y=Xn(u);h.children.has(y)||h.children.set(y,xi()),ms(h.children.get(y),u=Zr(u),c)}}function to(h,u){if(cr(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(ri,(y,D)=>{ms(h,new Sr(y),D)}),to(h,u)}}if(h.children.size>0){const c=Xn(u);return u=Zr(u),h.children.has(c)&&to(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function no(h,u,c){null!==h.value?c(u,h.value):function Do(h,u){h.children.forEach((c,y)=>{u(y,c)})}(h,(y,D)=>{no(D,new Sr(u.toString()+"/"+y),c)})}class ho{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Bn(this.last_,(y,D)=>{c[y]=c[y]-D}),this.last_=u,c}}class rs{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new ho(u);const y=1e4+2e4*Math.random();$t(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const u=this.statsListener_.get(),c={};let y=!1;Bn(u,(D,P)=>{P>0&&(0,J.r3)(this.statsToReport_,D)&&(c[D]=P,y=!0)}),y&&this.server_.reportStats(c),$t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wi=(()=>{return(h=Wi||(Wi={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Wi;var h})();function el(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Wa{constructor(u,c,y){this.path=u,this.affectedTree=c,this.revert=y,this.type=Wi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(cr(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Sr(u));return new Wa(Ir(),c,this.revert)}}return(0,J.hu)(Xn(this.path)===u,"operationForChild called for unrelated child."),new Wa(Zr(this.path),this.affectedTree,this.revert)}}class Ra{constructor(u,c){this.source=u,this.path=c,this.type=Wi.LISTEN_COMPLETE}operationForChild(u){return cr(this.path)?new Ra(this.source,Ir()):new Ra(this.source,Zr(this.path))}}class fo{constructor(u,c,y){this.source=u,this.path=c,this.snap=y,this.type=Wi.OVERWRITE}operationForChild(u){return cr(this.path)?new fo(this.source,Ir(),this.snap.getImmediateChild(u)):new fo(this.source,Zr(this.path),this.snap)}}class Go{constructor(u,c,y){this.source=u,this.path=c,this.children=y,this.type=Wi.MERGE}operationForChild(u){if(cr(this.path)){const c=this.children.subtree(new Sr(u));return c.isEmpty()?null:c.value?new fo(this.source,Ir(),c.value):new Go(this.source,Ir(),c)}return(0,J.hu)(Xn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Go(this.source,Zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class po{constructor(u,c,y){this.node_=u,this.fullyInitialized_=c,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(cr(u))return this.isFullyInitialized()&&!this.filtered_;const c=Xn(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class hu{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function zr(h,u,c,y,D,P){const W=y.filter(se=>se.type===c);W.sort((se,xe)=>function Po(h,u,c){if(null==u.childName||null==c.childName)throw(0,J.g5)("Should only compare child_ events.");const y=new Jn(u.childName,u.snapshotNode),D=new Jn(c.childName,c.snapshotNode);return h.index_.compare(y,D)}(h,se,xe)),W.forEach(se=>{const xe=function ma(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,se,P);D.forEach(We=>{We.respondsTo(se.type)&&u.push(We.createEvent(xe,h.query_))})})}function ro(h,u){return{eventCache:h,serverCache:u}}function sa(h,u,c,y){return ro(new po(u,c,y),h.serverCache)}function rn(h,u,c,y){return ro(h.eventCache,new po(u,c,y))}function yi(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Ws(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let zi;class En{constructor(u,c=(()=>(zi||(zi=new Ri(Tn)),zi))()){this.value=u,this.children=c}static fromObject(u){let c=new En(null);return Bn(u,(y,D)=>{c=c.set(new Sr(y),D)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Ir(),value:this.value};if(cr(u))return null;{const y=Xn(u),D=this.children.get(y);if(null!==D){const P=D.findRootMostMatchingPathAndValue(Zr(u),c);return null!=P?{path:Ar(new Sr(y),P.path),value:P.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(cr(u))return this;{const c=Xn(u),y=this.children.get(c);return null!==y?y.subtree(Zr(u)):new En(null)}}set(u,c){if(cr(u))return new En(c,this.children);{const y=Xn(u),P=(this.children.get(y)||new En(null)).set(Zr(u),c),W=this.children.insert(y,P);return new En(this.value,W)}}remove(u){if(cr(u))return this.children.isEmpty()?new En(null):new En(null,this.children);{const c=Xn(u),y=this.children.get(c);if(y){const D=y.remove(Zr(u));let P;return P=D.isEmpty()?this.children.remove(c):this.children.insert(c,D),null===this.value&&P.isEmpty()?new En(null):new En(this.value,P)}return this}}get(u){if(cr(u))return this.value;{const c=Xn(u),y=this.children.get(c);return y?y.get(Zr(u)):null}}setTree(u,c){if(cr(u))return c;{const y=Xn(u),P=(this.children.get(y)||new En(null)).setTree(Zr(u),c);let W;return W=P.isEmpty()?this.children.remove(y):this.children.insert(y,P),new En(this.value,W)}}fold(u){return this.fold_(Ir(),u)}fold_(u,c){const y={};return this.children.inorderTraversal((D,P)=>{y[D]=P.fold_(Ar(u,D),c)}),c(u,this.value,y)}findOnPath(u,c){return this.findOnPath_(u,Ir(),c)}findOnPath_(u,c,y){const D=!!this.value&&y(c,this.value);if(D)return D;if(cr(u))return null;{const P=Xn(u),W=this.children.get(P);return W?W.findOnPath_(Zr(u),Ar(c,P),y):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Ir(),c)}foreachOnPath_(u,c,y){if(cr(u))return this;{this.value&&y(c,this.value);const D=Xn(u),P=this.children.get(D);return P?P.foreachOnPath_(Zr(u),Ar(c,D),y):new En(null)}}foreach(u){this.foreach_(Ir(),u)}foreach_(u,c){this.children.inorderTraversal((y,D)=>{D.foreach_(Ar(u,y),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,y)=>{y.value&&u(c,y.value)})}}class zs{constructor(u){this.writeTree_=u}static empty(){return new zs(new En(null))}}function cn(h,u,c){if(cr(u))return new zs(new En(c));{const y=h.writeTree_.findRootMostValueAndPath(u);if(null!=y){const D=y.path;let P=y.value;const W=mi(D,u);return P=P.updateChild(W,c),new zs(h.writeTree_.set(D,P))}{const D=new En(c),P=h.writeTree_.setTree(u,D);return new zs(P)}}}function kt(h,u,c){let y=h;return Bn(c,(D,P)=>{y=cn(y,Ar(u,D),P)}),y}function Qt(h,u){if(cr(u))return zs.empty();{const c=h.writeTree_.setTree(u,new En(null));return new zs(c)}}function Ni(h,u){return null!=Oa(h,u)}function Oa(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(mi(c.path,u)):null}function ya(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(ri,(y,D)=>{u.push(new Jn(y,D))}):h.writeTree_.children.inorderTraversal((y,D)=>{null!=D.value&&u.push(new Jn(y,D.value))}),u}function Fo(h,u){if(cr(u))return h;{const c=Oa(h,u);return new zs(null!=c?new En(c):h.writeTree_.subtree(u))}}function Wo(h){return h.writeTree_.isEmpty()}function zo(h,u){return Hl(Ir(),h.writeTree_,u)}function Hl(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let y=null;return u.children.inorderTraversal((D,P)=>{".priority"===D?((0,J.hu)(null!==P.value,"Priority writes must always be leaf nodes"),y=P.value):c=Hl(Ar(h,D),P,c)}),!c.getChild(h).isEmpty()&&null!==y&&(c=c.updateChild(Ar(h,".priority"),y)),c}}function qo(h,u){return Gl(u,h)}function lr(h,u){if(h.snap)return pi(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&pi(Ar(h.path,c),u))return!0;return!1}function cl(h){return h.visible}function Mi(h,u,c){let y=zs.empty();for(let D=0;D<h.length;++D){const P=h[D];if(u(P)){const W=P.path;let se;if(P.snap)pi(c,W)?(se=mi(c,W),y=cn(y,se,P.snap)):pi(W,c)&&(se=mi(W,c),y=cn(y,Ir(),P.snap.getChild(se)));else{if(!P.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(pi(c,W))se=mi(c,W),y=kt(y,se,P.children);else if(pi(W,c))if(se=mi(W,c),cr(se))y=kt(y,Ir(),P.children);else{const xe=(0,J.DV)(P.children,Xn(se));if(xe){const We=xe.getChild(Zr(se));y=cn(y,Ir(),We)}}}}}return y}function er(h,u,c,y,D){if(y||D){const P=Fo(h.visibleWrites,u);return!D&&Wo(P)?c:D||null!=c||Ni(P,Ir())?zo(Mi(h.allWrites,function(We){return(We.visible||D)&&(!y||!~y.indexOf(We.writeId))&&(pi(We.path,u)||pi(u,We.path))},u),c||N.EMPTY_NODE):null}{const P=Oa(h.visibleWrites,u);if(null!=P)return P;{const W=Fo(h.visibleWrites,u);return Wo(W)?c:null!=c||Ni(W,Ir())?zo(W,c||N.EMPTY_NODE):null}}}function Ko(h,u,c,y){return er(h.writeTree,h.treePath,u,c,y)}function di(h,u){return function Yo(h,u,c){let y=N.EMPTY_NODE;const D=Oa(h.visibleWrites,u);if(D)return D.isLeafNode()||D.forEachChild(ri,(P,W)=>{y=y.updateImmediateChild(P,W)}),y;if(c){const P=Fo(h.visibleWrites,u);return c.forEachChild(ri,(W,se)=>{const xe=zo(Fo(P,new Sr(W)),se);y=y.updateImmediateChild(W,xe)}),ya(P).forEach(W=>{y=y.updateImmediateChild(W.name,W.node)}),y}return ya(Fo(h.visibleWrites,u)).forEach(W=>{y=y.updateImmediateChild(W.name,W.node)}),y}(h.writeTree,h.treePath,u)}function Ea(h,u,c,y){return function Qr(h,u,c,y,D){(0,J.hu)(y||D,"Either existingEventSnap or existingServerSnap must exist");const P=Ar(u,c);if(Ni(h.visibleWrites,P))return null;{const W=Fo(h.visibleWrites,P);return Wo(W)?D.getChild(c):zo(W,D.getChild(c))}}(h.writeTree,h.treePath,u,c,y)}function To(h,u){return function vi(h,u){return Oa(h.visibleWrites,u)}(h.writeTree,Ar(h.treePath,u))}function ka(h,u,c){return function go(h,u,c,y){const D=Ar(u,c),P=Oa(h.visibleWrites,D);return null!=P?P:y.isCompleteForChild(c)?zo(Fo(h.visibleWrites,D),y.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function pu(h,u){return Gl(Ar(h.treePath,u),h.writeTree)}function Gl(h,u){return{treePath:h,writeTree:u}}class So{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,y=u.childName;(0,J.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const D=this.changeMap.get(y);if(D){const P=D.type;if("child_added"===c&&"child_removed"===P)this.changeMap.set(y,Co(y,u.snapshotNode,D.snapshotNode));else if("child_removed"===c&&"child_added"===P)this.changeMap.delete(y);else if("child_removed"===c&&"child_changed"===P)this.changeMap.set(y,Ps(y,D.oldSnap));else if("child_changed"===c&&"child_added"===P)this.changeMap.set(y,us(y,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==P)throw(0,J.g5)("Illegal combination of changes: "+u+" occurred after "+D);this.changeMap.set(y,Co(y,u.snapshotNode,D.oldSnap))}}else this.changeMap.set(y,u)}getChanges(){return Array.from(this.changeMap.values())}}const Wl=new class gu{getCompleteChild(u){return null}getChildAfterChild(u,c,y){return null}};class mu{constructor(u,c,y=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=y}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const y=null!=this.optCompleteServerCache_?new po(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ka(this.writes_,u,y)}}getChildAfterChild(u,c,y){const D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ws(this.viewCache_),P=function Ti(h,u,c,y,D,P){return function dn(h,u,c,y,D,P,W){let se;const xe=Fo(h.visibleWrites,u),We=Oa(xe,Ir());if(null!=We)se=We;else{if(null==c)return[];se=zo(xe,c)}if(se=se.withIndex(W),se.isEmpty()||se.isLeafNode())return[];{const Vt=[],Bt=W.getCompare(),qt=P?se.getReverseIteratorFrom(y,W):se.getIteratorFrom(y,W);let Mn=qt.getNext();for(;Mn&&Vt.length<D;)0!==Bt(Mn,y)&&Vt.push(Mn),Mn=qt.getNext();return Vt}}(h.writeTree,h.treePath,u,c,y,D,P)}(this.writes_,D,c,1,y,u);return 0===P.length?null:P[0]}}function io(h,u,c,y,D,P){const W=u.eventCache;if(null!=To(y,c))return u;{let se,xe;if(cr(c))if((0,J.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const We=Ws(u),Bt=di(y,We instanceof N?We:N.EMPTY_NODE);se=h.filter.updateFullNode(u.eventCache.getNode(),Bt,P)}else{const We=Ko(y,Ws(u));se=h.filter.updateFullNode(u.eventCache.getNode(),We,P)}else{const We=Xn(c);if(".priority"===We){(0,J.hu)(1===Ji(c),"Can't have a priority with additional path components");const Vt=W.getNode();xe=u.serverCache.getNode();const Bt=Ea(y,c,Vt,xe);se=null!=Bt?h.filter.updatePriority(Vt,Bt):W.getNode()}else{const Vt=Zr(c);let Bt;if(W.isCompleteForChild(We)){xe=u.serverCache.getNode();const qt=Ea(y,c,W.getNode(),xe);Bt=null!=qt?W.getNode().getImmediateChild(We).updateChild(Vt,qt):W.getNode().getImmediateChild(We)}else Bt=ka(y,We,u.serverCache);se=null!=Bt?h.filter.updateChild(W.getNode(),We,Bt,Vt,D,P):W.getNode()}}return sa(u,se,W.isFullyInitialized()||cr(c),h.filter.filtersNodes())}}function mo(h,u,c,y,D,P,W,se){const xe=u.serverCache;let We;const Vt=W?h.filter:h.filter.getIndexedFilter();if(cr(c))We=Vt.updateFullNode(xe.getNode(),y,null);else if(Vt.filtersNodes()&&!xe.isFiltered()){const Mn=xe.getNode().updateChild(c,y);We=Vt.updateFullNode(xe.getNode(),Mn,null)}else{const Mn=Xn(c);if(!xe.isCompleteForPath(c)&&Ji(c)>1)return u;const dr=Zr(c),Oo=xe.getNode().getImmediateChild(Mn).updateChild(dr,y);We=".priority"===Mn?Vt.updatePriority(xe.getNode(),Oo):Vt.updateChild(xe.getNode(),Mn,Oo,dr,Wl,null)}const Bt=rn(u,We,xe.isFullyInitialized()||cr(c),Vt.filtersNodes());return io(h,Bt,c,D,new mu(D,Bt,P),se)}function Ia(h,u,c,y,D,P,W){const se=u.eventCache;let xe,We;const Vt=new mu(D,u,P);if(cr(c))We=h.filter.updateFullNode(u.eventCache.getNode(),y,W),xe=sa(u,We,!0,h.filter.filtersNodes());else{const Bt=Xn(c);if(".priority"===Bt)We=h.filter.updatePriority(u.eventCache.getNode(),y),xe=sa(u,We,se.isFullyInitialized(),se.isFiltered());else{const qt=Zr(c),Mn=se.getNode().getImmediateChild(Bt);let dr;if(cr(qt))dr=y;else{const Si=Vt.getCompleteChild(Bt);dr=null!=Si?".priority"===Us(qt)&&Si.getChild(js(qt)).isEmpty()?Si:Si.updateChild(qt,y):N.EMPTY_NODE}xe=Mn.equals(dr)?u:sa(u,h.filter.updateChild(se.getNode(),Bt,dr,qt,Vt,W),se.isFullyInitialized(),h.filter.filtersNodes())}}return xe}function Zo(h,u){return h.eventCache.isCompleteForChild(u)}function As(h,u,c){return c.foreach((y,D)=>{u=u.updateChild(y,D)}),u}function za(h,u,c,y,D,P,W,se){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let We,xe=u;We=cr(c)?y:new En(null).setTree(c,y);const Vt=u.serverCache.getNode();return We.children.inorderTraversal((Bt,qt)=>{if(Vt.hasChild(Bt)){const dr=As(0,u.serverCache.getNode().getImmediateChild(Bt),qt);xe=mo(h,xe,new Sr(Bt),dr,D,P,W,se)}}),We.children.inorderTraversal((Bt,qt)=>{const Mn=!u.serverCache.isCompleteForChild(Bt)&&null===qt.value;if(!Vt.hasChild(Bt)&&!Mn){const Si=As(0,u.serverCache.getNode().getImmediateChild(Bt),qt);xe=mo(h,xe,new Sr(Bt),Si,D,P,W,se)}}),xe}class so{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const y=this.query_._queryParams,D=new Zs(y.getIndex()),P=function $(h){return h.loadsAllData()?new Zs(h.getIndex()):h.hasLimit()?new F(h):new ia(h)}(y);this.processor_=function Ao(h){return{filter:h}}(P);const W=c.serverCache,se=c.eventCache,xe=D.updateFullNode(N.EMPTY_NODE,W.getNode(),null),We=P.updateFullNode(N.EMPTY_NODE,se.getNode(),null),Vt=new po(xe,W.isFullyInitialized(),D.filtersNodes()),Bt=new po(We,se.isFullyInitialized(),P.filtersNodes());this.viewCache_=ro(Bt,Vt),this.eventGenerator_=new hu(this.query_)}get query(){return this.query_}}function Lo(h,u){const c=Ws(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!cr(u)&&!c.getImmediateChild(Xn(u)).isEmpty())?c.getChild(u):null}function ki(h){return 0===h.eventRegistrations_.length}function cs(h,u,c){const y=[];if(c){(0,J.hu)(null==u,"A cancel should cancel all event registrations.");const D=h.query._path;h.eventRegistrations_.forEach(P=>{const W=P.createCancelEvent(c,D);W&&y.push(W)})}if(u){let D=[];for(let P=0;P<h.eventRegistrations_.length;++P){const W=h.eventRegistrations_[P];if(W.matches(u)){if(u.hasAnyCallback()){D=D.concat(h.eventRegistrations_.slice(P+1));break}}else D.push(W)}h.eventRegistrations_=D}else h.eventRegistrations_=[];return y}function Xr(h,u,c,y){u.type===Wi.MERGE&&null!==u.source.queryId&&((0,J.hu)(Ws(h.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(yi(h.viewCache_),"Missing event cache, even though we have a server cache"));const D=h.viewCache_,P=function Rt(h,u,c,y,D){const P=new So;let W,se;if(c.type===Wi.OVERWRITE){const We=c;We.source.fromUser?W=Ia(h,u,We.path,We.snap,y,D,P):((0,J.hu)(We.source.fromServer,"Unknown source."),se=We.source.tagged||u.serverCache.isFiltered()&&!cr(We.path),W=mo(h,u,We.path,We.snap,y,D,se,P))}else if(c.type===Wi.MERGE){const We=c;We.source.fromUser?W=function yo(h,u,c,y,D,P,W){let se=u;return y.foreach((xe,We)=>{const Vt=Ar(c,xe);Zo(u,Xn(Vt))&&(se=Ia(h,se,Vt,We,D,P,W))}),y.foreach((xe,We)=>{const Vt=Ar(c,xe);Zo(u,Xn(Vt))||(se=Ia(h,se,Vt,We,D,P,W))}),se}(h,u,We.path,We.children,y,D,P):((0,J.hu)(We.source.fromServer,"Unknown source."),se=We.source.tagged||u.serverCache.isFiltered(),W=za(h,u,We.path,We.children,y,D,se,P))}else if(c.type===Wi.ACK_USER_WRITE){const We=c;W=We.revert?function Sl(h,u,c,y,D,P){let W;if(null!=To(y,c))return u;{const se=new mu(y,u,D),xe=u.eventCache.getNode();let We;if(cr(c)||".priority"===Xn(c)){let Vt;if(u.serverCache.isFullyInitialized())Vt=Ko(y,Ws(u));else{const Bt=u.serverCache.getNode();(0,J.hu)(Bt instanceof N,"serverChildren would be complete if leaf node"),Vt=di(y,Bt)}We=h.filter.updateFullNode(xe,Vt,P)}else{const Vt=Xn(c);let Bt=ka(y,Vt,u.serverCache);null==Bt&&u.serverCache.isCompleteForChild(Vt)&&(Bt=xe.getImmediateChild(Vt)),We=null!=Bt?h.filter.updateChild(xe,Vt,Bt,Zr(c),se,P):u.eventCache.getNode().hasChild(Vt)?h.filter.updateChild(xe,Vt,N.EMPTY_NODE,Zr(c),se,P):xe,We.isEmpty()&&u.serverCache.isFullyInitialized()&&(W=Ko(y,Ws(u)),W.isLeafNode()&&(We=h.filter.updateFullNode(We,W,P)))}return W=u.serverCache.isFullyInitialized()||null!=To(y,Ir()),sa(u,We,W,h.filter.filtersNodes())}}(h,u,We.path,y,D,P):function Pa(h,u,c,y,D,P,W){if(null!=To(D,c))return u;const se=u.serverCache.isFiltered(),xe=u.serverCache;if(null!=y.value){if(cr(c)&&xe.isFullyInitialized()||xe.isCompleteForPath(c))return mo(h,u,c,xe.getNode().getChild(c),D,P,se,W);if(cr(c)){let We=new En(null);return xe.getNode().forEachChild(as,(Vt,Bt)=>{We=We.set(new Sr(Vt),Bt)}),za(h,u,c,We,D,P,se,W)}return u}{let We=new En(null);return y.foreach((Vt,Bt)=>{const qt=Ar(c,Vt);xe.isCompleteForPath(qt)&&(We=We.set(Vt,xe.getNode().getChild(qt)))}),za(h,u,c,We,D,P,se,W)}}(h,u,We.path,We.affectedTree,y,D,P)}else{if(c.type!==Wi.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+c.type);W=function Fa(h,u,c,y,D){const P=u.serverCache;return io(h,rn(u,P.getNode(),P.isFullyInitialized()||cr(c),P.isFiltered()),c,y,Wl,D)}(h,u,c.path,y,P)}const xe=P.getChanges();return function Cs(h,u,c){const y=u.eventCache;if(y.isFullyInitialized()){const D=y.getNode().isLeafNode()||y.getNode().isEmpty(),P=yi(h);(c.length>0||!h.eventCache.isFullyInitialized()||D&&!y.getNode().equals(P)||!y.getNode().getPriority().equals(P.getPriority()))&&c.push(bs(yi(u)))}}(u,W,xe),{viewCache:W,changes:xe}}(h.processor_,D,u,c,y);return function zl(h,u){(0,J.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,P.viewCache),(0,J.hu)(P.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=P.viewCache,La(h,P.changes,P.viewCache.eventCache.getNode(),null)}function La(h,u,c,y){return function jl(h,u,c,y){const D=[],P=[];return u.forEach(W=>{"child_changed"===W.type&&h.index_.indexedValueChanged(W.oldSnap,W.snapshotNode)&&P.push(function ra(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(W.childName,W.snapshotNode))}),zr(h,D,"child_removed",u,y,c),zr(h,D,"child_added",u,y,c),zr(h,D,"child_moved",P,y,c),zr(h,D,"child_changed",u,y,c),zr(h,D,"value",u,y,c),D}(h.eventGenerator_,u,c,y?[y]:h.eventRegistrations_)}let oo,It;class vu{constructor(){this.views=new Map}}function qi(h,u,c,y){const D=u.source.queryId;if(null!==D){const P=h.views.get(D);return(0,J.hu)(null!=P,"SyncTree gave us an op for an invalid query."),Xr(P,u,c,y)}{let P=[];for(const W of h.views.values())P=P.concat(Xr(W,u,c,y));return P}}function Xo(h,u,c,y,D){const W=h.views.get(u._queryIdentifier);if(!W){let se=Ko(c,D?y:null),xe=!1;se?xe=!0:y instanceof N?(se=di(c,y),xe=!1):(se=N.EMPTY_NODE,xe=!1);const We=ro(new po(se,xe,!1),new po(y,D,!1));return new so(u,We)}return W}function w(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function O(h,u){let c=null;for(const y of h.views.values())c=c||Lo(y,u);return c}function j(h,u){return u._queryParams.loadsAllData()?Fe(h):h.views.get(u._queryIdentifier)}function te(h,u){return null!=j(h,u)}function Ae(h){return null!=Fe(h)}function Fe(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Q=1;class fe{constructor(u){this.listenProvider_=u,this.syncPointTree_=new En(null),this.pendingWriteTree_=function _a(){return{visibleWrites:zs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qe(h,u,c,y,D){return function Na(h,u,c,y,D){(0,J.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),h.allWrites.push({path:u,snap:c,writeId:y,visible:D}),D&&(h.visibleWrites=cn(h.visibleWrites,u,c)),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y,D),D?aa(h,new fo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function Ht(h,u,c=!1){const y=function Tl(h,u){for(let c=0;c<h.allWrites.length;c++){const y=h.allWrites[c];if(y.writeId===u)return y}return null}(h.pendingWriteTree_,u);if(function oa(h,u){const c=h.allWrites.findIndex(se=>se.writeId===u);(0,J.hu)(c>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[c];h.allWrites.splice(c,1);let D=y.visible,P=!1,W=h.allWrites.length-1;for(;D&&W>=0;){const se=h.allWrites[W];se.visible&&(W>=c&&lr(se,y.path)?D=!1:pi(y.path,se.path)&&(P=!0)),W--}return!!D&&(P?(function va(h){h.visibleWrites=Mi(h.allWrites,cl,Ir()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=Qt(h.visibleWrites,y.path):Bn(y.children,xe=>{h.visibleWrites=Qt(h.visibleWrites,Ar(y.path,xe))}),!0))}(h.pendingWriteTree_,u)){let P=new En(null);return null!=y.snap?P=P.set(Ir(),!0):Bn(y.children,W=>{P=P.set(new Sr(W),!0)}),aa(h,new Wa(y.path,P,c))}return[]}function sn(h,u,c){return aa(h,new fo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function Pn(h,u,c,y,D=!1){const P=u._path,W=h.syncPointTree_.get(P);let se=[];if(W&&("default"===u._queryIdentifier||te(W,u))){const xe=function S(h,u,c,y){const D=u._queryIdentifier,P=[];let W=[];const se=Ae(h);if("default"===D)for(const[xe,We]of h.views.entries())W=W.concat(cs(We,c,y)),ki(We)&&(h.views.delete(xe),We.query._queryParams.loadsAllData()||P.push(We.query));else{const xe=h.views.get(D);xe&&(W=W.concat(cs(xe,c,y)),ki(xe)&&(h.views.delete(D),xe.query._queryParams.loadsAllData()||P.push(xe.query)))}return se&&!Ae(h)&&P.push(new(function nl(){return(0,J.hu)(oo,"Reference.ts has not been loaded"),oo}())(u._repo,u._path)),{removed:P,events:W}}(W,u,c,y);(function Vo(h){return 0===h.views.size})(W)&&(h.syncPointTree_=h.syncPointTree_.remove(P));const We=xe.removed;if(se=xe.events,!D){const Vt=-1!==We.findIndex(qt=>qt._queryParams.loadsAllData()),Bt=h.syncPointTree_.findOnPath(P,(qt,Mn)=>Ae(Mn));if(Vt&&!Bt){const qt=h.syncPointTree_.subtree(P);if(!qt.isEmpty()){const Mn=function Bd(h){return h.fold((u,c,y)=>{if(c&&Ae(c))return[Fe(c)];{let D=[];return c&&(D=w(c)),Bn(y,(P,W)=>{D=D.concat(W)}),D}})}(qt);for(let dr=0;dr<Mn.length;++dr){const Si=Mn[dr],Oo=Si.query,Qa=is(h,Si);h.listenProvider_.startListening(dl(Oo),la(h,Oo),Qa.hashFn,Qa.onComplete)}}}!Bt&&We.length>0&&!y&&(Vt?h.listenProvider_.stopListening(dl(u),null):We.forEach(qt=>{const Mn=h.queryToTagMap.get(li(qt));h.listenProvider_.stopListening(dl(qt),Mn)}))}!function Hu(h,u){for(let c=0;c<u.length;++c){const y=u[c];if(!y._queryParams.loadsAllData()){const D=li(y),P=h.queryToTagMap.get(D);h.queryToTagMap.delete(D),h.tagToQueryMap.delete(P)}}}(h,We)}return se}function ds(h,u,c,y){const D=Al(h,y);if(null!=D){const P=_u(D),W=P.path,se=P.queryId,xe=mi(W,u);return xl(h,W,new fo(el(se),xe,c))}return[]}function ao(h,u,c,y=!1){const D=u._path;let P=null,W=!1;h.syncPointTree_.foreachOnPath(D,(qt,Mn)=>{const dr=mi(qt,D);P=P||O(Mn,dr),W=W||Ae(Mn)});let xe,se=h.syncPointTree_.get(D);se?(W=W||Ae(se),P=P||O(se,Ir())):(se=new vu,h.syncPointTree_=h.syncPointTree_.set(D,se)),null!=P?xe=!0:(xe=!1,P=N.EMPTY_NODE,h.syncPointTree_.subtree(D).foreachChild((Mn,dr)=>{const Si=O(dr,Ir());Si&&(P=P.updateImmediateChild(Mn,Si))}));const We=te(se,u);if(!We&&!u._queryParams.loadsAllData()){const qt=li(u);(0,J.hu)(!h.queryToTagMap.has(qt),"View does not exist, but we have a tag");const Mn=function Tc(){return Q++}();h.queryToTagMap.set(qt,Mn),h.tagToQueryMap.set(Mn,qt)}let Bt=function T(h,u,c,y,D,P){const W=Xo(h,u,y,D,P);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,W),function xs(h,u){h.eventRegistrations_.push(u)}(W,c),function yu(h,u){const c=h.viewCache_.eventCache,y=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(ri,(P,W)=>{y.push(us(P,W))}),c.isFullyInitialized()&&y.push(bs(c.getNode())),La(h,y,c.getNode(),u)}(W,c)}(se,u,c,qo(h.pendingWriteTree_,D),P,xe);if(!We&&!W&&!y){const qt=j(se,u);Bt=Bt.concat(function $d(h,u,c){const y=u._path,D=la(h,u),P=is(h,c),W=h.listenProvider_.startListening(dl(u),D,P.hashFn,P.onComplete),se=h.syncPointTree_.subtree(y);if(D)(0,J.hu)(!Ae(se.value),"If we're adding a query, it shouldn't be shadowed");else{const xe=se.fold((We,Vt,Bt)=>{if(!cr(We)&&Vt&&Ae(Vt))return[Fe(Vt).query];{let qt=[];return Vt&&(qt=qt.concat(w(Vt).map(Mn=>Mn.query))),Bn(Bt,(Mn,dr)=>{qt=qt.concat(dr)}),qt}});for(let We=0;We<xe.length;++We){const Vt=xe[We];h.listenProvider_.stopListening(dl(Vt),la(h,Vt))}}return W}(h,u,qt))}return Bt}function wa(h,u,c){const D=h.pendingWriteTree_,P=h.syncPointTree_.findOnPath(u,(W,se)=>{const We=O(se,mi(W,u));if(We)return We});return er(D,u,P,c,!0)}function aa(h,u){return il(u,h.syncPointTree_,null,qo(h.pendingWriteTree_,Ir()))}function il(h,u,c,y){if(cr(h.path))return qa(h,u,c,y);{const D=u.get(Ir());null==c&&null!=D&&(c=O(D,Ir()));let P=[];const W=Xn(h.path),se=h.operationForChild(W),xe=u.children.get(W);if(xe&&se){const We=c?c.getImmediateChild(W):null,Vt=pu(y,W);P=P.concat(il(se,xe,We,Vt))}return D&&(P=P.concat(qi(D,h,y,c))),P}}function qa(h,u,c,y){const D=u.get(Ir());null==c&&null!=D&&(c=O(D,Ir()));let P=[];return u.children.inorderTraversal((W,se)=>{const xe=c?c.getImmediateChild(W):null,We=pu(y,W),Vt=h.operationForChild(W);Vt&&(P=P.concat(qa(Vt,se,xe,We)))}),D&&(P=P.concat(qi(D,h,y,c))),P}function is(h,u){const c=u.query,y=la(h,c);return{hashFn:()=>(function tl(h){return h.viewCache_.serverCache.getNode()}(u)||N.EMPTY_NODE).hash(),onComplete:D=>{if("ok"===D)return y?function xr(h,u,c){const y=Al(h,c);if(y){const D=_u(y),P=D.path,W=D.queryId,se=mi(P,u);return xl(h,P,new Ra(el(W),se))}return[]}(h,c._path,y):function gr(h,u){return aa(h,new Ra({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const P=function ji(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const y=new Error(h+" at "+u._path.toString()+": "+c);return y.code=h.toUpperCase(),y}(D,c);return Pn(h,c,null,P)}}}}function la(h,u){const c=li(u);return h.queryToTagMap.get(c)}function li(h){return h._path.toString()+"$"+h._queryIdentifier}function Al(h,u){return h.tagToQueryMap.get(u)}function _u(h){const u=h.indexOf("$");return(0,J.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Sr(h.substr(0,u))}}function xl(h,u,c){const y=h.syncPointTree_.get(u);return(0,J.hu)(y,"Missing sync point for query tag that we're tracking"),qi(y,c,qo(h.pendingWriteTree_,u),null)}function dl(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function U(){return(0,J.hu)(It,"Reference.ts has not been loaded"),It}())(h._repo,h._path):h}class Gu{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Gu(c)}node(){return this.node_}}class Fs{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Ar(this.path_,u);return new Fs(this.syncTree_,c)}node(){return wa(this.syncTree_,this.path_)}}const Ud=function(h,u,c){return h&&"object"==typeof h?((0,J.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?jd(h[".sv"],u,c):"object"==typeof h[".sv"]?Ah(h[".sv"],u):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},jd=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,J.hu)(!1,"Unexpected server value: "+h)},Ah=function(h,u,c){h.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,J.hu)(!1,"Unexpected increment value: "+y);const D=u.node();if((0,J.hu)(null!=D,"Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return y;const W=D.getValue();return"number"!=typeof W?y:W+y},td=function(h,u,c,y){return nd(u,new Fs(c,h),y)},Hd=function(h,u,c){return nd(h,new Gu(u),c)};function nd(h,u,c){const y=h.getPriority().val(),D=Ud(y,u.getImmediateChild(".priority"),c);let P;if(h.isLeafNode()){const W=h,se=Ud(W.getValue(),u,c);return se!==W.getValue()||D!==W.getPriority().val()?new ks(se,V(D)):h}{const W=h;return P=W,D!==W.getPriority().val()&&(P=P.updatePriority(new ks(D))),W.forEachChild(ri,(se,xe)=>{const We=nd(xe,u.getImmediateChild(se),c);We!==xe&&(P=P.updateImmediateChild(se,We))}),P}}class rd{constructor(u="",c=null,y={children:{},childCount:0}){this.name=u,this.parent=c,this.node=y}}function ba(h,u){let c=u instanceof Sr?u:new Sr(u),y=h,D=Xn(c);for(;null!==D;){const P=(0,J.DV)(y.node.children,D)||{children:{},childCount:0};y=new rd(D,y,P),c=Zr(c),D=Xn(c)}return y}function Ca(h){return h.node.value}function Gd(h,u){h.node.value=u,Yu(h)}function zu(h){return h.node.childCount>0}function Ya(h,u){Bn(h.node.children,(c,y)=>{u(new rd(c,h,y))})}function Wd(h,u,c,y){c&&!y&&u(h),Ya(h,D=>{Wd(D,u,!0,y)}),c&&y&&u(h)}function qu(h){return new Sr(null===h.parent?h.name:qu(h.parent)+"/"+h.name)}function Yu(h){null!==h.parent&&function Sc(h,u,c){const y=function xh(h){return void 0===Ca(h)&&!zu(h)}(c),D=(0,J.r3)(h.node.children,u);y&&D?(delete h.node.children[u],h.node.childCount--,Yu(h)):!y&&!D&&(h.node.children[u]=c.node,h.node.childCount++,Yu(h))}(h.parent,h.name,h)}const Ku=/[\[\].#$\/\u0000-\u001F\u007F]/,hl=/[\[\].#$\u0000-\u001F\u007F]/,vo=10485760,sl=function(h){return"string"==typeof h&&0!==h.length&&!Ku.test(h)},Jo=function(h){return"string"==typeof h&&0!==h.length&&!hl.test(h)},ql=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!tr(h)||h&&"object"==typeof h&&(0,J.r3)(h,".sv")},ua=function(h,u,c,y){y&&void 0===u||Yl((0,J.gK)(h,"value"),u,c)},Yl=function(h,u,c){const y=c instanceof Sr?new os(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+Di(y));if("function"==typeof u)throw new Error(h+"contains a function "+Di(y)+" with contents = "+u.toString());if(tr(u))throw new Error(h+"contains "+u.toString()+" "+Di(y));if("string"==typeof u&&u.length>vo/3&&(0,J.ug)(u)>vo)throw new Error(h+"contains a string greater than "+vo+" utf8 bytes "+Di(y)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let D=!1,P=!1;if(Bn(u,(W,se)=>{if(".value"===W)D=!0;else if(".priority"!==W&&".sv"!==W&&(P=!0,!sl(W)))throw new Error(h+" contains an invalid key ("+W+") "+Di(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function fs(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,J.ug)(u),ps(h)})(y,W),Yl(h,se,y),function vs(h){const u=h.parts_.pop();h.byteLength_-=(0,J.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),D&&P)throw new Error(h+' contains ".value" child '+Di(y)+" in addition to actual children.")}},sd=function(h,u,c,y){if(y&&void 0===u)return;const D=(0,J.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(D+" must be an object containing the children to replace.");const P=[];Bn(u,(W,se)=>{const xe=new Sr(W);if(Yl(D,se,Ar(c,xe)),".priority"===Us(xe)&&!ql(se))throw new Error(D+"contains an invalid value for '"+xe.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");P.push(xe)}),function(h,u){let c,y;for(c=0;c<u.length;c++){y=u[c];const P=es(y);for(let W=0;W<P.length;W++)if((".priority"!==P[W]||W!==P.length-1)&&!sl(P[W]))throw new Error(h+"contains an invalid key ("+P[W]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Js);let D=null;for(c=0;c<u.length;c++){if(y=u[c],null!==D&&pi(D,y))throw new Error(h+"contains a path "+D.toString()+" that is ancestor of another path "+y.toString());D=y}}(D,P)},Ac=function(h,u,c){if(!c||void 0!==u){if(tr(u))throw new Error((0,J.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ql(u))throw new Error((0,J.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Iu=function(h,u,c,y){if(!(y&&void 0===c||sl(c)))throw new Error((0,J.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Kl=function(h,u,c,y){if(!(y&&void 0===c||Jo(c)))throw new Error((0,J.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Va=function(h,u){if(".info"===Xn(u))throw new Error(h+" failed = Can't modify data under /.info/")},xo=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!sl(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Jo(h)}(c))throw new Error((0,J.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Mc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fl(h,u){let c=null;for(let y=0;y<u.length;y++){const D=u[y],P=D.getPath();null!==c&&!Hs(P,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:P}),c.events.push(D)}c&&h.eventLists_.push(c)}function Bo(h,u,c){fl(h,c),Ba(h,y=>Hs(y,u))}function Bi(h,u,c){fl(h,c),Ba(h,y=>pi(y,u)||pi(u,y))}function Ba(h,u){h.recursionDepth_++;let c=!0;for(let y=0;y<h.eventLists_.length;y++){const D=h.eventLists_[y];D&&(u(D.path)?(Qu(h.eventLists_[y]),h.eventLists_[y]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Qu(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const y=c.getEventRunner();Rn&&Un("event: "+c.toString()),ni(y)}}}const Zl="repo_interrupt";class od{constructor(u,c,y,D){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=y,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xi(),this.transactionQueueTree_=new rd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ju(h){const c=h.infoData_.getNode(new Sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function ec(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:Ju(h)})}function hs(h,u,c,y,D){h.dataUpdateCount++;const P=new Sr(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let W=[];if(D)if(y){const xe=(0,J.UI)(c,We=>V(We));W=function qs(h,u,c,y){const D=Al(h,y);if(D){const P=_u(D),W=P.path,se=P.queryId,xe=mi(W,u),We=En.fromObject(c);return xl(h,W,new Go(el(se),xe,We))}return[]}(h.serverSyncTree_,P,xe,D)}else{const xe=V(c);W=ds(h.serverSyncTree_,P,xe,D)}else if(y){const xe=(0,J.UI)(c,We=>V(We));W=function Vn(h,u,c){const y=En.fromObject(c);return aa(h,new Go({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,y))}(h.serverSyncTree_,P,xe)}else{const xe=V(c);W=sn(h.serverSyncTree_,P,xe)}let se=P;W.length>0&&(se=Jl(h,P)),Bi(h.eventQueue_,se,W)}function Ql(h,u){wu(h,"connected",u),!1===u&&function $a(h){Jr(h,"onDisconnectEvents");const u=ec(h),c=xi();no(h.onDisconnect_,Ir(),(D,P)=>{const W=td(D,P,h.serverSyncTree_,u);ms(c,D,W)});let y=[];no(c,Ir(),(D,P)=>{y=y.concat(sn(h.serverSyncTree_,D,P));const W=ic(h,D);Jl(h,W)}),h.onDisconnect_=xi(),Bi(h.eventQueue_,Ir(),y)}(h)}function wu(h,u,c){const y=new Sr("/.info/"+u),D=V(c);h.infoData_.updateSnapshot(y,D);const P=sn(h.infoSyncTree_,y,D);Bi(h.eventQueue_,y,P)}function bu(h){return h.nextWriteId_++}function Nc(h,u,c,y,D){Jr(h,"set",{path:u.toString(),value:c,priority:y});const P=ec(h),W=V(c,y),se=wa(h.serverSyncTree_,u),xe=Hd(W,se,P),We=bu(h),Vt=qe(h.serverSyncTree_,u,xe,We,!0);fl(h.eventQueue_,Vt),h.server_.put(u.toString(),W.val(!0),(qt,Mn)=>{const dr="ok"===qt;dr||rr("set at "+u+" failed: "+qt);const Si=Ht(h.serverSyncTree_,We,!dr);Bi(h.eventQueue_,u,Si),gl(0,D,qt,Mn)});const Bt=ic(h,u);Jl(h,Bt),Bi(h.eventQueue_,Bt,[])}function pl(h,u,c){h.server_.onDisconnectCancel(u.toString(),(y,D)=>{"ok"===y&&to(h.onDisconnect_,u),gl(0,c,y,D)})}function ld(h,u,c,y){const D=V(c);h.server_.onDisconnectPut(u.toString(),D.val(!0),(P,W)=>{"ok"===P&&ms(h.onDisconnect_,u,D),gl(0,y,P,W)})}function kc(h,u,c){let y;y=".info"===Xn(u._path)?Pn(h.infoSyncTree_,u,c):Pn(h.serverSyncTree_,u,c),Bo(h.eventQueue_,u._path,y)}function ol(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Zl)}function Jr(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),Un(c,...u)}function gl(h,u,c,y){u&&ni(()=>{if("ok"===c)u(null);else{const D=(c||"error").toUpperCase();let P=D;y&&(P+=": "+y);const W=new Error(P);W.code=D,u(W)}})}function al(h,u,c){return wa(h.serverSyncTree_,u,c)||N.EMPTY_NODE}function Pc(h,u=h.transactionQueueTree_){if(u||yl(h,u),Ca(u)){const c=Da(h,u);(0,J.hu)(c.length>0,"Sending zero length transaction queue"),c.every(D=>0===D.status)&&function ca(h,u,c){const y=c.map(We=>We.currentWriteId),D=al(h,u,y);let P=D;const W=D.hash();for(let We=0;We<c.length;We++){const Vt=c[We];(0,J.hu)(0===Vt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Vt.status=1,Vt.retryCount++;const Bt=mi(u,Vt.path);P=P.updateChild(Bt,Vt.currentOutputSnapshotRaw)}const se=P.val(!0),xe=u;h.server_.put(xe.toString(),se,We=>{Jr(h,"transaction put response",{path:xe.toString(),status:We});let Vt=[];if("ok"===We){const Bt=[];for(let qt=0;qt<c.length;qt++)c[qt].status=2,Vt=Vt.concat(Ht(h.serverSyncTree_,c[qt].currentWriteId)),c[qt].onComplete&&Bt.push(()=>c[qt].onComplete(null,!0,c[qt].currentOutputSnapshotResolved)),c[qt].unwatcher();yl(h,ba(h.transactionQueueTree_,u)),Pc(h,h.transactionQueueTree_),Bi(h.eventQueue_,u,Vt);for(let qt=0;qt<Bt.length;qt++)ni(Bt[qt])}else{if("datastale"===We)for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=3===c[Bt].status?4:0;else{rr("transaction at "+xe.toString()+" failed: "+We);for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=4,c[Bt].abortReason=We}Jl(h,u)}},W)}(h,qu(u),c)}else zu(u)&&Ya(u,c=>{Pc(h,c)})}function Jl(h,u){const c=ud(h,u),y=qu(c);return function ml(h,u,c){if(0===u.length)return;const y=[];let D=[];const W=u.filter(se=>0===se.status).map(se=>se.currentWriteId);for(let se=0;se<u.length;se++){const xe=u[se],We=mi(c,xe.path);let Bt,Vt=!1;if((0,J.hu)(null!==We,"rerunTransactionsUnderNode_: relativePath should not be null."),4===xe.status)Vt=!0,Bt=xe.abortReason,D=D.concat(Ht(h.serverSyncTree_,xe.currentWriteId,!0));else if(0===xe.status)if(xe.retryCount>=25)Vt=!0,Bt="maxretry",D=D.concat(Ht(h.serverSyncTree_,xe.currentWriteId,!0));else{const qt=al(h,xe.path,W);xe.currentInputSnapshot=qt;const Mn=u[se].update(qt.val());if(void 0!==Mn){Yl("transaction failed: Data returned ",Mn,xe.path);let dr=V(Mn);"object"==typeof Mn&&null!=Mn&&(0,J.r3)(Mn,".priority")||(dr=dr.updatePriority(qt.getPriority()));const Oo=xe.currentWriteId,Qa=ec(h),wl=Hd(dr,qt,Qa);xe.currentOutputSnapshotRaw=dr,xe.currentOutputSnapshotResolved=wl,xe.currentWriteId=bu(h),W.splice(W.indexOf(Oo),1),D=D.concat(qe(h.serverSyncTree_,xe.path,wl,xe.currentWriteId,xe.applyLocally)),D=D.concat(Ht(h.serverSyncTree_,Oo,!0))}else Vt=!0,Bt="nodata",D=D.concat(Ht(h.serverSyncTree_,xe.currentWriteId,!0))}Bi(h.eventQueue_,c,D),D=[],Vt&&(u[se].status=2,setTimeout(u[se].unwatcher,Math.floor(0)),u[se].onComplete&&y.push("nodata"===Bt?()=>u[se].onComplete(null,!1,u[se].currentInputSnapshot):()=>u[se].onComplete(new Error(Bt),!1,null)))}yl(h,h.transactionQueueTree_);for(let se=0;se<y.length;se++)ni(y[se]);Pc(h,h.transactionQueueTree_)}(h,Da(h,c),y),y}function ud(h,u){let c,y=h.transactionQueueTree_;for(c=Xn(u);null!==c&&void 0===Ca(y);)y=ba(y,c),c=Xn(u=Zr(u));return y}function Da(h,u){const c=[];return rc(h,u,c),c.sort((y,D)=>y.order-D.order),c}function rc(h,u,c){const y=Ca(u);if(y)for(let D=0;D<y.length;D++)c.push(y[D]);Ya(u,D=>{rc(h,D,c)})}function yl(h,u){const c=Ca(u);if(c){let y=0;for(let D=0;D<c.length;D++)2!==c[D].status&&(c[y]=c[D],y++);c.length=y,Gd(u,c.length>0?c:void 0)}Ya(u,y=>{yl(h,y)})}function ic(h,u){const c=qu(ud(h,u)),y=ba(h.transactionQueueTree_,u);return function Eu(h,u,c){let y=c?h:h.parent;for(;null!==y;){if(u(y))return!0;y=y.parent}}(y,D=>{cd(h,D)}),cd(h,y),Wd(y,D=>{cd(h,D)}),c}function cd(h,u){const c=Ca(u);if(c){const y=[];let D=[],P=-1;for(let W=0;W<c.length;W++)3===c[W].status||(1===c[W].status?((0,J.hu)(P===W-1,"All SENT items should be at beginning of queue."),P=W,c[W].status=3,c[W].abortReason="set"):((0,J.hu)(0===c[W].status,"Unexpected transaction status in abort"),c[W].unwatcher(),D=D.concat(Ht(h.serverSyncTree_,c[W].currentWriteId,!0)),c[W].onComplete&&y.push(c[W].onComplete.bind(null,new Error("set"),!1,null))));-1===P?Gd(u,void 0):c.length=P+1,Bi(h.eventQueue_,qu(u),D);for(let W=0;W<y.length;W++)ni(y[W])}}const vl=function(h,u){const c=Ua(h),y=c.namespace;return"firebase.com"===c.domain&&zt(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==c.domain&&zt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new pt(c.host,c.secure,y,"ws"===c.scheme||"wss"===c.scheme,u,"",y!==c.subdomain),path:new Sr(c.pathString)}},Ua=function(h){let u="",c="",y="",D="",P="",W=!0,se="https",xe=443;if("string"==typeof h){let We=h.indexOf("//");We>=0&&(se=h.substring(0,We-1),h=h.substring(We+2));let Vt=h.indexOf("/");-1===Vt&&(Vt=h.length);let Bt=h.indexOf("?");-1===Bt&&(Bt=h.length),u=h.substring(0,Math.min(Vt,Bt)),Vt<Bt&&(D=function jr(h){let u="";const c=h.split("/");for(let y=0;y<c.length;y++)if(c[y].length>0){let D=c[y];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(P){}u+="/"+D}return u}(h.substring(Vt,Bt)));const qt=function Fc(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const y=c.split("=");2===y.length?u[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):rr(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,Bt)));We=u.indexOf(":"),We>=0?(W="https"===se||"wss"===se,xe=parseInt(u.substring(We+1),10)):We=u.length;const Mn=u.slice(0,We);if("localhost"===Mn.toLowerCase())c="localhost";else if(Mn.split(".").length<=2)c=Mn;else{const dr=u.indexOf(".");y=u.substring(0,dr).toLowerCase(),c=u.substring(dr+1),P=y}"ns"in qt&&(P=qt.ns)}return{host:u,port:xe,domain:c,subdomain:y,secure:W,scheme:se,pathString:D,namespace:P}};class eu{constructor(u,c,y,D){this.eventType=u,this.eventRegistration=c,this.snapshot=y,this.prevName=D}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,J.Wl)(this.snapshot.exportVal())}}class Ml{constructor(u,c,y){this.eventRegistration=u,this.error=c,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Lc{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,J.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class da{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new J.BH;return pl(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Va("OnDisconnect.remove",this._path);const u=new J.BH;return ld(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Va("OnDisconnect.set",this._path),ua("OnDisconnect.set",u,this._path,!1);const c=new J.BH;return ld(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){Va("OnDisconnect.setWithPriority",this._path),ua("OnDisconnect.setWithPriority",u,this._path,!1),Ac("OnDisconnect.setWithPriority",c,!1);const y=new J.BH;return function Cu(h,u,c,y,D){const P=V(c,y);h.server_.onDisconnectPut(u.toString(),P.val(!0),(W,se)=>{"ok"===W&&ms(h.onDisconnect_,u,P),gl(0,D,W,se)})}(this._repo,this._path,u,c,y.wrapCallback(()=>{})),y.promise}update(u){Va("OnDisconnect.update",this._path),sd("OnDisconnect.update",u,this._path,!1);const c=new J.BH;return function Du(h,u,c,y){if((0,J.xb)(c))return Un("onDisconnect().update() called with empty data.  Don't do anything."),void gl(0,y,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(D,P)=>{"ok"===D&&Bn(c,(W,se)=>{const xe=V(se);ms(h.onDisconnect_,Ar(u,W),xe)}),gl(0,y,D,P)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Vs{constructor(u,c,y,D){this._repo=u,this._path=c,this._queryParams=y,this._orderByCalled=D}get key(){return cr(this._path)?null:Us(this._path)}get ref(){return new ea(this._repo,this._path)}get _queryIdentifier(){const u=$r(this._queryParams),c=Tt(u);return"{}"===c?"default":c}get _queryObject(){return $r(this._queryParams)}isEqual(u){if(!((u=(0,J.m9)(u))instanceof Vs))return!1;const c=this._repo===u._repo,y=Hs(this._path,u._path);return c&&y&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function ta(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function sc(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function ll(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===as){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Cr)throw new Error(y);if("string"!=typeof u)throw new Error(D)}if(h.hasEnd()){if(h.getIndexEndName()!==an)throw new Error(y);if("string"!=typeof c)throw new Error(D)}}else if(h.getIndex()===ri){if(null!=u&&!ql(u)||null!=c&&!ql(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,J.hu)(h.getIndex()instanceof oe||h.getIndex()===Xt,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Rl(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class ea extends Vs{constructor(u,c){super(u,c,new Z,!1)}get parent(){const u=js(this._path);return null===u?null:new ea(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class _l{constructor(u,c,y){this._node=u,this.ref=c,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Sr(u),y=_o(this.ref,u);return new _l(this._node.getChild(c),y,ri)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,D)=>u(new _l(D,_o(this.ref,y),ri)))}hasChild(u){const c=new Sr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Vc(h,u){return(h=(0,J.m9)(h))._checkNotDeleted("ref"),void 0!==u?_o(h._root,u):h._root}function El(h,u){(h=(0,J.m9)(h))._checkNotDeleted("refFromURL");const c=vl(u,h._repo.repoInfo_.nodeAdmin);xo("refFromURL",c);const y=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&y.host!==h._repo.repoInfo_.host&&zt("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+h._repo.repoInfo_.host+")"),Vc(h,c.path.toString())}function _o(h,u){return null===Xn((h=(0,J.m9)(h))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Kl("child","path",c,!1)):Kl("child","path",u,!1),new ea(h._repo,Ar(h._path,u));var c}function Tu(h,u){h=(0,J.m9)(h),Va("set",h._path),ua("set",u,h._path,!1);const c=new J.BH;return Nc(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function Su(h,u){sd("update",u,h._path,!1);const c=new J.BH;return function ad(h,u,c,y){Jr(h,"update",{path:u.toString(),value:c});let D=!0;const P=ec(h),W={};if(Bn(c,(se,xe)=>{D=!1,W[se]=td(Ar(u,se),V(xe),h.serverSyncTree_,P)}),D)Un("update() called with empty data.  Don't do anything."),gl(0,y,"ok",void 0);else{const se=bu(h),xe=function wt(h,u,c,y){!function fu(h,u,c,y){(0,J.hu)(y>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:y,visible:!0}),h.visibleWrites=kt(h.visibleWrites,u,c),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y);const D=En.fromObject(c);return aa(h,new Go({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,D))}(h.serverSyncTree_,u,W,se);fl(h.eventQueue_,xe),h.server_.merge(u.toString(),c,(We,Vt)=>{const Bt="ok"===We;Bt||rr("update at "+u+" failed: "+We);const qt=Ht(h.serverSyncTree_,se,!Bt),Mn=qt.length>0?Jl(h,u):u;Bi(h.eventQueue_,Mn,qt),gl(0,y,We,Vt)}),Bn(c,We=>{const Vt=ic(h,Ar(u,We));Jl(h,Vt)}),Bi(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function Bc(h){h=(0,J.m9)(h);const u=new Lc(()=>{}),c=new Il(u);return function tc(h,u,c){const y=function rl(h,u){const c=u._path;let y=null;h.syncPointTree_.foreachOnPath(c,(We,Vt)=>{const Bt=mi(We,c);y=y||O(Vt,Bt)});let D=h.syncPointTree_.get(c);D?y=y||O(D,Ir()):(D=new vu,h.syncPointTree_=h.syncPointTree_.set(c,D));const P=null!=y,W=P?new po(y,!0,!1):null;return function Qo(h){return yi(h.viewCache_)}(Xo(D,u,qo(h.pendingWriteTree_,u._path),P?W.getNode():N.EMPTY_NODE,P))}(h.serverSyncTree_,u);return null!=y?Promise.resolve(y):h.server_.get(u).then(D=>{const P=V(D).withIndex(u._queryParams.getIndex());let W;if(ao(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())W=sn(h.serverSyncTree_,u._path,P);else{const se=la(h.serverSyncTree_,u);W=ds(h.serverSyncTree_,u._path,P,se)}return Bi(h.eventQueue_,u._path,W),Pn(h.serverSyncTree_,u,c,null,!0),P},D=>(Jr(h,"get for query "+(0,J.Wl)(u)+" failed: "+D),Promise.reject(new Error(D))))}(h._repo,h,c).then(y=>new _l(y,new ea(h._repo,h._path),h._queryParams.getIndex()))}class Il{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const y=c._queryParams.getIndex();return new eu("value",this,new _l(u.snapshotNode,new ea(c._repo,c._path),y))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Ml(this,u,c):null}matches(u){return u instanceof Il&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ha{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Ml(this,u,c):null}createEvent(u,c){(0,J.hu)(null!=u.childName,"Child events should have a childName.");const y=_o(new ea(c._repo,c._path),u.childName),D=c._queryParams.getIndex();return new eu(u.type,this,new _l(u.snapshotNode,y,D),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof ha&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function ja(h,u,c,y,D){let P;if("object"==typeof y&&(P=void 0,D=y),"function"==typeof y&&(P=y),D&&D.onlyOnce){const xe=c,We=(Vt,Bt)=>{kc(h._repo,h,se),xe(Vt,Bt)};We.userCallback=c.userCallback,We.context=c.context,c=We}const W=new Lc(c,P||void 0),se="value"===u?new Il(W):new ha(u,W);return function Xl(h,u,c){let y;y=".info"===Xn(u._path)?ao(h.infoSyncTree_,u,c):ao(h.serverSyncTree_,u,c),Bo(h.eventQueue_,u._path,y)}(h._repo,h,se),()=>kc(h._repo,h,se)}function Ol(h,u,c,y){return ja(h,"value",u,c,y)}function ac(h,u,c,y){return ja(h,"child_added",u,c,y)}function Nl(h,u,c,y){return ja(h,"child_changed",u,c,y)}function kl(h,u,c,y){return ja(h,"child_moved",u,c,y)}function $c(h,u,c,y){return ja(h,"child_removed",u,c,y)}function Mh(h,u,c){let y=null;const D=c?new Lc(c):null;"value"===u?y=new Il(D):u&&(y=new ha(u,D)),kc(h._repo,h,y)}class Ha{}class Au extends Ha{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ua("endAt",this._value,u._path,!0);const c=xn(u._queryParams,this._value,this._key);if(Rl(c),ll(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(u._repo,u._path,c,u._orderByCalled)}}class p extends Ha{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ua("endBefore",this._value,u._path,!1);const c=function Kr(h,u,c){let y,D;return h.index_===as?("string"==typeof u&&(u=ws(u)),D=xn(h,u,c)):(y=null==c?Cr:ws(c),D=xn(h,u,y)),D.endBeforeSet_=!0,D}(u._queryParams,this._value,this._key);if(Rl(c),ll(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vs(u._repo,u._path,c,u._orderByCalled)}}class A extends Ha{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ua("startAt",this._value,u._path,!0);const c=Dt(u._queryParams,this._value,this._key);if(Rl(c),ll(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vs(u._repo,u._path,c,u._orderByCalled)}}class ue extends Ha{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){ua("startAfter",this._value,u._path,!1);const c=function Pt(h,u,c){let y;if(h.index_===as)"string"==typeof u&&(u=ns(u)),y=Dt(h,u,c);else{let D;D=null==c?an:ns(c),y=Dt(h,u,D)}return y.startAfterSet_=!0,y}(u._queryParams,this._value,this._key);if(Rl(c),ll(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vs(u._repo,u._path,c,u._orderByCalled)}}class Lt extends Ha{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(u._repo,u._path,function re(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class Hn extends Ha{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vs(u._repo,u._path,function Pe(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class $n extends Ha{constructor(u){super(),this._path=u}_apply(u){sc(u,"orderByChild");const c=new Sr(this._path);if(cr(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new oe(c),D=Gr(u._queryParams,y);return ll(D),new Vs(u._repo,u._path,D,!0)}}class uo extends Ha{_apply(u){sc(u,"orderByKey");const c=Gr(u._queryParams,as);return ll(c),new Vs(u._repo,u._path,c,!0)}}class dd extends Ha{_apply(u){sc(u,"orderByPriority");const c=Gr(u._queryParams,ri);return ll(c),new Vs(u._repo,u._path,c,!0)}}class qd extends Ha{_apply(u){sc(u,"orderByValue");const c=Gr(u._queryParams,Xt);return ll(c),new Vs(u._repo,u._path,c,!0)}}class Yd extends Ha{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(ua("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Au(this._value,this._key)._apply(new A(this._value,this._key)._apply(u))}}function Ta(h,...u){let c=(0,J.m9)(h);for(const y of u)c=y._apply(c);return c}(function ys(h){(0,J.hu)(!oo,"__referenceConstructor has already been defined"),oo=h})(ea),function R(h){(0,J.hu)(!It,"__referenceConstructor has already been defined"),It=h}(ea);const Uc={};function jc(h,u,c,y,D){let P=y||h.options.databaseURL;void 0===P&&(h.options.projectId||zt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Un("Using default host for project ",h.options.projectId),P=`${h.options.projectId}-default-rtdb.firebaseio.com`);let xe,We,W=vl(P,D),se=W.repoInfo;"undefined"!=typeof process&&process.env&&(We=process.env.FIREBASE_DATABASE_EMULATOR_HOST),We?(xe=!0,P=`http://${We}?ns=${se.namespace}`,W=vl(P,D),se=W.repoInfo):xe=!W.repoInfo.secure;const Vt=D&&xe?new Sn(Sn.OWNER):new Ln(h.name,h.options,u);xo("Invalid Firebase Database URL",W),cr(W.path)||zt("Database URL must point to the root of a Firebase Database (not including a child path).");const Bt=function pd(h,u,c,y){let D=Uc[u.name];D||(D={},Uc[u.name]=D);let P=D[h.toURLString()];return P&&zt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),P=new od(h,false,c,y),D[h.toURLString()]=P,P}(se,h,Vt,new un(h.name,c));return new Sf(Bt,h)}class Sf{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Xu(h,u,c){if(h.stats_=fn(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new Oi(h.repoInfo_,(y,D,P,W)=>{hs(h,y,D,P,W)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Ql(h,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(c)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new gi(h.repoInfo_,u,(y,D,P,W)=>{hs(h,y,D,P,W)},y=>{Ql(h,y)},y=>{!function Oc(h,u){Bn(u,(c,y)=>{wu(h,c,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function Zt(h,u){const c=h.toString();return hn[c]||(hn[c]=u()),hn[c]}(h.repoInfo_,()=>new rs(h.stats_,h.server_)),h.infoData_=new ii,h.infoSyncTree_=new fe({startListening:(y,D,P,W)=>{let se=[];const xe=h.infoData_.getNode(y._path);return xe.isEmpty()||(se=sn(h.infoSyncTree_,y._path,xe),setTimeout(()=>{W("ok")},0)),se},stopListening:()=>{}}),wu(h,"connected",!1),h.serverSyncTree_=new fe({startListening:(y,D,P,W)=>(h.server_.listen(y,P,D,(se,xe)=>{const We=W(se,xe);Bi(h.eventQueue_,y._path,We)}),[]),stopListening:(y,D)=>{h.server_.unlisten(y,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ea(this._repo,Ir())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function tu(h,u){const c=Uc[u];(!c||c[h.key]!==h)&&zt(`Database ${u}(${h.repoInfo_}) has already been deleted.`),ol(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&zt("Cannot call "+u+" on a deleted database.")}}function Nh(){Ct.IS_TRANSPORT_INITIALIZED&&rr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function cm(){Nh(),fi.forceDisallow()}function Bp(){Nh(),Je.forceDisallow(),fi.forceAllow()}function Af(h,u){ur(h,u)}const kh={".sv":"timestamp"};class xu{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}gi.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},gi.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Ro(h){Ue(lt.SDK_VERSION),(0,lt._registerComponent)(new Ce.wA("database",(u,{instanceIdentifier:c})=>jc(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(bt,at,h),(0,lt.registerVersion)(bt,at,"esm2017")}();const Ds=new Gt.Yd("@firebase/database-compat"),Mu=function(h){Ds.warn("FIREBASE WARNING: "+h)};class Xd{constructor(u){this._delegate=u}cancel(u){(0,J.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,J.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),y=>u(y)),c}remove(u){(0,J.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,J.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),y=>u(y)),c}set(u,c){(0,J.Dv)("OnDisconnect.set",1,2,arguments.length),(0,J.Wj)("OnDisconnect.set","onComplete",c,!0);const y=this._delegate.set(u);return c&&y.then(()=>c(null),D=>c(D)),y}setWithPriority(u,c,y){(0,J.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,J.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);const D=this._delegate.setWithPriority(u,c);return y&&D.then(()=>y(null),P=>y(P)),D}update(u,c){if((0,J.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let P=0;P<u.length;++P)D[""+P]=u[P];u=D,Mu("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,J.Wj)("OnDisconnect.update","onComplete",c,!0);const y=this._delegate.update(u);return c&&y.then(()=>c(null),D=>c(D)),y}}class Bh{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,J.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class nu{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,J.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,J.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,J.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,J.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,J.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Kl("DataSnapshot.child","path",u,!1),new nu(this._database,this._delegate.child(u))}hasChild(u){return(0,J.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Kl("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,J.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,J.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,J.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new nu(this._database,c)))}hasChildren(){return(0,J.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,J.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,J.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ka(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class $o{constructor(u,c){this.database=u,this._delegate=c}on(u,c,y,D){var P;(0,J.Dv)("Query.on",2,4,arguments.length),(0,J.Wj)("Query.on","callback",c,!1);const W=$o.getCancelAndContextArgs_("Query.on",y,D),se=(We,Vt)=>{c.call(W.context,new nu(this.database,We),Vt)};se.userCallback=c,se.context=W.context;const xe=null===(P=W.cancel)||void 0===P?void 0:P.bind(W.context);switch(u){case"value":return Ol(this._delegate,se,xe),c;case"child_added":return ac(this._delegate,se,xe),c;case"child_removed":return $c(this._delegate,se,xe),c;case"child_changed":return Nl(this._delegate,se,xe),c;case"child_moved":return kl(this._delegate,se,xe),c;default:throw new Error((0,J.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,y){if((0,J.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,J.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,J.Wj)("Query.off","callback",c,!0),(0,J.lb)("Query.off","context",y,!0),c){const D=()=>{};D.userCallback=c,D.context=y,Mh(this._delegate,u,D)}else Mh(this._delegate,u)}get(){return Bc(this._delegate).then(u=>new nu(this.database,u))}once(u,c,y,D){(0,J.Dv)("Query.once",1,4,arguments.length),(0,J.Wj)("Query.once","callback",c,!0);const P=$o.getCancelAndContextArgs_("Query.once",y,D),W=new J.BH,se=(We,Vt)=>{const Bt=new nu(this.database,We);c&&c.call(P.context,Bt,Vt),W.resolve(Bt)};se.userCallback=c,se.context=P.context;const xe=We=>{P.cancel&&P.cancel.call(P.context,We),W.reject(We)};switch(u){case"value":Ol(this._delegate,se,xe,{onlyOnce:!0});break;case"child_added":ac(this._delegate,se,xe,{onlyOnce:!0});break;case"child_removed":$c(this._delegate,se,xe,{onlyOnce:!0});break;case"child_changed":Nl(this._delegate,se,xe,{onlyOnce:!0});break;case"child_moved":kl(this._delegate,se,xe,{onlyOnce:!0});break;default:throw new Error((0,J.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return W.promise}limitToFirst(u){return(0,J.Dv)("Query.limitToFirst",1,1,arguments.length),new $o(this.database,Ta(this._delegate,function pn(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Lt(h)}(u)))}limitToLast(u){return(0,J.Dv)("Query.limitToLast",1,1,arguments.length),new $o(this.database,Ta(this._delegate,function Er(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Hn(h)}(u)))}orderByChild(u){return(0,J.Dv)("Query.orderByChild",1,1,arguments.length),new $o(this.database,Ta(this._delegate,function lo(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Kl("orderByChild","path",h,!1),new $n(h)}(u)))}orderByKey(){return(0,J.Dv)("Query.orderByKey",0,0,arguments.length),new $o(this.database,Ta(this._delegate,function Mo(){return new uo}()))}orderByPriority(){return(0,J.Dv)("Query.orderByPriority",0,0,arguments.length),new $o(this.database,Ta(this._delegate,function lc(){return new dd}()))}orderByValue(){return(0,J.Dv)("Query.orderByValue",0,0,arguments.length),new $o(this.database,Ta(this._delegate,function Rh(){return new qd}()))}startAt(u=null,c){return(0,J.Dv)("Query.startAt",0,2,arguments.length),new $o(this.database,Ta(this._delegate,function K(h=null,u){return Iu("startAt","key",u,!0),new A(h,u)}(u,c)))}startAfter(u=null,c){return(0,J.Dv)("Query.startAfter",0,2,arguments.length),new $o(this.database,Ta(this._delegate,function tt(h,u){return Iu("startAfter","key",u,!0),new ue(h,u)}(u,c)))}endAt(u=null,c){return(0,J.Dv)("Query.endAt",0,2,arguments.length),new $o(this.database,Ta(this._delegate,function b(h,u){return Iu("endAt","key",u,!0),new Au(h,u)}(u,c)))}endBefore(u=null,c){return(0,J.Dv)("Query.endBefore",0,2,arguments.length),new $o(this.database,Ta(this._delegate,function _(h,u){return Iu("endBefore","key",u,!0),new p(h,u)}(u,c)))}equalTo(u,c){return(0,J.Dv)("Query.equalTo",1,2,arguments.length),new $o(this.database,Ta(this._delegate,function Oh(h,u){return Iu("equalTo","key",u,!0),new Yd(h,u)}(u,c)))}toString(){return(0,J.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,J.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,J.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof $o))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,y){const D={cancel:void 0,context:void 0};if(c&&y)D.cancel=c,(0,J.Wj)(u,"cancel",D.cancel,!0),D.context=y,(0,J.lb)(u,"context",D.context,!0);else if(c)if("object"==typeof c&&null!==c)D.context=c;else{if("function"!=typeof c)throw new Error((0,J.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=c}return D}get ref(){return new Ka(this.database,new ea(this._delegate._repo,this._delegate._path))}}class Ka extends $o{constructor(u,c){super(u,new Vs(c._repo,c._path,new Z,!1)),this.database=u,this._delegate=c}getKey(){return(0,J.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,J.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new Ka(this.database,_o(this._delegate,u))}getParent(){(0,J.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new Ka(this.database,u):null}getRoot(){return(0,J.Dv)("Reference.root",0,0,arguments.length),new Ka(this.database,this._delegate.root)}set(u,c){(0,J.Dv)("Reference.set",1,2,arguments.length),(0,J.Wj)("Reference.set","onComplete",c,!0);const y=Tu(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}update(u,c){if((0,J.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let P=0;P<u.length;++P)D[""+P]=u[P];u=D,Mu("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Va("Reference.update",this._delegate._path),(0,J.Wj)("Reference.update","onComplete",c,!0);const y=Su(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}setWithPriority(u,c,y){(0,J.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,J.Wj)("Reference.setWithPriority","onComplete",y,!0);const D=function Ms(h,u,c){if(Va("setWithPriority",h._path),ua("setWithPriority",u,h._path,!1),Ac("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const y=new J.BH;return Nc(h._repo,h._path,u,c,y.wrapCallback(()=>{})),y.promise}(this._delegate,u,c);return y&&D.then(()=>y(null),P=>y(P)),D}remove(u){(0,J.Dv)("Reference.remove",0,1,arguments.length),(0,J.Wj)("Reference.remove","onComplete",u,!0);const c=function oc(h){return Va("remove",h._path),Tu(h,null)}(this._delegate);return u&&c.then(()=>u(null),y=>u(y)),c}transaction(u,c,y){(0,J.Dv)("Reference.transaction",1,3,arguments.length),(0,J.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,J.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,y){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,J.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const D=function Lh(h,u,c){var y;if(h=(0,J.m9)(h),Va("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const D=null===(y=null==c?void 0:c.applyLocally)||void 0===y||y,P=new J.BH,se=Ol(h,()=>{});return function nc(h,u,c,y,D,P){Jr(h,"transaction on "+u);const W={path:u,update:c,onComplete:y,status:null,order:bn(),applyLocally:P,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},se=al(h,u,void 0);W.currentInputSnapshot=se;const xe=W.update(se.val());if(void 0===xe)W.unwatcher(),W.currentOutputSnapshotRaw=null,W.currentOutputSnapshotResolved=null,W.onComplete&&W.onComplete(null,!1,W.currentInputSnapshot);else{Yl("transaction failed: Data returned ",xe,W.path),W.status=0;const We=ba(h.transactionQueueTree_,u),Vt=Ca(We)||[];let Bt;Vt.push(W),Gd(We,Vt),"object"==typeof xe&&null!==xe&&(0,J.r3)(xe,".priority")?(Bt=(0,J.DV)(xe,".priority"),(0,J.hu)(ql(Bt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Bt=(wa(h.serverSyncTree_,u)||N.EMPTY_NODE).getPriority().val();const qt=ec(h),Mn=V(xe,Bt),dr=Hd(Mn,se,qt);W.currentOutputSnapshotRaw=Mn,W.currentOutputSnapshotResolved=dr,W.currentWriteId=bu(h);const Si=qe(h.serverSyncTree_,u,dr,W.currentWriteId,W.applyLocally);Bi(h.eventQueue_,u,Si),Pc(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(xe,We,Vt)=>{let Bt=null;xe?P.reject(xe):(Bt=new _l(Vt,new ea(h._repo,h._path),ri),P.resolve(new xu(We,Bt)))},se,D),P.promise}(this._delegate,u,{applyLocally:y}).then(P=>new Bh(P.committed,new nu(this.database,P.snapshot)));return c&&D.then(P=>c(null,P.committed,P.snapshot),P=>c(P,!1,null)),D}setPriority(u,c){(0,J.Dv)("Reference.setPriority",1,2,arguments.length),(0,J.Wj)("Reference.setPriority","onComplete",c,!0);const y=function ul(h,u){h=(0,J.m9)(h),Va("setPriority",h._path),Ac("setPriority",u,!1);const c=new J.BH;return Nc(h._repo,Ar(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}push(u,c){(0,J.Dv)("Reference.push",0,2,arguments.length),(0,J.Wj)("Reference.push","onComplete",c,!0);const y=function Xs(h,u){h=(0,J.m9)(h),Va("push",h._path),ua("push",u,h._path,!0);const c=Ju(h._repo),y=ci(c),D=_o(h,y),P=_o(h,y);let W;return W=null!=u?Tu(P,u).then(()=>P):Promise.resolve(P),D.then=W.then.bind(W),D.catch=W.then.bind(W,void 0),D}(this._delegate,u),D=y.then(W=>new Ka(this.database,W));c&&D.then(()=>c(null),W=>c(W));const P=new Ka(this.database,y);return P.then=D.then.bind(D),P.catch=D.catch.bind(D,void 0),P}onDisconnect(){return Va("Reference.onDisconnect",this._delegate._path),new Xd(new da(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Gc{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:cm,forceLongPolling:Bp}}useEmulator(u,c,y={}){!function gd(h,u,c,y={}){(h=(0,J.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&zt("Cannot call useEmulator() after instance has already been initialized.");const D=h._repoInternal;let P;if(D.repoInfo_.nodeAdmin)y.mockUserToken&&zt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),P=new Sn(Sn.OWNER);else if(y.mockUserToken){const W="string"==typeof y.mockUserToken?y.mockUserToken:(0,J.Sg)(y.mockUserToken,h.app.options.projectId);P=new Sn(W)}!function fd(h,u,c,y){h.repoInfo_=new pt(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),y&&(h.authTokenProvider_=y)}(D,u,c,P)}(this._delegate,u,c,y)}ref(u){if((0,J.Dv)("database.ref",0,1,arguments.length),u instanceof Ka){const c=El(this._delegate,u.toString());return new Ka(this,c)}{const c=Vc(this._delegate,u);return new Ka(this,c)}}refFromURL(u){(0,J.Dv)("database.refFromURL",1,1,arguments.length);const y=El(this._delegate,u);return new Ka(this,y)}goOffline(){return(0,J.Dv)("database.goOffline",0,0,arguments.length),function Zd(h){(h=(0,J.m9)(h))._checkNotDeleted("goOffline"),ol(h._repo)}(this._delegate)}goOnline(){return(0,J.Dv)("database.goOnline",0,0,arguments.length),function dm(h){(h=(0,J.m9)(h))._checkNotDeleted("goOnline"),function Ls(h){h.persistentConnection_&&h.persistentConnection_.resume(Zl)}(h._repo)}(this._delegate)}}Gc.ServerValue={TIMESTAMP:function Ph(){return kh}(),increment:h=>function Fh(h){return{".sv":{increment:h}}}(h)};var $h=Object.freeze({__proto__:null,initStandalone:function Up({app:h,url:u,version:c,customAuthImpl:y,namespace:D,nodeAdmin:P=!1}){Ue(c);const W=new Ce.zt("auth-internal",new Ce.H0("database-standalone"));return W.setComponent(new Ce.wA("auth-internal",()=>y,"PRIVATE")),{instance:new Gc(jc(h,W,void 0,u,P),h),namespace:D}}});const ru=Gc.ServerValue;!function iu(h){h.INTERNAL.registerComponent(new Ce.wA("database-compat",(u,{instanceIdentifier:c})=>{const y=u.getProvider("app-compat").getImmediate(),D=u.getProvider("database").getImmediate({identifier:c});return new Gc(D,y)},"PUBLIC").setServiceProps({Reference:Ka,Query:$o,Database:Gc,DataSnapshot:nu,enableLogging:Af,INTERNAL:$h,ServerValue:ru}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.2.10")}(ae.Z);var su=H(4941),Uh=H(440),xf=H(127);function cc(h){return null==h}function Pl(h){return"function"==typeof h.set}function dc(h,u){return Pl(u)?u:h.ref(u)}function jh(h,u){if(function jp(h){return"string"==typeof h}(h))return u.stringCase();if(Pl(h))return u.firebaseCase();if(function Mf(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function hc(h,u,c="on",y=be.z){return new ce.y(D=>{let P=null;return P=h[c](u,(W,se)=>{y.schedule(()=>{D.next({snapshot:W,prevKey:se})}),"once"===c&&y.schedule(()=>D.complete())},W=>{y.schedule(()=>D.error(W))}),"on"===c?{unsubscribe(){null!=P&&h.off(u,P)}}:{unsubscribe(){}}}).pipe((0,Ie.U)(D=>{const{snapshot:P,prevKey:W}=D;let se=null;return P.exists()&&(se=P.key),{type:u,payload:P,prevKey:W,key:se}}),(0,Ge.B)())}function yd(h,u){const c=h.length;for(let y=0;y<c;y++)if(h[y].payload.key===u)return y;return-1}function Hp(h,u){const{payload:c,prevKey:y,key:D}=u,P=yd(h,D),W=function Fl(h,u){if(cc(u))return 0;{const c=yd(h,u);return-1===c?h.length:c+1}}(h,y);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let se=null;u.payload.forEach(xe=>{const We={payload:xe,type:"value",prevKey:se,key:xe.key};return se=xe.key,h=[...h,We],!1})}return h;case"child_added":if(P>-1){const se=h[P-1];(se&&se.key||null)!==y&&(h=h.filter(xe=>xe.payload.key!==c.key)).splice(W,0,u)}else{if(null==y)return[u,...h];(h=h.slice()).splice(W,0,u)}return h;case"child_removed":return h.filter(se=>se.payload.key!==c.key);case"child_changed":return h.map(se=>se.payload.key===D?u:se);case"child_moved":if(P>-1){const se=h.splice(P,1)[0];return(h=h.slice()).splice(W,0,se),h}return h;default:return h}}function vd(h){return(cc(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function ou(h,u,c){return function Rf(h,u,c){return hc(h,"value","once",c).pipe((0,st.w)(y=>{const D=[(0,de.of)(y)];return u.forEach(P=>D.push(hc(h,P,"on",c))),(0,ie.T)(...D).pipe((0,nt.R)(Hp,[]))}),(0,Re.x)())}(h,u=vd(u),c)}function _d(h,u,c){const y=(u=vd(u)).map(D=>hc(h,D,"on",c));return(0,ie.T)(...y)}function fa(h,u){return function(y,D){return jh(y,{stringCase:()=>h.child(y)[u](D),firebaseCase:()=>y[u](D),snapshotCase:()=>y.ref[u](D)})}}function Jd(h){return function(c){return c?jh(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function Id(h,u){return function(){return hc(h,"value","on",u)}}const Za=new ne.OlP("angularfire2.realtimeDatabaseURL"),Wc=new ne.OlP("angularfire2.database.use-emulator");let Of=(()=>{class h{constructor(c,y,D,P,W,se,xe,We,Vt,Bt,qt,Mn,dr,Si,Oo){this.schedulers=se;const Qa=xe,wl=(0,pe.on)(c,W,y);We&&(0,su.nw)(wl,W,Vt,qt,Mn,dr,Bt,Si),this.database=(0,pe.cc)(`${wl.name}.database.${D}`,"AngularFireDatabase",wl.name,()=>{const zc=W.runOutsideAngular(()=>wl.database(D||void 0));return Qa&&zc.useEmulator(...Qa),zc},[Qa])}list(c,y){const D=this.schedulers.ngZone.runOutsideAngular(()=>dc(this.database,c));let P=D;return y&&(P=y(D)),function eh(h,u){const c=u.schedulers.outsideAngular,y=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:fa(y,"update"),set:fa(y,"set"),push:D=>y.push(D),remove:Jd(y),snapshotChanges:D=>ou(h,D,c).pipe(Oe.iC),stateChanges:D=>_d(h,D,c).pipe(Oe.iC),auditTrail:D=>function fc(h,u,c){return function Ru(h,u,c){return function Ed(h,u){return hc(h,"value","on",u).pipe((0,Ie.U)(c=>{let y;return c.payload.forEach(D=>(y=D.key,!1)),{data:c,lastKeyToLoad:y}}))}(h,c).pipe(function me(...h){return u=>{let c;return"function"==typeof h[h.length-1]&&(c=h.pop()),u.lift(new vt(h,c))}}(u),(0,Ie.U)(([D,P])=>{const W=D.lastKeyToLoad,se=P.map(xe=>xe.key);return{actions:P,lastKeyToLoad:W,loadedKeys:se}}),function Be(h){return u=>u.lift(new mt(h))}(D=>-1===D.loadedKeys.indexOf(D.lastKeyToLoad)),(0,Ie.U)(D=>D.actions))}(h,_d(h,u).pipe((0,nt.R)((D,P)=>[...D,P],[])),c)}(h,D,c).pipe(Oe.iC),valueChanges:(D,P)=>ou(h,D,c).pipe((0,Ie.U)(se=>se.map(xe=>P&&P.idField?Object.assign(Object.assign({},xe.payload.val()),{[P.idField]:xe.key}):xe.payload.val())),Oe.iC)}}(P,this)}object(c){return function Hh(h,u){return{query:h,snapshotChanges:()=>Id(h,u.schedulers.outsideAngular)().pipe(Oe.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>Id(h,u.schedulers.outsideAngular)().pipe(Oe.iC,(0,Ie.U)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>dc(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(ne.LFG(pe.Dh),ne.LFG(pe.xv,8),ne.LFG(Za,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(Oe.HU),ne.LFG(Wc,8),ne.LFG(su.zQ,8),ne.LFG(su.Qv,8),ne.LFG(su.L6,8),ne.LFG(su._Q,8),ne.LFG(su.rT,8),ne.LFG(su.lh,8),ne.LFG(su.f7,8),ne.LFG(Uh.nm,8))},h.\u0275prov=ne.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),pc=(()=>{class h{constructor(){xf.Z.registerVersion("angularfire",Oe.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h}),h.\u0275inj=ne.cJS({providers:[Of]}),h})();const Nf_firebaseConfig={apiKey:"AIzaSyBpGmSijA0j3dPlUJOL_eh9xsAJwcSil3M",authDomain:"eje01-4677b.firebaseapp.com",projectId:"eje01-4677b",storageBucket:"eje01-4677b.appspot.com",messagingSenderId:"743593783996",appId:"1:743593783996:web:1fd0ceda543090ceaad6b9",measurementId:"G-54YFV97CG5"};var Ou=H(2796);let kf=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h,bootstrap:[Ee]}),h.\u0275inj=ne.cJS({providers:[Ou.ST,{provide:z.wN,useClass:ke.r4}],imports:[a.b2,ke.Pc.forRoot(),he,pe.hO.initializeApp(Nf_firebaseConfig),pc]}),h})();(0,ne.G48)(),a.q6().bootstrapModule(kf).catch(h=>console.log(h))},440:(tn,ot,H)=>{"use strict";H.d(ot,{nm:()=>Fi});var a=H(6351);H(5e3),H(5867);var vt=H(5861),gt=H(9681),xt=H(4859),Be=H(2090),mt=H(1877);const ye=new Map,Oe={activated:!1,tokenObservers:[]},ve={initialized:!1,enabled:!1};function ae(et){return ye.get(et)||Object.assign({},Oe)}function Se(){return ve}class Ue{constructor(Ze,_t,Ut,en,Dn){if(this.operation=Ze,this.retryPolicy=_t,this.getWaitDuration=Ut,this.lowerBound=en,this.upperBound=Dn,this.pending=null,this.nextErrorWaitInterval=en,en>Dn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ze){var _t=this;return(0,vt.Z)(function*(){_t.stop();try{_t.pending=new Be.BH,yield function Xe(et){return new Promise(Ze=>{setTimeout(Ze,et)})}(_t.getNextRun(Ze)),_t.pending.resolve(),yield _t.pending.promise,_t.pending=new Be.BH,yield _t.operation(),_t.pending.resolve(),yield _t.pending.promise,_t.process(!0).catch(()=>{})}catch(Ut){_t.retryPolicy(Ut)?_t.process(!1).catch(()=>{}):_t.stop()}})()}getNextRun(Ze){if(Ze)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const _t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),_t}}}const ht=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ft(et){if(!ae(et).activated)throw ht.create("use-before-activation",{appName:et.name})}function In(et,Ze){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,vt.Z)(function*({url:et,body:Ze},_t){var Ut,en;const Dn={"Content-Type":"application/json"},Yn=_t.getImmediate({optional:!0});if(Yn){const Ji=yield Yn.getHeartbeatsHeader();Ji&&(Dn["X-Firebase-Client"]=Ji)}const ui={method:"POST",body:JSON.stringify(Ze),headers:Dn};let Br,Os;try{Br=yield fetch(et,ui)}catch(Ji){throw ht.create("fetch-network-error",{originalErrorMessage:null===(Ut=Ji)||void 0===Ut?void 0:Ut.message})}if(200!==Br.status)throw ht.create("fetch-status-error",{httpStatus:Br.status});try{Os=yield Br.json()}catch(Ji){throw ht.create("fetch-parse-error",{originalErrorMessage:null===(en=Ji)||void 0===en?void 0:en.message})}const Sr=Os.ttl.match(/^([\d.]+)(s)$/);if(!Sr||!Sr[2]||isNaN(Number(Sr[1])))throw ht.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Os.ttl}`});const Ir=1e3*Number(Sr[1]),Xn=Date.now();return{token:Os.token,expireTimeMillis:Xn+Ir,issuedAtTimeMillis:Xn}})).apply(this,arguments)}function ur(et,Ze){const{projectId:_t,appId:Ut,apiKey:en}=et.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${_t}/apps/${Ut}:exchangeDebugToken?key=${en}`,body:{debug_token:Ze}}}const mr="firebase-app-check-store";let rr=null;function Pr(){return rr||(rr=new Promise((et,Ze)=>{var _t;try{const Ut=indexedDB.open("firebase-app-check-database",1);Ut.onsuccess=en=>{et(en.target.result)},Ut.onerror=en=>{var Dn;Ze(ht.create("storage-open",{originalErrorMessage:null===(Dn=en.target.error)||void 0===Dn?void 0:Dn.message}))},Ut.onupgradeneeded=en=>{0===en.oldVersion&&en.target.result.createObjectStore(mr,{keyPath:"compositeKey"})}}catch(Ut){Ze(ht.create("storage-open",{originalErrorMessage:null===(_t=Ut)||void 0===_t?void 0:_t.message}))}}),rr)}function Tn(){return(Tn=(0,vt.Z)(function*(et,Ze){const Ut=(yield Pr()).transaction(mr,"readwrite"),Dn=Ut.objectStore(mr).put({compositeKey:et,value:Ze});return new Promise((Yn,ui)=>{Dn.onsuccess=Br=>{Yn()},Ut.onerror=Br=>{var Os;ui(ht.create("storage-set",{originalErrorMessage:null===(Os=Br.target.error)||void 0===Os?void 0:Os.message}))}})})).apply(this,arguments)}const Bn=new mt.Yd("@firebase/app-check");function jn(et,Ze){return(0,Be.hl)()?function nr(et,Ze){return function fr(et,Ze){return Tn.apply(this,arguments)}(function yr(et){return`${et.options.appId}-${et.name}`}(et),Ze)}(et,Ze).catch(_t=>{Bn.warn(`Failed to write token to IndexedDB. Error: ${_t}`)}):Promise.resolve()}function si(){return Se().enabled}function ir(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,vt.Z)(function*(){const et=Se();if(et.enabled&&et.token)return et.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const vn={error:"UNKNOWN_ERROR"};function $t(et){return Be.US.encodeString(JSON.stringify(et),!1)}function un(et){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,vt.Z)(function*(et,Ze=!1){const _t=et.app;Ft(_t);const Ut=ae(_t);let Dn,en=Ut.token;if(en&&!dt(en)&&(Ut.token=void 0,en=void 0),!en){const Br=yield Ut.cachedTokenPromise;Br&&(dt(Br)?en=Br:yield jn(_t,void 0))}if(!Ze&&en&&dt(en))return{token:en.token};let ui,Yn=!1;if(si()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=In(ur(_t,yield ir()),et.heartbeatServiceProvider).finally(()=>{Ut.exchangeTokenPromise=void 0}),Yn=!0);const Br=yield Ut.exchangeTokenPromise;return yield jn(_t,Br),Ut.token=Br,{token:Br.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().finally(()=>{Ut.exchangeTokenPromise=void 0}),Yn=!0),en=yield ae(_t).exchangeTokenPromise}catch(Br){"appCheck/throttled"===Br.code?Bn.warn(Br.message):Bn.error(Br),Dn=Br}return en?Dn?ui=dt(en)?{token:en.token,internalError:Dn}:rt(Dn):(ui={token:en.token},Ut.token=en,yield jn(_t,en)):ui=rt(Dn),Yn&&He(_t,ui),ui})).apply(this,arguments)}function On(et,Ze){const _t=ae(et),Ut=_t.tokenObservers.filter(en=>en.next!==Ze);0===Ut.length&&_t.tokenRefresher&&_t.tokenRefresher.isRunning()&&_t.tokenRefresher.stop(),_t.tokenObservers=Ut}function je(et){const{app:Ze}=et,_t=ae(Ze);let Ut=_t.tokenRefresher;Ut||(Ut=function Ne(et){const{app:Ze}=et;return new Ue((0,vt.Z)(function*(){let Ut;if(Ut=ae(Ze).token?yield un(et,!0):yield un(et),Ut.error)throw Ut.error;if(Ut.internalError)throw Ut.internalError}),()=>!0,()=>{const _t=ae(Ze);if(_t.token){let Ut=_t.token.issuedAtTimeMillis+.5*(_t.token.expireTimeMillis-_t.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,_t.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},3e4,96e4)}(et),_t.tokenRefresher=Ut),!Ut.isRunning()&&_t.isTokenAutoRefreshEnabled&&Ut.start()}function He(et,Ze){const _t=ae(et).tokenObservers;for(const Ut of _t)try{"EXTERNAL"===Ut.type&&null!=Ze.error?Ut.error(Ze.error):Ut.next(Ze)}catch(en){}}function dt(et){return et.expireTimeMillis-Date.now()>0}function rt(et){return{token:$t(vn),error:et}}class on{constructor(Ze,_t){this.app=Ze,this.heartbeatServiceProvider=_t}_delete(){const{tokenObservers:Ze}=ae(this.app);for(const _t of Ze)On(this.app,_t.next);return Promise.resolve()}}const bi="app-check-internal";!function Xi(){(0,gt._registerComponent)(new xt.wA("app-check",et=>function _n(et,Ze){return new on(et,Ze)}(et.getProvider("app").getImmediate(),et.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((et,Ze,_t)=>{et.getProvider(bi).initialize()})),(0,gt._registerComponent)(new xt.wA(bi,et=>function hr(et){return{getToken:Ze=>un(et,Ze),addTokenListener:Ze=>function Sn(et,Ze,_t,Ut){const{app:en}=et,Dn=ae(en);if(Dn.tokenObservers=[...Dn.tokenObservers,{next:_t,error:Ut,type:Ze}],Dn.token&&dt(Dn.token)){const ui=Dn.token;Promise.resolve().then(()=>{_t({token:ui.token}),je(et)}).catch(()=>{})}Dn.cachedTokenPromise.then(()=>je(et))}(et,"INTERNAL",Ze),removeTokenListener:Ze=>On(et.app,Ze)}}(et.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gt.registerVersion)("@firebase/app-check","0.5.17")}();class Fi{constructor(){return(0,a.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(tn,ot,H)=>{"use strict";H.d(ot,{zQ:()=>bt,rT:()=>Se,f7:()=>J,L6:()=>ae,_Q:()=>Ce,lh:()=>lt,Qv:()=>ve,nw:()=>Gt});var a=H(5e3),ne=H(8929),z=H(1086),ke=H(6498),Le=H(5254),he=H(6787),Ee=H(2102),pe=H(7545),be=H(4850),ce=H(341),de=H(2654),ie=H(5279),Ie=H(5283);class Ge extends ne.xQ{constructor(Ue=Number.POSITIVE_INFINITY,Xe=Number.POSITIVE_INFINITY,Qe){super(),this.scheduler=Qe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Ue<1?1:Ue,this._windowTime=Xe<1?1:Xe,Xe===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Ue){if(!this.isStopped){const Xe=this._events;Xe.push(Ue),Xe.length>this._bufferSize&&Xe.shift()}super.next(Ue)}nextTimeWindow(Ue){this.isStopped||(this._events.push(new st(this._getNow(),Ue)),this._trimBufferThenGetEvents()),super.next(Ue)}_subscribe(Ue){const Xe=this._infiniteTimeWindow,Qe=Xe?this._events:this._trimBufferThenGetEvents(),ht=this.scheduler,ft=Qe.length;let Ft;if(this.closed)throw new ie.N;if(this.isStopped||this.hasError?Ft=de.w.EMPTY:(this.observers.push(Ue),Ft=new Ie.W(this,Ue)),ht&&Ue.add(Ue=new Ee.ht(Ue,ht)),Xe)for(let Nt=0;Nt<ft&&!Ue.closed;Nt++)Ue.next(Qe[Nt]);else for(let Nt=0;Nt<ft&&!Ue.closed;Nt++)Ue.next(Qe[Nt].value);return this.hasError?Ue.error(this.thrownError):this.isStopped&&Ue.complete(),Ft}_getNow(){return(this.scheduler||ce.c).now()}_trimBufferThenGetEvents(){const Ue=this._getNow(),Xe=this._bufferSize,Qe=this._windowTime,ht=this._events,ft=ht.length;let Ft=0;for(;Ft<ft&&!(Ue-ht[Ft].time<Qe);)Ft++;return ft>Xe&&(Ft=Math.max(Ft,ft-Xe)),Ft>0&&ht.splice(0,Ft),ht}}class st{constructor(Ue,Xe){this.time=Ue,this.value=Xe}}function nt($e,Ue,Xe){let Qe;return Qe=$e&&"object"==typeof $e?$e:{bufferSize:$e,windowTime:Ue,refCount:!1,scheduler:Xe},ht=>ht.lift(function Re({bufferSize:$e=Number.POSITIVE_INFINITY,windowTime:Ue=Number.POSITIVE_INFINITY,refCount:Xe,scheduler:Qe}){let ht,Ft,ft=0,Nt=!1,bn=!1;return function(Qn){let Rn;ft++,!ht||Nt?(Nt=!1,ht=new Ge($e,Ue,Qe),Rn=ht.subscribe(this),Ft=Qn.subscribe({next(Wn){ht.next(Wn)},error(Wn){Nt=!0,ht.error(Wn)},complete(){bn=!0,Ft=void 0,ht.complete()}}),bn&&(Ft=void 0)):Rn=ht.subscribe(this),this.add(()=>{ft--,Rn.unsubscribe(),Rn=void 0,Ft&&!bn&&Xe&&0===ft&&(Ft.unsubscribe(),Ft=void 0,ht=void 0)})}}(Qe))}var De=H(7224);function ct($e,Ue){return Ue?(0,pe.w)(()=>$e,Ue):(0,pe.w)(()=>$e)}var me=H(8915),vt=H(2198),gt=H(6351),xt=H(2011),Be=H(9808),mt=H(440);H(127);const ve=new a.OlP("angularfire2.auth.use-emulator"),ae=new a.OlP("angularfire2.auth.settings"),Ce=new a.OlP("angularfire2.auth.tenant-id"),Se=new a.OlP("angularfire2.auth.langugage-code"),lt=new a.OlP("angularfire2.auth.use-device-language"),J=new a.OlP("angularfire.auth.persistence"),Gt=($e,Ue,Xe,Qe,ht,ft,Ft,Nt)=>(0,xt.cc)(`${$e.name}.auth`,"AngularFireAuth",$e.name,()=>{const bn=Ue.runOutsideAngular(()=>$e.auth());if(Xe&&bn.useEmulator(...Xe),Qe&&(bn.tenantId=Qe),bn.languageCode=ht,ft&&bn.useDeviceLanguage(),Ft)for(const[In,Qn]of Object.entries(Ft))bn.settings[In]=Qn;return Nt&&bn.setPersistence(Nt),bn},[Xe,Qe,ht,ft,Ft,Nt]);let bt=(()=>{class $e{constructor(Xe,Qe,ht,ft,Ft,Nt,bn,In,Qn,Rn,Wn,ur){const Un=new ne.xQ,or=(0,z.of)(void 0).pipe((0,Ee.QV)(Ft.outsideAngular),(0,pe.w)(()=>ft.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,1277)))),(0,be.U)(()=>(0,xt.on)(Xe,ft,Qe)),(0,be.U)(mr=>Gt(mr,ft,Nt,In,Qn,Rn,bn,Wn)),nt({bufferSize:1,refCount:!1}));if((0,Be.PM)(ht))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,z.of)(null);else{or.pipe((0,De.P)()).subscribe();const zt=or.pipe((0,pe.w)(tr=>tr.getRedirectResult().then(nr=>nr,()=>null)),gt.iC,nt({bufferSize:1,refCount:!1})),rr=or.pipe((0,pe.w)(tr=>new ke.y(nr=>({unsubscribe:ft.runOutsideAngular(()=>tr.onAuthStateChanged(Cr=>nr.next(Cr),Cr=>nr.error(Cr),()=>nr.complete()))})))),Pr=or.pipe((0,pe.w)(tr=>new ke.y(nr=>({unsubscribe:ft.runOutsideAngular(()=>tr.onIdTokenChanged(Cr=>nr.next(Cr),Cr=>nr.error(Cr),()=>nr.complete()))}))));this.authState=zt.pipe(ct(rr),(0,me.R)(Ft.outsideAngular),(0,Ee.QV)(Ft.insideAngular)),this.user=zt.pipe(ct(Pr),(0,me.R)(Ft.outsideAngular),(0,Ee.QV)(Ft.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(tr=>tr?(0,Le.D)(tr.getIdToken()):(0,z.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(tr=>tr?(0,Le.D)(tr.getIdTokenResult()):(0,z.of)(null))),this.credential=(0,he.T)(zt,Un,this.authState.pipe((0,vt.h)(tr=>!tr))).pipe((0,be.U)(tr=>null!=tr&&tr.user?tr:null),(0,me.R)(Ft.outsideAngular),(0,Ee.QV)(Ft.insideAngular))}return(0,xt.pX)(this,or,ft,{spy:{apply:(mr,zt,rr)=>{(mr.startsWith("signIn")||mr.startsWith("createUser"))&&rr.then(Pr=>Un.next(Pr))}}})}}return $e.\u0275fac=function(Xe){return new(Xe||$e)(a.LFG(xt.Dh),a.LFG(xt.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(gt.HU),a.LFG(ve,8),a.LFG(ae,8),a.LFG(Ce,8),a.LFG(Se,8),a.LFG(lt,8),a.LFG(J,8),a.LFG(mt.nm,8))},$e.\u0275prov=a.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"any"}),$e})()},2796:(tn,ot,H)=>{"use strict";H.d(ot,{ST:()=>u0});var a=H(5e3),ne=H(353),z=H(6498),ke=H(5254),Le=H(1086),he=H(6351),Ee=H(1059),pe=H(3489);function be(){return i=>i.lift(new ce)}class ce{call(e,t){return t.subscribe(new de(e))}}class de extends pe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Oe,ie=H(4850),Ie=H(2014),Ge=H(5778),st=H(2198),nt=H(2011),Re=H(9808),ct=(H(1277),H(3942)),me=H(5861),vt=H(9681),gt=H(4859),xt=H(1877),Be=H(2090),mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ye={},ve=ve||{},ae=mt||self;function Ce(){}function Se(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function lt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Gt="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function at(i,e,t){return i.call.apply(i.bind,arguments)}function $e(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Ue(i,e,t){return(Ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:$e).apply(null,arguments)}function Xe(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Qe(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,d,g){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return e.prototype[d].apply(o,I)}}function ht(){this.s=this.s,this.o=this.o}ht.prototype.s=!1,ht.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function J(i){Object.prototype.hasOwnProperty.call(i,Gt)&&i[Gt]||(i[Gt]=++bt)}(this)},ht.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ft=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Nt(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function bn(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Se(o)){const d=i.length||0,g=o.length||0;i.length=d+g;for(let I=0;I<g;I++)i[d+I]=o[I]}else i.push(o)}}function In(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var Qn=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",Ce,e),ae.removeEventListener("test",Ce,e)}catch(t){}return i}();function Rn(i){return/^[\s\xa0]*$/.test(i)}var Wn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function ur(i,e){return i<e?-1:i>e?1:0}function Un(){var i=ae.navigator;return i&&(i=i.userAgent)?i:""}function or(i){return-1!=Un().indexOf(i)}function mr(i){return mr[" "](i),i}mr[" "]=Ce;var Tn,i,rr=or("Opera"),Pr=or("Trident")||or("MSIE"),tr=or("Edge"),nr=tr||Pr,Cr=or("Gecko")&&!(-1!=Un().toLowerCase().indexOf("webkit")&&!or("Edge"))&&!(or("Trident")||or("MSIE"))&&!or("Edge"),an=-1!=Un().toLowerCase().indexOf("webkit")&&!or("Edge");function fr(){var i=ae.document;return i?i.documentMode:void 0}e:{var gn="",Tt=(i=Un(),Cr?/rv:([^\);]+)(\)|;)/.exec(i):tr?/Edge\/([\d\.]+)/.exec(i):Pr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):an?/WebKit\/(\S+)/.exec(i):rr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Tt&&(gn=Tt?Tt[1]:""),Pr){var yr=fr();if(null!=yr&&yr>parseFloat(gn)){Tn=String(yr);break e}}Tn=gn}var Bn={};var ji=ae.document&&Pr&&(fr()||parseInt(Tn,10))||void 0;function Fn(i,e){if(In.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Cr){e:{try{mr(e.nodeName);var d=!0;break e}catch(g){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:si[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Fn.X.h.call(this)}}Qe(Fn,In);var si={2:"touch",3:"pen",4:"mouse"};Fn.prototype.h=function(){Fn.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Yr=0;function ni(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=d,this.key=++Yr,this.ba=this.ea=!1}function vn(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function $t(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function un(i){const e={};for(const t in i)e[t]=i[t];return e}const Ln="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sn(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let g=0;g<Ln.length;g++)t=Ln[g],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function On(i){this.src=i,this.g={},this.h=0}function je(i,e){var t=e.type;if(t in i.g){var g,o=i.g[t],d=Ft(o,e);(g=0<=d)&&Array.prototype.splice.call(o,d,1),g&&(vn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ne(i,e,t,o){for(var d=0;d<i.length;++d){var g=i[d];if(!g.ba&&g.listener==e&&g.capture==!!t&&g.ha==o)return d}return-1}On.prototype.add=function(i,e,t,o,d){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var I=Ne(i,e,o,d);return-1<I?(e=i[I],t||(e.ea=!1)):((e=new ni(e,this.src,g,!!o,d)).ea=t,i.push(e)),e};var He="closure_lm_"+(1e6*Math.random()|0),dt={};function rt(i,e,t,o,d){if(o&&o.once)return hr(i,e,t,o,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)rt(i,e[g],t,o,d);return null}return t=Mt(t),i&&i[ir]?i.N(e,t,lt(o)?!!o.capture:!!o,d):on(i,e,t,!1,o,d)}function on(i,e,t,o,d,g){if(!e)throw Error("Invalid event type");var I=lt(d)?!!d.capture:!!d,M=Me(i);if(M||(i[He]=M=new On(i)),(t=M.add(e,t,o,I,g)).proxy)return t;if(o=function _n(){const e=Ve;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Qn||(d=I),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(pt(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function hr(i,e,t,o,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)hr(i,e[g],t,o,d);return null}return t=Mt(t),i&&i[ir]?i.O(e,t,lt(o)?!!o.capture:!!o,d):on(i,e,t,!0,o,d)}function wr(i,e,t,o,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)wr(i,e[g],t,o,d);else o=lt(o)?!!o.capture:!!o,t=Mt(t),i&&i[ir]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ne(g=i.g[e],t,o,d))&&(vn(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=Me(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ne(e,t,o,d)),(t=-1<i?e[i]:null)&&Nr(t))}function Nr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[ir])je(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(pt(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=Me(e))?(je(t,i),0==t.h&&(t.src=null,e[He]=null)):vn(i)}}}function pt(i){return i in dt?dt[i]:dt[i]="on"+i}function Ve(i,e){if(i.ba)i=!0;else{e=new Fn(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&Nr(i),i=t.call(o,e)}return i}function Me(i){return(i=i[He])instanceof On?i:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(i){return"function"==typeof i?i:(i[Et]||(i[Et]=function(e){return i.handleEvent(e)}),i[Et])}function hn(){ht.call(this),this.i=new On(this),this.P=this,this.I=null}function fn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new In(e,i);else if(e instanceof In)e.target=e.target||i;else{var d=e;Sn(e=new In(o,i),d)}if(d=!0,t)for(var g=t.length-1;0<=g;g--){var I=e.g=t[g];d=Zt(I,o,!0,e)&&d}if(d=Zt(I=e.g=i,o,!0,e)&&d,d=Zt(I,o,!1,e)&&d,t)for(g=0;g<t.length;g++)d=Zt(I=e.g=t[g],o,!1,e)&&d}function Zt(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var I=e[g];if(I&&!I.ba&&I.capture==t){var M=I.listener,q=I.ha||I.src;I.ea&&je(i.i,I),d=!1!==M.call(q,o)&&d}}return d&&!o.defaultPrevented}Qe(hn,ht),hn.prototype[ir]=!0,hn.prototype.removeEventListener=function(i,e,t,o){wr(this,i,e,t,o)},hn.prototype.M=function(){if(hn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)vn(t[o]);delete i.g[e],i.h--}}this.I=null},hn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},hn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Cn=ae.JSON.stringify;function ar(){var i=Zi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Pi,Fr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ei,i=>i.reset());class ei{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hi(i){ae.setTimeout(()=>{throw i},0)}function vr(i,e){Pi||function Ii(){var i=ae.Promise.resolve(void 0);Pi=function(){i.then(oi)}}(),zn||(Pi(),zn=!0),Zi.add(i,e)}var zn=!1,Zi=new class Hr{constructor(){this.h=this.g=null}add(e,t){const o=Fr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function oi(){for(var i;i=ar();){try{i.h.call(i.g)}catch(t){hi(t)}var e=Fr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}zn=!1}function wi(i,e){hn.call(this),this.h=i||1,this.g=e||ae,this.j=Ue(this.lb,this),this.l=Date.now()}function Qi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Lr(i,e,t){if("function"==typeof i)t&&(i=Ue(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ue(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function bi(i){i.g=Lr(()=>{i.g=null,i.i&&(i.i=!1,bi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Qe(wi,hn),(Oe=wi.prototype).ca=!1,Oe.R=null,Oe.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fn(this,"tick"),this.ca&&(Qi(this),this.start()))}},Oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){wi.X.M.call(this),Qi(this),delete this.g};class Xi extends ht{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bi(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(i){ht.call(this),this.h=i,this.g={}}Qe(Ci,ht);var fi=[];function Fi(i,e,t,o){Array.isArray(t)||(t&&(fi[0]=t.toString()),t=fi);for(var d=0;d<t.length;d++){var g=rt(e,t[d],o||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function ee(i){$t(i.g,function(e,t){this.g.hasOwnProperty(t)&&Nr(e)},i),i.g={}}function we(){this.g=!0}function Ct(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ye(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var I=1;I<d.length;I++)d[I]=""}}}return Cn(t)}catch(M){return e}}(i,t)+(o?" "+o:"")})}Ci.prototype.M=function(){Ci.X.M.call(this),ee(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},we.prototype.Aa=function(){this.g=!1},we.prototype.info=function(){};var yt={},Ot=null;function jt(){return Ot=Ot||new hn}function ln(i){In.call(this,yt.Pa,i)}function An(i){const e=jt();fn(e,new ln(e))}function qn(i,e){In.call(this,yt.STAT_EVENT,i),this.stat=e}function pr(i){const e=jt();fn(e,new qn(e,i))}function kr(i,e){In.call(this,yt.Qa,i),this.size=e}function et(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}yt.Pa="serverreachability",Qe(ln,In),yt.STAT_EVENT="statevent",Qe(qn,In),yt.Qa="timingevent",Qe(kr,In);var Ze={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_t={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ut(){}function Dn(){}Ut.prototype.h=null;var Os,Yn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ui(){In.call(this,"d")}function Br(){In.call(this,"c")}function Sr(){}function Ir(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new Ci(this),this.O=Ji,this.T=new wi(i=nr?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}Qe(ui,In),Qe(Br,In),Qe(Sr,Ut),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Os=new Sr;var Ji=45e3,Zr={},Us={};function ta(i,e,t){i.K=1,i.v=gi(gs(e)),i.s=t,i.P=!0,es(i,null)}function es(i,e){i.F=Date.now(),mi(i),i.A=gs(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),pa(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Xn,i.g=Do(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Xi(Ue(i.La,i,i.g),i.N)),Fi(i.S,i.g,"readystatechange",i.ib),e=i.H?un(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),An(),function Ke(i,e,t,o,d,g){i.info(function(){if(i.g)if(g)for(var I="",M=g.split("&"),q=0;q<M.length;q++){var X=M[q].split("=");if(1<X.length){var ge=X[0];X=X[1];var ze=ge.split("_");I=2<=ze.length&&"type"==ze[1]?I+(ge+"=")+X+"&":I+(ge+"=redacted&")}}else I=null;else I=g;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+I})}(i.j,i.u,i.A,i.m,i.U,i.s)}function js(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Ar(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=cr(i,t),d==Us){4==e&&(i.o=4,pr(14),o=!1),Ct(i.j,i.m,null,"[Incomplete Response]");break}if(d==Zr){i.o=4,pr(15),Ct(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ct(i.j,i.m,d,null),fs(i,d)}js(i)&&d!=Us&&d!=Zr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,pr(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wr(e),e.K=!0,pr(11))):(Ct(i.j,i.m,t,"[Invalid Chunked Response]"),os(i),pi(i))}function cr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Us:(t=Number(e.substring(t,o)),isNaN(t)?Zr:(o+=1)+t>e.length?Us:(e=e.substr(o,t),i.C=o+t,e))}function mi(i){i.V=Date.now()+i.O,Js(i,i.O)}function Js(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=et(Ue(i.gb,i),e)}function Hs(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function pi(i){0==i.l.G||i.I||ii(i.l,i)}function os(i){Hs(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qi(i.T),ee(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function fs(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||br(t.h,i)))if(!i.J&&br(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(X){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Oi(t),Z(t)}Gr(t),pr(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=et(Ue(t.cb,t),6e3));if(1>=Yt(t.h)&&t.ja){try{t.ja()}catch(X){}t.ja=void 0}}else ms(t,11)}else if((i.J||t.g==i)&&Oi(t),!Rn(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let X=d[e];if(t.T=X[0],X=X[1],2==t.G)if("c"==X[0]){t.I=X[1],t.ka=X[2];const ge=X[3];null!=ge&&(t.ma=ge,t.j.info("VER="+t.ma));const ze=X[4];null!=ze&&(t.Ca=ze,t.j.info("SVER="+t.Ca));const St=X[5];null!=St&&"number"==typeof St&&0<St&&(t.J=o=1.5*St,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const Wt=i.g;if(Wt){const Jt=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jt){var g=o.h;g.g||-1==Jt.indexOf("spdy")&&-1==Jt.indexOf("quic")&&-1==Jt.indexOf("h2")||(g.j=g.l,g.g=new Set,g.h&&(na(g,g.h),g.h=null))}if(o.D){const Nn=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(o.za=Nn,_r(o.F,o.D,Nn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var I=i;if((o=t).sa=no(o,o.H?o.ka:null,o.V),I.J){ri(o.h,I);var M=I,q=o.J;q&&M.setTimeout(q),M.B&&(Hs(M),mi(M)),o.g=I}else Kr(o);0<t.i.length&&re(t)}else"stop"!=X[0]&&"close"!=X[0]||ms(t,7);else 3==t.G&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?ms(t,7):F(t):"noop"!=X[0]&&t.l&&t.l.wa(X),t.A=0)}An()}catch(X){}}function Di(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Se(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function ps(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(Se(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function vs(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Se(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length,g=0;g<d;g++)e.call(void 0,o[g],t&&t[g],i)}(Oe=Ir.prototype).setTimeout=function(i){this.O=i},Oe.ib=function(i){i=i.target;const e=this.L;e&&3==us(i)?e.l():this.La(i)},Oe.La=function(i){try{if(i==this.g)e:{const ge=us(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ge)&&(3!=ge||nr||this.g&&(this.h.h||this.g.fa()||Ps(this.g)))){this.I||4!=ge||7==e||An(),Hs(this);var t=this.g.aa();this.Y=t;t:if(js(this)){var o=Ps(this.g);i="";var d=o.length,g=4==us(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){os(this),pi(this);var I="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:g&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==t,function Je(i,e,t,o,d,g,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+g+" "+I})}(this.j,this.u,this.A,this.m,this.U,ge,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var M,q=this.g;if((M=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(M)){var X=M;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,pr(12),os(this),pi(this);break e}Ct(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,fs(this,t)}this.P?(Ar(this,ge,I),nr&&this.i&&3==ge&&(Fi(this.S,this.T,"tick",this.hb),this.T.start())):(Ct(this.j,this.m,I,null),fs(this,I)),4==ge&&os(this),this.i&&!this.I&&(4==ge?ii(this.l,this):(this.i=!1,mi(this)))}else 400==t&&0<I.indexOf("Unknown SID")?(this.o=3,pr(12)):(this.o=0,pr(13)),os(this),pi(this)}}}catch(ge){}},Oe.hb=function(){if(this.g){var i=us(this.g),e=this.g.fa();this.C<e.length&&(Hs(this),Ar(this,i,e),this.i&&4!=i&&mi(this))}},Oe.cancel=function(){this.I=!0,os(this)},Oe.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function _e(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(An(),pr(17)),os(this),this.o=2,pi(this)):Js(this,this.V-i)};var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ts){this.h=void 0!==e?e:i.h,ai(this,i.j),this.s=i.s,this.g=i.g,Ys(this,i.m),this.l=i.l,e=i.i;var t=new Ri;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Gs(this,t),this.o=i.o}else i&&(t=String(i).match(No))?(this.h=!!e,ai(this,t[1]||"",!0),this.s=Jn(t[2]||""),this.g=Jn(t[3]||"",!0),Ys(this,t[4]),this.l=Jn(t[5]||"",!0),Gs(this,t[6]||"",!0),this.o=Jn(t[7]||"")):(this.h=!!e,this.i=new Ri(null,this.h))}function gs(i){return new ts(i)}function ai(i,e,t){i.j=t?Jn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ys(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Gs(i,e,t){e instanceof Ri?(i.i=e,function Ho(i,e){e&&!i.j&&(Vr(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(Kn(this,o),pa(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=_s(e,ls)),i.i=new Ri(e,i.h))}function _r(i,e,t){i.i.set(e,t)}function gi(i){return _r(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Jn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function _s(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ns),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ns(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ts.prototype.toString=function(){var i=[],e=this.j;e&&i.push(_s(e,Rr,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(_s(e,Rr,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(_s(t,"/"==t.charAt(0)?Ts:as,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",_s(t,Es)),i.join("")};var Rr=/[#\/\?@]/g,as=/[#\?:]/g,Ts=/[#\?]/g,ls=/[#\?@]/g,Es=/#/g;function Ri(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Vr(i){i.g||(i.g=new Map,i.h=0,i.i&&function Hi(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var g=i[t].substring(0,o);d=i[t].substring(o+1)}else g=i[t];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Kn(i,e){Vr(i),e=Ks(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function eo(i,e){return Vr(i),e=Ks(i,e),i.g.has(e)}function pa(i,e,t){Kn(i,e),0<t.length&&(i.i=null,i.g.set(Ks(i,e),Nt(t)),i.h+=t.length)}function Ks(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function ks(i){this.l=i||xa,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ga&&ae.g.Ga()&&ae.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=Ri.prototype).add=function(i,e){Vr(this),this.i=null,i=Ks(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(i,e){Vr(this),this.g.forEach(function(t,o){t.forEach(function(d){i.call(e,d,o,this)},this)},this)},Oe.oa=function(){Vr(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const d=i[o];for(let g=0;g<d.length;g++)t.push(e[o])}return t},Oe.W=function(i){Vr(this);let e=[];if("string"==typeof i)eo(this,i)&&(e=e.concat(this.g.get(Ks(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Oe.set=function(i,e){return Vr(this),this.i=null,eo(this,i=Ks(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Oe.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const g=encodeURIComponent(String(o)),I=this.W(o);for(o=0;o<I.length;o++){var d=g;""!==I[o]&&(d+="="+encodeURIComponent(String(I[o]))),i.push(d)}}return this.i=i.join("&")};var xa=10;function bo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Yt(i){return i.h?1:i.g?i.g.size:0}function br(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function na(i,e){i.g?i.g.add(e):i.h=e}function ri(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Li(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Nt(i.i)}function ko(){}function Gi(){this.g=new ko}function Is(i,e,t){const o=t||"";try{Di(i,function(d,g){let I=d;lt(d)&&(I=Cn(d)),e.push(o+g+"="+encodeURIComponent(I))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function G(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(g){}}function B(i){this.l=i.ac||null,this.j=i.jb||!1}function N(i,e){hn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=m,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ks.prototype.cancel=function(){if(this.i=Li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},ko.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},ko.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},Qe(B,Ut),B.prototype.g=function(){return new N(this.l,this.j)},B.prototype.i=function(i){return function(){return i}}({}),Qe(N,hn);var m=0;function k(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function E(i){i.readyState=4,i.l=null,i.j=null,i.A=null,V(i)}function V(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Oe=N.prototype).open=function(i,e){if(this.readyState!=m)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,V(this)},Oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,E(this)),this.readyState=m},Oe.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,V(this)),this.g&&(this.readyState=3,V(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==ae.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;k(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Oe.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?E(this):V(this),3==this.readyState&&k(this)}},Oe.Va=function(i){this.g&&(this.response=this.responseText=i,E(this))},Oe.Ua=function(i){this.g&&(this.response=i,E(this))},Oe.ga=function(){this.g&&E(this)},Oe.setRequestHeader=function(i,e){this.v.append(i,e)},Oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(N.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var oe=ae.JSON.parse;function ut(i){hn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xt,this.K=this.L=!1}Qe(ut,hn);var Xt="",mn=/^https?$/i,Zn=["POST","PUT"];function Ai(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ci(i),ws(i)}function ci(i){i.D||(i.D=!0,fn(i,"complete"),fn(i,"error"))}function ns(i){if(i.h&&void 0!==ve&&(!i.C[1]||4!=us(i)||2!=i.aa()))if(i.v&&4==us(i))Lr(i.Ha,0,i);else if(fn(i,"readystatechange"),4==us(i)){i.h=!1;try{const M=i.aa();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===M){var d=String(i.H).match(No)[1]||null;if(!d&&ae.self&&ae.self.location){var g=ae.self.location.protocol;d=g.substr(0,g.length-1)}o=!mn.test(d?d.toLowerCase():"")}t=o}if(t)fn(i,"complete"),fn(i,"success");else{i.m=6;try{var I=2<us(i)?i.g.statusText:""}catch(q){I=""}i.j=I+" ["+i.aa()+"]",ci(i)}}finally{ws(i)}}}function ws(i,e){if(i.g){bs(i);const t=i.g,o=i.C[0]?Ce:null;i.g=null,i.C=null,e||fn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function bs(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function us(i){return i.g?i.g.readyState:0}function Ps(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Xt:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Co(i){let e="";return $t(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function ra(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Co(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):_r(i,e,t))}function Zs(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ia(i){this.Ca=0,this.i=[],this.j=new we,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zs("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zs("baseRetryDelayMs",5e3,i),this.bb=Zs("retryDelaySeedMs",1e4,i),this.$a=Zs("forwardChannelMaxRetries",2,i),this.ta=Zs("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new ks(i&&i.concurrentRequestLimit),this.Fa=new Gi,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function F(i){if($(i),3==i.G){var e=i.U++,t=gs(i.F);_r(t,"SID",i.I),_r(t,"RID",e),_r(t,"TYPE","terminate"),Pt(i,t),(e=new Ir(i,i.j,e,void 0)).K=2,e.v=gi(gs(t)),t=!1,ae.navigator&&ae.navigator.sendBeacon&&(t=ae.navigator.sendBeacon(e.v.toString(),"")),!t&&ae.Image&&((new Image).src=e.v,t=!0),t||(e.g=Do(e.l,null),e.g.da(e.v)),e.F=Date.now(),mi(e)}to(i)}function Z(i){i.g&&(Wr(i),i.g.cancel(),i.g=null)}function $(i){Z(i),i.u&&(ae.clearTimeout(i.u),i.u=null),Oi(i),i.h.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function re(i){bo(i.h)||i.m||(i.m=!0,vr(i.Ja,i),i.C=0)}function Dt(i,e){var t;t=e?e.m:i.U++;const o=gs(i.F);_r(o,"SID",i.I),_r(o,"RID",t),_r(o,"AID",i.T),Pt(i,o),i.o&&i.s&&ra(o,i.o,i.s),t=new Ir(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=xn(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),na(i.h,t),ta(t,o,e)}function Pt(i,e){i.ia&&$t(i.ia,function(t,o){_r(e,o,t)}),i.l&&Di({},function(t,o){_r(e,o,t)})}function xn(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Ue(i.l.Ra,i.l,i):null;e:{var d=i.i;let g=-1;for(;;){const I=["count="+t];-1==g?0<t?(g=d[0].h,I.push("ofs="+g)):g=0:I.push("ofs="+g);let M=!0;for(let q=0;q<t;q++){let X=d[q].h;const ge=d[q].g;if(X-=g,0>X)g=Math.max(0,d[q].h-100),M=!1;else try{Is(ge,I,"req"+X+"_")}catch(ze){o&&o(ge)}}if(M){o=I.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function Kr(i){i.g||i.u||(i.Z=1,vr(i.Ia,i),i.A=0)}function Gr(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=et(Ue(i.Ia,i),xi(i,i.A)),i.A++,0))}function Wr(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function $r(i){i.g=new Ir(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=gs(i.sa);_r(e,"RID","rpc"),_r(e,"SID",i.I),_r(e,"CI",i.L?"0":"1"),_r(e,"AID",i.T),_r(e,"TYPE","xmlhttp"),Pt(i,e),i.o&&i.s&&ra(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=gi(gs(e)),t.s=null,t.P=!0,es(t,i)}function Oi(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function ii(i,e){var t=null;if(i.g==e){Oi(i),Wr(i),i.g=null;var o=2}else{if(!br(i.h,e))return;t=e.D,ri(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;fn(o=jt(),new kr(o,t)),re(i)}else Kr(i);else if(3==(d=e.o)||0==d&&0<i.pa||!(1==o&&function Pe(i,e){return!(Yt(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=et(Ue(i.Ja,i,e),xi(i,i.C)),i.C++,0)))}(i,e)||2==o&&Gr(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),d){case 1:ms(i,5);break;case 4:ms(i,10);break;case 3:ms(i,6);break;default:ms(i,2)}}function xi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function ms(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Ue(i.kb,i);t||(t=new ts("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||ai(t,"https"),gi(t)),function Ss(i,e){const t=new we;if(ae.Image){const o=new Image;o.onload=Xe(G,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Xe(G,t,o,"TestLoadImage: error",!1,e),o.onabort=Xe(G,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Xe(G,t,o,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else pr(2);i.G=0,i.l&&i.l.va(e),to(i),$(i)}function to(i){if(i.G=0,i.la=[],i.l){const e=Li(i.h);(0!=e.length||0!=i.i.length)&&(bn(i.la,e),bn(i.la,i.i),i.h.i.length=0,Nt(i.i),i.i.length=0),i.l.ua()}}function no(i,e,t){var o=t instanceof ts?gs(t):new ts(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),Ys(o,o.m);else{var d=ae.location;o=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var g=new ts(null,void 0);o&&ai(g,o),e&&(g.g=e),d&&Ys(g,d),t&&(g.l=t),o=g}return e=i.za,(t=i.D)&&e&&_r(o,t,e),_r(o,"VER",i.ma),Pt(i,o),o}function Do(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ut(t&&i.Da&&!i.ra?new B({jb:!0}):i.ra)).Ka(i.H),e}function ho(){}function Qs(){if(Pr&&!(10<=Number(ji)))throw Error("Environmental error: no available transport.")}function Vi(i,e){hn.call(this),this.g=new ia(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Rn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Wi(this)}function Ma(i){ui.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function rs(){Br.call(this),this.status=1}function Wi(i){this.g=i}(Oe=ut.prototype).Ka=function(i){this.L=i},Oe.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Os.g(),this.C=function en(i){return i.h||(i.h=i.i())}(this.u?this.u:Os),this.g.onreadystatechange=Ue(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void Ai(this,g)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)t.set(d,o[d]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const g of o.keys())t.set(g,o.get(g))}o=Array.from(t.keys()).find(g=>"content-type"==g.toLowerCase()),d=ae.FormData&&i instanceof ae.FormData,!(0<=Ft(Zn,e))||o||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[g,I]of t)this.g.setRequestHeader(g,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bs(this),0<this.B&&((this.K=function ti(i){return Pr&&function Dr(){return function zt(i){var e=Bn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Wn(String(Tn)).split("."),t=Wn("9").split("."),o=Math.max(e.length,t.length);for(let I=0;0==i&&I<o;I++){var d=e[I]||"",g=t[I]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;i=ur(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||ur(0==d[2].length,0==g[2].length)||ur(d[2],g[2]),d=d[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ue(this.qa,this)):this.A=Lr(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){Ai(this,g)}},Oe.qa=function(){void 0!==ve&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fn(this,"timeout"),this.abort(8))},Oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,fn(this,"complete"),fn(this,"abort"),ws(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ws(this,!0)),ut.X.M.call(this)},Oe.Ha=function(){this.s||(this.F||this.v||this.l?ns(this):this.fb())},Oe.fb=function(){ns(this)},Oe.aa=function(){try{return 2<us(this)?this.g.status:-1}catch(i){return-1}},Oe.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Oe.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),oe(e)}},Oe.Ea=function(){return this.m},Oe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=ia.prototype).ma=8,Oe.G=1,Oe.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const d=new Ir(this,this.j,i,void 0);let g=this.s;if(this.S&&(g?(g=un(g),Sn(g,this.S)):g=this.S),null!==this.o||this.N||(d.H=g,g=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xn(this,d,e),_r(t=gs(this.F),"RID",i),_r(t,"CVER",22),this.D&&_r(t,"X-HTTP-Session-Id",this.D),Pt(this,t),g&&(this.N?e="headers="+encodeURIComponent(String(Co(g)))+"&"+e:this.o&&ra(t,this.o,g)),na(this.h,d),this.Ya&&_r(t,"TYPE","init"),this.O?(_r(t,"$req",e),_r(t,"SID","null"),d.Z=!0,ta(d,t,null)):ta(d,t,e),this.G=2}}else 3==this.G&&(i?Dt(this,i):0==this.i.length||bo(this.h)||Dt(this))},Oe.Ia=function(){if(this.u=null,$r(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=et(Ue(this.eb,this),i)}},Oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,pr(10),Z(this),$r(this))},Oe.cb=function(){null!=this.v&&(this.v=null,Z(this),Gr(this),pr(19))},Oe.kb=function(i){i?(this.j.info("Successfully pinged google.com"),pr(2)):(this.j.info("Failed to ping google.com"),pr(1))},(Oe=ho.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Ra=function(){},Qs.prototype.g=function(i,e){return new Vi(i,e)},Qe(Vi,hn),Vi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;pr(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=no(i,null,i.V),re(i)},Vi.prototype.close=function(){F(this.g)},Vi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Cn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&re(e)},Vi.prototype.M=function(){this.g.l=null,delete this.j,F(this.g),delete this.g,Vi.X.M.call(this)},Qe(Ma,ui),Qe(rs,Br),Qe(Wi,ho),Wi.prototype.xa=function(){fn(this.g,"a")},Wi.prototype.wa=function(i){fn(this.g,new Ma(i))},Wi.prototype.va=function(i){fn(this.g,new rs)},Wi.prototype.ua=function(){fn(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,Vi.prototype.send=Vi.prototype.u,Vi.prototype.open=Vi.prototype.m,Vi.prototype.close=Vi.prototype.close,Ze.NO_ERROR=0,Ze.TIMEOUT=8,Ze.HTTP_ERROR=6,_t.COMPLETE="complete",Dn.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",hn.prototype.listen=hn.prototype.N,ut.prototype.listenOnce=ut.prototype.O,ut.prototype.getLastError=ut.prototype.Oa,ut.prototype.getLastErrorCode=ut.prototype.Ea,ut.prototype.getStatus=ut.prototype.aa,ut.prototype.getResponseJson=ut.prototype.Sa,ut.prototype.getResponseText=ut.prototype.fa,ut.prototype.send=ut.prototype.da,ut.prototype.setWithCredentials=ut.prototype.Ka;var Dl=ye.createWebChannelTransport=function(){return new Qs},Ul=ye.getStatEventTarget=function(){return jt()},el=ye.ErrorCode=Ze,Wa=ye.EventType=_t,Ra=ye.Event=yt,fo=ye.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Go=ye.FetchXmlHttpFactory=B,po=ye.WebChannel=Dn,hu=ye.XhrIo=ut;const jl="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let ma="9.14.0";const Po=new xt.Yd("@firebase/firestore");function ro(){return Po.logLevel}function rn(i,...e){if(Po.logLevel<=xt.in.DEBUG){const t=e.map(zi);Po.debug(`Firestore (${ma}): ${i}`,...t)}}function yi(i,...e){if(Po.logLevel<=xt.in.ERROR){const t=e.map(zi);Po.error(`Firestore (${ma}): ${i}`,...t)}}function Ws(i,...e){if(Po.logLevel<=xt.in.WARN){const t=e.map(zi);Po.warn(`Firestore (${ma}): ${i}`,...t)}}function zi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function wn(i="Unexpected state"){const e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+i;throw yi(e),new Error(e)}function En(i,e){i||wn()}function cn(i,e){return i}const kt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends Be.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Oa{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ya{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class Fo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Wo{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const g=X=>this.i!==d?(d=this.i,t(X)):Promise.resolve();let I=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ni,e.enqueueRetryable(()=>g(this.currentUser))};const M=()=>{const X=I;e.enqueueRetryable((0,me.Z)(function*(){yield X.promise,yield g(o.currentUser)}))},q=X=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(X=>q(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?q(X):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ni)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(En("string"==typeof o.accessToken),new Oa(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new zr(e)}}class zo{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(En(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Hl{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d}getToken(){return Promise.resolve(new zo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Na{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=g=>{null!=g.error&&rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const I=g.token!==this.A;return this.A=g.token,rn("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>o(g))};const d=g=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.T.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.T.getImmediate({optional:!0});g?d(g):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.A=t.token,new qo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Tl(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class oa{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=Tl(40);for(let g=0;g<d.length;++g)o.length<20&&d[g]<t&&(o+=e.charAt(d[g]%e.length))}return o}}function lr(i,e){return i<e?-1:i>e?1:0}function va(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function cl(i){return i+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qt(kt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qt(kt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Mi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?lr(this.nanoseconds,e.nanoseconds):lr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new er(e)}static min(){return new er(new Mi(0,0))}static max(){return new er(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Yo{constructor(e,t,o){void 0===t?t=0:t>e.length&&wn(),void 0===o?o=e.length-t:o>e.length-t&&wn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===Yo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yo?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const g=e.get(d),I=t.get(d);if(g<I)return-1;if(g>I)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends Yo{construct(e,t,o){return new Qr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Qt(kt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Qr(t)}static emptyPath(){return new Qr([])}}const go=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vi extends Yo{construct(e,t,o){return new vi(e,t,o)}static isValidIdentifier(e){return go.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vi(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const g=()=>{if(0===o.length)throw new Qt(kt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let I=!1;for(;d<e.length;){const M=e[d];if("\\"===M){if(d+1===e.length)throw new Qt(kt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const q=e[d+1];if("\\"!==q&&"."!==q&&"`"!==q)throw new Qt(kt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=q,d+=2}else"`"===M?(I=!I,d++):"."!==M||I?(o+=M,d++):(g(),d++)}if(g(),I)throw new Qt(kt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vi(t)}static emptyPath(){return new vi([])}}class dn{constructor(e){this.path=e}static fromPath(e){return new dn(Qr.fromString(e))}static fromName(e){return new dn(Qr.fromString(e).popFirst(5))}static empty(){return new dn(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dn(new Qr(e.slice()))}}class _a{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function Ko(i){return i.fields.find(e=>2===e.kind)}function di(i){return i.fields.filter(e=>2!==e.kind)}_a.UNKNOWN_ID=-1;class To{constructor(e,t){this.fieldPath=e,this.kind=t}}class ka{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ka(0,So.min())}}function pu(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=er.fromTimestamp(1e9===o?new Mi(t+1,0):new Mi(t,o));return new So(d,dn.empty(),e)}function Gl(i){return new So(i.readTime,i.key,-1)}class So{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new So(er.min(),dn.empty(),-1)}static max(){return new So(er.max(),dn.empty(),-1)}}function gu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=dn.comparator(i.documentKey,e.documentKey),0!==t?t:lr(i.largestBatchId,e.largestBatchId))}const Wl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ao(i){return zl.apply(this,arguments)}function zl(){return zl=(0,me.Z)(function*(i){if(i.code!==kt.FAILED_PRECONDITION||i.message!==Wl)throw i;rn("LocalStore","Unexpectedly lost primary lease")}),zl.apply(this,arguments)}class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rt((o,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(o,d)},this.catchCallback=g=>{this.wrapFailure(t,g).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rt?t:Rt.resolve(t)}catch(t){return Rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.reject(t)}static resolve(e){return new Rt((t,o)=>{t(e)})}static reject(e){return new Rt((t,o)=>{o(e)})}static waitFor(e){return new Rt((t,o)=>{let d=0,g=0,I=!1;e.forEach(M=>{++d,M.next(()=>{++g,I&&g===d&&t()},q=>o(q))}),I=!0,g===d&&t()})}static or(e){let t=Rt.resolve(!1);for(const o of e)t=t.next(d=>d?Rt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,g)=>{o.push(t.call(this,d,g))}),this.waitFor(o)}static mapArray(e,t){return new Rt((o,d)=>{const g=e.length,I=new Array(g);let M=0;for(let q=0;q<g;q++){const X=q;t(e[X]).next(ge=>{I[X]=ge,++M,M===g&&o(I)},ge=>d(ge))}})}static doWhile(e,t){return new Rt((o,d)=>{const g=()=>{!0===e()?t().next(()=>{g()},d):o()};g()})}}class Cs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ni,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ia(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const d=Pa(o.target.error);this.P.reject(new Ia(e,d))}}static open(e,t,o,d){try{return new Cs(t,e.transaction(d,o))}catch(g){throw new Ia(t,g)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(rn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yo(t)}}class io{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===io.D((0,Be.z$)())&&yi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rn("SimpleDb","Removing database:",e),As(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Be.hl)())return!1;if(io.N())return!0;const e=(0,Be.z$)(),t=io.D(e),o=0<t&&t<10,d=io.k(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||g)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(rn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=I=>{o(I.target.result)},g.onblocked=()=>{d(new Ia(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=I=>{const M=I.target.error;d("VersionError"===M.name?new Qt(kt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new Qt(kt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new Ia(e,M))},g.onupgradeneeded=I=>{rn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',I.oldVersion),t.S.$(I.target.result,g.transaction,I.oldVersion,t.version).next(()=>{rn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var g=this;return(0,me.Z)(function*(){const I="readonly"===t;let M=0;for(;;){++M;try{g.db=yield g.F(e);const q=Cs.open(g.db,e,I?"readonly":"readwrite",o),X=d(q).next(ge=>(q.V(),ge)).catch(ge=>(q.abort(ge),Rt.reject(ge))).toPromise();return X.catch(()=>{}),yield q.v,X}catch(q){const X=q,ge="FirebaseError"!==X.name&&M<3;if(rn("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ge),g.close(),!ge)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mo{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return As(this.U.delete())}}class Ia extends Qt{constructor(e,t){super(kt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zo(i){return"IndexedDbTransactionError"===i.name}class yo{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(rn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),As(o)}add(e){return rn("SimpleDb","ADD",this.store.name,e,e),As(this.store.add(e))}get(e){return As(this.store.get(e)).next(t=>(void 0===t&&(t=null),rn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rn("SimpleDb","DELETE",this.store.name,e),As(this.store.delete(e))}count(){return rn("SimpleDb","COUNT",this.store.name),As(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),g=[];return this.H(d,(I,M)=>{g.push(M)}).next(()=>g)}{const d=this.store.getAll(o.range);return new Rt((g,I)=>{d.onerror=M=>{I(M.target.error)},d.onsuccess=M=>{g(M.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Rt((d,g)=>{o.onerror=I=>{g(I.target.error)},o.onsuccess=I=>{d(I.target.result)}})}Y(e,t){rn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const d=this.cursor(o);return this.H(d,(g,I,M)=>M.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.H(d,t)}tt(e){const t=this.cursor({});return new Rt((o,d)=>{t.onerror=g=>{const I=Pa(g.target.error);d(I)},t.onsuccess=g=>{const I=g.target.result;I?e(I.primaryKey,I.value).next(M=>{M?I.continue():o()}):o()}})}H(e,t){const o=[];return new Rt((d,g)=>{e.onerror=I=>{g(I.target.error)},e.onsuccess=I=>{const M=I.target.result;if(!M)return void d();const q=new mo(M),X=t(M.primaryKey,M.value,q);if(X instanceof Rt){const ge=X.catch(ze=>(q.done(),Rt.reject(ze)));o.push(ge)}q.isDone?d():null===q.G?M.continue():M.continue(q.G)}}).next(()=>Rt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function As(i){return new Rt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=Pa(o.target.error);t(d)}})}let za=!1;function Pa(i){const e=io.D((0,Be.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Qt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return za||(za=!0,setTimeout(()=>{throw o},0)),o}}return i}class Fa{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;rn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{rn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){Zo(o)?rn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Ao(o)}yield t.nt(6e4)}))}}class Sl{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let d=t,g=!0;return Rt.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return rn("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,d).next(M=>{d-=M,o.add(I)});g=!1})).next(()=>t-d)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(g=>{const I=g.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(d,g)).next(M=>(rn("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>I.size)}))}ot(e,t){let o=e;return t.changes.forEach((d,g)=>{const I=Gl(g);gu(I,o)>0&&(o=I)}),new So(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class so{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function tl(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Qo(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Lo(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}so.at=-1;class ki{constructor(e,t){this.comparator=e,this.root=t||cs.EMPTY}insert(e,t){return new ki(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cs.BLACK,null,null))}remove(e){return new ki(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cs.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xs(this.root,e,this.comparator,!0)}}class xs{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?o(e.key,t):1,t&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cs{constructor(e,t,o,d,g){this.key=e,this.value=t,this.color=null!=o?o:cs.RED,this.left=null!=d?d:cs.EMPTY,this.right=null!=g?g:cs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,g){return new cs(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const g=o(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===g?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return cs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return cs.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wn();const e=this.left.check();if(e!==this.right.check())throw wn();return e+(this.isRed()?0:1)}}cs.EMPTY=null,cs.RED=!0,cs.BLACK=!1,cs.EMPTY=new class{constructor(){this.size=0}get key(){throw wn()}get value(){throw wn()}get color(){throw wn()}get left(){throw wn()}get right(){throw wn()}copy(i,e,t,o,d){return this}insert(i,e,t){return new cs(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xr{constructor(e){this.comparator=e,this.data=new ki(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new yu(this.data.getIterator())}getIteratorFrom(e){return new yu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=o.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xr(this.comparator);return t.data=e,t}}class yu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function La(i){return i.hasNext()?i.getNext():void 0}class oo{constructor(e){this.fields=e,e.sort(vi.comparator)}static empty(){return new oo([])}unionWith(e){let t=new Xr(vi.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new oo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return va(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class ys{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ys(t)}static fromUint8Array(e){const t=function(o){let d="";for(let g=0;g<o.length;++g)d+=String.fromCharCode(o[g]);return d}(e);return new ys(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return lr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ys.EMPTY_BYTE_STRING=new ys("");const nl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(i){if(En(!!i),"string"==typeof i){let e=0;const t=nl.exec(i);if(En(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:qi(i.seconds),nanos:qi(i.nanos)}}function qi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Xo(i){return"string"==typeof i?ys.fromBase64String(i):ys.fromUint8Array(i)}function T(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function S(i){const e=i.mapValue.fields.__previous_value__;return T(e)?S(e):e}function w(i){const e=Vo(i.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class O{constructor(e,t,o,d,g,I,M,q){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=g,this.forceLongPolling=I,this.autoDetectLongPolling=M,this.useFetchStreams=q}}class j{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new j("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof j&&e.projectId===this.projectId&&e.database===this.database}}function te(i){return null==i}function Ae(i){return 0===i&&1/i==-1/0}function Fe(i){return"number"==typeof i&&Number.isInteger(i)&&!Ae(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const It={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},R={nullValue:"NULL_VALUE"};function U(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?T(i)?4:wa(i)?9007199254740991:10:wn()}function Q(i,e){if(i===e)return!0;const t=U(i);if(t!==U(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return w(i).isEqual(w(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const g=Vo(o.timestampValue),I=Vo(d.timestampValue);return g.seconds===I.seconds&&g.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,Xo(i.bytesValue).isEqual(Xo(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return qi(o.geoPointValue.latitude)===qi(d.geoPointValue.latitude)&&qi(o.geoPointValue.longitude)===qi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return qi(o.integerValue)===qi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const g=qi(o.doubleValue),I=qi(d.doubleValue);return g===I?Ae(g)===Ae(I):isNaN(g)&&isNaN(I)}return!1}(i,e);case 9:return va(i.arrayValue.values||[],e.arrayValue.values||[],Q);case 10:return function(o,d){const g=o.mapValue.fields||{},I=d.mapValue.fields||{};if(tl(g)!==tl(I))return!1;for(const M in g)if(g.hasOwnProperty(M)&&(void 0===I[M]||!Q(g[M],I[M])))return!1;return!0}(i,e);default:return wn()}var d}function fe(i,e){return void 0!==(i.values||[]).find(t=>Q(t,e))}function qe(i,e){if(i===e)return 0;const t=U(i),o=U(e);if(t!==o)return lr(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return lr(i.booleanValue,e.booleanValue);case 2:return function(d,g){const I=qi(d.integerValue||d.doubleValue),M=qi(g.integerValue||g.doubleValue);return I<M?-1:I>M?1:I===M?0:isNaN(I)?isNaN(M)?0:-1:1}(i,e);case 3:return wt(i.timestampValue,e.timestampValue);case 4:return wt(w(i),w(e));case 5:return lr(i.stringValue,e.stringValue);case 6:return function(d,g){const I=Xo(d),M=Xo(g);return I.compareTo(M)}(i.bytesValue,e.bytesValue);case 7:return function(d,g){const I=d.split("/"),M=g.split("/");for(let q=0;q<I.length&&q<M.length;q++){const X=lr(I[q],M[q]);if(0!==X)return X}return lr(I.length,M.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,g){const I=lr(qi(d.latitude),qi(g.latitude));return 0!==I?I:lr(qi(d.longitude),qi(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,g){const I=d.values||[],M=g.values||[];for(let q=0;q<I.length&&q<M.length;++q){const X=qe(I[q],M[q]);if(X)return X}return lr(I.length,M.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===It.mapValue&&g===It.mapValue)return 0;if(d===It.mapValue)return 1;if(g===It.mapValue)return-1;const I=d.fields||{},M=Object.keys(I),q=g.fields||{},X=Object.keys(q);M.sort(),X.sort();for(let ge=0;ge<M.length&&ge<X.length;++ge){const ze=lr(M[ge],X[ge]);if(0!==ze)return ze;const St=qe(I[M[ge]],q[X[ge]]);if(0!==St)return St}return lr(M.length,X.length)}(i.mapValue,e.mapValue);default:throw wn()}}function wt(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return lr(i,e);const t=Vo(i),o=Vo(e),d=lr(t.seconds,o.seconds);return 0!==d?d:lr(t.nanos,o.nanos)}function Ht(i){return sn(i)}function sn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=Vo(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Xo(i.bytesValue).toBase64():"referenceValue"in i?dn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",g=!0;for(const I of o.values||[])g?g=!1:d+=",",d+=sn(I);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let g="{",I=!0;for(const M of d)I?I=!1:g+=",",g+=`${M}:${sn(o.fields[M])}`;return g+"}"}(i.mapValue):wn();var e}function Vn(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function gr(i){return!!i&&"integerValue"in i}function xr(i){return!!i&&"arrayValue"in i}function Pn(i){return!!i&&"nullValue"in i}function ds(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function qs(i){return!!i&&"mapValue"in i}function ao(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Qo(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=ao(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ao(i.arrayValue.values[t]);return e}return Object.assign({},i)}function wa(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function rl(i){return"nullValue"in i?R:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Vn(j.empty(),dn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:wn()}function aa(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Vn(j.empty(),dn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?It:wn()}function il(i,e){const t=qe(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function qa(i,e){const t=qe(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!qs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(t)}setAll(e){let t=vi.emptyPath(),o={},d=[];e.forEach((I,M)=>{if(!t.isImmediateParentOf(M)){const q=this.getFieldsMap(t);this.applyChanges(q,o,d),o={},d=[],t=M.popLast()}I?o[M.lastSegment()]=ao(I):d.push(M.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,o,d)}delete(e){const t=this.field(e.popLast());qs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Q(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];qs(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){Qo(t,(d,g)=>e[d]=g);for(const d of o)delete e[d]}clone(){return new is(ao(this.value))}}function la(i){const e=[];return Qo(i.fields,(t,o)=>{const d=new vi([t]);if(qs(o)){const g=la(o.mapValue).fields;if(0===g.length)e.push(d);else for(const I of g)e.push(d.child(I))}else e.push(d)}),new oo(e)}class li{constructor(e,t,o,d,g,I){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=g,this.documentState=I}static newInvalidDocument(e){return new li(e,0,er.min(),er.min(),is.empty(),0)}static newFoundDocument(e,t,o){return new li(e,1,t,er.min(),o,0)}static newNoDocument(e,t){return new li(e,2,t,er.min(),is.empty(),0)}static newUnknownDocument(e,t){return new li(e,3,t,er.min(),is.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof li&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Al{constructor(e,t=null,o=[],d=[],g=null,I=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=g,this.startAt=I,this.endAt=M,this.ht=null}}function _u(i,e=null,t=[],o=[],d=null,g=null,I=null){return new Al(i,e,t,o,d,g,I)}function xl(i){const e=cn(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+Ht(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),te(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Ht(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Ht(o)).join(",")),e.ht=t}return e.ht}function dl(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!Gd(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!Q(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!xh(i.startAt,e.startAt)&&xh(i.endAt,e.endAt)}function Hu(i){return dn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Tc(i,e){return i.filters.filter(t=>t instanceof Fs&&t.field.isEqual(e))}function $d(i,e,t){let o=R,d=!0;for(const g of Tc(i,e)){let I=R,M=!0;switch(g.op){case"<":case"<=":I=rl(g.value);break;case"==":case"in":case">=":I=g.value;break;case">":I=g.value,M=!1;break;case"!=":case"not-in":I=R}il({value:o,inclusive:d},{value:I,inclusive:M})<0&&(o=I,d=M)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const I=t.position[g];il({value:o,inclusive:d},{value:I,inclusive:t.inclusive})<0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}function Gu(i,e,t){let o=It,d=!0;for(const g of Tc(i,e)){let I=It,M=!0;switch(g.op){case">=":case">":I=aa(g.value),M=!1;break;case"==":case"in":case"<=":I=g.value;break;case"<":I=g.value,M=!1;break;case"!=":case"not-in":I=It}qa({value:o,inclusive:d},{value:I,inclusive:M})>0&&(o=I,d=M)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const I=t.position[g];qa({value:o,inclusive:d},{value:I,inclusive:t.inclusive})>0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}class Fs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new Wu(e,t,o):"array-contains"===t?new td(e,o):"in"===t?new Hd(e,o):"not-in"===t?new nd(e,o):"array-contains-any"===t?new rd(e,o):new Fs(e,t,o)}static lt(e,t,o){return"in"===t?new Ud(e,o):new jd(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(qe(t,this.value)):null!==t&&U(this.value)===U(t)&&this.ft(qe(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Wu extends Fs{constructor(e,t,o){super(e,t,o),this.key=dn.fromName(o.referenceValue)}matches(e){const t=dn.comparator(e.key,this.key);return this.ft(t)}}class Ud extends Fs{constructor(e,t){super(e,"in",t),this.keys=Ah(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class jd extends Fs{constructor(e,t){super(e,"not-in",t),this.keys=Ah(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ah(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>dn.fromName(o.referenceValue))}class td extends Fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return xr(t)&&fe(t.arrayValue,this.value)}}class Hd extends Fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fe(this.value.arrayValue,t)}}class nd extends Fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(fe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fe(this.value.arrayValue,t)}}class rd extends Fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!xr(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>fe(this.value.arrayValue,o))}}class ba{constructor(e,t){this.position=e,this.inclusive=t}}class Ca{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gd(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function zu(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const g=e[d],I=i.position[d];if(o=g.field.isKeyField()?dn.comparator(dn.fromName(I.referenceValue),t.key):qe(I,t.data.field(g.field)),"desc"===g.dir&&(o*=-1),0!==o)break}return o}function xh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Q(i.position[t],e.position[t]))return!1;return!0}class Ya{constructor(e,t=null,o=[],d=[],g=null,I="F",M=null,q=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=g,this.limitType=I,this.startAt=M,this.endAt=q,this._t=null,this.wt=null}}function Wd(i,e,t,o,d,g,I,M){return new Ya(i,e,t,o,d,g,I,M)}function Eu(i){return new Ya(i)}function qu(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function Yu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Sc(i){for(const e of i.filters)if(e.dt())return e.field;return null}function Ku(i){return null!==i.collectionGroup}function hl(i){const e=cn(i);if(null===e._t){e._t=[];const t=Sc(e),o=Yu(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new Ca(t)),e._t.push(new Ca(vi.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e._t.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Ca(vi.keyField(),g))}}}return e._t}function vo(i){const e=cn(i);if(!e.wt)if("F"===e.limitType)e.wt=_u(e.path,e.collectionGroup,hl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of hl(e))t.push(new Ca(g.field,"desc"===g.dir?"asc":"desc"));const o=e.endAt?new ba(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new ba(e.startAt.position,e.startAt.inclusive):null;e.wt=_u(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.wt}function sl(i,e,t){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Jo(i,e){return dl(vo(i),vo(e))&&i.limitType===e.limitType}function id(i){return`${xl(vo(i))}|lt:${i.limitType}`}function ql(i){return`Query(target=${function Bd(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Ht(o.value)}`;var o}).join(", ")}]`),te(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Ht(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Ht(t)).join(",")),`Target(${e})`}(vo(i))}; limitType=${i.limitType})`}function ua(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):dn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,g,I){const M=zu(d,g,I);return d.inclusive?M<=0:M<0}(t.startAt,hl(t),o)||t.endAt&&!function(d,g,I){const M=zu(d,g,I);return d.inclusive?M>=0:M>0}(t.endAt,hl(t),o)));var t,o}function Yl(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Zu(i){return(e,t)=>{let o=!1;for(const d of hl(i)){const g=sd(d,e,t);if(0!==g)return g;o=o||d.field.isKeyField()}return 0}}function sd(i,e,t){const o=i.field.isKeyField()?dn.comparator(e.key,t.key):function(d,g,I){const M=g.data.field(d),q=I.data.field(d);return null!==M&&null!==q?qe(M,q):wn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return wn()}}function Ac(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ae(e)?"-0":e}}function Iu(i){return{integerValue:""+i}}function Kl(i,e){return Fe(e)?Iu(e):Ac(i,e)}class xc{constructor(){this._=void 0}}function Va(i,e,t){return i instanceof fl?function(o,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(g.fields.__previous_value__=d),{mapValue:g}}(t,e):i instanceof Bo?Bi(i,e):i instanceof Ba?Qu(i,e):function(o,d){const g=Mc(o,d),I=Rc(g)+Rc(o.yt);return gr(g)&&gr(o.yt)?Iu(I):Ac(o.It,I)}(i,e)}function xo(i,e,t){return i instanceof Bo?Bi(i,e):i instanceof Ba?Qu(i,e):t}function Mc(i,e){return i instanceof Zl?gr(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class fl extends xc{}class Bo extends xc{constructor(e){super(),this.elements=e}}function Bi(i,e){const t=od(e);for(const o of i.elements)t.some(d=>Q(d,o))||t.push(o);return{arrayValue:{values:t}}}class Ba extends xc{constructor(e){super(),this.elements=e}}function Qu(i,e){let t=od(e);for(const o of i.elements)t=t.filter(d=>!Q(d,o));return{arrayValue:{values:t}}}class Zl extends xc{constructor(e,t){super(),this.It=e,this.yt=t}}function Rc(i){return qi(i.integerValue||i.doubleValue)}function od(i){return xr(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Xu{constructor(e,t){this.field=e,this.transform=t}}class ec{constructor(e,t){this.version=e,this.transformResults=t}}class hs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hs}static exists(e){return new hs(void 0,e)}static updateTime(e){return new hs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ql(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Oc{}function wu(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Xl(i.key,hs.none()):new $a(i.key,i.data,hs.none());{const t=i.data,o=is.empty();let d=new Xr(vi.comparator);for(let g of e.fields)if(!d.has(g)){let I=t.field(g);null===I&&g.length>1&&(g=g.popLast(),I=t.field(g)),null===I?o.delete(g):o.set(g,I),d=d.add(g)}return new pl(i.key,o,new oo(d.toArray()),hs.none())}}function bu(i,e,t){i instanceof $a?function(o,d,g){const I=o.value.clone(),M=Cu(o.fieldTransforms,d,g.transformResults);I.setAll(M),d.convertToFoundDocument(g.version,I).setHasCommittedMutations()}(i,e,t):i instanceof pl?function(o,d,g){if(!Ql(o.precondition,d))return void d.convertToUnknownDocument(g.version);const I=Cu(o.fieldTransforms,d,g.transformResults),M=d.data;M.setAll(ld(o)),M.setAll(I),d.convertToFoundDocument(g.version,M).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tc(i,e,t,o){return i instanceof $a?function(d,g,I,M){if(!Ql(d.precondition,g))return I;const q=d.value.clone(),X=Du(d.fieldTransforms,M,g);return q.setAll(X),g.convertToFoundDocument(g.version,q).setHasLocalMutations(),null}(i,e,t,o):i instanceof pl?function(d,g,I,M){if(!Ql(d.precondition,g))return I;const q=Du(d.fieldTransforms,M,g),X=g.data;return X.setAll(ld(d)),X.setAll(q),g.convertToFoundDocument(g.version,X).setHasLocalMutations(),null===I?null:I.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ge=>ge.field))}(i,e,t,o):(I=t,Ql(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):I);var g,I}function Nc(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),g=Mc(o.transform,d||null);null!=g&&(null===t&&(t=is.empty()),t.set(o.field,g))}return t||null}function ad(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&va(t,o,(d,g)=>function Ju(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof Bo&&o instanceof Bo||t instanceof Ba&&o instanceof Ba?va(t.elements,o.elements,Q):t instanceof Zl&&o instanceof Zl?Q(t.yt,o.yt):t instanceof fl&&o instanceof fl);var t,o}(d,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class $a extends Oc{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class pl extends Oc{constructor(e,t,o,d,g=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function ld(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function Cu(i,e,t){const o=new Map;En(i.length===t.length);for(let d=0;d<t.length;d++){const g=i[d],I=g.transform,M=e.data.field(g.field);o.set(g.field,xo(I,M,t[d]))}return o}function Du(i,e,t){const o=new Map;for(const d of i){const g=d.transform,I=t.data.field(d.field);o.set(d.field,Va(g,I,e))}return o}class Xl extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kc extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ol{constructor(e){this.count=e}}var Ls,Jr;function gl(i){switch(i){default:return wn();case kt.CANCELLED:case kt.UNKNOWN:case kt.DEADLINE_EXCEEDED:case kt.RESOURCE_EXHAUSTED:case kt.INTERNAL:case kt.UNAVAILABLE:case kt.UNAUTHENTICATED:return!1;case kt.INVALID_ARGUMENT:case kt.NOT_FOUND:case kt.ALREADY_EXISTS:case kt.PERMISSION_DENIED:case kt.FAILED_PRECONDITION:case kt.ABORTED:case kt.OUT_OF_RANGE:case kt.UNIMPLEMENTED:case kt.DATA_LOSS:return!0}}function nc(i){if(void 0===i)return yi("GRPC error has no .code"),kt.UNKNOWN;switch(i){case Ls.OK:return kt.OK;case Ls.CANCELLED:return kt.CANCELLED;case Ls.UNKNOWN:return kt.UNKNOWN;case Ls.DEADLINE_EXCEEDED:return kt.DEADLINE_EXCEEDED;case Ls.RESOURCE_EXHAUSTED:return kt.RESOURCE_EXHAUSTED;case Ls.INTERNAL:return kt.INTERNAL;case Ls.UNAVAILABLE:return kt.UNAVAILABLE;case Ls.UNAUTHENTICATED:return kt.UNAUTHENTICATED;case Ls.INVALID_ARGUMENT:return kt.INVALID_ARGUMENT;case Ls.NOT_FOUND:return kt.NOT_FOUND;case Ls.ALREADY_EXISTS:return kt.ALREADY_EXISTS;case Ls.PERMISSION_DENIED:return kt.PERMISSION_DENIED;case Ls.FAILED_PRECONDITION:return kt.FAILED_PRECONDITION;case Ls.ABORTED:return kt.ABORTED;case Ls.OUT_OF_RANGE:return kt.OUT_OF_RANGE;case Ls.UNIMPLEMENTED:return kt.UNIMPLEMENTED;case Ls.DATA_LOSS:return kt.DATA_LOSS;default:return wn()}}(Jr=Ls||(Ls={}))[Jr.OK=0]="OK",Jr[Jr.CANCELLED=1]="CANCELLED",Jr[Jr.UNKNOWN=2]="UNKNOWN",Jr[Jr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jr[Jr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jr[Jr.NOT_FOUND=5]="NOT_FOUND",Jr[Jr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jr[Jr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jr[Jr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jr[Jr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jr[Jr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jr[Jr.ABORTED=10]="ABORTED",Jr[Jr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jr[Jr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jr[Jr.INTERNAL=13]="INTERNAL",Jr[Jr.UNAVAILABLE=14]="UNAVAILABLE",Jr[Jr.DATA_LOSS=15]="DATA_LOSS";class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,g]of o)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,o)=>{for(const[d,g]of o)e(d,g)})}isEmpty(){return Lo(this.inner)}size(){return this.innerSize}}const Pc=new ki(dn.comparator);function ca(){return Pc}const Jl=new ki(dn.comparator);function ml(...i){let e=Jl;for(const t of i)e=e.insert(t.key,t);return e}function ud(i){let e=Jl;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Da(){return yl()}function rc(){return yl()}function yl(){return new al(i=>i.toString(),(i,e)=>i.isEqual(e))}const ic=new ki(dn.comparator),cd=new Xr(dn.comparator);function jr(...i){let e=cd;for(const t of i)e=e.add(t);return e}const Fc=new Xr(lr);function vl(){return Fc}class Ua{constructor(e,t,o,d,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const d=new Map;return d.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new Ua(er.min(),d,vl(),ca(),jr())}}class eu{constructor(e,t,o,d,g){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new eu(o,t,jr(),jr(),jr())}}class Ml{constructor(e,t,o,d){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=d}}class Lc{constructor(e,t){this.targetId=e,this.At=t}}class da{constructor(e,t,o=ys.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Vs{constructor(){this.Rt=0,this.bt=Rl(),this.Pt=ys.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jr(),t=jr(),o=jr();return this.bt.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:wn()}}),new eu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=Rl()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class sc{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ca(),this.qt=ll(),this.Kt=new Xr(lr)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:wn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,d)=>{this.Ht(d)&&t(d)})}Yt(e){const t=e.targetId,o=e.At.count,d=this.Xt(t);if(d){const g=d.target;if(Hu(g))if(0===o){const I=new dn(g.path);this.jt(t,I,li.newNoDocument(I,er.min()))}else En(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((g,I)=>{const M=this.Xt(I);if(M){if(g.current&&Hu(M.target)){const q=new dn(M.target.path);null!==this.Ut.get(q)||this.ee(I,q)||this.jt(I,q,li.newNoDocument(q,e))}g.Dt&&(t.set(I,g.xt()),g.Nt())}});let o=jr();this.qt.forEach((g,I)=>{let M=!0;I.forEachWhile(q=>{const X=this.Xt(q);return!X||2===X.purpose||(M=!1,!1)}),M&&(o=o.add(g))}),this.Ut.forEach((g,I)=>I.setReadTime(e));const d=new Ua(e,t,this.Kt,this.Ut,o);return this.Ut=ca(),this.qt=ll(),this.Kt=new Xr(lr),d}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const d=this.zt(e);this.ee(e,t)?d.kt(t,1):d.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Vs,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Xr(lr),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Vs),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function ll(){return new ki(dn.comparator)}function Rl(){return new ki(dn.comparator)}const ea={asc:"ASCENDING",desc:"DESCENDING"},_l={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Vc{constructor(e,t){this.databaseId=e,this.gt=t}}function El(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _o(i,e){return i.gt?e.toBase64():e.toUint8Array()}function zd(i,e){return El(i,e.toTimestamp())}function Xs(i){return En(!!i),er.fromTimestamp(function(e){const t=Vo(e);return new Mi(t.seconds,t.nanos)}(i))}function oc(i,e){return(t=i,new Qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tu(i){const e=Qr.fromString(i);return En(Er(e)),e}function ul(i,e){return oc(i.databaseId,e.path)}function Ms(i,e){const t=Tu(e);if(t.get(1)!==i.databaseId.projectId)throw new Qt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Qt(kt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new dn(ha(t))}function Su(i,e){return oc(i.databaseId,e)}function Bc(i){const e=Tu(i);return 4===e.length?Qr.emptyPath():ha(e)}function Il(i){return new Qr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ha(i){return En(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function ja(i,e,t){return{name:ul(i,e),fields:t.value.mapValue.fields}}function Ol(i,e,t){const o=Ms(i,e.name),d=Xs(e.updateTime),g=new is({mapValue:{fields:e.fields}}),I=li.newFoundDocument(o,d,g);return t&&I.setHasCommittedMutations(),t?I.setHasCommittedMutations():I}function kl(i,e){let t;if(e instanceof $a)t={update:ja(i,e.key,e.value)};else if(e instanceof Xl)t={delete:ul(i,e.key)};else if(e instanceof pl)t={update:ja(i,e.key,e.data),updateMask:Hn(e.fieldMask)};else{if(!(e instanceof kc))return wn();t={verify:ul(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,g){const I=g.transform;if(I instanceof fl)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Bo)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof Ba)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Zl)return{fieldPath:g.field.canonicalString(),increment:I.yt};throw wn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:zd(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:wn()),t;var d}function $c(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?hs.updateTime(Xs(d.updateTime)):void 0!==d.exists?hs.exists(d.exists):hs.none():hs.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(g,I){let M=null;"setToServerValue"in I?(En("REQUEST_TIME"===I.setToServerValue),M=new fl):"appendMissingElements"in I?M=new Bo(I.appendMissingElements.values||[]):"removeAllFromArray"in I?M=new Ba(I.removeAllFromArray.values||[]):"increment"in I?M=new Zl(g,I.increment):wn();const q=vi.fromServerFormat(I.fieldPath);return new Xu(q,M)}(i,d)):[];var d;if(e.update){const d=Ms(i,e.update.name),g=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new oo((e.updateMask.fieldPaths||[]).map(X=>vi.fromServerFormat(X)));return new pl(d,g,I,t,o)}return new $a(d,g,t,o)}if(e.delete){const d=Ms(i,e.delete);return new Xl(d,t)}if(e.verify){const d=Ms(i,e.verify);return new kc(d,t)}return wn()}function Ha(i,e){return{documents:[Su(i,e.path)]}}function Au(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Su(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Su(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(q){if(0===q.length)return;const X=q.map(ge=>function(ze){if("=="===ze.op){if(ds(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NAN"}};if(Pn(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NULL"}}}else if("!="===ze.op){if(ds(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NOT_NAN"}};if(Pn(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ue(ze.field),op:K(ze.op),value:ze.value}}}(ge));return 1===X.length?X[0]:{compositeFilter:{op:"AND",filters:X}}}(e.filters);d&&(t.structuredQuery.where=d);const g=function(q){if(0!==q.length)return q.map(X=>{return{field:ue((ge=X).field),direction:A(ge.dir)};var ge})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const I=(X=e.limit,i.gt||te(X)?X:{value:X});var X,M,q;return null!==I&&(t.structuredQuery.limit=I),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(q=e.endAt).inclusive,values:q.position}),t}function b(i){let e=Bc(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){En(1===o);const ge=t.from[0];ge.allDescendants?d=ge.collectionId:e=e.child(ge.collectionId)}let g=[];t.where&&(g=_(t.where));let I=[];t.orderBy&&(I=t.orderBy.map(ge=>{return new Ca(tt((ze=ge).field),function(St){switch(St){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction));var ze}));let M=null;t.limit&&(M=function(ge){let ze;return ze="object"==typeof ge?ge.value:ge,te(ze)?null:ze}(t.limit));let q=null;var ge;t.startAt&&(q=new ba((ge=t.startAt).values||[],!!ge.before));let X=null;return t.endAt&&(X=function(ge){return new ba(ge.values||[],!ge.before)}(t.endAt)),Wd(e,d,I,g,M,"F",q,X)}function _(i){return i?void 0!==i.unaryFilter?[pn(i)]:void 0!==i.fieldFilter?[Lt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>_(e)).reduce((e,t)=>e.concat(t)):wn():[]}function A(i){return ea[i]}function K(i){return _l[i]}function ue(i){return{fieldPath:i.canonicalString()}}function tt(i){return vi.fromServerFormat(i.fieldPath)}function Lt(i){return Fs.create(tt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wn()}}(i.fieldFilter.op),i.fieldFilter.value)}function pn(i){switch(i.unaryFilter.op){case"IS_NAN":const e=tt(i.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=tt(i.unaryFilter.field);return Fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=tt(i.unaryFilter.field);return Fs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=tt(i.unaryFilter.field);return Fs.create(d,"!=",{nullValue:"NULL_VALUE"});default:return wn()}}function Hn(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Er(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function $n(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=uo(e)),e=lo(i.get(t),e);return uo(e)}function lo(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const g=i.charAt(d);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function uo(i){return i+"\x01\x01"}function Mo(i){const e=i.length;if(En(e>=2),2===e)return En("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qr.emptyPath();const t=e-2,o=[];let d="";for(let g=0;g<e;){const I=i.indexOf("\x01",g);switch((I<0||I>t)&&wn(),i.charAt(I+1)){case"\x01":const M=i.substring(g,I);let q;0===d.length?q=M:(d+=M,q=d,d=""),o.push(q);break;case"\x10":d+=i.substring(g,I),d+="\0";break;case"\x11":d+=i.substring(g,I+1);break;default:wn()}g=I+2}return new Qr(o)}const dd=["userId","batchId"];function lc(i,e){return[i,$n(e)]}function qd(i,e,t){return[i,$n(e),t]}const Rh={},Yd=["prefixPath","collectionGroup","readTime","documentId"],Oh=["prefixPath","collectionGroup","documentId"],Ta=["collectionGroup","readTime","prefixPath","documentId"],hd=["canonicalId","targetId"],Uc=["targetId","path"],Kd=["path","targetId"],fd=["collectionId","parent"],jc=["indexId","uid"],tu=["uid","sequenceNumber"],pd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Tf=["indexId","uid","orderedDocumentKey"],Sf=["userId","collectionPath","documentId"],Nh=["userId","collectionPath","largestBatchId"],cm=["userId","collectionGroup","largestBatchId"],Bp=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ev=[...Bp,"documentOverlays"],gd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zd=gd,dm=[...Zd,"indexConfiguration","indexState","indexEntries"];class Af extends mu{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Ro(i,e){const t=cn(i);return io.M(t.ie,e)}class kh{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&bu(g,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=tc(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=tc(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=rc();return this.mutations.forEach(d=>{const g=e.get(d.key),I=g.overlayedDocument;let M=this.applyToLocalView(I,g.mutatedFields);M=t.has(d.key)?null:M;const q=wu(I,M);null!==q&&o.set(d.key,q),I.isValidDocument()||I.convertToNoDocument(er.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jr())}isEqual(e){return this.batchId===e.batchId&&va(this.mutations,e.mutations,(t,o)=>ad(t,o))&&va(this.baseMutations,e.baseMutations,(t,o)=>ad(t,o))}}class Ph{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){En(e.mutations.length===o.length);let d=ic;const g=e.mutations;for(let I=0;I<g.length;I++)d=d.insert(g[I].key,o[I].version);return new Ph(e,t,o,d)}}class Fh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class xu{constructor(e,t,o,d,g=er.min(),I=er.min(),M=ys.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=M}withSequenceNumber(e){return new xu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Lh{constructor(e){this.re=e}}function $p(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Hc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:ul(d=i.re,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:El(d,g.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:uc(e.version)};else{if(!e.isUnknownDocument())return wn();o.unknownDocument={path:t.path.toArray(),version:uc(e.version)}}var d,g;return o}function Hc(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function uc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ds(i){const e=new Mi(i.seconds,i.nanoseconds);return er.fromTimestamp(e)}function Mu(i,e){const t=(e.baseMutations||[]).map(g=>$c(i.re,g));for(let g=0;g<e.mutations.length-1;++g){const I=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(I.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const o=e.mutations.map(g=>$c(i.re,g)),d=Mi.fromMillis(e.localWriteTimeMs);return new kh(e.batchId,d,t,o)}function md(i){const e=Ds(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Ds(i.lastLimboFreeSnapshotVersion):er.min();let o;var d;return void 0!==i.query.documents?(En(1===(d=i.query).documents.length),o=vo(Eu(Bc(d.documents[0])))):o=vo(b(i.query)),new xu(o,i.targetId,0,i.lastListenSequenceNumber,e,t,ys.fromBase64String(i.resumeToken))}function Qd(i,e){const t=uc(e.snapshotVersion),o=uc(e.lastLimboFreeSnapshotVersion);let d;d=Hu(e.target)?Ha(i.re,e.target):Au(i.re,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xl(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Xd(i){const e=b({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sl(e,e.limit,"L"):e}function Bh(i,e){return new Fh(e.largestBatchId,$c(i.re,e.overlayMutation))}function nu(i,e){const t=e.path.lastSegment();return[i,$n(e.path.popLast()),t]}function $o(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:uc(o.readTime),documentKey:$n(o.documentKey.path),largestBatchId:o.largestBatchId}}class Ka{getBundleMetadata(e,t){return Gc(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Ds(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Gc(e).put({bundleId:(o=t).id,createTime:uc(Xs(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Up(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Xd(d.bundledQuery),readTime:Ds(d.readTime)};var d})}saveNamedQuery(e,t){return Up(e).put({name:(o=t).name,readTime:uc(Xs(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Gc(i){return Ro(i,"bundles")}function Up(i){return Ro(i,"namedQueries")}class $h{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new $h(e,t.uid||"")}getOverlay(e,t){return ru(e).get(nu(this.userId,t)).next(o=>o?Bh(this.It,o):null)}getOverlays(e,t){const o=Da();return Rt.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&o.set(d,g)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((g,I)=>{const M=new Fh(t,I);d.push(this.ue(e,M))}),Rt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(I=>d.add($n(I.getCollectionPath())));const g=[];return d.forEach(I=>{const M=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);g.push(ru(e).Y("collectionPathOverlayIndex",M))}),Rt.waitFor(g)}getOverlaysForCollection(e,t,o){const d=Da(),g=$n(t),I=IDBKeyRange.bound([this.userId,g,o],[this.userId,g,Number.POSITIVE_INFINITY],!0);return ru(e).W("collectionPathOverlayIndex",I).next(M=>{for(const q of M){const X=Bh(this.It,q);d.set(X.getKey(),X)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const g=Da();let I;const M=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ru(e).Z({index:"collectionGroupOverlayIndex",range:M},(q,X,ge)=>{const ze=Bh(this.It,X);g.size()<d||ze.largestBatchId===I?(g.set(ze.getKey(),ze),I=ze.largestBatchId):ge.done()}).next(()=>g)}ue(e,t){return ru(e).put(function(o,d,g){const[I,M,q]=nu(d,g.mutation.key);return{userId:d,collectionPath:M,documentId:q,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:kl(o.re,g.mutation)}}(this.It,this.userId,t))}}function ru(i){return Ro(i,"documentOverlays")}class iu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(qi(e.integerValue));else if("doubleValue"in e){const o=qi(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ae(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Xo(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?wa(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):wn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const d of Object.keys(o))this._e(d,t),this.ae(o[d],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const d of o)this.ae(d,t)}ge(e,t){this.le(t,37),dn.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function su(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Uh(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const g=su(255&t[d]);if(o+=g,8!==g)break}return o}(i);return Math.ceil(e/8)}iu.Te=new iu;class xf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const d=t.codePointAt(0);this.Ae(240|d>>>18),this.Ae(128|63&d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const d=t.codePointAt(0);this.Pe(240|d>>>18),this.Pe(128|63&d>>>12),this.Pe(128|63&d>>>6),this.Pe(128|63&d)}}this.ve()}De(e){const t=this.Ce(e),o=Uh(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Ne(e){const t=this.Ce(e),o=Uh(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class jp{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Mf{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class cc{constructor(){this.Be=new xf,this.Le=new jp(this.Be),this.Ue=new Mf(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Pl{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,o)}}function dc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=jh(i.arrayValue,e.arrayValue),0!==t?t:(t=jh(i.directionalValue,e.directionalValue),0!==t?t:dn.comparator(i.documentKey,e.documentKey)))}function jh(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class hc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=Ko(e);if(void 0!==t&&!this.ze(t))return!1;const o=di(e);let d=0,g=0;for(;d<o.length&&this.ze(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.je){const I=o[d];if(!this.He(this.je,I)||!this.Je(this.Ge[g++],I))return!1;++d}for(;d<o.length;++d){const I=o[d];if(g>=this.Ge.length||!this.Je(this.Ge[g++],I))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Rf{constructor(){this.Ye=new yd}addToCollectionParentIndex(e,t){return this.Ye.add(t),Rt.resolve()}getCollectionParents(e,t){return Rt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Rt.resolve()}deleteFieldIndex(e,t){return Rt.resolve()}getDocumentsMatchingTarget(e,t){return Rt.resolve(null)}getIndexType(e,t){return Rt.resolve(0)}getFieldIndexes(e,t){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}getMinOffset(e,t){return Rt.resolve(So.min())}getMinOffsetFromCollectionGroup(e,t){return Rt.resolve(So.min())}updateCollectionGroup(e,t,o){return Rt.resolve()}updateIndexEntries(e,t){return Rt.resolve()}}class yd{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Xr(Qr.comparator),g=!d.has(o);return this.index[t]=d.add(o),g}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Xr(Qr.comparator)).toArray()}}const Fl=new Uint8Array(0);class Hp{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new yd,this.Ze=new al(o=>xl(o),(o,d)=>dl(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const g={collectionId:o,parent:$n(d)};return vd(e).put(g)}return Rt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[cl(t),""],!1,!0);return vd(e).W(d).next(g=>{for(const I of g){if(I.collectionId!==t)break;o.push(Mo(I.parent))}return o})}addFieldIndex(e,t){const o=_d(e),d={indexId:(I=t).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var I;delete d.indexId;const g=o.add(d);if(t.indexState){const I=fc(e);return g.next(M=>{I.put($o(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const o=_d(e),d=fc(e),g=ou(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=ou(e);let d=!0;const g=new Map;return Rt.forEach(this.tn(t),I=>this.en(e,I).next(M=>{d&&(d=!!M),g.set(I,M)})).next(()=>{if(d){let I=jr();const M=[];return Rt.forEach(g,(q,X)=>{var ge;rn("IndexedDbIndexManager",`Using index ${ge=q,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(Ei=>`${Ei.fieldPath}:${Ei.kind}`).join(",")}`} to execute ${xl(t)}`);const ze=function(Ei,Io){const Ui=Ko(Io);if(void 0===Ui)return null;for(const Yi of Tc(Ei,Ui.fieldPath))switch(Yi.op){case"array-contains-any":return Yi.value.arrayValue.values||[];case"array-contains":return[Yi.value]}return null}(X,q),St=function(Ei,Io){const Ui=new Map;for(const Yi of di(Io))for(const jo of Tc(Ei,Yi.fieldPath))switch(jo.op){case"==":case"in":Ui.set(Yi.fieldPath.canonicalString(),jo.value);break;case"not-in":case"!=":return Ui.set(Yi.fieldPath.canonicalString(),jo.value),Array.from(Ui.values())}return null}(X,q),Wt=function(Ei,Io){const Ui=[];let Yi=!0;for(const jo of di(Io)){const Sh=0===jo.kind?$d(Ei,jo.fieldPath,Ei.startAt):Gu(Ei,jo.fieldPath,Ei.startAt);Ui.push(Sh.value),Yi&&(Yi=Sh.inclusive)}return new ba(Ui,Yi)}(X,q),Jt=function(Ei,Io){const Ui=[];let Yi=!0;for(const jo of di(Io)){const Sh=0===jo.kind?Gu(Ei,jo.fieldPath,Ei.endAt):$d(Ei,jo.fieldPath,Ei.endAt);Ui.push(Sh.value),Yi&&(Yi=Sh.inclusive)}return new ba(Ui,Yi)}(X,q),Nn=this.nn(q,X,Wt),Gn=this.nn(q,X,Jt),$i=this.sn(q,X,St),ss=this.rn(q.indexId,ze,Nn,Wt.inclusive,Gn,Jt.inclusive,$i);return Rt.forEach(ss,Ei=>o.J(Ei,t.limit).next(Io=>{Io.forEach(Ui=>{const Yi=dn.fromSegments(Ui.documentKey);I.has(Yi)||(I=I.add(Yi),M.push(Yi))})}))}).next(()=>M)}return Rt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,d,g,I,M){const q=(null!=t?t.length:1)*Math.max(o.length,g.length),X=q/(null!=t?t.length:1),ge=[];for(let ze=0;ze<q;++ze){const St=t?this.on(t[ze/X]):Fl,Wt=this.un(e,St,o[ze%X],d),Jt=this.cn(e,St,g[ze%X],I),Nn=M.map(Gn=>this.un(e,St,Gn,!0));ge.push(...this.createRange(Wt,Jt,Nn))}return ge}un(e,t,o,d){const g=new Pl(e,dn.empty(),t,o);return d?g:g.Ke()}cn(e,t,o,d){const g=new Pl(e,dn.empty(),t,o);return d?g.Ke():g}en(e,t){const o=new hc(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let I=null;for(const M of g)o.We(M)&&(!I||M.fields.length>I.fields.length)&&(I=M);return I})}getIndexType(e,t){let o=2;return Rt.forEach(this.tn(t),d=>this.en(e,d).next(g=>{g?0!==o&&g.fields.length<function(I){let M=new Xr(vi.comparator),q=!1;for(const X of I.filters){const ge=X;ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?q=!0:M=M.add(ge.field))}for(const X of I.orderBy)X.field.isKeyField()||(M=M.add(X.field));return M.size+(q?1:0)}(d)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new cc;for(const d of di(e)){const g=t.data.field(d.fieldPath);if(null==g)return null;const I=o.qe(d.kind);iu.Te.ce(g,I)}return o.$e()}on(e){const t=new cc;return iu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new cc;return iu.Te.ce(Vn(this.databaseId,t),o.qe(function(d){const g=di(d);return 0===g.length?0:g[g.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let d=[];d.push(new cc);let g=0;for(const I of di(e)){const M=o[g++];for(const q of d)if(this.ln(t,I.fieldPath)&&xr(M))d=this.fn(d,I,M);else{const X=q.qe(I.kind);iu.Te.ce(M,X)}}return this.dn(d)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const d=[...e],g=[];for(const I of o.arrayValue.values||[])for(const M of d){const q=new cc;q.seed(M.$e()),iu.Te.ce(I,q.qe(t.kind)),g.push(q)}return g}ln(e,t){return!!e.filters.find(o=>o instanceof Fs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=_d(e),d=fc(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(g=>{const I=[];return Rt.forEach(g,M=>d.get([M.indexId,this.uid]).next(q=>{I.push(function(X,ge){const ze=ge?new ka(ge.sequenceNumber,new So(Ds(ge.readTime),new dn(Mo(ge.documentKey)),ge.largestBatchId)):ka.empty(),St=X.fields.map(([Wt,Jt])=>new To(vi.fromServerFormat(Wt),Jt));return new _a(X.indexId,X.collectionGroup,St,ze)}(M,q))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const g=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:lr(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=_d(e),g=fc(e);return this._n(e).next(I=>d.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>Rt.forEach(M,q=>g.put($o(q.indexId,this.user,I,o)))))}updateIndexEntries(e,t){const o=new Map;return Rt.forEach(t,(d,g)=>{const I=o.get(d.collectionGroup);return(I?Rt.resolve(I):this.getFieldIndexes(e,d.collectionGroup)).next(M=>(o.set(d.collectionGroup,M),Rt.forEach(M,q=>this.wn(e,d,q).next(X=>{const ge=this.mn(g,q);return X.isEqual(ge)?Rt.resolve():this.gn(e,g,q,X,ge)}))))})}yn(e,t,o,d){return ou(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,d){return ou(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const d=ou(e);let g=new Xr(dc);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(I,M)=>{g=g.add(new Pl(o.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>g)}mn(e,t){let o=new Xr(dc);const d=this.an(t,e);if(null==d)return o;const g=Ko(t);if(null!=g){const I=e.data.field(g.fieldPath);if(xr(I))for(const M of I.arrayValue.values||[])o=o.add(new Pl(t.indexId,e.key,this.on(M),d))}else o=o.add(new Pl(t.indexId,e.key,Fl,d));return o}gn(e,t,o,d,g){rn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const I=[];return function(M,q,X,ge,ze){const St=M.getIterator(),Wt=q.getIterator();let Jt=La(St),Nn=La(Wt);for(;Jt||Nn;){let Gn=!1,$i=!1;if(Jt&&Nn){const ss=X(Jt,Nn);ss<0?$i=!0:ss>0&&(Gn=!0)}else null!=Jt?$i=!0:Gn=!0;Gn?(ge(Nn),Nn=La(Wt)):$i?(ze(Jt),Jt=La(St)):(Jt=La(St),Nn=La(Wt))}}(d,g,dc,M=>{I.push(this.yn(e,t,o,M))},M=>{I.push(this.pn(e,t,o,M))}),Rt.waitFor(I)}_n(e){let t=1;return fc(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,g)=>{g.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((I,M)=>dc(I,M)).filter((I,M,q)=>!M||0!==dc(I,q[M-1]));const d=[];d.push(e);for(const I of o){const M=dc(I,e),q=dc(I,t);if(0===M)d[0]=e.Ke();else if(M>0&&q<0)d.push(I),d.push(I.Ke());else if(q>0)break}d.push(t);const g=[];for(let I=0;I<d.length;I+=2)g.push(IDBKeyRange.bound([d[I].indexId,this.uid,d[I].arrayValue,d[I].directionalValue,Fl,[]],[d[I+1].indexId,this.uid,d[I+1].arrayValue,d[I+1].directionalValue,Fl,[]]));return g}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ed)}getMinOffset(e,t){return Rt.mapArray(this.tn(t),o=>this.en(e,o).next(d=>d||wn())).next(Ed)}}function vd(i){return Ro(i,"collectionParents")}function ou(i){return Ro(i,"indexEntries")}function _d(i){return Ro(i,"indexConfiguration")}function fc(i){return Ro(i,"indexState")}function Ed(i){En(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const d=i[o].indexState.offset;gu(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new So(e.readTime,e.documentKey,t)}const Ru={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fa{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new fa(e,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jd(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),g=[],I=IDBKeyRange.only(t.batchId);let M=0;const q=o.Z({range:I},(ge,ze,St)=>(M++,St.delete()));g.push(q.next(()=>{En(1===M)}));const X=[];for(const ge of t.mutations){const ze=qd(e,ge.key.path,t.batchId);g.push(d.delete(ze)),X.push(ge.key)}return Rt.waitFor(g).next(()=>X)}function eh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw wn();e=i.noDocument}return JSON.stringify(e).length}fa.DEFAULT_COLLECTION_PERCENTILE=10,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fa.DEFAULT=new fa(41943040,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fa.DISABLED=new fa(-1,0,0);class Id{constructor(e,t,o,d){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=d,this.In={}}static oe(e,t,o,d){En(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Id(g,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).Z({index:"userMutationsIndex",range:o},(d,g,I)=>{t=!1,I.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const g=Wc(e),I=Za(e);return I.add({}).next(M=>{En("number"==typeof M);const q=new kh(M,t,o,d),X=function(St,Wt,Jt){const Nn=Jt.baseMutations.map($i=>kl(St.re,$i)),Gn=Jt.mutations.map($i=>kl(St.re,$i));return{userId:Wt,batchId:Jt.batchId,localWriteTimeMs:Jt.localWriteTime.toMillis(),baseMutations:Nn,mutations:Gn}}(this.It,this.userId,q),ge=[];let ze=new Xr((St,Wt)=>lr(St.canonicalString(),Wt.canonicalString()));for(const St of d){const Wt=qd(this.userId,St.key.path,M);ze=ze.add(St.key.path.popLast()),ge.push(I.put(X)),ge.push(g.put(Wt,Rh))}return ze.forEach(St=>{ge.push(this.indexManager.addToCollectionParentIndex(e,St))}),e.addOnCommittedListener(()=>{this.In[M]=q.keys()}),Rt.waitFor(ge).next(()=>q)})}lookupMutationBatch(e,t){return Za(e).get(t).next(o=>o?(En(o.userId===this.userId),Mu(this.It,o)):null)}Tn(e,t){return this.In[t]?Rt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.In[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let g=null;return Za(e).Z({index:"userMutationsIndex",range:d},(I,M,q)=>{M.userId===this.userId&&(En(M.batchId>=o),g=Mu(this.It,M)),q.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Za(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,g,I)=>{o=g.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Za(e).W("userMutationsIndex",t).next(o=>o.map(d=>Mu(this.It,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=lc(this.userId,t.path),d=IDBKeyRange.lowerBound(o),g=[];return Wc(e).Z({range:d},(I,M,q)=>{const[X,ge,ze]=I,St=Mo(ge);if(X===this.userId&&t.path.isEqual(St))return Za(e).get(ze).next(Wt=>{if(!Wt)throw wn();En(Wt.userId===this.userId),g.push(Mu(this.It,Wt))});q.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Xr(lr);const d=[];return t.forEach(g=>{const I=lc(this.userId,g.path),M=IDBKeyRange.lowerBound(I),q=Wc(e).Z({range:M},(X,ge,ze)=>{const[St,Wt,Jt]=X,Nn=Mo(Wt);St===this.userId&&g.path.isEqual(Nn)?o=o.add(Jt):ze.done()});d.push(q)}),Rt.waitFor(d).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,g=lc(this.userId,o),I=IDBKeyRange.lowerBound(g);let M=new Xr(lr);return Wc(e).Z({range:I},(q,X,ge)=>{const[ze,St,Wt]=q,Jt=Mo(St);ze===this.userId&&o.isPrefixOf(Jt)?Jt.length===d&&(M=M.add(Wt)):ge.done()}).next(()=>this.En(e,M))}En(e,t){const o=[],d=[];return t.forEach(g=>{d.push(Za(e).get(g).next(I=>{if(null===I)throw wn();En(I.userId===this.userId),o.push(Mu(this.It,I))}))}),Rt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return Jd(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Rt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return Wc(e).Z({range:o},(g,I,M)=>{if(g[0]===this.userId){const q=Mo(g[1]);d.push(q)}else M.done()}).next(()=>{En(0===d.length)})})}containsKey(e,t){return Hh(e,this.userId,t)}Rn(e){return Of(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Hh(i,e,t){const o=lc(e,t.path),d=o[1],g=IDBKeyRange.lowerBound(o);let I=!1;return Wc(i).Z({range:g,X:!0},(M,q,X)=>{const[ge,ze,St]=M;ge===e&&ze===d&&(I=!0),X.done()}).next(()=>I)}function Za(i){return Ro(i,"mutations")}function Wc(i){return Ro(i,"documentMutations")}function Of(i){return Ro(i,"mutationQueues")}class pc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new pc(0)}static vn(){return new pc(-1)}}class Nf{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new pc(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>er.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Sn(e,d)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ou(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(En(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let d=0;const g=[];return Ou(e).Z((I,M)=>{const q=md(M);q.sequenceNumber<=t&&null===o.get(q.targetId)&&(d++,g.push(this.removeTargetData(e,q)))}).next(()=>Rt.waitFor(g)).next(()=>d)}forEachTarget(e,t){return Ou(e).Z((o,d)=>{const g=md(d);t(g)})}Vn(e){return kf(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}Sn(e,t){return kf(e).put("targetGlobalKey",t)}Dn(e,t){return Ou(e).put(Qd(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=xl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let g=null;return Ou(e).Z({range:d,index:"queryTargetsIndex"},(I,M,q)=>{const X=md(M);dl(t,X.target)&&(g=X,q.done())}).next(()=>g)}addMatchingKeys(e,t,o){const d=[],g=h(e);return t.forEach(I=>{const M=$n(I.path);d.push(g.put({targetId:o,path:M})),d.push(this.referenceDelegate.addReference(e,o,I))}),Rt.waitFor(d)}removeMatchingKeys(e,t,o){const d=h(e);return Rt.forEach(t,g=>{const I=$n(g.path);return Rt.waitFor([d.delete([o,I]),this.referenceDelegate.removeReference(e,o,g)])})}removeMatchingKeysForTargetId(e,t){const o=h(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=h(e);let g=jr();return d.Z({range:o,X:!0},(I,M,q)=>{const X=Mo(I[1]),ge=new dn(X);g=g.add(ge)}).next(()=>g)}containsKey(e,t){const o=$n(t.path),d=IDBKeyRange.bound([o],[cl(o)],!1,!0);let g=0;return h(e).Z({index:"documentTargetsIndex",X:!0,range:d},([I,M],q,X)=>{0!==I&&(g++,X.done())}).next(()=>g>0)}se(e,t){return Ou(e).get(t).next(o=>o?md(o):null)}}function Ou(i){return Ro(i,"targets")}function kf(i){return Ro(i,"targetGlobal")}function h(i){return Ro(i,"targetDocuments")}function u([i,e],[t,o]){const d=lr(i,t);return 0===d?lr(e,o):d}class c{constructor(e){this.xn=e,this.buffer=new Xr(u),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();u(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;rn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){Zo(o)?rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ao(o)}yield t.Fn(3e5)}))}}class D{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Rt.resolve(so.at);const o=new c(t);return this.$n.forEachTarget(e,d=>o.On(d.sequenceNumber)).next(()=>this.$n.Ln(e,d=>o.On(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(Ru)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ru):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,d,g,I,M,q,X;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),d=this.params.maximumSequenceNumbersToCollect):d=ze,I=Date.now(),this.nthSequenceNumber(e,d))).next(ze=>(o=ze,M=Date.now(),this.removeTargets(e,o,t))).next(ze=>(g=ze,q=Date.now(),this.removeOrphanedDocuments(e,o))).next(ze=>(X=Date.now(),ro()<=xt.in.DEBUG&&rn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ge}ms\n\tDetermined least recently used ${d} in `+(M-I)+`ms\n\tRemoved ${g} targets in `+(q-M)+`ms\n\tRemoved ${ze} documents in `+(X-q)+`ms\nTotal Duration: ${X-ge}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:ze})))}}class P{constructor(e,t){this.db=e,this.garbageCollector=new D(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,d)=>t(d))}addReference(e,t,o){return W(e,o)}removeReference(e,t,o){return W(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return W(e,t)}Gn(e,t){return function(o,d){let g=!1;return Of(o).tt(I=>Hh(o,I,d).next(M=>(M&&(g=!0),Rt.resolve(!M)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Kn(e,(I,M)=>{if(M<=t){const q=this.Gn(e,I).next(X=>{if(!X)return g++,o.getEntry(e,I).next(()=>(o.removeEntry(I,er.min()),h(e).delete([0,$n(I.path)])))});d.push(q)}}).next(()=>Rt.waitFor(d)).next(()=>o.apply(e)).next(()=>g)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return W(e,t)}Kn(e,t){const o=h(e);let d,g=so.at;return o.Z({index:"documentTargetsIndex"},([I,M],{path:q,sequenceNumber:X})=>{0===I?(g!==so.at&&t(new dn(Mo(d)),g),g=X,d=q):g=so.at}).next(()=>{g!==so.at&&t(new dn(Mo(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function W(i,e){return h(i).put((o=i.currentSequenceNumber,{targetId:0,path:$n(e.path),sequenceNumber:o}));var o}class se{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Rt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xe{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return qt(e).put(o)}removeEntry(e,t,o){return qt(e).delete(function(d,g){const I=d.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Hc(g),I[I.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=li.newInvalidDocument(t);return qt(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mn(t))},(d,g)=>{o=this.jn(t,g)}).next(()=>o)}Wn(e,t){let o={size:0,document:li.newInvalidDocument(t)};return qt(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mn(t))},(d,g)=>{o={document:this.jn(t,g),size:eh(g)}}).next(()=>o)}getEntries(e,t){let o=ca();return this.zn(e,t,(d,g)=>{const I=this.jn(d,g);o=o.insert(d,I)}).next(()=>o)}Hn(e,t){let o=ca(),d=new ki(dn.comparator);return this.zn(e,t,(g,I)=>{const M=this.jn(g,I);o=o.insert(g,M),d=d.insert(g,eh(I))}).next(()=>({documents:o,Jn:d}))}zn(e,t,o){if(t.isEmpty())return Rt.resolve();let d=new Xr(Si);t.forEach(q=>d=d.add(q));const g=IDBKeyRange.bound(Mn(d.first()),Mn(d.last())),I=d.getIterator();let M=I.getNext();return qt(e).Z({index:"documentKeyIndex",range:g},(q,X,ge)=>{const ze=dn.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;M&&Si(M,ze)<0;)o(M,null),M=I.getNext();M&&M.isEqual(ze)&&(o(M,X),M=I.hasNext()?I.getNext():null),M?ge.j(Mn(M)):ge.done()}).next(()=>{for(;M;)o(M,null),M=I.hasNext()?I.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),Hc(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qt(e).W(IDBKeyRange.bound(d,g,!0)).next(I=>{let M=ca();for(const q of I){const X=this.jn(dn.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);M=M.insert(X.key,X)}return M})}getAllFromCollectionGroup(e,t,o,d){let g=ca();const I=dr(t,o),M=dr(t,So.max());return qt(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,M,!0)},(q,X,ge)=>{const ze=this.jn(dn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);g=g.insert(ze.key,ze),g.size===d&&ge.done()}).next(()=>g)}newChangeBuffer(e){return new Vt(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bt(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}Qn(e,t){return Bt(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function Vh(i,e){let t;if(e.document)t=Ol(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=dn.fromSegments(e.noDocument.path),d=Ds(e.noDocument.readTime);t=li.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wn();{const o=dn.fromSegments(e.unknownDocument.path),d=Ds(e.unknownDocument.version);t=li.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Mi(o[0],o[1]);return er.fromTimestamp(d)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(er.min()))return o}return li.newInvalidDocument(e)}}function We(i){return new xe(i)}class Vt extends se{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new al(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Xr((g,I)=>lr(g.canonicalString(),I.canonicalString()));return this.changes.forEach((g,I)=>{const M=this.Xn.get(g);if(t.push(this.Yn.removeEntry(e,g,M.readTime)),I.isValidDocument()){const q=$p(this.Yn.It,I);d=d.add(g.path.popLast()),o+=eh(q)-M.size,t.push(this.Yn.addEntry(e,g,q))}else if(o-=M.size,this.trackRemovals){const q=$p(this.Yn.It,I.convertToNoDocument(er.min()));t.push(this.Yn.addEntry(e,g,q))}}),d.forEach(g=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.Yn.updateMetadata(e,o)),Rt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:d})=>(d.forEach((g,I)=>{this.Xn.set(g,{size:I,readTime:o.get(g).readTime})}),o))}}function Bt(i){return Ro(i,"remoteDocumentGlobal")}function qt(i){return Ro(i,"remoteDocumentsV14")}function Mn(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function dr(i,e){const t=e.documentKey.path.toArray();return[i,Hc(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Si(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let g=0;g<t.length-2&&g<o.length-2;++g)if(d=lr(t[g],o[g]),d)return d;return d=lr(t.length,o.length),d||(d=lr(t[t.length-2],o[o.length-2]),d||lr(t[t.length-1],o[o.length-1]))}class Oo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qa{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.getBaseDocument(e,t,o))).next(d=>(null!==o&&tc(o.mutation,d,oo.empty(),Mi.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,jr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=jr()){const d=Da();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(g=>{let I=ml();return g.forEach((M,q)=>{I=I.insert(M,q.overlayedDocument)}),I}))}getOverlayedDocuments(e,t){const o=Da();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,jr()))}populateOverlays(e,t,o){const d=[];return o.forEach(g=>{t.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((I,M)=>{t.set(I,M)})})}computeViews(e,t,o,d){let g=ca();const I=yl(),M=yl();return t.forEach((q,X)=>{const ge=o.get(X.key);d.has(X.key)&&(void 0===ge||ge.mutation instanceof pl)?g=g.insert(X.key,X):void 0!==ge&&(I.set(X.key,ge.mutation.getFieldMask()),tc(ge.mutation,X,ge.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,g).next(q=>(q.forEach((X,ge)=>I.set(X,ge)),t.forEach((X,ge)=>{var ze;return M.set(X,new Oo(ge,null!==(ze=I.get(X))&&void 0!==ze?ze:null))}),M))}recalculateAndSaveOverlays(e,t){const o=yl();let d=new ki((I,M)=>I-M),g=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(I=>{for(const M of I)M.keys().forEach(q=>{const X=t.get(q);if(null===X)return;let ge=o.get(q)||oo.empty();ge=M.applyToLocalView(X,ge),o.set(q,ge);const ze=(d.get(M.batchId)||jr()).add(q);d=d.insert(M.batchId,ze)})}).next(()=>{const I=[],M=d.getReverseIterator();for(;M.hasNext();){const q=M.getNext(),X=q.key,ge=q.value,ze=rc();ge.forEach(St=>{if(!g.has(St)){const Wt=wu(t.get(St),o.get(St));null!==Wt&&ze.set(St,Wt),g=g.add(St)}}),I.push(this.documentOverlayCache.saveOverlays(e,X,ze))}return Rt.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return dn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ku(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(g=>{const I=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-g.size):Rt.resolve(Da());let M=-1,q=g;return I.next(X=>Rt.forEach(X,(ge,ze)=>(M<ze.largestBatchId&&(M=ze.largestBatchId),g.get(ge)?Rt.resolve():this.getBaseDocument(e,ge,ze).next(St=>{q=q.insert(ge,St)}))).next(()=>this.populateOverlays(e,X,g)).next(()=>this.computeViews(e,q,X,jr())).next(ge=>({batchId:M,changes:ud(ge)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dn(t)).next(o=>{let d=ml();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let g=ml();return this.indexManager.getCollectionParents(e,d).next(I=>Rt.forEach(I,M=>{const q=(X=t,ge=M.child(d),new Ya(ge,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,ge;return this.getDocumentsMatchingCollectionQuery(e,q,o).next(X=>{X.forEach((ge,ze)=>{g=g.insert(ge,ze)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(g=>(d=g,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(g=>{g.forEach((M,q)=>{const X=q.getKey();null===d.get(X)&&(d=d.insert(X,li.newInvalidDocument(X)))});let I=ml();return d.forEach((M,q)=>{const X=g.get(M);void 0!==X&&tc(X.mutation,q,oo.empty(),Mi.now()),ua(t,q)&&(I=I.insert(M,q))}),I})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Rt.resolve(li.newInvalidDocument(t))}}class wl{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Rt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:Xs(o.createTime)}),Rt.resolve()}getNamedQuery(e,t){return Rt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Xd(o.bundledQuery),readTime:Xs(o.readTime)}),Rt.resolve();var o}}class zc{constructor(){this.overlays=new ki(dn.comparator),this.es=new Map}getOverlay(e,t){return Rt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Da();return Rt.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&o.set(d,g)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,g)=>{this.ue(e,t,g)}),Rt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.es.get(o);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.es.delete(o)),Rt.resolve()}getOverlaysForCollection(e,t,o){const d=Da(),g=t.length+1,I=new dn(t.child("")),M=this.overlays.getIteratorFrom(I);for(;M.hasNext();){const q=M.getNext().value,X=q.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===g&&q.largestBatchId>o&&d.set(q.getKey(),q)}return Rt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let g=new ki((X,ge)=>X-ge);const I=this.overlays.getIterator();for(;I.hasNext();){const X=I.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>o){let ge=g.get(X.largestBatchId);null===ge&&(ge=Da(),g=g.insert(X.largestBatchId,ge)),ge.set(X.getKey(),X)}}const M=Da(),q=g.getIterator();for(;q.hasNext()&&(q.getNext().value.forEach((X,ge)=>M.set(X,ge)),!(M.size()>=d)););return Rt.resolve(M)}ue(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const I=this.es.get(d.largestBatchId).delete(o.key);this.es.set(d.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new Fh(t,o));let g=this.es.get(t);void 0===g&&(g=jr(),this.es.set(t,g)),this.es.set(t,g.add(o.key))}}class wd{constructor(){this.ns=new Xr(Eo.ss),this.rs=new Xr(Eo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new Eo(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new Eo(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new dn(new Qr([])),o=new Eo(t,e),d=new Eo(t,e+1),g=[];return this.rs.forEachInRange([o,d],I=>{this.cs(I),g.push(I.key)}),g}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new dn(new Qr([])),o=new Eo(t,e),d=new Eo(t,e+1);let g=jr();return this.rs.forEachInRange([o,d],I=>{g=g.add(I.key)}),g}containsKey(e){const t=new Eo(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class Eo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return dn.comparator(e.key,t.key)||lr(e._s,t._s)}static os(e,t){return lr(e._s,t._s)||dn.comparator(e.key,t.key)}}class tv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Xr(Eo.ss)}checkEmpty(e){return Rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const g=this.ws;this.ws++;const I=new kh(g,t,o,d);this.mutationQueue.push(I);for(const M of d)this.gs=this.gs.add(new Eo(M.key,g)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return Rt.resolve(I)}lookupMutationBatch(e,t){return Rt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ps(t+1),g=d<0?0:d;return Rt.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Eo(t,0),d=new Eo(t,Number.POSITIVE_INFINITY),g=[];return this.gs.forEachInRange([o,d],I=>{const M=this.ys(I._s);g.push(M)}),Rt.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Xr(lr);return t.forEach(d=>{const g=new Eo(d,0),I=new Eo(d,Number.POSITIVE_INFINITY);this.gs.forEachInRange([g,I],M=>{o=o.add(M._s)})}),Rt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let g=o;dn.isDocumentKey(g)||(g=g.child(""));const I=new Eo(new dn(g),0);let M=new Xr(lr);return this.gs.forEachWhile(q=>{const X=q.key.path;return!!o.isPrefixOf(X)&&(X.length===d&&(M=M.add(q._s)),!0)},I),Rt.resolve(this.Is(M))}Is(e){const t=[];return e.forEach(o=>{const d=this.ys(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){En(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Rt.forEach(t.mutations,d=>{const g=new Eo(d.key,t.batchId);return o=o.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new Eo(t,0),d=this.gs.firstAfterOrEqual(o);return Rt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Rt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class nv{constructor(e){this.Es=e,this.docs=new ki(dn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),g=d?d.size:0,I=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:I}),this.size+=I-g,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Rt.resolve(o?o.document.mutableCopy():li.newInvalidDocument(t))}getEntries(e,t){let o=ca();return t.forEach(d=>{const g=this.docs.get(d);o=o.insert(d,g?g.document.mutableCopy():li.newInvalidDocument(d))}),Rt.resolve(o)}getAllFromCollection(e,t,o){let d=ca();const g=new dn(t.child("")),I=this.docs.getIteratorFrom(g);for(;I.hasNext();){const{key:M,value:{document:q}}=I.getNext();if(!t.isPrefixOf(M.path))break;M.path.length>t.length+1||gu(Gl(q),o)<=0||(d=d.insert(q.key,q.mutableCopy()))}return Rt.resolve(d)}getAllFromCollectionGroup(e,t,o,d){wn()}As(e,t){return Rt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new rv(this)}getSize(e){return Rt.resolve(this.size)}}class rv extends se{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Yn.addEntry(e,d)):this.Yn.removeEntry(o)}),Rt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class iv{constructor(e){this.persistence=e,this.Rs=new al(t=>xl(t),dl),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.bs=0,this.Ps=new wd,this.targetCount=0,this.vs=pc.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,d)=>t(d)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Rt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new pc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Rt.resolve()}updateTargetData(e,t){return this.Dn(t),Rt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,t,o){let d=0;const g=[];return this.Rs.forEach((I,M)=>{M.sequenceNumber<=t&&null===o.get(M.targetId)&&(this.Rs.delete(I),g.push(this.removeMatchingKeysForTargetId(e,M.targetId)),d++)}),Rt.waitFor(g).next(()=>d)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Rt.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Rt.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const d=this.persistence.referenceDelegate,g=[];return d&&t.forEach(I=>{g.push(d.markPotentiallyOrphaned(e,I))}),Rt.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Rt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Rt.resolve(o)}containsKey(e,t){return Rt.resolve(this.Ps.containsKey(t))}}class hm{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new so(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new iv(this),this.indexManager=new Rf,this.remoteDocumentCache=new nv(o=>this.referenceDelegate.xs(o)),this.It=new Lh(t),this.Ns=new wl(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new zc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new tv(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){rn("MemoryPersistence","Starting transaction:",e);const d=new sv(this.Ss.next());return this.referenceDelegate.ks(),o(d).next(g=>this.referenceDelegate.Os(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Ms(e,t){return Rt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class sv extends mu{constructor(e){super(),this.currentSequenceNumber=e}}class Pf{constructor(e){this.persistence=e,this.Fs=new wd,this.$s=null}static Bs(e){return new Pf(e)}get Ls(){if(this.$s)return this.$s;throw wn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Rt.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Rt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Rt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(d=>this.Ls.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(g=>this.Ls.add(g.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.Ls,o=>{const d=dn.fromPath(o);return this.Us(e,d).next(g=>{g||t.removeEntry(d,er.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Rt.or([()=>Rt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class th{constructor(e){this.It=e}$(e,t,o,d){const g=new Cs("createOrUpgrade",t);var M;o<1&&d>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dd,{unique:!0}),M.createObjectStore("documentMutations"),Nu(e),function(M){M.createObjectStore("remoteDocuments")}(e));let I=Rt.resolve();return o<3&&d>=3&&(0!==o&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Nu(e)),I=I.next(()=>function(M){const q=M.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:er.min().toTimestamp(),targetCount:0};return q.put("targetGlobalKey",X)}(g))),o<4&&d>=4&&(0!==o&&(I=I.next(()=>function(M,q){return q.store("mutations").W().next(X=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dd,{unique:!0});const ge=q.store("mutations"),ze=X.map(St=>ge.put(St));return Rt.waitFor(ze)})}(e,g))),I=I.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(I=I.next(()=>this.qs(g))),o<6&&d>=6&&(I=I.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(g)))),o<7&&d>=7&&(I=I.next(()=>this.Gs(g))),o<8&&d>=8&&(I=I.next(()=>this.Qs(e,g))),o<9&&d>=9&&(I=I.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(I=I.next(()=>this.js(g))),o<11&&d>=11&&(I=I.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(I=I.next(()=>{!function(M){const q=M.createObjectStore("documentOverlays",{keyPath:Sf});q.createIndex("collectionPathOverlayIndex",Nh,{unique:!1}),q.createIndex("collectionGroupOverlayIndex",cm,{unique:!1})}(e)})),o<13&&d>=13&&(I=I.next(()=>function(M){const q=M.createObjectStore("remoteDocumentsV14",{keyPath:Yd});q.createIndex("documentKeyIndex",Oh),q.createIndex("collectionGroupIndex",Ta)}(e)).next(()=>this.Ws(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(I=I.next(()=>this.zs(e,g))),o<15&&d>=15&&(I=I.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:jc}).createIndex("sequenceNumberIndex",tu,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:pd}).createIndex("documentKeyIndex",Tf,{unique:!1})}(e))),I}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,d)=>{t+=eh(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(d=>Rt.forEach(d,g=>{const I=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(M=>Rt.forEach(M,q=>{En(q.userId===g.userId);const X=Mu(this.It,q);return Jd(e,g.userId,X).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return o.Z((I,M)=>{const q=new Qr(I),X=[0,$n(q)];g.push(t.get(X).next(ge=>ge?Rt.resolve():t.put({targetId:0,path:$n(q),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Rt.waitFor(g))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:fd});const o=t.store("collectionParents"),d=new yd,g=I=>{if(d.add(I)){const M=I.lastSegment(),q=I.popLast();return o.put({collectionId:M,parent:$n(q)})}};return t.store("remoteDocuments").Z({X:!0},(I,M)=>{const q=new Qr(I);return g(q.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([I,M,q],X)=>{const ge=Mo(M);return g(ge.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,d)=>{const g=md(d),I=Qd(this.It,g);return t.put(I)})}Ws(e,t){const o=t.store("remoteDocuments"),d=[];return o.Z((g,I)=>{const M=t.store("remoteDocumentsV14"),q=(X=I,X.document?new dn(Qr.fromString(X.document.name).popFirst(5)):X.noDocument?dn.fromSegments(X.noDocument.path):X.unknownDocument?dn.fromSegments(X.unknownDocument.path):wn()).path.toArray();var X;const ge={prefixPath:q.slice(0,q.length-2),collectionGroup:q[q.length-2],documentId:q[q.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};d.push(M.put(ge))}).next(()=>Rt.waitFor(d))}zs(e,t){const o=t.store("mutations"),d=We(this.It),g=new hm(Pf.Bs,this.It.re);return o.W().next(I=>{const M=new Map;return I.forEach(q=>{var X;let ge=null!==(X=M.get(q.userId))&&void 0!==X?X:jr();Mu(this.It,q).keys().forEach(ze=>ge=ge.add(ze)),M.set(q.userId,ge)}),Rt.forEach(M,(q,X)=>{const ge=new zr(X),ze=$h.oe(this.It,ge),St=g.getIndexManager(ge),Wt=Id.oe(ge,this.It,St,g.referenceDelegate);return new Qa(d,Wt,ze,St).recalculateAndSaveOverlaysForDocumentKeys(new Af(t,so.at),q).next()})})}}function Nu(i){i.createObjectStore("targetDocuments",{keyPath:Uc}).createIndex("documentTargetsIndex",Kd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",hd,{unique:!0}),i.createObjectStore("targetGlobal")}const Gp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Wp{constructor(e,t,o,d,g,I,M,q,X,ge,ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=g,this.window=I,this.document=M,this.Js=X,this.Ys=ge,this.Xs=ze,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=St=>Promise.resolve(),!Wp.C())throw new Qt(kt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new P(this,d),this.ii=t+"main",this.It=new Lh(q),this.ri=new io(this.ii,this.Xs,new th(this.It)),this.Cs=new Nf(this.referenceDelegate,this.It),this.remoteDocumentCache=We(this.It),this.Ns=new Ka,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ge&&yi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qt(kt.FAILED_PRECONDITION,Gp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new so(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,me.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Zo(e))return rn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Ff(e).get("owner").next(t=>Rt.resolve(this.mi(t)))}gi(e){return zp(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=Ro(o,"clientMetadata");return d.W().next(g=>{const I=e.Ii(g,18e5),M=g.filter(q=>-1===I.indexOf(q));return Rt.forEach(M,q=>d.delete(q.clientId)).next(()=>M)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Rt.resolve(!0):Ff(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Qt(kt.FAILED_PRECONDITION,Gp);return!1}}return!(!this.networkEnabled||!this.inForeground)||zp(e).W().next(o=>void 0===this.Ii(o,5e3).find(d=>{if(this.clientId!==d.clientId){const I=!this.inForeground&&d.inForeground,M=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||I&&M)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&rn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Af(t,so.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zp(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Id.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Hp(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return $h.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){rn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",g=15===(I=this.Xs)?dm:14===I?Zd:13===I?gd:12===I?ev:11===I?Bp:void wn();var I;let M;return this.ri.runTransaction(e,d,g,q=>(M=new Af(q,this.Ss?this.Ss.next():so.at),"readwrite-primary"===t?this.fi(M).next(X=>!!X||this.di(M)).next(X=>{if(!X)throw yi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Qt(kt.FAILED_PRECONDITION,Wl);return o(M)}).next(X=>this.wi(M).next(()=>X)):this.Vi(M).next(()=>o(M)))).then(q=>(M.raiseOnCommittedEvent(),q))}Vi(e){return Ff(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Qt(kt.FAILED_PRECONDITION,Gp)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ff(e).put("owner",t)}static C(){return io.C()}_i(e){const t=Ff(e);return t.get("owner").next(o=>this.mi(o)?(rn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rt.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(yi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Be.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return yi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){yi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ff(i){return Ro(i,"owner")}function zp(i){return Ro(i,"clientMetadata")}function Lf(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class fm{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=d}static Ci(e,t){let o=jr(),d=jr();for(const g of t.docChanges)switch(g.type){case 0:o=o.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new fm(e,t.fromCache,o,d)}}class qp{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,d){return this.ki(e,t).next(g=>g||this.Oi(e,t,d,o)).next(g=>g||this.Mi(e,t))}ki(e,t){if(qu(t))return Rt.resolve(null);let o=vo(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=sl(t,null,"F"),o=vo(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(g=>{const I=jr(...g);return this.Ni.getDocuments(e,I).next(M=>this.indexManager.getMinOffset(e,o).next(q=>{const X=this.Fi(t,M);return this.$i(t,X,I,q.readTime)?this.ki(e,sl(t,null,"F")):this.Bi(e,X,t,q)}))})))}Oi(e,t,o,d){return qu(t)||d.isEqual(er.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(g=>{const I=this.Fi(t,g);return this.$i(t,I,o,d)?this.Mi(e,t):(ro()<=xt.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ql(t)),this.Bi(e,I,t,pu(d,-1)))})}Fi(e,t){let o=new Xr(Zu(e));return t.forEach((d,g)=>{ua(e,g)&&(o=o.add(g))}),o}$i(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Mi(e,t){return ro()<=xt.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",ql(t)),this.Ni.getDocumentsMatchingQuery(e,t,So.min())}Bi(e,t,o,d){return this.Ni.getDocumentsMatchingQuery(e,o,d).next(g=>(t.forEach(I=>{g=g.insert(I.key,I)}),g))}}class q_{constructor(e,t,o,d){this.persistence=e,this.Li=t,this.It=d,this.Ui=new ki(lr),this.qi=new al(g=>xl(g),dl),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qa(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Yp(i,e,t,o){return new q_(i,e,t,o)}function pm(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,me.Z)(function*(i,e){const t=cn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(g=>(d=g,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(g=>{const I=[],M=[];let q=jr();for(const X of d){I.push(X.batchId);for(const ge of X.mutations)q=q.add(ge.key)}for(const X of g){M.push(X.batchId);for(const ge of X.mutations)q=q.add(ge.key)}return t.localDocuments.getDocuments(o,q).next(X=>({ji:X,removedBatchIds:I,addedBatchIds:M}))})})}),Vf.apply(this,arguments)}function ov(i,e){const t=cn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),g=t.Gi.newChangeBuffer({trackRemovals:!0});return function(I,M,q,X){const ge=q.batch,ze=ge.keys();let St=Rt.resolve();return ze.forEach(Wt=>{St=St.next(()=>X.getEntry(M,Wt)).next(Jt=>{const Nn=q.docVersions.get(Wt);En(null!==Nn),Jt.version.compareTo(Nn)<0&&(ge.applyToRemoteDocument(Jt,q),Jt.isValidDocument()&&(Jt.setReadTime(q.commitVersion),X.addEntry(Jt)))})}),St.next(()=>I.mutationQueue.removeMutationBatch(M,ge))}(t,o,e,g).next(()=>g.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let M=jr();for(let q=0;q<I.mutationResults.length;++q)I.mutationResults[q].transformResults.length>0&&(M=M.add(I.batch.mutations[q].key));return M}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}function gm(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function au(i,e){const t=cn(i),o=e.snapshotVersion;let d=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const I=t.Gi.newChangeBuffer({trackRemovals:!0});d=t.Ui;const M=[];e.targetChanges.forEach((ge,ze)=>{const St=d.get(ze);if(!St)return;M.push(t.Cs.removeMatchingKeys(g,ge.removedDocuments,ze).next(()=>t.Cs.addMatchingKeys(g,ge.addedDocuments,ze)));let Wt=St.withSequenceNumber(g.currentSequenceNumber);var Jt,Nn,Gn;e.targetMismatches.has(ze)?Wt=Wt.withResumeToken(ys.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):ge.resumeToken.approximateByteSize()>0&&(Wt=Wt.withResumeToken(ge.resumeToken,o)),d=d.insert(ze,Wt),Nn=Wt,Gn=ge,(0===(Jt=St).resumeToken.approximateByteSize()||Nn.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Gn.addedDocuments.size+Gn.modifiedDocuments.size+Gn.removedDocuments.size>0)&&M.push(t.Cs.updateTargetData(g,Wt))});let q=ca(),X=jr();if(e.documentUpdates.forEach(ge=>{e.resolvedLimboDocuments.has(ge)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(g,ge))}),M.push(mm(g,I,e.documentUpdates).next(ge=>{q=ge.Wi,X=ge.zi})),!o.isEqual(er.min())){const ge=t.Cs.getLastRemoteSnapshotVersion(g).next(ze=>t.Cs.setTargetsMetadata(g,g.currentSequenceNumber,o));M.push(ge)}return Rt.waitFor(M).next(()=>I.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,q,X)).next(()=>q)}).then(g=>(t.Ui=d,g))}function mm(i,e,t){let o=jr(),d=jr();return t.forEach(g=>o=o.add(g)),e.getEntries(i,o).next(g=>{let I=ca();return t.forEach((M,q)=>{const X=g.get(M);q.isFoundDocument()!==X.isFoundDocument()&&(d=d.add(M)),q.isNoDocument()&&q.version.isEqual(er.min())?(e.removeEntry(M,q.readTime),I=I.insert(M,q)):!X.isValidDocument()||q.version.compareTo(X.version)>0||0===q.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(q),I=I.insert(M,q)):rn("LocalStore","Ignoring outdated watch update for ",M,". Current version:",X.version," Watch version:",q.version)}),{Wi:I,zi:d}})}function ym(i,e){const t=cn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function nh(i,e){const t=cn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Cs.getTargetData(o,e).next(g=>g?(d=g,Rt.resolve(d)):t.Cs.allocateTargetId(o).next(I=>(d=new xu(e,I,0,o.currentSequenceNumber),t.Cs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.Ui.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function rh(i,e,t){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,me.Z)(function*(i,e,t){const o=cn(i),d=o.Ui.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",g,I=>o.persistence.referenceDelegate.removeTarget(I,d)))}catch(I){if(!Zo(I))throw I;rn("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.Ui=o.Ui.remove(e),o.qi.delete(d.target)}),Kp.apply(this,arguments)}function Bf(i,e,t){const o=cn(i);let d=er.min(),g=jr();return o.persistence.runTransaction("Execute query","readonly",I=>function(M,q,X){const ge=cn(M),ze=ge.qi.get(X);return void 0!==ze?Rt.resolve(ge.Ui.get(ze)):ge.Cs.getTargetData(q,X)}(o,I,vo(e)).next(M=>{if(M)return d=M.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(I,M.targetId).next(q=>{g=q})}).next(()=>o.Li.getDocumentsMatchingQuery(I,e,t?d:er.min(),t?g:jr())).next(M=>(_m(o,Yl(e),M),{documents:M,Hi:g})))}function Zp(i,e){const t=cn(i),o=cn(t.Cs),d=t.Ui.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",g=>o.se(g,e).next(I=>I?I.target:null))}function vm(i,e){const t=cn(i),o=t.Ki.get(e)||er.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Gi.getAllFromCollectionGroup(d,e,pu(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(_m(t,e,d),d))}function _m(i,e,t){let o=i.Ki.get(e)||er.min();t.forEach((d,g)=>{g.readTime.compareTo(o)>0&&(o=g.readTime)}),i.Ki.set(e,o)}function qr(){return qr=(0,me.Z)(function*(i,e,t,o){const d=cn(i);let g=jr(),I=ca();for(const X of t){const ge=e.Ji(X.metadata.name);X.document&&(g=g.add(ge));const ze=e.Yi(X);ze.setReadTime(e.Xi(X.metadata.readTime)),I=I.insert(ge,ze)}const M=d.Gi.newChangeBuffer({trackRemovals:!0}),q=yield nh(d,(X=o,vo(Eu(Qr.fromString(`__bundle__/docs/${X}`)))));var X;return d.persistence.runTransaction("Apply bundle documents","readwrite",X=>mm(X,M,I).next(ge=>(M.apply(X),ge)).next(ge=>d.Cs.removeMatchingKeysForTargetId(X,q.targetId).next(()=>d.Cs.addMatchingKeys(X,g,q.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(X,ge.Wi,ge.zi)).next(()=>ge.Wi)))}),qr.apply(this,arguments)}function Em(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,me.Z)(function*(i,e,t=jr()){const o=yield nh(i,vo(Xd(e.bundledQuery))),d=cn(i);return d.persistence.runTransaction("Save named query","readwrite",g=>{const I=Xs(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return d.Ns.saveNamedQuery(g,e);const M=o.withResumeToken(ys.EMPTY_BYTE_STRING,I);return d.Ui=d.Ui.insert(M.targetId,M),d.Cs.updateTargetData(g,M).next(()=>d.Cs.removeMatchingKeysForTargetId(g,o.targetId)).next(()=>d.Cs.addMatchingKeys(g,t,o.targetId)).next(()=>d.Ns.saveNamedQuery(g,e))})}),$f.apply(this,arguments)}function Qp(i,e){return`firestore_clients_${i}_${e}`}function Im(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Xp(i,e){return`firestore_targets_${i}_${e}`}class Gh{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Zi(e,t,o){const d=JSON.parse(o);let g,I="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return I&&d.error&&(I="string"==typeof d.error.message&&"string"==typeof d.error.code,I&&(g=new Qt(d.error.code,d.error.message))),I?new Gh(e,t,d.state,g):(yi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let d,g="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return g&&o.error&&(g="string"==typeof o.error.message&&"string"==typeof o.error.code,g&&(d=new Qt(o.error.code,o.error.message))),g?new Wh(e,o.state,d):(yi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,g=vl();for(let I=0;d&&I<o.activeTargetIds.length;++I)d=Fe(o.activeTargetIds[I]),g=g.add(o.activeTargetIds[I]);return d?new zh(e,g):(yi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Jp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Jp(t.clientId,t.onlineState):(yi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class eg{constructor(){this.activeTargetIds=vl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wm{constructor(e,t,o,d,g){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ki(lr),this.started=!1,this.cr=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.ar=Qp(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new eg),this.lr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const d of t){if(d===e.sr)continue;const g=e.getItem(Qp(e.persistenceKey,d));if(g){const I=zh.Zi(d,g);I&&(e.ur=e.ur.insert(I.clientId,I))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const d=e.yr(o);d&&e.pr(d)}for(const d of e.cr)e.rr(d);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Xp(this.persistenceKey,e));if(o){const d=Wh.Zi(e,o);d&&(t=d.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xp(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.Er(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rn("SharedClientState","READ",e,t),t}setItem(e,t){rn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(rn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void yi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const d=t.vr(o.key);return t.Vr(d,null)}{const d=t.Sr(o.key,o.newValue);if(d)return t.Vr(d.clientId,d)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const d=t.Dr(o.key,o.newValue);if(d)return t.Cr(d)}}else if(t._r.test(o.key)){if(null!==o.newValue){const d=t.Nr(o.key,o.newValue);if(d)return t.kr(d)}}else if(o.key===t.wr){if(null!==o.newValue){const d=t.yr(o.newValue);if(d)return t.pr(d)}}else if(o.key===t.hr){const d=function(g){let I=so.at;if(null!=g)try{const M=JSON.parse(g);En("number"==typeof M),I=M}catch(M){yi("SharedClientState","Failed to read sequence number from WebStorage",M)}return I}(o.newValue);d!==so.at&&t.sequenceNumberHandler(d)}else if(o.key===t.mr){const d=t.Or(o.newValue);yield Promise.all(d.map(g=>t.syncEngine.Mr(g)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const d=new Gh(this.currentUser,e,t,o),g=Im(this.persistenceKey,this.currentUser,e);this.setItem(g,d.tr())}Er(e){const t=Im(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const d=Xp(this.persistenceKey,e),g=new Wh(e,t,o);this.setItem(d,g.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return zh.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),d=Number(o[1]);return Gh.Zi(new zr(void 0!==o[2]?o[2]:null),d,t)}Nr(e,t){const o=this._r.exec(e),d=Number(o[1]);return Wh.Zi(d,t)}yr(e){return Jp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);rn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),d=this.Ir(this.ur),g=this.Ir(o),I=[],M=[];return g.forEach(q=>{d.has(q)||I.push(q)}),d.forEach(q=>{g.has(q)||M.push(q)}),this.syncEngine.Br(I,M).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=vl();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class tg{constructor(){this.Lr=new eg,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new eg,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bm{qr(e){}shutdown(){}}class qc{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const lv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ng{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class rg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,d,g){const I=this.ho(e,t);rn("RestConnection","Sending: ",I,o);const M={};return this.lo(M,d,g),this.fo(e,I,M,o).then(q=>(rn("RestConnection","Received: ",q),q),q=>{throw Ws("RestConnection",`${e} failed with error: `,q,"url: ",I,"request:",o),q})}_o(e,t,o,d,g,I){return this.ao(e,t,o,d,g)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+ma,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,g)=>e[g]=d),o&&o.headers.forEach((d,g)=>e[g]=d)}ho(e,t){return`${this.oo}/v1/${t}:${lv[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,d){return new Promise((g,I)=>{const M=new hu;M.setWithCredentials(!0),M.listenOnce(Wa.COMPLETE,()=>{var X;try{switch(M.getLastErrorCode()){case el.NO_ERROR:const ge=M.getResponseJson();rn("Connection","XHR received:",JSON.stringify(ge)),g(ge);break;case el.TIMEOUT:rn("Connection",'RPC "'+e+'" timed out'),I(new Qt(kt.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:const ze=M.getStatus();if(rn("Connection",'RPC "'+e+'" failed with status:',ze,"response text:",M.getResponseText()),ze>0){let St=M.getResponseJson();Array.isArray(St)&&(St=St[0]);const Wt=null===(X=St)||void 0===X?void 0:X.error;if(Wt&&Wt.status&&Wt.message){const Jt=function(Nn){const Gn=Nn.toLowerCase().replace(/_/g,"-");return Object.values(kt).indexOf(Gn)>=0?Gn:kt.UNKNOWN}(Wt.status);I(new Qt(Jt,Wt.message))}else I(new Qt(kt.UNKNOWN,"Server responded with status "+M.getStatus()))}else I(new Qt(kt.UNAVAILABLE,"Connection failed."));break;default:wn()}}finally{rn("Connection",'RPC "'+e+'" completed.')}});const q=JSON.stringify(d);M.send(t,"POST",q,o,15)})}wo(e,t,o){const d=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Dl(),I=Ul(),M={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(M.xmlHttpFactory=new Go({})),this.lo(M.initMessageHeaders,t,o),M.encodeInitMessageHeaders=!0;const q=d.join("");rn("Connection","Creating WebChannel: "+q,M);const X=g.createWebChannel(q,M);let ge=!1,ze=!1;const St=new ng({Hr:Jt=>{ze?rn("Connection","Not sending because WebChannel is closed:",Jt):(ge||(rn("Connection","Opening WebChannel transport."),X.open(),ge=!0),rn("Connection","WebChannel sending:",Jt),X.send(Jt))},Jr:()=>X.close()}),Wt=(Jt,Nn,Gn)=>{Jt.listen(Nn,$i=>{try{Gn($i)}catch(ss){setTimeout(()=>{throw ss},0)}})};return Wt(X,po.EventType.OPEN,()=>{ze||rn("Connection","WebChannel transport opened.")}),Wt(X,po.EventType.CLOSE,()=>{ze||(ze=!0,rn("Connection","WebChannel transport closed"),St.io())}),Wt(X,po.EventType.ERROR,Jt=>{ze||(ze=!0,Ws("Connection","WebChannel transport errored:",Jt),St.io(new Qt(kt.UNAVAILABLE,"The operation could not be completed")))}),Wt(X,po.EventType.MESSAGE,Jt=>{var Nn;if(!ze){const Gn=Jt.data[0];En(!!Gn);const $i=Gn,ss=$i.error||(null===(Nn=$i[0])||void 0===Nn?void 0:Nn.error);if(ss){rn("Connection","WebChannel received error:",ss);const Ei=ss.status;let Io=function(Yi){const jo=Ls[Yi];if(void 0!==jo)return nc(jo)}(Ei),Ui=ss.message;void 0===Io&&(Io=kt.INTERNAL,Ui="Unknown error status: "+Ei+" with message "+ss.message),ze=!0,St.io(new Qt(Io,Ui)),X.close()}else rn("Connection","WebChannel received:",Gn),St.ro(Gn)}}),Wt(I,Ra.STAT_EVENT,Jt=>{Jt.stat===fo.PROXY?rn("Connection","Detected buffering proxy"):Jt.stat===fo.NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(()=>{St.so()},0),St}}function Cm(){return"undefined"!=typeof window?window:null}function ig(){return"undefined"!=typeof document?document:null}function Uf(i){return new Vc(i,!0)}class Dm{constructor(e,t,o=1e3,d=1.5,g=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=d,this.po=g,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),d=Math.max(0,t-o);d>0&&rn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Tm{constructor(e,t,o,d,g,I,M,q){this.Hs=e,this.vo=o,this.Vo=d,this.connection=g,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=M,this.listener=q,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Dm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,me.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===kt.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===kt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.So===t&&this.Go(o,d)},o=>{e(()=>{const d=new Qt(kt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(d)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(d=>{o(()=>this.Qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return rn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sm extends Tm{constructor(e,t,o,d,g,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,I),this.It=g}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Nl(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===q?1:"REMOVE"===q?2:"CURRENT"===q?3:"RESET"===q?4:wn(),d=e.targetChange.targetIds||[],g=function(q,X){return q.gt?(En(void 0===X||"string"==typeof X),ys.fromBase64String(X||"")):(En(void 0===X||X instanceof Uint8Array),ys.fromUint8Array(X||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,M=I&&function(q){const X=void 0===q.code?kt.UNKNOWN:nc(q.code);return new Qt(X,q.message||"")}(I);t=new da(o,d,g,M||null)}else if("documentChange"in e){const o=e.documentChange,d=Ms(i,o.document.name),g=Xs(o.document.updateTime),I=new is({mapValue:{fields:o.document.fields}}),M=li.newFoundDocument(d,g,I);t=new Ml(o.targetIds||[],o.removedTargetIds||[],M.key,M)}else if("documentDelete"in e){const o=e.documentDelete,d=Ms(i,o.document),g=o.readTime?Xs(o.readTime):er.min(),I=li.newNoDocument(d,g);t=new Ml([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,d=Ms(i,o.document);t=new Ml([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return wn();{const o=e.filter,g=new ol(o.count||0);t=new Lc(o.targetId,g)}}var q;return t}(this.It,e),o=function(d){if(!("targetChange"in d))return er.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?er.min():g.readTime?Xs(g.readTime):er.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=Il(this.It),t.addTarget=function(d,g){let I;const M=g.target;return I=Hu(M)?{documents:Ha(d,M)}:{query:Au(d,M)},I.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?I.resumeToken=_o(d,g.resumeToken):g.snapshotVersion.compareTo(er.min())>0&&(I.readTime=El(d,g.snapshotVersion.toTimestamp())),I}(this.It,e);const o=function p(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=Il(this.It),t.removeTarget=e,this.Bo(t)}}class Y_ extends Tm{constructor(e,t,o,d,g,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,I),this.It=g,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Mh(i,e){return i&&i.length>0?(En(void 0!==e),i.map(t=>function(o,d){let g=Xs(o.updateTime?o.updateTime:d);return g.isEqual(er.min())&&(g=Xs(d)),new ec(g,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=Xs(e.commitTime);return this.listener.Zo(o,t)}return En(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Il(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>kl(this.It,o))};this.Bo(t)}}class uv extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.It=d,this.nu=!1}su(){if(this.nu)throw new Qt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.ao(e,t,o,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Qt(kt.UNKNOWN,d.toString())})}_o(e,t,o,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,I])=>this.connection._o(e,t,o,g,I,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===kt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Qt(kt.UNKNOWN,g.toString())})}terminate(){this.nu=!0}}class Am{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(yi(t),this.ou=!1):rn("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class jf{constructor(e,t,o,d,g){var I=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=g,this.mu.qr(M=>{o.enqueueAndForget((0,me.Z)(function*(){var q;ku(I)&&(rn("RemoteStore","Restarting streams for network reachability change."),yield(q=(0,me.Z)(function*(X){const ge=cn(X);ge._u.add(4),yield sh(ge),ge.gu.set("Unknown"),ge._u.delete(4),yield qh(ge)}),function(X){return q.apply(this,arguments)})(I))}))}),this.gu=new Am(o,d)}}function qh(i){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,me.Z)(function*(i){if(ku(i))for(const e of i.wu)yield e(!0)}),Hf.apply(this,arguments)}function sh(i){return og.apply(this,arguments)}function og(){return og=(0,me.Z)(function*(i){for(const e of i.wu)yield e(!1)}),og.apply(this,arguments)}function Gf(i,e){const t=cn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Wf(t)?ug(t):uh(t).ko()&&ag(t,e))}function Yh(i,e){const t=cn(i),o=uh(t);t.du.delete(e),o.ko()&&lg(t,e),0===t.du.size&&(o.ko()?o.Fo():ku(t)&&t.gu.set("Unknown"))}function ag(i,e){i.yu.Mt(e.targetId),uh(i).zo(e)}function lg(i,e){i.yu.Mt(e),uh(i).Ho(e)}function ug(i){i.yu=new sc({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),uh(i).start(),i.gu.uu()}function Wf(i){return ku(i)&&!uh(i).No()&&i.du.size>0}function ku(i){return 0===cn(i)._u.size}function zf(i){i.yu=void 0}function K_(i){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,me.Z)(function*(i){i.du.forEach((e,t)=>{ag(i,e)})}),Kh.apply(this,arguments)}function cv(i,e){return xm.apply(this,arguments)}function xm(){return xm=(0,me.Z)(function*(i,e){zf(i),Wf(i)?(i.gu.hu(e),ug(i)):i.gu.set("Unknown")}),xm.apply(this,arguments)}function oh(i,e,t){return qf.apply(this,arguments)}function qf(){return qf=(0,me.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof da&&2===e.state&&e.cause)try{yield(o=(0,me.Z)(function*(d,g){const I=g.cause;for(const M of g.targetIds)d.du.has(M)&&(yield d.remoteSyncer.rejectListen(M,I),d.du.delete(M),d.yu.removeTarget(M))}),function(d,g){return o.apply(this,arguments)})(i,e)}catch(o){rn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Zh(i,o)}else if(e instanceof Ml?i.yu.Gt(e):e instanceof Lc?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(er.min()))try{const o=yield gm(i.localStore);t.compareTo(o)>=0&&(yield function(d,g){const I=d.yu.te(g);return I.targetChanges.forEach((M,q)=>{if(M.resumeToken.approximateByteSize()>0){const X=d.du.get(q);X&&d.du.set(q,X.withResumeToken(M.resumeToken,g))}}),I.targetMismatches.forEach(M=>{const q=d.du.get(M);if(!q)return;d.du.set(M,q.withResumeToken(ys.EMPTY_BYTE_STRING,q.snapshotVersion)),lg(d,M);const X=new xu(q.target,M,1,q.sequenceNumber);ag(d,X)}),d.remoteSyncer.applyRemoteEvent(I)}(i,t))}catch(o){rn("RemoteStore","Failed to raise snapshot:",o),yield Zh(i,o)}var o}),qf.apply(this,arguments)}function Zh(i,e,t){return ah.apply(this,arguments)}function ah(){return ah=(0,me.Z)(function*(i,e,t){if(!Zo(e))throw e;i._u.add(1),yield sh(i),i.gu.set("Offline"),t||(t=()=>gm(i.localStore)),i.asyncQueue.enqueueRetryable((0,me.Z)(function*(){rn("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield qh(i)}))}),ah.apply(this,arguments)}function Ll(i,e){return e().catch(t=>Zh(i,t,e))}function bd(i){return cg.apply(this,arguments)}function cg(){return cg=(0,me.Z)(function*(i){const e=cn(i),t=Yc(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;dg(e);)try{const d=yield ym(e.localStore,o);if(null===d){0===e.fu.length&&t.Fo();break}o=d.batchId,gc(e,d)}catch(d){yield Zh(e,d)}Yf(e)&&hg(e)}),cg.apply(this,arguments)}function dg(i){return ku(i)&&i.fu.length<10}function gc(i,e){i.fu.push(e);const t=Yc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Yf(i){return ku(i)&&!Yc(i).No()&&i.fu.length>0}function hg(i){Yc(i).start()}function fg(i){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,me.Z)(function*(i){Yc(i).eu()}),Mm.apply(this,arguments)}function Rm(i){return Om.apply(this,arguments)}function Om(){return Om=(0,me.Z)(function*(i){const e=Yc(i);for(const t of i.fu)e.Xo(t.mutations)}),Om.apply(this,arguments)}function Kf(i,e,t){return lh.apply(this,arguments)}function lh(){return lh=(0,me.Z)(function*(i,e,t){const o=i.fu.shift(),d=Ph.from(o,e,t);yield Ll(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield bd(i)}),lh.apply(this,arguments)}function pg(i,e){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,me.Z)(function*(i,e){var t;e&&Yc(i).Yo&&(yield(t=(0,me.Z)(function*(o,d){if(gl(g=d.code)&&g!==kt.ABORTED){const I=o.fu.shift();Yc(o).Mo(),yield Ll(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,d)),yield bd(o)}var g}),function(o,d){return t.apply(this,arguments)})(i,e)),Yf(i)&&hg(i)}),Qh.apply(this,arguments)}function Zf(i,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,me.Z)(function*(i,e){const t=cn(i);t.asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials");const o=ku(t);t._u.add(3),yield sh(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield qh(t)}),Nm.apply(this,arguments)}function gg(i,e){return mg.apply(this,arguments)}function mg(){return mg=(0,me.Z)(function*(i,e){const t=cn(i);e?(t._u.delete(2),yield qh(t)):e||(t._u.add(2),yield sh(t),t.gu.set("Unknown"))}),mg.apply(this,arguments)}function uh(i){return i.pu||(i.pu=function(e,t,o){const d=cn(e);return d.su(),new Sm(t,d.connection,d.authCredentials,d.appCheckCredentials,d.It,o)}(i.datastore,i.asyncQueue,{Yr:K_.bind(null,i),Zr:cv.bind(null,i),Wo:oh.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.pu.Mo(),Wf(i)?ug(i):i.gu.set("Unknown")):(yield i.pu.stop(),zf(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function Yc(i){return i.Iu||(i.Iu=function(e,t,o){const d=cn(e);return d.su(),new Y_(t,d.connection,d.authCredentials,d.appCheckCredentials,d.It,o)}(i.datastore,i.asyncQueue,{Yr:fg.bind(null,i),Zr:pg.bind(null,i),tu:Rm.bind(null,i),Zo:Kf.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.Iu.Mo(),yield bd(i)):(yield i.Iu.stop(),i.fu.length>0&&(rn("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Qf{constructor(e,t,o,d,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=g,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,t,o,d,g){const I=Date.now()+o,M=new Qf(e,t,I,d,g);return M.start(o),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qt(kt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xh(i,e){if(yi("AsyncQueue",`${e}: ${i}`),Zo(i))return new Qt(kt.UNAVAILABLE,`${e}: ${i}`);throw i}class ch{constructor(e){this.comparator=e?(t,o)=>e(t,o)||dn.comparator(t.key,o.key):(t,o)=>dn.comparator(t.key,o.key),this.keyedMap=ml(),this.sortedSet=new ki(this.comparator)}static emptySet(e){return new ch(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ch)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=o.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new ch;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class dv{constructor(){this.Tu=new ki(dn.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):wn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class Cd{constructor(e,t,o,d,g,I,M,q,X){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=g,this.fromCache=I,this.syncStateChanged=M,this.excludesMetadataChanges=q,this.hasCachedResults=X}static fromInitialDocuments(e,t,o,d,g){const I=[];return t.forEach(M=>{I.push({type:0,doc:M})}),new Cd(e,t,ch.emptySet(t),I,o,d,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class km{constructor(){this.Au=void 0,this.listeners=[]}}class hv{constructor(){this.queries=new al(e=>id(e),Jo),this.onlineState="Unknown",this.Ru=new Set}}function Jh(i,e){return Pm.apply(this,arguments)}function Pm(){return Pm=(0,me.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1,g=t.queries.get(o);if(g||(d=!0,g=new km),d)try{g.Au=yield t.onListen(o)}catch(I){const M=Xh(I,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(M)}t.queries.set(o,g),g.listeners.push(e),e.bu(t.onlineState),g.Au&&e.Pu(g.Au)&&Vm(t)}),Pm.apply(this,arguments)}function Fm(i,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,me.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1;const g=t.queries.get(o);if(g){const I=g.listeners.indexOf(e);I>=0&&(g.listeners.splice(I,1),d=0===g.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),Lm.apply(this,arguments)}function Z_(i,e){const t=cn(i);let o=!1;for(const d of e){const I=t.queries.get(d.query);if(I){for(const M of I.listeners)M.Pu(d)&&(o=!0);I.Au=d}}o&&Vm(t)}function Q_(i,e,t){const o=cn(i),d=o.queries.get(e);if(d)for(const g of d.listeners)g.onError(t);o.queries.delete(e)}function Vm(i){i.Ru.forEach(e=>{e.next()})}class Bm{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new Cd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class X_{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class fv{constructor(e){this.It=e}Ji(e){return Ms(this.It,e)}Yi(e){return e.metadata.exists?Ol(this.It,e.document,!1):li.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Xs(e)}}class J_{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=mc(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const o=Qr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new fv(this.It);for(const d of e)if(d.metadata.queries){const g=o.Ji(d.metadata.name);for(const I of d.metadata.queries){const M=(t.get(I)||jr()).add(g);t.set(I,M)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function av(i,e,t,o){return qr.apply(this,arguments)}(e.localStore,new fv(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const d of e.queries)yield Em(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function mc(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Xf{constructor(e){this.key=e}}class $m{constructor(e){this.key=e}}class yg{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jr(),this.mutatedKeys=jr(),this.Gu=Zu(e),this.Qu=new ch(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new dv,d=t?t.Qu:this.Qu;let g=t?t.mutatedKeys:this.mutatedKeys,I=d,M=!1;const q="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,X="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ge,ze)=>{const St=d.get(ge),Wt=ua(this.query,ze)?ze:null,Jt=!!St&&this.mutatedKeys.has(St.key),Nn=!!Wt&&(Wt.hasLocalMutations||this.mutatedKeys.has(Wt.key)&&Wt.hasCommittedMutations);let Gn=!1;St&&Wt?St.data.isEqual(Wt.data)?Jt!==Nn&&(o.track({type:3,doc:Wt}),Gn=!0):this.Hu(St,Wt)||(o.track({type:2,doc:Wt}),Gn=!0,(q&&this.Gu(Wt,q)>0||X&&this.Gu(Wt,X)<0)&&(M=!0)):!St&&Wt?(o.track({type:0,doc:Wt}),Gn=!0):St&&!Wt&&(o.track({type:1,doc:St}),Gn=!0,(q||X)&&(M=!0)),Gn&&(Wt?(I=I.add(Wt),g=Nn?g.add(ge):g.delete(ge)):(I=I.delete(ge),g=g.delete(ge)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ge="F"===this.query.limitType?I.last():I.first();I=I.delete(ge.key),g=g.delete(ge.key),o.track({type:1,doc:ge})}return{Qu:I,zu:o,$i:M,mutatedKeys:g}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const g=e.zu.Eu();g.sort((X,ge)=>function(ze,St){const Wt=Jt=>{switch(Jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wn()}};return Wt(ze)-Wt(St)}(X.type,ge.type)||this.Gu(X.doc,ge.doc)),this.Ju(o);const I=t?this.Yu():[],M=0===this.Ku.size&&this.current?1:0,q=M!==this.qu;return this.qu=M,0!==g.length||q?{snapshot:new Cd(this.query,e.Qu,d,g,e.mutatedKeys,0===M,q,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:I}:{Xu:I}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new dv,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new $m(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Xf(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=jr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Cd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class vg{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class Um{constructor(e){this.key=e,this.nc=!1}}class _g{constructor(e,t,o,d,g,I){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=I,this.sc={},this.ic=new al(M=>id(M),Jo),this.rc=new Map,this.oc=new Set,this.uc=new ki(dn.comparator),this.cc=new Map,this.ac=new wd,this.hc={},this.lc=new Map,this.fc=pc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function pv(i,e){return Pu.apply(this,arguments)}function Pu(){return Pu=(0,me.Z)(function*(i,e){const t=af(i);let o,d;const g=t.ic.get(e);if(g)o=g.targetId,t.sharedClientState.addLocalQueryTarget(o),d=g.view.ec();else{const I=yield nh(t.localStore,vo(e));t.isPrimaryClient&&Gf(t.remoteStore,I);const M=t.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,d=yield Jf(t,e,o,"current"===M,I.resumeToken)}return d}),Pu.apply(this,arguments)}function Jf(i,e,t,o,d){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,me.Z)(function*(i,e,t,o,d){i._c=(ze,St,Wt)=>{return(Jt=(0,me.Z)(function*(Nn,Gn,$i,ss){let Ei=Gn.view.Wu($i);Ei.$i&&(Ei=yield Bf(Nn.localStore,Gn.query,!1).then(({documents:Yi})=>Gn.view.Wu(Yi,Ei)));const Io=ss&&ss.targetChanges.get(Gn.targetId),Ui=Gn.view.applyChanges(Ei,Nn.isPrimaryClient,Io);return sp(Nn,Gn.targetId,Ui.Xu),Ui.snapshot}),function(Nn,Gn,$i,ss){return Jt.apply(this,arguments)})(i,ze,St,Wt);var Jt};const g=yield Bf(i.localStore,e,!0),I=new yg(e,g.Hi),M=I.Wu(g.documents),q=eu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,d),X=I.applyChanges(M,i.isPrimaryClient,q);sp(i,t,X.Xu);const ge=new vg(e,t,I);return i.ic.set(e,ge),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),X.snapshot}),Eg.apply(this,arguments)}function gv(i,e){return ep.apply(this,arguments)}function ep(){return ep=(0,me.Z)(function*(i,e){const t=cn(i),o=t.ic.get(e),d=t.rc.get(o.targetId);if(d.length>1)return t.rc.set(o.targetId,d.filter(g=>!Jo(g,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield rh(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Yh(t.remoteStore,o.targetId),sf(t,o.targetId)}).catch(Ao))):(sf(t,o.targetId),yield rh(t.localStore,o.targetId,!0))}),ep.apply(this,arguments)}function Ig(){return Ig=(0,me.Z)(function*(i,e,t){const o=Ag(i);try{const d=yield function(g,I){const M=cn(g),q=Mi.now(),X=I.reduce((St,Wt)=>St.add(Wt.key),jr());let ge,ze;return M.persistence.runTransaction("Locally write mutations","readwrite",St=>{let Wt=ca(),Jt=jr();return M.Gi.getEntries(St,X).next(Nn=>{Wt=Nn,Wt.forEach((Gn,$i)=>{$i.isValidDocument()||(Jt=Jt.add(Gn))})}).next(()=>M.localDocuments.getOverlayedDocuments(St,Wt)).next(Nn=>{ge=Nn;const Gn=[];for(const $i of I){const ss=Nc($i,ge.get($i.key).overlayedDocument);null!=ss&&Gn.push(new pl($i.key,ss,la(ss.value.mapValue),hs.exists(!0)))}return M.mutationQueue.addMutationBatch(St,q,Gn,I)}).next(Nn=>{ze=Nn;const Gn=Nn.applyToLocalDocumentSet(ge,Jt);return M.documentOverlayCache.saveOverlays(St,Nn.batchId,Gn)})}).then(()=>({batchId:ze.batchId,changes:ud(ge)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(g,I,M){let q=g.hc[g.currentUser.toKey()];q||(q=new ki(lr)),q=q.insert(I,M),g.hc[g.currentUser.toKey()]=q}(o,d.batchId,t),yield Fu(o,d.changes),yield bd(o.remoteStore)}catch(d){const g=Xh(d,"Failed to persist write");t.reject(g)}}),Ig.apply(this,arguments)}function ef(i,e){return Kc.apply(this,arguments)}function Kc(){return Kc=(0,me.Z)(function*(i,e){const t=cn(i);try{const o=yield au(t.localStore,e);e.targetChanges.forEach((d,g)=>{const I=t.cc.get(g);I&&(En(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?I.nc=!0:d.modifiedDocuments.size>0?En(I.nc):d.removedDocuments.size>0&&(En(I.nc),I.nc=!1))}),yield Fu(t,o,e)}catch(o){yield Ao(o)}}),Kc.apply(this,arguments)}function tp(i,e,t){const o=cn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ic.forEach((g,I)=>{const M=I.view.bu(e);M.snapshot&&d.push(M.snapshot)}),function(g,I){const M=cn(g);M.onlineState=I;let q=!1;M.queries.forEach((X,ge)=>{for(const ze of ge.listeners)ze.bu(I)&&(q=!0)}),q&&Vm(M)}(o.eventManager,e),d.length&&o.sc.Wo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function dh(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,me.Z)(function*(i,e,t){const o=cn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.cc.get(e),g=d&&d.key;if(g){let I=new ki(dn.comparator);I=I.insert(g,li.newNoDocument(g,er.min()));const M=jr().add(g),q=new Ua(er.min(),new Map,new Xr(lr),I,M);yield ef(o,q),o.uc=o.uc.remove(g),o.cc.delete(e),op(o)}else yield rh(o.localStore,e,!1).then(()=>sf(o,e,t)).catch(Ao)}),tf.apply(this,arguments)}function np(i,e){return rp.apply(this,arguments)}function rp(){return rp=(0,me.Z)(function*(i,e){const t=cn(i),o=e.batch.batchId;try{const d=yield ov(t.localStore,e);bg(t,o,null),rf(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield Fu(t,d)}catch(d){yield Ao(d)}}),rp.apply(this,arguments)}function jm(i,e,t){return nf.apply(this,arguments)}function nf(){return nf=(0,me.Z)(function*(i,e,t){const o=cn(i);try{const d=yield function(g,I){const M=cn(g);return M.persistence.runTransaction("Reject batch","readwrite-primary",q=>{let X;return M.mutationQueue.lookupMutationBatch(q,I).next(ge=>(En(null!==ge),X=ge.keys(),M.mutationQueue.removeMutationBatch(q,ge))).next(()=>M.mutationQueue.performConsistencyCheck(q)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(q,X,I)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(q,X)).next(()=>M.localDocuments.getDocuments(q,X))})}(o.localStore,e);bg(o,e,t),rf(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield Fu(o,d)}catch(d){yield Ao(d)}}),nf.apply(this,arguments)}function ip(){return ip=(0,me.Z)(function*(i,e){const t=cn(i);ku(t.remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(g){const I=cn(g);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>I.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===o)return void e.resolve();const d=t.lc.get(o)||[];d.push(e),t.lc.set(o,d)}catch(o){const d=Xh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),ip.apply(this,arguments)}function rf(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function bg(i,e,t){const o=cn(i);let d=o.hc[o.currentUser.toKey()];if(d){const g=d.get(e);g&&(t?g.reject(t):g.resolve(),d=d.remove(e)),o.hc[o.currentUser.toKey()]=d}}function sf(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||Hm(i,o)})}function Hm(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Yh(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),op(i))}function sp(i,e,t){for(const o of t)o instanceof Xf?(i.ac.addReference(o.key,e),yv(i,o)):o instanceof $m?(rn("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||Hm(i,o.key)):wn()}function yv(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(rn("SyncEngine","New document in limbo: "+t),i.oc.add(o),op(i))}function op(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new dn(Qr.fromString(e)),o=i.fc.next();i.cc.set(o,new Um(t)),i.uc=i.uc.insert(t,o),Gf(i.remoteStore,new xu(vo(Eu(t.path)),o,2,so.at))}}function Fu(i,e,t){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,me.Z)(function*(i,e,t){const o=cn(i),d=[],g=[],I=[];var M;o.ic.isEmpty()||(o.ic.forEach((M,q)=>{I.push(o._c(q,e,t).then(X=>{if((X||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(q.targetId,null!=X&&X.fromCache?"not-current":"current"),X){d.push(X);const ge=fm.Ci(q.targetId,X);g.push(ge)}}))}),yield Promise.all(I),o.sc.Wo(d),yield(M=(0,me.Z)(function*(q,X){const ge=cn(q);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",ze=>Rt.forEach(X,St=>Rt.forEach(St.Si,Wt=>ge.persistence.referenceDelegate.addReference(ze,St.targetId,Wt)).next(()=>Rt.forEach(St.Di,Wt=>ge.persistence.referenceDelegate.removeReference(ze,St.targetId,Wt)))))}catch(ze){if(!Zo(ze))throw ze;rn("LocalStore","Failed to update sequence numbers: "+ze)}for(const ze of X){const St=ze.targetId;if(!ze.fromCache){const Wt=ge.Ui.get(St),Nn=Wt.withLastLimboFreeSnapshotVersion(Wt.snapshotVersion);ge.Ui=ge.Ui.insert(St,Nn)}}}),function(q,X){return M.apply(this,arguments)})(o.localStore,g))}),Cg.apply(this,arguments)}function bl(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,me.Z)(function*(i,e){const t=cn(i);if(!t.currentUser.isEqual(e)){rn("SyncEngine","User change. New user:",e.toKey());const o=yield pm(t.localStore,e);t.currentUser=e,(d=t).lc.forEach(I=>{I.forEach(M=>{M.reject(new Qt(kt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield Fu(t,o.ji)}var d}),ap.apply(this,arguments)}function vv(i,e){const t=cn(i),o=t.cc.get(e);if(o&&o.nc)return jr().add(o.key);{let d=jr();const g=t.rc.get(e);if(!g)return d;for(const I of g){const M=t.ic.get(I);d=d.unionWith(M.view.ju)}return d}}function e0(i,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,me.Z)(function*(i,e){const t=cn(i),o=yield Bf(t.localStore,e.query,!0),d=e.view.tc(o);return t.isPrimaryClient&&sp(t,e.targetId,d.Xu),d}),Dg.apply(this,arguments)}function Tg(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,me.Z)(function*(i,e){const t=cn(i);return vm(t.localStore,e).then(o=>Fu(t,o))}),lp.apply(this,arguments)}function _v(i,e,t,o){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,me.Z)(function*(i,e,t,o){const d=cn(i),g=yield function(I,M){const q=cn(I),X=cn(q.mutationQueue);return q.persistence.runTransaction("Lookup mutation documents","readonly",ge=>X.Tn(ge,M).next(ze=>ze?q.localDocuments.getDocuments(ge,ze):Rt.resolve(null)))}(d.localStore,e);var M;null!==g?("pending"===t?yield bd(d.remoteStore):"acknowledged"===t||"rejected"===t?(bg(d,e,o||null),rf(d,e),M=e,cn(cn(d.localStore).mutationQueue).An(M)):wn(),yield Fu(d,g)):rn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sg.apply(this,arguments)}function up(){return up=(0,me.Z)(function*(i,e){const t=cn(i);if(af(t),Ag(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Gm(t,o.toArray());t.dc=!0,yield gg(t.remoteStore,!0);for(const g of d)Gf(t.remoteStore,g)}else if(!1===e&&!1!==t.dc){const o=[];let d=Promise.resolve();t.rc.forEach((g,I)=>{t.sharedClientState.isLocalQueryTarget(I)?o.push(I):d=d.then(()=>(sf(t,I),rh(t.localStore,I,!0))),Yh(t.remoteStore,I)}),yield d,yield Gm(t,o),function(g){const I=cn(g);I.cc.forEach((M,q)=>{Yh(I.remoteStore,q)}),I.ac.fs(),I.cc=new Map,I.uc=new ki(dn.comparator)}(t),t.dc=!1,yield gg(t.remoteStore,!1)}}),up.apply(this,arguments)}function Gm(i,e,t){return cp.apply(this,arguments)}function cp(){return cp=(0,me.Z)(function*(i,e,t){const o=cn(i),d=[],g=[];for(const I of e){let M;const q=o.rc.get(I);if(q&&0!==q.length){M=yield nh(o.localStore,vo(q[0]));for(const X of q){const ge=o.ic.get(X),ze=yield e0(o,ge);ze.snapshot&&g.push(ze.snapshot)}}else{const X=yield Zp(o.localStore,I);M=yield nh(o.localStore,X),yield Jf(o,Wm(X),I,!1,M.resumeToken)}d.push(M)}return o.sc.Wo(g),d}),cp.apply(this,arguments)}function Wm(i){return Wd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Iv(i){const e=cn(i);return cn(cn(e.localStore).persistence).vi()}function zm(i,e,t,o){return dp.apply(this,arguments)}function dp(){return dp=(0,me.Z)(function*(i,e,t,o){const d=cn(i);if(d.dc)return void rn("SyncEngine","Ignoring unexpected query state notification.");const g=d.rc.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const I=yield vm(d.localStore,Yl(g[0])),M=Ua.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ys.EMPTY_BYTE_STRING);yield Fu(d,I,M);break}case"rejected":yield rh(d.localStore,e,!0),sf(d,e,o);break;default:wn()}}),dp.apply(this,arguments)}function wv(i,e,t){return Vl.apply(this,arguments)}function Vl(){return Vl=(0,me.Z)(function*(i,e,t){const o=af(i);if(o.dc){for(const d of e){if(o.rc.has(d)){rn("SyncEngine","Adding an already active target "+d);continue}const g=yield Zp(o.localStore,d),I=yield nh(o.localStore,g);yield Jf(o,Wm(g),I.targetId,!1,I.resumeToken),Gf(o.remoteStore,I)}for(const d of t)o.rc.has(d)&&(yield rh(o.localStore,d,!1).then(()=>{Yh(o.remoteStore,d),sf(o,d)}).catch(Ao))}}),Vl.apply(this,arguments)}function af(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=ef.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dh.bind(null,e),e.sc.Wo=Z_.bind(null,e.eventManager),e.sc.wc=Q_.bind(null,e.eventManager),e}function Ag(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=np.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jm.bind(null,e),e}class Cv{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Uf(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Yp(this.persistence,new qp,e.initialUser,this.It)}yc(e){return new hm(Pf.Bs,this.It)}gc(e){return new tg}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class xg extends Cv{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,me.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Ag(o.Ac.syncEngine),yield bd(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Yp(this.persistence,new qp,e.initialUser,this.It)}Tc(e,t){return new y(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Sl(t,this.persistence);return new Fa(e.asyncQueue,o)}yc(e){const t=Lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?fa.withCacheSize(this.cacheSizeBytes):fa.DEFAULT;return new Wp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,Cm(),ig(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new tg}}class Dv extends xg{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,me.Z)(function*(){yield t().call(o,e);const d=o.Ac.syncEngine;o.sharedClientState instanceof wm&&(o.sharedClientState.syncEngine={Fr:_v.bind(null,d),$r:zm.bind(null,d),Br:wv.bind(null,d),vi:Iv.bind(null,d),Mr:Tg.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var g=(0,me.Z)(function*(I){yield function Ev(i,e){return up.apply(this,arguments)}(o.Ac.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return g.apply(this,arguments)}}())})()}gc(e){const t=Cm();if(!wm.C(t))throw new Qt(kt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Lf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new wm(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Mg{initialize(e,t){var o=this;return(0,me.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>tp(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=bl.bind(null,o.syncEngine),yield gg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new hv}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),o=new rg(e.databaseInfo);return new uv(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,g=M=>tp(this.syncEngine,M,0),I=qc.C()?new qc:new bm,new jf(t,o,d,g,I);var t,o,d,g,I}createSyncEngine(e,t){return function(o,d,g,I,M,q,X){const ge=new _g(o,d,g,I,M,q);return X&&(ge.dc=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const o=cn(t);rn("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield sh(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Rg(i,e,t){if(!t)throw new Qt(kt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function hp(i,e,t,o){if(!0===e&&!0===o)throw new Qt(kt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function qm(i){if(!dn.isDocumentKey(i))throw new Qt(kt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Ym(i){if(dn.isDocumentKey(i))throw new Qt(kt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Dd(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":wn()}function _i(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Qt(kt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dd(i);throw new Qt(kt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function lf(i,e){if(e<=0)throw new Qt(kt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const Tv=new Map;class fp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Qt(kt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qt(kt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,hp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pp{constructor(e,t,o,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qt(kt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qt(kt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ya;switch(t.type){case"gapi":return new Hl(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qt(kt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Tv.get(e);t&&(rn("ComponentProvider","Removing Datastore"),Tv.delete(e),t.terminate())}(this),Promise.resolve()}}class Bs{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bs(this.firestore,e,this._key)}}class Sa{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class lu extends Sa{constructor(e,t,o){super(e,t,Eu(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bs(this.firestore,null,new dn(e))}withConverter(e){return new lu(this.firestore,e,this._path)}}function gp(i,e,...t){if(i=(0,Be.m9)(i),Rg("collection","path",e),i instanceof pp){const o=Qr.fromString(e,...t);return Ym(o),new lu(i,null,o)}{if(!(i instanceof Bs||i instanceof lu))throw new Qt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return Ym(o),new lu(i.firestore,null,o)}}function Td(i,e,...t){if(i=(0,Be.m9)(i),1===arguments.length&&(e=oa.R()),Rg("doc","path",e),i instanceof pp){const o=Qr.fromString(e,...t);return qm(o),new Bs(i,null,new dn(o))}{if(!(i instanceof Bs||i instanceof lu))throw new Qt(kt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return qm(o),new Bs(i.firestore,i instanceof lu?i.converter:null,new dn(o))}}function uf(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),(i instanceof Bs||i instanceof lu)&&(e instanceof Bs||e instanceof lu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Sd(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),i instanceof Sa&&e instanceof Sa&&i.firestore===e.firestore&&Jo(i._query,e._query)&&i.converter===e.converter}function Km(i,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class hh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Zm{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ni,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.ku)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),d=Number(o);isNaN(d)&&e.Dc(`length string (${o}) is not valid number`);const g=yield e.Cc(d);return new X_(JSON.parse(g),t.length+d)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class Av{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Qt(kt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,me.Z)(function*(g,I){const M=cn(g),q=Il(M.It)+"/documents",X={documents:I.map(Wt=>ul(M.It,Wt))},ge=yield M._o("BatchGetDocuments",q,X,I.length),ze=new Map;ge.forEach(Wt=>{const Jt=function ac(i,e){return"found"in e?function(t,o){En(!!o.found);const d=Ms(t,o.found.name),g=Xs(o.found.updateTime),I=new is({mapValue:{fields:o.found.fields}});return li.newFoundDocument(d,g,I)}(i,e):"missing"in e?function(t,o){En(!!o.missing),En(!!o.readTime);const d=Ms(t,o.missing),g=Xs(o.readTime);return li.newNoDocument(d,g)}(i,e):wn()}(M.It,Wt);ze.set(Jt.key.toString(),Jt)});const St=[];return I.forEach(Wt=>{const Jt=ze.get(Wt.toString());En(!!Jt),St.push(Jt)}),St}),function(g,I){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const g=dn.fromPath(d);e.mutations.push(new kc(g,e.precondition(g)))}),yield(o=(0,me.Z)(function*(d,g){const I=cn(d),M=Il(I.It)+"/documents",q={writes:g.map(X=>kl(I.It,X))};yield I.ao("Commit",M,q)}),function(d,g){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wn();t=er.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Qt(kt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(er.min())?hs.exists(!1):hs.updateTime(t):hs.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(er.min()))throw new Qt(kt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return hs.updateTime(t)}return hs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class n0{constructor(e,t,o,d,g){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=d,this.deferred=g,this.kc=o.maxAttempts,this.xo=new Dm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new Av(e.datastore),o=e.Mc(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.Fc(g)}))}).catch(d=>{e.Fc(d)})}))}Mc(e){try{const t=this.updateFunction(e);return!te(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!gl(t)}return!1}}class xv{constructor(e,t,o,d){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=zr.UNAUTHENTICATED,this.clientId=oa.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,me.Z)(function*(M){rn("FirestoreClient","Received user=",M.uid),yield g.authCredentialListener(M),g.user=M});return function(M){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(rn("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qt(kt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=Xh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function Mv(i,e){return Ng.apply(this,arguments)}function Ng(){return Ng=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,me.Z)(function*(g){o.isEqual(g)||(yield pm(e.localStore,g),o=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Ng.apply(this,arguments)}function Qm(i,e){return kg.apply(this,arguments)}function kg(){return kg=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield mp(i);rn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>Zf(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,g)=>Zf(e.remoteStore,g)),i.onlineComponents=e}),kg.apply(this,arguments)}function mp(i){return df.apply(this,arguments)}function df(){return df=(0,me.Z)(function*(i){return i.offlineComponents||(rn("FirestoreClient","Using default OfflineComponentProvider"),yield Mv(i,new Cv)),i.offlineComponents}),df.apply(this,arguments)}function yp(i){return hf.apply(this,arguments)}function hf(){return hf=(0,me.Z)(function*(i){return i.onlineComponents||(rn("FirestoreClient","Using default OnlineComponentProvider"),yield Qm(i,new Mg)),i.onlineComponents}),hf.apply(this,arguments)}function Xm(i){return mp(i).then(e=>e.persistence)}function vp(i){return mp(i).then(e=>e.localStore)}function Pg(i){return yp(i).then(e=>e.remoteStore)}function Fg(i){return yp(i).then(e=>e.syncEngine)}function fh(i){return ph.apply(this,arguments)}function ph(){return ph=(0,me.Z)(function*(i){const e=yield yp(i),t=e.eventManager;return t.onListen=pv.bind(null,e.syncEngine),t.onUnlisten=gv.bind(null,e.syncEngine),t}),ph.apply(this,arguments)}function ey(i,e,t={}){const o=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(d,g,I,M,q){const X=new hh({next:ze=>{g.enqueueAndForget(()=>Fm(d,ge));const St=ze.docs.has(I);!St&&ze.fromCache?q.reject(new Qt(kt.UNAVAILABLE,"Failed to get document because the client is offline.")):St&&ze.fromCache&&M&&"server"===M.source?q.reject(new Qt(kt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):q.resolve(ze)},error:ze=>q.reject(ze)}),ge=new Bm(Eu(I.path),X,{includeMetadataChanges:!0,Nu:!0});return Jh(d,ge)}(yield fh(i),i.asyncQueue,e,t,o)})),o.promise}function _p(i,e,t={}){const o=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(d,g,I,M,q){const X=new hh({next:ze=>{g.enqueueAndForget(()=>Fm(d,ge)),ze.fromCache&&"server"===M.source?q.reject(new Qt(kt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):q.resolve(ze)},error:ze=>q.reject(ze)}),ge=new Bm(I,X,{includeMetadataChanges:!0,Nu:!0});return Jh(d,ge)}(yield fh(i),i.asyncQueue,e,t,o)})),o.promise}class Ga{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Dm(this,"async_queue_retry"),this.Wc=()=>{const t=ig();t&&rn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ig();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ig();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ni;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Zo(t))throw t;rn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,yi("INTERNAL UNHANDLED ERROR: ",function(g){let I=g.message||"";return g.stack&&(I=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),I}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const d=Qf.createAndSchedule(this,e,t,o,g=>this.Yc(g));return this.qc.push(d),d}zc(){this.Kc&&wn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function vc(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class Ep{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Rs extends pp{constructor(e,t,o,d){super(e,t,o,d),this.type="firestore",this._queue=new Ga,this._persistenceKey=(null==d?void 0:d.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xd(this),this._firestoreClient.terminate()}}function $s(i){return i._firestoreClient||xd(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function xd(i){var e;const t=i._freezeSettings(),o=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new O(i._databaseId,g,i._persistenceKey,(M=t).host,M.ssl,M.experimentalForceLongPolling,M.experimentalAutoDetectLongPolling,M.useFetchStreams));var g,M;i._firestoreClient=new xv(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Md(i,e,t){const o=new Ni;return i.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Mv(i,t),yield Qm(i,e),o.resolve()}catch(d){const g=d;if(!("FirebaseError"===(I=g).name?I.code===kt.FAILED_PRECONDITION||I.code===kt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw g;Ws("Error enabling offline persistence. Falling back to persistence disabled: "+g),o.reject(g)}var I})).then(()=>o.promise)}function Lg(i){if(i._initialized||i._terminated)throw new Qt(kt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uu(ys.fromBase64String(e))}catch(t){throw new Qt(kt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uu(ys.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Vu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Qt(kt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rd{constructor(e){this._methodName=e}}class Ip{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qt(kt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qt(kt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return lr(this._lat,e._lat)||lr(this._long,e._long)}}const sy=/^__.*__$/;class Pv{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new pl(e,this.data,this.fieldMask,t,this.fieldTransforms):new $a(e,this.data,t,this.fieldTransforms)}}class oy{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new pl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wn()}}class _h{constructor(e,t,o,d,g,I){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=d,void 0===g&&this.na(),this.fieldTransforms=g||[],this.fieldMask=I||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new _h(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.ua(e),d}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.na(),d}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Tp(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(wp(this.sa)&&sy.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Fv{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Uf(e)}da(e,t,o,d=!1){return new _h({sa:e,methodName:t,fa:o,path:vi.emptyPath(),oa:!1,la:d},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Bu(i){const e=i._freezeSettings(),t=Uf(i._databaseId);return new Fv(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Od(i,e,t,o,d,g={}){const I=i.da(g.merge||g.mergeFields?2:0,e,t,d);Cp("Data must be an object, but it was:",I,o);const M=Ug(o,I);let q,X;if(g.merge)q=new oo(I.fieldMask),X=I.fieldTransforms;else if(g.mergeFields){const ge=[];for(const ze of g.mergeFields){const St=Dp(e,ze,t);if(!I.contains(St))throw new Qt(kt.INVALID_ARGUMENT,`Field '${St}' is specified in your field mask but missing from your input data.`);jg(ge,St)||ge.push(St)}q=new oo(ge),X=I.fieldTransforms.filter(ze=>q.covers(ze.field))}else q=null,X=I.fieldTransforms;return new Pv(new is(M),q,X)}class Nd extends Rd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nd}}function ay(i,e,t){return new _h({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class yf extends Rd{_toFieldTransform(e){return new Xu(e.path,new fl)}isEqual(e){return e instanceof yf}}class Vg extends Rd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ay(this,e,!0),o=this._a.map(g=>_c(g,t)),d=new Bo(o);return new Xu(e.path,d)}isEqual(e){return this===e}}class Bg extends Rd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ay(this,e,!0),o=this._a.map(g=>_c(g,t)),d=new Ba(o);return new Xu(e.path,d)}isEqual(e){return this===e}}class ly extends Rd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Zl(e.It,Kl(e.It,this.wa));return new Xu(e.path,t)}isEqual(e){return this===e}}function vf(i,e,t,o){const d=i.da(1,e,t);Cp("Data must be an object, but it was:",d,o);const g=[],I=is.empty();Qo(o,(q,X)=>{const ge=_f(e,q,t);X=(0,Be.m9)(X);const ze=d.ca(ge);if(X instanceof Nd)g.push(ge);else{const St=_c(X,ze);null!=St&&(g.push(ge),I.set(ge,St))}});const M=new oo(g);return new oy(I,M,d.fieldTransforms)}function bp(i,e,t,o,d,g){const I=i.da(1,e,t),M=[Dp(e,o,t)],q=[d];if(g.length%2!=0)throw new Qt(kt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let St=0;St<g.length;St+=2)M.push(Dp(e,g[St])),q.push(g[St+1]);const X=[],ge=is.empty();for(let St=M.length-1;St>=0;--St)if(!jg(X,M[St])){const Wt=M[St];let Jt=q[St];Jt=(0,Be.m9)(Jt);const Nn=I.ca(Wt);if(Jt instanceof Nd)X.push(Wt);else{const Gn=_c(Jt,Nn);null!=Gn&&(X.push(Wt),ge.set(Wt,Gn))}}const ze=new oo(X);return new oy(ge,ze,I.fieldTransforms)}function $g(i,e,t,o=!1){return _c(t,i.da(o?4:3,e))}function _c(i,e){if(uy(i=(0,Be.m9)(i)))return Cp("Unsupported field value:",e,i),Ug(i,e);if(i instanceof Rd)return function(t,o){if(!wp(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const d=[];let g=0;for(const I of t){let M=_c(I,o.aa(g));null==M&&(M={nullValue:"NULL_VALUE"}),d.push(M),g++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,Be.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Kl(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Mi.fromDate(t);return{timestampValue:El(o.It,d)}}if(t instanceof Mi){const d=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:El(o.It,d)}}if(t instanceof Ip)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uu)return{bytesValue:_o(o.It,t._byteString)};if(t instanceof Bs){const d=o.databaseId,g=t.firestore._databaseId;if(!g.isEqual(d))throw o.ha(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:oc(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${Dd(t)}`)}(i,e)}function Ug(i,e){const t={};return Lo(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qo(i,(o,d)=>{const g=_c(d,e.ra(o));null!=g&&(t[o]=g)}),{mapValue:{fields:t}}}function uy(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mi||i instanceof Ip||i instanceof uu||i instanceof Bs||i instanceof Rd)}function Cp(i,e,t){if(!uy(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Dd(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Dp(i,e,t){if((e=(0,Be.m9)(e))instanceof Vu)return e._internalPath;if("string"==typeof e)return _f(i,e);throw Tp("Field path arguments must be of type string or ",i,!1,void 0,t)}const cy=new RegExp("[~\\*/\\[\\]]");function _f(i,e,t){if(e.search(cy)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Vu(...e.split("."))._internalPath}catch(o){throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Tp(i,e,t,o,d){const g=o&&!o.isEmpty(),I=void 0!==d;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let q="";return(g||I)&&(q+=" (found",g&&(q+=` in field ${o}`),I&&(q+=` in document ${d}`),q+=")"),new Qt(kt.INVALID_ARGUMENT,M+i+q)}function jg(i,e){return i.some(t=>t.isEqual(e))}class Eh{constructor(e,t,o,d,g){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Bs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ih("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class dy extends Eh{data(){return super.data()}}function Ih(i,e){return"string"==typeof e?_f(i,e):e instanceof Vu?e._internalPath:e._delegate._internalPath}function Hg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Qt(kt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wh{}function Ec(i,...e){for(const t of e)i=t._apply(i);return i}class hy extends wh{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=Bu(e.firestore),o=function(d,g,I,M,q,X,ge){let ze;if(q.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new Qt(kt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){Ey(ge,X);const Wt=[];for(const Jt of ge)Wt.push(Wg(M,d,Jt));ze={arrayValue:{values:Wt}}}else ze=Wg(M,d,ge)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||Ey(ge,X),ze=$g(I,"where",ge,"in"===X||"not-in"===X);const St=Fs.create(q,X,ze);return function(Wt,Jt){if(Jt.dt()){const Gn=Sc(Wt);if(null!==Gn&&!Gn.isEqual(Jt.field))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gn.toString()}' and '${Jt.field.toString()}'`);const $i=Yu(Wt);null!==$i&&zg(0,Jt.field,$i)}const Nn=function(Gn,$i){for(const ss of Gn.filters)if($i.indexOf(ss.op)>=0)return ss.op;return null}(Wt,function(Gn){switch(Gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Jt.op));if(null!==Nn)throw new Qt(kt.INVALID_ARGUMENT,Nn===Jt.op?`Invalid query. You cannot use more than one '${Jt.op.toString()}' filter.`:`Invalid query. You cannot use '${Jt.op.toString()}' filters with '${Nn.toString()}' filters.`)}(d,St),St}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Sa(e.firestore,e.converter,function(d,g){const I=d.filters.concat([g]);return new Ya(d.path,d.collectionGroup,d.explicitOrderBy.slice(),I,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class py extends wh{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,d,g){if(null!==o.startAt)throw new Qt(kt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Qt(kt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new Ca(d,g);return function(M,q){if(null===Yu(M)){const X=Sc(M);null!==X&&zg(0,X,q.field)}}(o,I),I}(e._query,this.ma,this.pa);return new Sa(e.firestore,e.converter,function(o,d){const g=o.explicitOrderBy.concat([d]);return new Ya(o.path,o.collectionGroup,g,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Gg extends wh{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Sa(e.firestore,e.converter,sl(e._query,this.Ia,this.Ta))}}class my extends wh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=_y(e,this.type,this.Ea,this.Aa);return new Sa(e.firestore,e.converter,(d=t,new Ya((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Uo extends wh{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=_y(e,this.type,this.Ea,this.Aa);return new Sa(e.firestore,e.converter,(d=t,new Ya((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function _y(i,e,t,o){if(t[0]=(0,Be.m9)(t[0]),t[0]instanceof Eh)return function(d,g,I,M,q){if(!M)throw new Qt(kt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const X=[];for(const ge of hl(d))if(ge.field.isKeyField())X.push(Vn(g,M.key));else{const ze=M.data.field(ge.field);if(T(ze))throw new Qt(kt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){const St=ge.field.canonicalString();throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${St}' (used as the orderBy) does not exist.`)}X.push(ze)}return new ba(X,q)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=Bu(i.firestore);return function(g,I,M,q,X,ge){const ze=g.explicitOrderBy;if(X.length>ze.length)throw new Qt(kt.INVALID_ARGUMENT,`Too many arguments provided to ${q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const St=[];for(let Wt=0;Wt<X.length;Wt++){const Jt=X[Wt];if(ze[Wt].field.isKeyField()){if("string"!=typeof Jt)throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${q}(), but got a ${typeof Jt}`);if(!Ku(g)&&-1!==Jt.indexOf("/"))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${q}() must be a plain document ID, but '${Jt}' contains a slash.`);const Nn=g.path.child(Qr.fromString(Jt));if(!dn.isDocumentKey(Nn))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${q}() must result in a valid document path, but '${Nn}' is not because it contains an odd number of segments.`);const Gn=new dn(Nn);St.push(Vn(I,Gn))}else{const Nn=$g(M,q,Jt);St.push(Nn)}}return new ba(St,ge)}(i._query,i.firestore._databaseId,d,e,t,o)}}function Wg(i,e,t){if("string"==typeof(t=(0,Be.m9)(t))){if(""===t)throw new Qt(kt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ku(e)&&-1!==t.indexOf("/"))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Qr.fromString(t));if(!dn.isDocumentKey(o))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Vn(i,new dn(o))}if(t instanceof Bs)return Vn(i,t._key);throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(t)}.`)}function Ey(i,e){if(!Array.isArray(i)||0===i.length)throw new Qt(kt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Qt(kt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zg(i,e,t){if(!t.isEqual(e))throw new Qt(kt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Sp{convertValue(e,t="none"){switch(U(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wn()}}convertObject(e,t){const o={};return Qo(e.fields,(d,g)=>{o[d]=this.convertValue(g,t)}),o}convertGeoPoint(e){return new Ip(qi(e.latitude),qi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=S(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(w(e));default:return null}}convertTimestamp(e){const t=Vo(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Qr.fromString(e);En(Er(o));const d=new j(o.get(1),o.get(3)),g=new dn(o.popFirst(5));return d.isEqual(t)||yi(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Ic(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class $v extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bs(this.firestore,null,t)}}class kd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $u extends Eh{constructor(e,t,o,d,g,I){super(e,t,o,d,I),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Ih("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class Ef extends $u{data(e={}){return super.data(e)}}class wc{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new kd(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new Ef(this._firestore,this._userDataWriter,o.key,o,new kd(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qt(kt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let g=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new Ef(o._firestore,o._userDataWriter,I.doc.key,I.doc,new kd(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:g++}))}{let g=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>d||3!==I.type).map(I=>{const M=new Ef(o._firestore,o._userDataWriter,I.doc.key,I.doc,new kd(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let q=-1,X=-1;return 0!==I.type&&(q=g.indexOf(I.doc.key),g=g.delete(I.doc.key)),1!==I.type&&(g=g.add(I.doc),X=g.indexOf(I.doc.key)),{type:o0(I.type),doc:M,oldIndex:q,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function o0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wn()}}function qg(i,e){return i instanceof $u&&e instanceof $u?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof wc&&e instanceof wc&&i._firestore===e._firestore&&Sd(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class Aa extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bs(this.firestore,null,t)}}function Kg(i,e,t){i=_i(i,Bs);const o=_i(i.firestore,Rs),d=Ic(i.converter,e,t);return Zc(o,[Od(Bu(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,hs.none())])}function Zg(i,e,t,...o){i=_i(i,Bs);const d=_i(i.firestore,Rs),g=Bu(d);let I;return I="string"==typeof(e=(0,Be.m9)(e))||e instanceof Vu?bp(g,"updateDoc",i._key,e,t,o):vf(g,"updateDoc",i._key,e),Zc(d,[I.toMutation(i._key,hs.exists(!0))])}function Iy(i,...e){var t,o,d;i=(0,Be.m9)(i);let g={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||vc(e[I])||(g=e[I],I++);const M={includeMetadataChanges:g.includeMetadataChanges};if(vc(e[I])){const ze=e[I];e[I]=null===(t=ze.next)||void 0===t?void 0:t.bind(ze),e[I+1]=null===(o=ze.error)||void 0===o?void 0:o.bind(ze),e[I+2]=null===(d=ze.complete)||void 0===d?void 0:d.bind(ze)}let q,X,ge;if(i instanceof Bs)X=_i(i.firestore,Rs),ge=Eu(i._key.path),q={next:ze=>{e[I]&&e[I](Pd(X,i,ze))},error:e[I+1],complete:e[I+2]};else{const ze=_i(i,Sa);X=_i(ze.firestore,Rs),ge=ze._query;const St=new Aa(X);q={next:Wt=>{e[I]&&e[I](new wc(X,St,ze,Wt))},error:e[I+1],complete:e[I+2]},Hg(i._query)}return function(ze,St,Wt,Jt){const Nn=new hh(Jt),Gn=new Bm(St,Nn,Wt);return ze.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Jh(yield fh(ze),Gn)})),()=>{Nn.bc(),ze.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Fm(yield fh(ze),Gn)}))}}($s(X),ge,M,q)}function Zc(i,e){return function(t,o){const d=new Ni;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function mv(i,e,t){return Ig.apply(this,arguments)}(yield Fg(t),o,d)})),d.promise}($s(i),e)}function Pd(i,e,t){const o=t.docs.get(e._key),d=new Aa(i);return new $u(i,d,e._key,o,new kd(t.hasPendingWrites,t.fromCache),e.converter)}const qv={maxAttempts:5};class Qg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bu(e)}set(e,t,o){this._verifyNotCommitted();const d=bc(e,this._firestore),g=Ic(d.converter,t,o),I=Od(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,o);return this._mutations.push(I.toMutation(d._key,hs.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const g=bc(e,this._firestore);let I;return I="string"==typeof(t=(0,Be.m9)(t))||t instanceof Vu?bp(this._dataReader,"WriteBatch.update",g._key,t,o,d):vf(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(I.toMutation(g._key,hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=bc(e,this._firestore);return this._mutations=this._mutations.concat(new Xl(t._key,hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(kt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function bc(i,e){if((i=(0,Be.m9)(i)).firestore!==e)throw new Qt(kt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Ap extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Bu(e)}get(e){const t=bc(e,this._firestore),o=new $v(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return wn();const g=d[0];if(g.isFoundDocument())return new Eh(this._firestore,o,g.key,g,t.converter);if(g.isNoDocument())return new Eh(this._firestore,o,t._key,null,t.converter);throw wn()})}set(e,t,o){const d=bc(e,this._firestore),g=Ic(d.converter,t,o),I=Od(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,o);return this._transaction.set(d._key,I),this}update(e,t,o,...d){const g=bc(e,this._firestore);let I;return I="string"==typeof(t=(0,Be.m9)(t))||t instanceof Vu?bp(this._dataReader,"Transaction.update",g._key,t,o,d):vf(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,I),this}delete(e){const t=bc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bc(e,this._firestore),o=new Aa(this._firestore);return super.get(e).then(d=>new $u(this._firestore,o,t._key,d._document,new kd(!1,!1),t.converter))}}function xp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function tm(){if("undefined"==typeof Uint8Array)throw new Qt("unimplemented","Uint8Arrays are not available in this environment.")}function Sy(){if(!function vu(){return"undefined"!=typeof atob}())throw new Qt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ma=vt.SDK_VERSION,(0,vt._registerComponent)(new gt.wA("firestore",(t,{instanceIdentifier:o,options:d})=>{const g=t.getProvider("app").getImmediate(),I=new Rs(new Wo(t.getProvider("auth-internal")),new Na(t.getProvider("app-check-internal")),function(M,q){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new Qt(kt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j(M.options.projectId,q)}(g,o),g);return d=Object.assign({useFetchStreams:e},d),I._setSettings(d),I},"PUBLIC").setMultipleInstances(!0)),(0,vt.registerVersion)(jl,"3.7.3",i),(0,vt.registerVersion)(jl,"3.7.3","esm2017")}();class If{constructor(e){this._delegate=e}static fromBase64String(e){return Sy(),new If(uu.fromBase64String(e))}static fromUint8Array(e){return tm(),new If(uu.fromUint8Array(e))}toBase64(){return Sy(),this._delegate.toBase64()}toUint8Array(){return tm(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nm(i){return function Qv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Xv{enableIndexedDbPersistence(e,t){return function gh(i,e){Lg(i=_i(i,Rs));const t=$s(i),o=i._freezeSettings(),d=new Mg;return Md(t,d,new xg(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mh(i){Lg(i=_i(i,Rs));const e=$s(i),t=i._freezeSettings(),o=new Mg;return Md(e,o,new Dv(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yh(i){if(i._initialized&&!i._terminated)throw new Qt(kt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ni;return i._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(o){if(!io.C())return Promise.resolve();const d=o+"main";yield io.delete(d)}),function(o){return t.apply(this,arguments)})(Lf(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ay{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof j||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ws("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function Og(i,e,t,o={}){var d;const g=(i=_i(i,pp))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Ws("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let I,M;if("string"==typeof o.mockUserToken)I=o.mockUserToken,M=zr.MOCK_USER;else{I=(0,Be.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!q)throw new Qt(kt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");M=new zr(q)}i._authCredentials=new Fo(new Oa(I,M))}}(this._delegate,e,t,o)}enableNetwork(){return function ty(i){return function Ad(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Xm(i),t=yield Pg(i);return e.setNetworkEnabled(!0),function(o){const d=cn(o);return d._u.delete(0),qh(d)}(t)}))}($s(i=_i(i,Rs)))}(this._delegate)}disableNetwork(){return function ny(i){return function r0(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Xm(i),t=yield Pg(i);return e.setNetworkEnabled(!1),(o=(0,me.Z)(function*(d){const g=cn(d);g._u.add(0),yield sh(g),g.gu.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}($s(i=_i(i,Rs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,hp("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vh(i){return function(e){const t=new Ni;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function wg(i,e){return ip.apply(this,arguments)}(yield Fg(e),t)})),t.promise}($s(i=_i(i,Rs)))}(this._delegate)}onSnapshotsInSync(e){return function Wv(i,e){return function Ov(i,e){const t=new hh(e);return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return o=yield fh(i),d=t,cn(o).Ru.add(d),void d.next();var o,d})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return o=yield fh(i),d=t,void cn(o).Ru.delete(d);var o,d}))}}($s(i=_i(i,Rs)),vc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ld(this,gp(this._delegate,e))}catch(t){throw Xa(t,"collection()","Firestore.collection()")}}doc(e){try{return new $l(this,Td(this._delegate,e))}catch(t){throw Xa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ja(this,function yc(i,e){if(i=_i(i,pp),Rg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qt(kt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Sa(i,null,(t=e,new Ya(Qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Yv(i,e,t){i=_i(i,Rs);const o=Object.assign(Object.assign({},qv),t);return function(d){if(d.maxAttempts<1)throw new Qt(kt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,g,I){const M=new Ni;return d.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const q=yield function Jm(i){return yp(i).then(e=>e.datastore)}(d);new n0(d.asyncQueue,q,I,g,M).run()})),M.promise}($s(i),d=>e(new Ap(i,d)),o)}(this._delegate,t=>e(new xy(this,t)))}batch(){return $s(this._delegate),new My(new Qg(this._delegate,e=>Zc(this._delegate,e)))}loadBundle(e){return function ry(i,e){const t=$s(i=_i(i,Rs)),o=new Ep;return function Lu(i,e,t,o){const d=function(g,I){let M;return M="string"==typeof g?(new TextEncoder).encode(g):g,q=function(q,X){if(q instanceof Uint8Array)return Km(q,X);if(q instanceof ArrayBuffer)return Km(new Uint8Array(q),X);if(q instanceof ReadableStream)return q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new Zm(q,I);var q}(t,Uf(e));i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function bv(i,e,t){const o=cn(i);var d;(d=(0,me.Z)(function*(g,I,M){try{const q=yield I.getMetadata();if(yield function(St,Wt){const Jt=cn(St),Nn=Xs(Wt.createTime);return Jt.persistence.runTransaction("hasNewerBundle","readonly",Gn=>Jt.Ns.getBundleMetadata(Gn,Wt.id)).then(Gn=>!!Gn&&Gn.createTime.compareTo(Nn)>=0)}(g.localStore,q))return yield I.close(),M._completeWith({taskState:"Success",documentsLoaded:(St=q).totalDocuments,bytesLoaded:St.totalBytes,totalDocuments:St.totalDocuments,totalBytes:St.totalBytes}),Promise.resolve(new Set);M._updateProgress(mc(q));const X=new J_(q,g.localStore,I.It);let ge=yield I.mc();for(;ge;){const St=yield X.Fu(ge);St&&M._updateProgress(St),ge=yield I.mc()}const ze=yield X.complete();return yield Fu(g,ze.Lu,void 0),yield function(St,Wt){const Jt=cn(St);return Jt.persistence.runTransaction("Save bundle","readwrite",Nn=>Jt.Ns.saveBundleMetadata(Nn,Wt))}(g.localStore,q),M._completeWith(ze.progress),Promise.resolve(ze.Bu)}catch(q){return Ws("SyncEngine",`Loading bundle failed with ${q}`),M._failWith(q),Promise.resolve(new Set)}var St}),function(g,I,M){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield Fg(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function iy(i,e){return function pf(i,e){return i.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,o){const d=cn(t);return d.persistence.runTransaction("Get named query","readonly",g=>d.Ns.getNamedQuery(g,o))}(yield vp(i),e)}))}($s(i=_i(i,Rs)),e).then(t=>t?new Sa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Ja(this,t):null)}}class Mp extends Sp{constructor(e){super(),this.firestore=e}convertBytes(e){return new If(new uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return $l.forKey(t,this.firestore,null)}}class xy{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}get(e){const t=Qc(e);return this._delegate.get(t).then(o=>new wf(this._firestore,new $u(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=Qc(e);return o?(xp("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const g=Qc(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...d),this}delete(e){const t=Qc(e);return this._delegate.delete(t),this}}class My{constructor(e){this._delegate=e}set(e,t,o){const d=Qc(e);return o?(xp("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const g=Qc(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,o,...d),this}delete(e){const t=Qc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new Ef(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bf(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Fd.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let g=d.get(t);return g||(g=new Fd(e,new Mp(e),t),d.set(t,g)),g}}Fd.INSTANCES=new WeakMap;class $l{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Qt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new $l(t,new Bs(t._delegate,o,new dn(e)))}static forKey(e,t,o){return new $l(t,new Bs(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Ld(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ld(this.firestore,gp(this._delegate,e))}catch(t){throw Xa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Be.m9)(e))instanceof Bs&&uf(this._delegate,e)}set(e,t){t=xp("DocumentReference.set",t);try{return t?Kg(this._delegate,e,t):Kg(this._delegate,e)}catch(o){throw Xa(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Zg(this._delegate,e):Zg(this._delegate,e,t,...o)}catch(d){throw Xa(d,"updateDoc()","DocumentReference.update()")}}delete(){return function Hv(i){return Zc(_i(i.firestore,Rs),[new Xl(i._key,hs.none())])}(this._delegate)}onSnapshot(...e){const t=Ry(e),o=Oy(e,d=>new wf(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Iy(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Uv(i){i=_i(i,Bs);const e=_i(i.firestore,Rs),t=$s(e),o=new Aa(e);return function ff(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(o=(0,me.Z)(function*(d,g,I){try{const M=yield function(q,X){const ge=cn(q);return ge.persistence.runTransaction("read document","readonly",ze=>ge.localDocuments.getDocument(ze,X))}(d,g);M.isFoundDocument()?I.resolve(M):M.isNoDocument()?I.resolve(null):I.reject(new Qt(kt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const q=Xh(M,`Failed to get document '${g} from cache`);I.reject(q)}}),function(d,g,I){return o.apply(this,arguments)})(yield vp(i),e,t);var o})),t.promise}(t,i._key).then(d=>new $u(e,o,i._key,d,new kd(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function jv(i){i=_i(i,Bs);const e=_i(i.firestore,Rs);return ey($s(e),i._key,{source:"server"}).then(t=>Pd(e,i,t))}(this._delegate):function Yg(i){i=_i(i,Bs);const e=_i(i.firestore,Rs);return ey($s(e),i._key).then(t=>Pd(e,i,t))}(this._delegate),t.then(o=>new wf(this.firestore,new $u(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new $l(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}function Xa(i,e,t){return i.message=i.message.replace(e,t),i}function Ry(i){for(const e of i)if("object"==typeof e&&!nm(e))return e;return{}}function Oy(i,e){var t,o;let d;return d=nm(i[0])?i[0]:nm(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class wf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new $l(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return qg(this._delegate,e._delegate)}}class bf extends wf{data(e){const t=this._delegate.data(e);return function zs(i,e){i||wn()}(void 0!==t),t}}class Ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}where(e,t,o){try{return new Ja(this.firestore,Ec(this._delegate,function fy(i,e,t){const o=e,d=Ih("where",i);return new hy(d,o,t)}(e,t,o)))}catch(d){throw Xa(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ja(this.firestore,Ec(this._delegate,function gy(i,e="asc"){const t=e,o=Ih("orderBy",i);return new py(o,t)}(e,t)))}catch(o){throw Xa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ja(this.firestore,Ec(this._delegate,function s0(i){return lf("limit",i),new Gg("limit",i,"F")}(e)))}catch(t){throw Xa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ja(this.firestore,Ec(this._delegate,function Lv(i){return lf("limitToLast",i),new Gg("limitToLast",i,"L")}(e)))}catch(t){throw Xa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ja(this.firestore,Ec(this._delegate,function yy(...i){return new my("startAt",i,!0)}(...e)))}catch(t){throw Xa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ja(this.firestore,Ec(this._delegate,function Vv(...i){return new my("startAfter",i,!1)}(...e)))}catch(t){throw Xa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ja(this.firestore,Ec(this._delegate,function vy(...i){return new Uo("endBefore",i,!1)}(...e)))}catch(t){throw Xa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ja(this.firestore,Ec(this._delegate,function Bv(...i){return new Uo("endAt",i,!0)}(...e)))}catch(t){throw Xa(t,"endAt()","Query.endAt()")}}isEqual(e){return Sd(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function cu(i){i=_i(i,Sa);const e=_i(i.firestore,Rs),t=$s(e),o=new Aa(e);return function Rv(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(o=(0,me.Z)(function*(d,g,I){try{const M=yield Bf(d,g,!0),q=new yg(g,M.Hi),X=q.Wu(M.documents),ge=q.applyChanges(X,!1);I.resolve(ge.snapshot)}catch(M){const q=Xh(M,`Failed to execute query '${g} against cache`);I.reject(q)}}),function(d,g,I){return o.apply(this,arguments)})(yield vp(i),e,t);var o})),t.promise}(t,i._query).then(d=>new wc(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function du(i){i=_i(i,Sa);const e=_i(i.firestore,Rs),t=$s(e),o=new Aa(e);return _p(t,i._query,{source:"server"}).then(d=>new wc(e,o,i,d))}(this._delegate):function Uu(i){i=_i(i,Sa);const e=_i(i.firestore,Rs),t=$s(e),o=new Aa(e);return Hg(i._query),_p(t,i._query).then(d=>new wc(e,o,i,d))}(this._delegate),t.then(o=>new Rp(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Ry(e),o=Oy(e,d=>new Rp(this.firestore,new wc(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Iy(this._delegate,t,o)}withConverter(e){return new Ja(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}class Ny{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ja(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Ny(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new bf(this._firestore,o))})}isEqual(e){return qg(this._delegate,e._delegate)}}class Ld extends Ja{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new $l(this.firestore,e):null}doc(e){try{return new $l(this.firestore,void 0===e?Td(this._delegate):Td(this._delegate,e))}catch(t){throw Xa(t,"doc()","CollectionReference.doc()")}}add(e){return function Gv(i,e){const t=_i(i.firestore,Rs),o=Td(i),d=Ic(i.converter,e);return Zc(t,[Od(Bu(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,hs.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new $l(this.firestore,t))}isEqual(e){return uf(this._delegate,e._delegate)}withConverter(e){return new Ld(this.firestore,this._delegate.withConverter(e?Fd.getInstance(this.firestore,e):null))}}function Qc(i){return _i(i,Bs)}class Op{constructor(...e){this._delegate=new Vu(...e)}static documentId(){return new Op(vi.keyField().canonicalString())}isEqual(e){return(e=(0,Be.m9)(e))instanceof Vu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Xc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function by(){return new yf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Xc(e)}static delete(){const e=function wy(){return new Nd("deleteField")}();return e._methodName="FieldValue.delete",new Xc(e)}static arrayUnion(...e){const t=function Xg(...i){return new Vg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Xc(t)}static arrayRemove(...e){const t=function Jg(...i){return new Bg("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Xc(t)}static increment(e){const t=function Cy(i){return new ly("increment",i)}(e);return t._methodName="FieldValue.increment",new Xc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ky={Firestore:Ay,GeoPoint:Ip,Timestamp:Mi,Blob:If,Transaction:xy,WriteBatch:My,DocumentReference:$l,DocumentSnapshot:wf,Query:Ja,QueryDocumentSnapshot:bf,QuerySnapshot:Rp,CollectionReference:Ld,FieldPath:Op,FieldValue:Xc,setLogLevel:function Jv(i){!function sa(i){Po.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Fy(i){(function Py(i,e){i.INTERNAL.registerComponent(new gt.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},ky)))})(i,(e,t)=>new Ay(e,t,new Xv)),i.registerVersion("@firebase/firestore-compat","0.2.3")}(ct.Z);var Cc=H(4941),Ly=H(440);function Vy(i,e){return function e_(i,e=ne.z){return new z.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function By(i,e){return Vy(i,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function Dh(i,e){return By(i,e).pipe((0,Ee.O)(void 0),be(),(0,ie.U)(([t,o])=>{const d=o.payload.docChanges(),g=d.map(I=>({type:I.type,payload:I}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((I,M)=>{const q=d.find(ge=>ge.doc.ref.isEqual(I.ref)),X=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(I.ref));q&&JSON.stringify(q.doc.metadata)===JSON.stringify(I.metadata)||!q&&X&&JSON.stringify(X.metadata)===JSON.stringify(I.metadata)||g.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:I}})}),g}))}function t_(i,e,t){return Dh(i,t).pipe((0,Ie.R)((o,d)=>function $y(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function l0(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Np(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Np(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Np(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(g=>g.payload),e),[]),(0,Ge.x)(),(0,ie.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function Np(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function Tr(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}H(127);class Uy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=Dh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Ee.O)(void 0),be(),(0,st.h)(([o,d])=>d.length>0||!o),(0,ie.U)(([o,d])=>d),he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ie.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Tr(e);return t_(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),he.iC)}get(e){return(0,ke.D)(this.query.get(e)).pipe(he.iC)}add(e){return this.ref.add(e)}doc(e){return new jy(this.ref.doc(e),this.afs)}}class jy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:g}=co(o,t);return new Uy(d,g,this.afs)}snapshotChanges(){return function Ch(i,e){return Vy(i,e).pipe((0,Ee.O)(void 0),be(),(0,ie.U)(([t,o])=>o.exists?null!=t&&t.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ke.D)(this.ref.get(e)).pipe(he.iC)}}class n_{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Dh(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,st.h)(t=>t.length>0),he.iC):Dh(this.query,this.afs.schedulers.outsideAngular).pipe(he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ie.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Tr(e);return t_(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return By(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),he.iC)}get(e){return(0,ke.D)(this.query.get(e)).pipe(he.iC)}}const Th=new a.OlP("angularfire2.enableFirestorePersistence"),r_=new a.OlP("angularfire2.firestore.persistenceSettings"),kp=new a.OlP("angularfire2.firestore.settings"),Pp=new a.OlP("angularfire2.firestore.use-emulator");function co(i,e=(t=>t)){return{query:e(i),ref:i}}let u0=(()=>{class i{constructor(t,o,d,g,I,M,q,X,ge,ze,St,Wt,Jt,Nn,Gn,$i,ss){this.schedulers=q;const Ei=(0,nt.on)(t,M,o),Io=ge;ze&&(0,Cc.nw)(Ei,M,St,Jt,Nn,Gn,Wt,$i),[this.firestore,this.persistenceEnabled$]=(0,nt.cc)(`${Ei.name}.firestore`,"AngularFirestore",Ei.name,()=>{const Ui=M.runOutsideAngular(()=>Ei.firestore());if(g&&Ui.settings(g),Io&&Ui.useEmulator(...Io),d&&!(0,Re.PM)(I)){const Yi=()=>{try{return(0,ke.D)(Ui.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(jo){return"undefined"!=typeof console&&console.warn(jo),(0,Le.of)(!1)}};return[Ui,M.runOutsideAngular(Yi)]}return[Ui,(0,Le.of)(!1)]},[g,Io,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:I}=co(d,o),M=this.schedulers.ngZone.run(()=>g);return new Uy(M,I,this)}collectionGroup(t,o){const d=o||(I=>I),g=this.firestore.collectionGroup(t);return new n_(d(g),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new jy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(nt.Dh),a.LFG(nt.xv,8),a.LFG(Th,8),a.LFG(kp,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(he.HU),a.LFG(r_,8),a.LFG(Pp,8),a.LFG(Cc.zQ,8),a.LFG(Cc.Qv,8),a.LFG(Cc.L6,8),a.LFG(Cc._Q,8),a.LFG(Cc.rT,8),a.LFG(Cc.lh,8),a.LFG(Cc.f7,8),a.LFG(Ly.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(tn,ot,H)=>{"use strict";H.d(ot,{Dh:()=>pe,GT:()=>he,cc:()=>Ge,hO:()=>Ie,on:()=>ce,pX:()=>Le,xv:()=>be});var a=H(5e3),ne=H(127),z=H(6351);tn=H.hmd(tn);const ke=["ngOnDestroy"],Le=(De,ct,me,vt={})=>new Proxy(De,{get:(gt,xt)=>me.runOutsideAngular(()=>{var Be;if(De[xt])return!(null===(Be=null==vt?void 0:vt.spy)||void 0===Be)&&Be.get&&vt.spy.get(xt,De[xt]),De[xt];if(ke.indexOf(xt)>-1)return()=>{};const mt=ct.toPromise().then(ye=>{const Oe=ye&&ye[xt];return"function"==typeof Oe?Oe.bind(ye):Oe&&Oe.then?Oe.then(ve=>me.run(()=>ve)):me.run(()=>Oe)});return new Proxy(()=>{},{get:(ye,Oe)=>mt[Oe],apply:(ye,Oe,ve)=>mt.then(ae=>{var Ce;const Se=ae&&ae(...ve);return!(null===(Ce=null==vt?void 0:vt.spy)||void 0===Ce)&&Ce.apply&&vt.spy.apply(xt,ve,Se),Se})})})}),he=(De,ct)=>{ct.forEach(me=>{Object.getOwnPropertyNames(me.prototype||me).forEach(vt=>{Object.defineProperty(De.prototype,vt,Object.getOwnPropertyDescriptor(me.prototype||me,vt))})})};class Ee{constructor(ct){return ct}}const pe=new a.OlP("angularfire2.app.options"),be=new a.OlP("angularfire2.app.name");function ce(De,ct,me){const gt="object"==typeof me&&me||{};gt.name=gt.name||"string"==typeof me&&me||"[DEFAULT]";const Be=ne.Z.apps.filter(mt=>mt&&mt.name===gt.name)[0]||ct.runOutsideAngular(()=>ne.Z.initializeApp(De,gt));try{JSON.stringify(De)!==JSON.stringify(Be.options)&&de("error",`${Be.name} Firebase App already initialized with different options${tn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(mt){}return new Ee(Be)}const de=(De,...ct)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[De](...ct)},ie={provide:Ee,useFactory:ce,deps:[pe,a.R0b,[new a.FiY,be]]};let Ie=(()=>{class De{constructor(me){ne.Z.registerVersion("angularfire",z.q4.full,"core"),ne.Z.registerVersion("angularfire",z.q4.full,"app-compat"),ne.Z.registerVersion("angular",a.q4F.full,me.toString())}static initializeApp(me,vt){return{ngModule:De,providers:[{provide:pe,useValue:me},{provide:be,useValue:vt}]}}}return De.\u0275fac=function(me){return new(me||De)(a.LFG(a.Lbi))},De.\u0275mod=a.oAB({type:De}),De.\u0275inj=a.cJS({providers:[ie]}),De})();function Ge(De,ct,me,vt,gt){const[,xt,Be]=globalThis.\u0275AngularfireInstanceCache.find(mt=>mt[0]===De)||[];if(xt)return function st(De,ct){try{return De.toString()===ct.toString()}catch(me){return De===ct}}(gt,Be)||(Re("error",`${ct} was already initialized on the ${me} Firebase App with different settings.${nt?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:gt,was:Be})),xt;{const mt=vt();return globalThis.\u0275AngularfireInstanceCache.push([De,mt,gt]),mt}}const nt=!!tn.hot,Re=(De,...ct)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[De](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(tn,ot,H)=>{"use strict";H.d(ot,{q4:()=>so,iC:()=>te,HU:()=>Xo,vb:()=>ys,JM:()=>vu});var a=H(5e3),ne=H(5867),z=H(5861),ke=H(9681),Le=H(2090),he=H(4859),Ee=H(1877),pe=H(8766);const be="@firebase/installations",ce="0.5.16",ie=`w:${ce}`,Ie="FIS_v2",ct=new Le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function me(R){return R instanceof Le.ZR&&R.code.includes("request-failed")}function vt({projectId:R}){return`https://firebaseinstallations.googleapis.com/v1/projects/${R}/installations`}function gt(R){return{token:R.token,requestStatus:2,expiresIn:ae(R.expiresIn),creationTime:Date.now()}}function xt(R,U){return Be.apply(this,arguments)}function Be(){return(Be=(0,z.Z)(function*(R,U){const fe=(yield U.json()).error;return ct.create("request-failed",{requestName:R,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function mt({apiKey:R}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R})}function ye(R,{refreshToken:U}){const Q=mt(R);return Q.append("Authorization",function Ce(R){return`${Ie} ${R}`}(U)),Q}function Oe(R){return ve.apply(this,arguments)}function ve(){return(ve=(0,z.Z)(function*(R){const U=yield R();return U.status>=500&&U.status<600?R():U})).apply(this,arguments)}function ae(R){return Number(R.replace("s","000"))}function Se(R,U){return lt.apply(this,arguments)}function lt(){return(lt=(0,z.Z)(function*({appConfig:R,heartbeatServiceProvider:U},{fid:Q}){const fe=vt(R),qe=mt(R),wt=U.getImmediate({optional:!0});if(wt){const gr=yield wt.getHeartbeatsHeader();gr&&qe.append("x-firebase-client",gr)}const sn={method:"POST",headers:qe,body:JSON.stringify({fid:Q,authVersion:Ie,appId:R.appId,sdkVersion:ie})},Vn=yield Oe(()=>fetch(fe,sn));if(Vn.ok){const gr=yield Vn.json();return{fid:gr.fid||Q,registrationStatus:2,refreshToken:gr.refreshToken,authToken:gt(gr.authToken)}}throw yield xt("Create Installation",Vn)})).apply(this,arguments)}function J(R){return new Promise(U=>{setTimeout(U,R)})}const bt=/^[cdef][\w-]{21}$/;function $e(){try{const R=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(R),R[0]=112+R[0]%16;const Q=function Ue(R){return function Gt(R){return btoa(String.fromCharCode(...R)).replace(/\+/g,"-").replace(/\//g,"_")}(R).substr(0,22)}(R);return bt.test(Q)?Q:""}catch(R){return""}}function Xe(R){return`${R.appName}!${R.appId}`}const Qe=new Map;function ht(R,U){const Q=Xe(R);Nt(Q,U),function bn(R,U){const Q=function Qn(){return!In&&"BroadcastChannel"in self&&(In=new BroadcastChannel("[Firebase] FID Change"),In.onmessage=R=>{Nt(R.data.key,R.data.fid)}),In}();Q&&Q.postMessage({key:R,fid:U}),function Rn(){0===Qe.size&&In&&(In.close(),In=null)}()}(Q,U)}function Nt(R,U){const Q=Qe.get(R);if(Q)for(const fe of Q)fe(U)}let In=null;const Un="firebase-installations-store";let or=null;function mr(){return or||(or=(0,pe.X3)("firebase-installations-database",1,{upgrade:(R,U)=>{0===U&&R.createObjectStore(Un)}})),or}function zt(R,U){return rr.apply(this,arguments)}function rr(){return(rr=(0,z.Z)(function*(R,U){const Q=Xe(R),qe=(yield mr()).transaction(Un,"readwrite"),wt=qe.objectStore(Un),Ht=yield wt.get(Q);return yield wt.put(U,Q),yield qe.done,(!Ht||Ht.fid!==U.fid)&&ht(R,U.fid),U})).apply(this,arguments)}function Pr(R){return tr.apply(this,arguments)}function tr(){return(tr=(0,z.Z)(function*(R){const U=Xe(R),fe=(yield mr()).transaction(Un,"readwrite");yield fe.objectStore(Un).delete(U),yield fe.done})).apply(this,arguments)}function nr(R,U){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,z.Z)(function*(R,U){const Q=Xe(R),qe=(yield mr()).transaction(Un,"readwrite"),wt=qe.objectStore(Un),Ht=yield wt.get(Q),sn=U(Ht);return void 0===sn?yield wt.delete(Q):yield wt.put(sn,Q),yield qe.done,sn&&(!Ht||Ht.fid!==sn.fid)&&ht(R,sn.fid),sn})).apply(this,arguments)}function an(R){return fr.apply(this,arguments)}function fr(){return(fr=(0,z.Z)(function*(R){let U;const Q=yield nr(R.appConfig,fe=>{const qe=Tn(fe),wt=gn(R,qe);return U=wt.registrationPromise,wt.installationEntry});return""===Q.fid?{installationEntry:yield U}:{installationEntry:Q,registrationPromise:U}})).apply(this,arguments)}function Tn(R){return jn(R||{fid:$e(),registrationStatus:0})}function gn(R,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(ct.create("app-offline"))};const Q={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},fe=function Tt(R,U){return yr.apply(this,arguments)}(R,Q);return{installationEntry:Q,registrationPromise:fe}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Bn(R)}:{installationEntry:U}}function yr(){return(yr=(0,z.Z)(function*(R,U){try{const Q=yield Se(R,U);return zt(R.appConfig,Q)}catch(Q){throw me(Q)&&409===Q.customData.serverCode?yield Pr(R.appConfig):yield zt(R.appConfig,{fid:U.fid,registrationStatus:0}),Q}})).apply(this,arguments)}function Bn(R){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,z.Z)(function*(R){let U=yield Or(R.appConfig);for(;1===U.registrationStatus;)yield J(100),U=yield Or(R.appConfig);if(0===U.registrationStatus){const{installationEntry:Q,registrationPromise:fe}=yield an(R);return fe||Q}return U})).apply(this,arguments)}function Or(R){return nr(R,U=>{if(!U)throw ct.create("installation-not-found");return jn(U)})}function jn(R){return function ji(R){return 1===R.registrationStatus&&R.registrationTime+1e4<Date.now()}(R)?{fid:R.fid,registrationStatus:0}:R}function Fn(R,U){return si.apply(this,arguments)}function si(){return(si=(0,z.Z)(function*({appConfig:R,heartbeatServiceProvider:U},Q){const fe=ir(R,Q),qe=ye(R,Q),wt=U.getImmediate({optional:!0});if(wt){const gr=yield wt.getHeartbeatsHeader();gr&&qe.append("x-firebase-client",gr)}const sn={method:"POST",headers:qe,body:JSON.stringify({installation:{sdkVersion:ie,appId:R.appId}})},Vn=yield Oe(()=>fetch(fe,sn));if(Vn.ok)return gt(yield Vn.json());throw yield xt("Generate Auth Token",Vn)})).apply(this,arguments)}function ir(R,{fid:U}){return`${vt(R)}/${U}/authTokens:generate`}function Yr(R){return ni.apply(this,arguments)}function ni(){return(ni=(0,z.Z)(function*(R,U=!1){let Q;const fe=yield nr(R.appConfig,wt=>{if(!On(wt))throw ct.create("not-registered");const Ht=wt.authToken;if(!U&&je(Ht))return wt;if(1===Ht.requestStatus)return Q=vn(R,U),wt;{if(!navigator.onLine)throw ct.create("app-offline");const sn=He(wt);return Q=Ln(R,sn),sn}});return Q?yield Q:fe.authToken})).apply(this,arguments)}function vn(R,U){return $t.apply(this,arguments)}function $t(){return($t=(0,z.Z)(function*(R,U){let Q=yield un(R.appConfig);for(;1===Q.authToken.requestStatus;)yield J(100),Q=yield un(R.appConfig);const fe=Q.authToken;return 0===fe.requestStatus?Yr(R,U):fe})).apply(this,arguments)}function un(R){return nr(R,U=>{if(!On(U))throw ct.create("not-registered");return function dt(R){return 1===R.requestStatus&&R.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function Ln(R,U){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,z.Z)(function*(R,U){try{const Q=yield Fn(R,U),fe=Object.assign(Object.assign({},U),{authToken:Q});return yield zt(R.appConfig,fe),Q}catch(Q){if(!me(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const fe=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield zt(R.appConfig,fe)}else yield Pr(R.appConfig);throw Q}})).apply(this,arguments)}function On(R){return void 0!==R&&2===R.registrationStatus}function je(R){return 2===R.requestStatus&&!function Ne(R){const U=Date.now();return U<R.creationTime||R.creationTime+R.expiresIn<U+36e5}(R)}function He(R){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},R),{authToken:U})}function on(){return(on=(0,z.Z)(function*(R){const U=R,{installationEntry:Q,registrationPromise:fe}=yield an(U);return fe?fe.catch(console.error):Yr(U).catch(console.error),Q.fid})).apply(this,arguments)}function hr(){return(hr=(0,z.Z)(function*(R,U=!1){const Q=R;return yield wr(Q),(yield Yr(Q,U)).token})).apply(this,arguments)}function wr(R){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,z.Z)(function*(R){const{registrationPromise:U}=yield an(R);U&&(yield U)})).apply(this,arguments)}function Cn(R){return ct.create("missing-app-config-values",{valueName:R})}const ar="installations",Fr=R=>{const U=R.getProvider("app").getImmediate(),Q=function Zt(R){if(!R||!R.options)throw Cn("App Configuration");if(!R.name)throw Cn("App Name");const U=["projectId","apiKey","appId"];for(const Q of U)if(!R.options[Q])throw Cn(Q);return{appName:R.name,projectId:R.options.projectId,apiKey:R.options.apiKey,appId:R.options.appId}}(U);return{app:U,appConfig:Q,heartbeatServiceProvider:(0,ke._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},ei=R=>{const U=R.getProvider("app").getImmediate(),Q=(0,ke._getProvider)(U,ar).getImmediate();return{getId:()=>function rt(R){return on.apply(this,arguments)}(Q),getToken:qe=>function _n(R){return hr.apply(this,arguments)}(Q,qe)}};(function hi(){(0,ke._registerComponent)(new he.wA(ar,Fr,"PUBLIC")),(0,ke._registerComponent)(new he.wA("installations-internal",ei,"PRIVATE"))})(),(0,ke.registerVersion)(be,ce),(0,ke.registerVersion)(be,ce,"esm2017");const vr="@firebase/remote-config",oi=new Le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class An{constructor(U,Q,fe,qe){this.client=U,this.storage=Q,this.storageCache=fe,this.logger=qe}isCachedDataFresh(U,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-Q,qe=fe<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${qe}.`),qe}fetch(U){var Q=this;return(0,z.Z)(function*(){const[fe,qe]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(qe&&Q.isCachedDataFresh(U.cacheMaxAgeMillis,fe))return qe;U.eTag=qe&&qe.eTag;const wt=yield Q.client.fetch(U),Ht=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===wt.status&&Ht.push(Q.storage.setLastSuccessfulFetchResponse(wt)),yield Promise.all(Ht),wt})()}}function qn(R=navigator){return R.languages&&R.languages[0]||R.language}class pr{constructor(U,Q,fe,qe,wt,Ht){this.firebaseInstallations=U,this.sdkVersion=Q,this.namespace=fe,this.projectId=qe,this.apiKey=wt,this.appId=Ht}fetch(U){var Q=this;return(0,z.Z)(function*(){var fe,qe,wt;const[Ht,sn]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),gr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,xr={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Pn={sdk_version:Q.sdkVersion,app_instance_id:Ht,app_instance_id_token:sn,app_id:Q.appId,language_code:qn()},ds={method:"POST",headers:xr,body:JSON.stringify(Pn)},qs=fetch(gr,ds),ao=new Promise((is,la)=>{U.signal.addEventListener(()=>{const li=new Error("The operation was aborted.");li.name="AbortError",la(li)})});let wa;try{yield Promise.race([qs,ao]),wa=yield qs}catch(is){let la="fetch-client-network";throw"AbortError"===(null===(fe=is)||void 0===fe?void 0:fe.name)&&(la="fetch-timeout"),oi.create(la,{originalErrorMessage:null===(qe=is)||void 0===qe?void 0:qe.message})}let rl=wa.status;const aa=wa.headers.get("ETag")||void 0;let il,qa;if(200===wa.status){let is;try{is=yield wa.json()}catch(la){throw oi.create("fetch-client-parse",{originalErrorMessage:null===(wt=la)||void 0===wt?void 0:wt.message})}il=is.entries,qa=is.state}if("INSTANCE_STATE_UNSPECIFIED"===qa?rl=500:"NO_CHANGE"===qa?rl=304:("NO_TEMPLATE"===qa||"EMPTY_CONFIG"===qa)&&(il={}),304!==rl&&200!==rl)throw oi.create("fetch-status",{httpStatus:rl});return{status:rl,eTag:aa,config:il}})()}}class Ze{constructor(U,Q){this.client=U,this.storage=Q}fetch(U){var Q=this;return(0,z.Z)(function*(){const fe=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch(U,fe)})()}attemptFetch(U,{throttleEndTimeMillis:Q,backoffCount:fe}){var qe=this;return(0,z.Z)(function*(){yield function kr(R,U){return new Promise((Q,fe)=>{const qe=Math.max(U-Date.now(),0),wt=setTimeout(Q,qe);R.addEventListener(()=>{clearTimeout(wt),fe(oi.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,Q);try{const wt=yield qe.client.fetch(U);return yield qe.storage.deleteThrottleMetadata(),wt}catch(wt){if(!function et(R){if(!(R instanceof Le.ZR&&R.customData))return!1;const U=Number(R.customData.httpStatus);return 429===U||500===U||503===U||504===U}(wt))throw wt;const Ht={throttleEndTimeMillis:Date.now()+(0,Le.$s)(fe),backoffCount:fe+1};return yield qe.storage.setThrottleMetadata(Ht),qe.attemptFetch(U,Ht)}})()}}class en{constructor(U,Q,fe,qe,wt){this.app=U,this._client=Q,this._storageCache=fe,this._storage=qe,this._logger=wt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Dn(R,U){var Q;const fe=R.target.error||void 0;return oi.create(U,{originalErrorMessage:fe&&(null===(Q=fe)||void 0===Q?void 0:Q.message)})}const Yn="app_namespace_store";class Sr{constructor(U,Q,fe,qe=function Os(){return new Promise((R,U)=>{var Q;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=qe=>{U(Dn(qe,"storage-open"))},fe.onsuccess=qe=>{R(qe.target.result)},fe.onupgradeneeded=qe=>{0===qe.oldVersion&&qe.target.result.createObjectStore(Yn,{keyPath:"compositeKey"})}}catch(fe){U(oi.create("storage-open",{originalErrorMessage:null===(Q=fe)||void 0===Q?void 0:Q.message}))}})}()){this.appId=U,this.appName=Q,this.namespace=fe,this.openDbPromise=qe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var Q=this;return(0,z.Z)(function*(){const fe=yield Q.openDbPromise;return new Promise((qe,wt)=>{var Ht;const Vn=fe.transaction([Yn],"readonly").objectStore(Yn),gr=Q.createCompositeKey(U);try{const xr=Vn.get(gr);xr.onerror=Pn=>{wt(Dn(Pn,"storage-get"))},xr.onsuccess=Pn=>{const ds=Pn.target.result;qe(ds?ds.value:void 0)}}catch(xr){wt(oi.create("storage-get",{originalErrorMessage:null===(Ht=xr)||void 0===Ht?void 0:Ht.message}))}})})()}set(U,Q){var fe=this;return(0,z.Z)(function*(){const qe=yield fe.openDbPromise;return new Promise((wt,Ht)=>{var sn;const gr=qe.transaction([Yn],"readwrite").objectStore(Yn),xr=fe.createCompositeKey(U);try{const Pn=gr.put({compositeKey:xr,value:Q});Pn.onerror=ds=>{Ht(Dn(ds,"storage-set"))},Pn.onsuccess=()=>{wt()}}catch(Pn){Ht(oi.create("storage-set",{originalErrorMessage:null===(sn=Pn)||void 0===sn?void 0:sn.message}))}})})()}delete(U){var Q=this;return(0,z.Z)(function*(){const fe=yield Q.openDbPromise;return new Promise((qe,wt)=>{var Ht;const Vn=fe.transaction([Yn],"readwrite").objectStore(Yn),gr=Q.createCompositeKey(U);try{const xr=Vn.delete(gr);xr.onerror=Pn=>{wt(Dn(Pn,"storage-delete"))},xr.onsuccess=()=>{qe()}}catch(xr){wt(oi.create("storage-delete",{originalErrorMessage:null===(Ht=xr)||void 0===Ht?void 0:Ht.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Ir{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,z.Z)(function*(){const Q=U.storage.getLastFetchStatus(),fe=U.storage.getLastSuccessfulFetchTimestampMillis(),qe=U.storage.getActiveConfig(),wt=yield Q;wt&&(U.lastFetchStatus=wt);const Ht=yield fe;Ht&&(U.lastSuccessfulFetchTimestampMillis=Ht);const sn=yield qe;sn&&(U.activeConfig=sn)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Us(){return ta.apply(this,arguments)}function ta(){return(ta=(0,z.Z)(function*(){if(!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(R){return!1}})).apply(this,arguments)}!function Xn(){(0,ke._registerComponent)(new he.wA("remote-config",function R(U,{instanceIdentifier:Q}){const fe=U.getProvider("app").getImmediate(),qe=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw oi.create("registration-window");if(!(0,Le.hl)())throw oi.create("indexed-db-unavailable");const{projectId:wt,apiKey:Ht,appId:sn}=fe.options;if(!wt)throw oi.create("registration-project-id");if(!Ht)throw oi.create("registration-api-key");if(!sn)throw oi.create("registration-app-id");const Vn=new Sr(sn,fe.name,Q=Q||"firebase"),gr=new Ir(Vn),xr=new Ee.Yd(vr);xr.logLevel=Ee.in.ERROR;const Pn=new pr(qe,ke.SDK_VERSION,Q,wt,Ht,sn),ds=new Ze(Pn,Vn),qs=new An(ds,Vn,gr,xr),ao=new en(fe,qs,gr,Vn,xr);return function we(R){const U=(0,Le.m9)(R);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(ao),ao},"PUBLIC").setMultipleInstances(!0)),(0,ke.registerVersion)(vr,"0.3.15"),(0,ke.registerVersion)(vr,"0.3.15","esm2017")}();const es="/firebase-messaging-sw.js",js="/firebase-cloud-messaging-push-scope",Ar="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mi="google.c.a.c_id",Js="google.c.a.c_l",Hs="google.c.a.ts",pi="google.c.a.e";var fs=(()=>{return(R=fs||(fs={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",fs;var R})();function vs(R){const U=new Uint8Array(R);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ps(R){const Q=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(Q),qe=new Uint8Array(fe.length);for(let wt=0;wt<fe.length;++wt)qe[wt]=fe.charCodeAt(wt);return qe}const Di="fcm_token_details_db",Hi="fcm_token_object_Store";function ts(R){return gs.apply(this,arguments)}function gs(){return gs=(0,z.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(wt=>wt.name).includes(Di))return null;let U=null;return(yield(0,pe.X3)(Di,5,{upgrade:(fe=(0,z.Z)(function*(qe,wt,Ht,sn){var Vn;if(wt<2||!qe.objectStoreNames.contains(Hi))return;const gr=sn.objectStore(Hi),xr=yield gr.index("fcmSenderId").get(R);if(yield gr.clear(),xr)if(2===wt){const Pn=xr;if(!Pn.auth||!Pn.p256dh||!Pn.endpoint)return;U={token:Pn.fcmToken,createTime:null!==(Vn=Pn.createTime)&&void 0!==Vn?Vn:Date.now(),subscriptionOptions:{auth:Pn.auth,p256dh:Pn.p256dh,endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:"string"==typeof Pn.vapidKey?Pn.vapidKey:vs(Pn.vapidKey)}}}else if(3===wt){const Pn=xr;U={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:vs(Pn.auth),p256dh:vs(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:vs(Pn.vapidKey)}}}else if(4===wt){const Pn=xr;U={token:Pn.fcmToken,createTime:Pn.createTime,subscriptionOptions:{auth:vs(Pn.auth),p256dh:vs(Pn.p256dh),endpoint:Pn.endpoint,swScope:Pn.swScope,vapidKey:vs(Pn.vapidKey)}}}}),function(wt,Ht,sn,Vn){return fe.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Di),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),ai(U)?U:null;var fe}),gs.apply(this,arguments)}function ai(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:U}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const _r="firebase-messaging-store";let gi=null;function Jn(){return gi||(gi=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(R,U)=>{0===U&&R.createObjectStore(_r)}})),gi}function _s(R){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,z.Z)(function*(R){const U=Es(R),fe=yield(yield Jn()).transaction(_r).objectStore(_r).get(U);if(fe)return fe;{const qe=yield ts(R.appConfig.senderId);if(qe)return yield Rr(R,qe),qe}})).apply(this,arguments)}function Rr(R,U){return as.apply(this,arguments)}function as(){return(as=(0,z.Z)(function*(R,U){const Q=Es(R),qe=(yield Jn()).transaction(_r,"readwrite");return yield qe.objectStore(_r).put(U,Q),yield qe.done,U})).apply(this,arguments)}function Ts(R){return ls.apply(this,arguments)}function ls(){return(ls=(0,z.Z)(function*(R){const U=Es(R),fe=(yield Jn()).transaction(_r,"readwrite");yield fe.objectStore(_r).delete(U),yield fe.done})).apply(this,arguments)}function Es({appConfig:R}){return R.appId}const Vr=new Le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kn(R,U){return eo.apply(this,arguments)}function eo(){return(eo=(0,z.Z)(function*(R,U){var Q;const fe=yield xa(R),qe=Yt(U),wt={method:"POST",headers:fe,body:JSON.stringify(qe)};let Ht;try{Ht=yield(yield fetch(ks(R.appConfig),wt)).json()}catch(sn){throw Vr.create("token-subscribe-failed",{errorInfo:null===(Q=sn)||void 0===Q?void 0:Q.toString()})}if(Ht.error)throw Vr.create("token-subscribe-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw Vr.create("token-subscribe-no-token");return Ht.token})).apply(this,arguments)}function pa(R,U){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,z.Z)(function*(R,U){var Q;const fe=yield xa(R),qe=Yt(U.subscriptionOptions),wt={method:"PATCH",headers:fe,body:JSON.stringify(qe)};let Ht;try{Ht=yield(yield fetch(`${ks(R.appConfig)}/${U.token}`,wt)).json()}catch(sn){throw Vr.create("token-update-failed",{errorInfo:null===(Q=sn)||void 0===Q?void 0:Q.toString()})}if(Ht.error)throw Vr.create("token-update-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw Vr.create("token-update-no-token");return Ht.token})).apply(this,arguments)}function Ho(R,U){return ga.apply(this,arguments)}function ga(){return(ga=(0,z.Z)(function*(R,U){var Q;const qe={method:"DELETE",headers:yield xa(R)};try{const Ht=yield(yield fetch(`${ks(R.appConfig)}/${U}`,qe)).json();if(Ht.error)throw Vr.create("token-unsubscribe-failed",{errorInfo:Ht.error.message})}catch(wt){throw Vr.create("token-unsubscribe-failed",{errorInfo:null===(Q=wt)||void 0===Q?void 0:Q.toString()})}})).apply(this,arguments)}function ks({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function xa(R){return bo.apply(this,arguments)}function bo(){return(bo=(0,z.Z)(function*({appConfig:R,installations:U}){const Q=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function Yt({p256dh:R,auth:U,endpoint:Q,vapidKey:fe}){const qe={web:{endpoint:Q,auth:U,p256dh:R}};return fe!==Ar&&(qe.web.applicationPubKey=fe),qe}const br=6048e5;function na(R){return ri.apply(this,arguments)}function ri(){return(ri=(0,z.Z)(function*(R){const U=yield B(R.swRegistration,R.vapidKey),Q={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:U.endpoint,auth:vs(U.getKey("auth")),p256dh:vs(U.getKey("p256dh"))},fe=yield _s(R.firebaseDependencies);if(fe){if(m(fe.subscriptionOptions,Q))return Date.now()>=fe.createTime+br?Gi(R,{token:fe.token,createTime:Date.now(),subscriptionOptions:Q}):fe.token;try{yield Ho(R.firebaseDependencies,fe.token)}catch(qe){console.warn(qe)}return Ss(R.firebaseDependencies,Q)}return Ss(R.firebaseDependencies,Q)})).apply(this,arguments)}function Li(R){return ko.apply(this,arguments)}function ko(){return(ko=(0,z.Z)(function*(R){const U=yield _s(R.firebaseDependencies);U&&(yield Ho(R.firebaseDependencies,U.token),yield Ts(R.firebaseDependencies));const Q=yield R.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()})).apply(this,arguments)}function Gi(R,U){return Is.apply(this,arguments)}function Is(){return(Is=(0,z.Z)(function*(R,U){try{const Q=yield pa(R.firebaseDependencies,U),fe=Object.assign(Object.assign({},U),{token:Q,createTime:Date.now()});return yield Rr(R.firebaseDependencies,fe),Q}catch(Q){throw yield Li(R),Q}})).apply(this,arguments)}function Ss(R,U){return G.apply(this,arguments)}function G(){return(G=(0,z.Z)(function*(R,U){const fe={token:yield Kn(R,U),createTime:Date.now(),subscriptionOptions:U};return yield Rr(R,fe),fe.token})).apply(this,arguments)}function B(R,U){return N.apply(this,arguments)}function N(){return(N=(0,z.Z)(function*(R,U){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ps(U)})})).apply(this,arguments)}function m(R,U){return U.vapidKey===R.vapidKey&&U.endpoint===R.endpoint&&U.auth===R.auth&&U.p256dh===R.p256dh}function k(R){const U={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function E(R,U){if(!U.notification)return;R.notification={};const Q=U.notification.title;Q&&(R.notification.title=Q);const fe=U.notification.body;fe&&(R.notification.body=fe);const qe=U.notification.image;qe&&(R.notification.image=qe);const wt=U.notification.icon;wt&&(R.notification.icon=wt)}(U,R),function V(R,U){!U.data||(R.data=U.data)}(U,R),function oe(R,U){var Q,fe,qe,wt,Ht;if(!(U.fcmOptions||null!==(Q=U.notification)&&void 0!==Q&&Q.click_action))return;R.fcmOptions={};const sn=null!==(qe=null===(fe=U.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==qe?qe:null===(wt=U.notification)||void 0===wt?void 0:wt.click_action;sn&&(R.fcmOptions.link=sn);const Vn=null===(Ht=U.fcmOptions)||void 0===Ht?void 0:Ht.analytics_label;Vn&&(R.fcmOptions.analyticsLabel=Vn)}(U,R),U}function ut(R){return"object"==typeof R&&!!R&&mi in R}function Xt(R,U){const Q=[];for(let fe=0;fe<R.length;fe++)Q.push(R.charAt(fe)),fe<U.length&&Q.push(U.charAt(fe));return Q.join("")}function Zn(R){return Vr.create("missing-app-config-values",{valueName:R})}Xt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ti{constructor(U,Q,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const qe=function mn(R){if(!R||!R.options)throw Zn("App Configuration Object");if(!R.name)throw Zn("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=R;for(const fe of U)if(!Q[fe])throw Zn(fe);return{appName:R.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:qe,installations:Q,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function Ai(R){return ci.apply(this,arguments)}function ci(){return(ci=(0,z.Z)(function*(R){var U;try{R.swRegistration=yield navigator.serviceWorker.register(es,{scope:js}),R.swRegistration.update().catch(()=>{})}catch(Q){throw Vr.create("failed-service-worker-registration",{browserErrorMessage:null===(U=Q)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function ns(R,U){return ws.apply(this,arguments)}function ws(){return(ws=(0,z.Z)(function*(R,U){if(!U&&!R.swRegistration&&(yield Ai(R)),U||!R.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Vr.create("invalid-sw-registration");R.swRegistration=U}})).apply(this,arguments)}function bs(R,U){return us.apply(this,arguments)}function us(){return(us=(0,z.Z)(function*(R,U){U?R.vapidKey=U:R.vapidKey||(R.vapidKey=Ar)})).apply(this,arguments)}function Co(){return(Co=(0,z.Z)(function*(R,U){if(!navigator)throw Vr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vr.create("permission-blocked");return yield bs(R,null==U?void 0:U.vapidKey),yield ns(R,null==U?void 0:U.serviceWorkerRegistration),na(R)})).apply(this,arguments)}function ra(R,U,Q){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,z.Z)(function*(R,U,Q){const fe=ia(U);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:Q[mi],message_name:Q[Js],message_time:Q[Hs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ia(R){switch(R){case fs.NOTIFICATION_CLICKED:return"notification_open";case fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Z(){return(Z=(0,z.Z)(function*(R,U){const Q=U.data;if(!Q.isFirebaseMessaging)return;R.onMessageHandler&&Q.messageType===fs.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(k(Q)):R.onMessageHandler.next(k(Q)));const fe=Q.data;ut(fe)&&"1"===fe[pi]&&(yield ra(R,Q.messageType,fe))})).apply(this,arguments)}const $="@firebase/messaging",Pe=R=>{const U=new ti(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function F(R,U){return Z.apply(this,arguments)}(U,Q)),U},Dt=R=>{const U=R.getProvider("messaging").getImmediate();return{getToken:fe=>function Ps(R,U){return Co.apply(this,arguments)}(U,fe)}};function xn(){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,z.Z)(function*(){try{yield(0,Le.eu)()}catch(R){return!1}return"undefined"!=typeof window&&(0,Le.hl)()&&(0,Le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Pt(){(0,ke._registerComponent)(new he.wA("messaging",Pe,"PUBLIC")),(0,ke._registerComponent)(new he.wA("messaging-internal",Dt,"PRIVATE")),(0,ke.registerVersion)($,"0.11.0"),(0,ke.registerVersion)($,"0.11.0","esm2017")}();const no="analytics",Do="firebase_id",Vi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ma="https://www.googletagmanager.com/gtag/js",rs=new Ee.Yd("@firebase/analytics");function Wi(R){return Promise.all(R.map(U=>U.catch(Q=>Q)))}function Dl(R,U){const Q=document.createElement("script");Q.src=`${Ma}?l=${R}&id=${U}`,Q.async=!0,document.head.appendChild(Q)}function el(R,U,Q,fe,qe,wt){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,z.Z)(function*(R,U,Q,fe,qe,wt){const Ht=fe[qe];try{if(Ht)yield U[Ht];else{const Vn=(yield Wi(Q)).find(gr=>gr.measurementId===qe);Vn&&(yield U[Vn.appId])}}catch(sn){rs.error(sn)}R("config",qe,wt)})).apply(this,arguments)}function Ra(R,U,Q,fe,qe){return fo.apply(this,arguments)}function fo(){return(fo=(0,z.Z)(function*(R,U,Q,fe,qe){try{let wt=[];if(qe&&qe.send_to){let Ht=qe.send_to;Array.isArray(Ht)||(Ht=[Ht]);const sn=yield Wi(Q);for(const Vn of Ht){const gr=sn.find(Pn=>Pn.measurementId===Vn),xr=gr&&U[gr.appId];if(!xr){wt=[];break}wt.push(xr)}}0===wt.length&&(wt=Object.values(U)),yield Promise.all(wt),R("event",fe,qe||{})}catch(wt){rs.error(wt)}})).apply(this,arguments)}function hu(R){const U=window.document.getElementsByTagName("script");for(const Q of Object.values(U))if(Q.src&&Q.src.includes(Ma)&&Q.src.includes(R))return Q;return null}const zr=new Le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),sa=new class ro{constructor(U={},Q=1e3){this.throttleMetadata=U,this.intervalMillis=Q}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Q){this.throttleMetadata[U]=Q}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function rn(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function yi(R){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,z.Z)(function*(R){var U;const{appId:Q,apiKey:fe}=R,qe={method:"GET",headers:rn(fe)},wt=Vi.replace("{app-id}",Q),Ht=yield fetch(wt,qe);if(200!==Ht.status&&304!==Ht.status){let sn="";try{const Vn=yield Ht.json();null!==(U=Vn.error)&&void 0!==U&&U.message&&(sn=Vn.error.message)}catch(Vn){}throw zr.create("config-fetch-failed",{httpStatus:Ht.status,responseMessage:sn})}return Ht.json()})).apply(this,arguments)}function zi(R){return wn.apply(this,arguments)}function wn(){return(wn=(0,z.Z)(function*(R,U=sa,Q){const{appId:fe,apiKey:qe,measurementId:wt}=R.options;if(!fe)throw zr.create("no-app-id");if(!qe){if(wt)return{measurementId:wt,appId:fe};throw zr.create("no-api-key")}const Ht=U.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},sn=new Qt;return setTimeout((0,z.Z)(function*(){sn.abort()}),void 0!==Q?Q:6e4),En({appId:fe,apiKey:qe,measurementId:wt},Ht,sn,U)})).apply(this,arguments)}function En(R,U,Q){return zs.apply(this,arguments)}function zs(){return(zs=(0,z.Z)(function*(R,{throttleEndTimeMillis:U,backoffCount:Q},fe,qe=sa){var wt,Ht;const{appId:sn,measurementId:Vn}=R;try{yield cn(fe,U)}catch(gr){if(Vn)return rs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${null===(wt=gr)||void 0===wt?void 0:wt.message}]`),{appId:sn,measurementId:Vn};throw gr}try{const gr=yield yi(R);return qe.deleteThrottleMetadata(sn),gr}catch(gr){const xr=gr;if(!kt(xr)){if(qe.deleteThrottleMetadata(sn),Vn)return rs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${null==xr?void 0:xr.message}]`),{appId:sn,measurementId:Vn};throw gr}const Pn=503===Number(null===(Ht=null==xr?void 0:xr.customData)||void 0===Ht?void 0:Ht.httpStatus)?(0,Le.$s)(Q,qe.intervalMillis,30):(0,Le.$s)(Q,qe.intervalMillis),ds={throttleEndTimeMillis:Date.now()+Pn,backoffCount:Q+1};return qe.setThrottleMetadata(sn,ds),rs.debug(`Calling attemptFetch again in ${Pn} millis`),En(R,ds,fe,qe)}})).apply(this,arguments)}function cn(R,U){return new Promise((Q,fe)=>{const qe=Math.max(U-Date.now(),0),wt=setTimeout(Q,qe);R.addEventListener(()=>{clearTimeout(wt),fe(zr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function kt(R){if(!(R instanceof Le.ZR&&R.customData))return!1;const U=Number(R.customData.httpStatus);return 429===U||500===U||503===U||504===U}class Qt{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Ni,oa;function ya(){return(ya=(0,z.Z)(function*(R,U,Q,fe,qe){if(qe&&qe.global)R("event",Q,fe);else{const wt=yield U;R("event",Q,Object.assign(Object.assign({},fe),{send_to:wt}))}})).apply(this,arguments)}function lr(R){oa=R}function va(R){Ni=R}function cl(){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,z.Z)(function*(){var R;if(!(0,Le.hl)())return rs.warn(zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Le.eu)()}catch(U){return rs.warn(zr.create("indexeddb-unavailable",{errorInfo:null===(R=U)||void 0===R?void 0:R.toString()}).message),!1}return!0})).apply(this,arguments)}function Yo(){return(Yo=(0,z.Z)(function*(R,U,Q,fe,qe,wt,Ht){var sn;const Vn=zi(R);Vn.then(qs=>{Q[qs.measurementId]=qs.appId,R.options.measurementId&&qs.measurementId!==R.options.measurementId&&rs.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${qs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(qs=>rs.error(qs)),U.push(Vn);const gr=cl().then(qs=>{if(qs)return fe.getId()}),[xr,Pn]=yield Promise.all([Vn,gr]);hu(wt)||Dl(wt,xr.measurementId),oa&&(qe("consent","default",oa),lr(void 0)),qe("js",new Date);const ds=null!==(sn=null==Ht?void 0:Ht.config)&&void 0!==sn?sn:{};return ds.origin="firebase",ds.update=!0,null!=Pn&&(ds[Do]=Pn),qe("config",xr.measurementId,ds),Ni&&(qe("set",Ni),va(void 0)),xr.measurementId})).apply(this,arguments)}class Qr{constructor(U){this.app=U}_delete(){return delete go[this.app.options.appId],Promise.resolve()}}let go={},vi=[];const dn={};let di,Ea,_a="dataLayer",To=!1;function pu(R,U,Q){!function ka(){const R=[];if((0,Le.ru)()&&R.push("This is a browser extension environment."),(0,Le.zI)()||R.push("Cookies are not available."),R.length>0){const U=R.map((fe,qe)=>`(${qe+1}) ${fe}`).join(" "),Q=zr.create("invalid-analytics-context",{errorInfo:U});rs.warn(Q.message)}}();const fe=R.options.appId;if(!fe)throw zr.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw zr.create("no-api-key");rs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=go[fe])throw zr.create("already-exists",{id:fe});if(!To){!function Ul(R){let U=[];Array.isArray(window[R])?U=window[R]:window[R]=U}(_a);const{wrappedGtag:wt,gtagCore:Ht}=function po(R,U,Q,fe,qe){let wt=function(...Ht){window[fe].push(arguments)};return window[qe]&&"function"==typeof window[qe]&&(wt=window[qe]),window[qe]=function Go(R,U,Q,fe){function wt(){return(wt=(0,z.Z)(function*(Ht,sn,Vn){try{"event"===Ht?yield Ra(R,U,Q,sn,Vn):"config"===Ht?yield el(R,U,Q,fe,sn,Vn):"consent"===Ht?R("consent","update",Vn):R("set",sn)}catch(gr){rs.error(gr)}})).apply(this,arguments)}return function qe(Ht,sn,Vn){return wt.apply(this,arguments)}}(wt,R,U,Q),{gtagCore:wt,wrappedGtag:window[qe]}}(go,vi,dn,_a,"gtag");Ea=wt,di=Ht,To=!0}return go[fe]=function er(R,U,Q,fe,qe,wt,Ht){return Yo.apply(this,arguments)}(R,vi,dn,U,di,_a,Q),new Qr(R)}function gu(){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,z.Z)(function*(){if((0,Le.ru)()||!(0,Le.zI)()||!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(R){return!1}})).apply(this,arguments)}const Ia="@firebase/analytics";!function yo(){(0,ke._registerComponent)(new he.wA(no,(U,{options:Q})=>pu(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,ke._registerComponent)(new he.wA("analytics-internal",function R(U){try{const Q=U.getProvider(no).getImmediate();return{logEvent:(fe,qe,wt)=>function io(R,U,Q,fe){R=(0,Le.m9)(R),function Oa(R,U,Q,fe,qe){return ya.apply(this,arguments)}(Ea,go[R.app.options.appId],U,Q,fe).catch(qe=>rs.error(qe))}(Q,fe,qe,wt)}}catch(Q){throw zr.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,ke.registerVersion)(Ia,"0.8.4"),(0,ke.registerVersion)(Ia,"0.8.4","esm2017")}();var As=H(341),za=H(353),Pa=H(2868),Fa=H(8915),Sl=H(2102);const so=new a.GfV("7.5.0"),tl="__angularfire_symbol__analyticsIsSupportedValue",Qo="__angularfire_symbol__analyticsIsSupported",Lo="__angularfire_symbol__remoteConfigIsSupportedValue",ki="__angularfire_symbol__remoteConfigIsSupported",xs="__angularfire_symbol__messagingIsSupportedValue",cs="__angularfire_symbol__messagingIsSupported";function vu(R,U,Q){if(U){if(1===U.length)return U[0];const wt=U.filter(Ht=>Ht.app===Q);if(1===wt.length)return wt[0]}return Q.container.getProvider(R).getImmediate({optional:!0})}globalThis[Qo]||(globalThis[Qo]=gu().then(R=>globalThis[tl]=R).catch(()=>globalThis[tl]=!1)),globalThis[cs]||(globalThis[cs]=xn().then(R=>globalThis[xs]=R).catch(()=>globalThis[xs]=!1)),globalThis[ki]||(globalThis[ki]=Us().then(R=>globalThis[Lo]=R).catch(()=>globalThis[Lo]=!1));const ys=(R,U)=>{const Q=U?[U]:(0,ne.C6)(),fe=[];return Q.forEach(qe=>{qe.container.getProvider(R).instances.forEach(Ht=>{fe.includes(Ht)||fe.push(Ht)})}),fe};function nl(){}class Vo{constructor(U,Q=As.N){this.zone=U,this.delegate=Q}now(){return this.delegate.now()}schedule(U,Q,fe){const qe=this.zone;return this.delegate.schedule(function(Ht){qe.runGuarded(()=>{U.apply(this,[Ht])})},Q,fe)}}class qi{constructor(U){this.zone=U,this.task=null}call(U,Q){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nl,{},nl,nl)),Q.pipe((0,Pa.b)({next:fe,complete:fe,error:fe})).subscribe(U).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Xo=(()=>{class R{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new Vo(Zone.current)),this.insideAngular=Q.run(()=>new Vo(Zone.current,za.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(Q){return new(Q||R)(a.LFG(a.R0b))},R.\u0275prov=a.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function T(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function te(R){return T(),function Ae(R){return function(Q){return(Q=Q.lift(new qi(R.ngZone))).pipe((0,Fa.R)(R.outsideAngular),(0,Sl.QV)(R.insideAngular))}}(T())(R)}},2090:(tn,ot,H)=>{"use strict";H.d(ot,{$s:()=>un,BH:()=>at,DV:()=>Un,Dv:()=>Bn,G6:()=>xt,GJ:()=>Wn,L:()=>pe,LL:()=>Qe,Pz:()=>bt,Sg:()=>$e,UG:()=>st,UI:()=>mr,US:()=>he,Wj:()=>jn,Wl:()=>Nt,Yr:()=>gt,ZB:()=>de,ZR:()=>Xe,aH:()=>Gt,b$:()=>De,cI:()=>Ft,dS:()=>Fn,eu:()=>mt,g5:()=>z,gK:()=>Dr,gQ:()=>an,h$:()=>Ee,hl:()=>Be,hu:()=>ne,jU:()=>nt,lb:()=>ji,m9:()=>On,ne:()=>fr,p$:()=>ce,pd:()=>Cr,r3:()=>ur,ru:()=>Re,tV:()=>be,uI:()=>Ge,ug:()=>si,vZ:()=>zt,w1:()=>me,w9:()=>Rn,xO:()=>tr,xb:()=>or,z$:()=>Ie,zI:()=>ye,zd:()=>nr});const ne=function(je,Ne){if(!je)throw z(Ne)},z=function(je){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+je)},ke=function(je){const Ne=[];let He=0;for(let dt=0;dt<je.length;dt++){let rt=je.charCodeAt(dt);rt<128?Ne[He++]=rt:rt<2048?(Ne[He++]=rt>>6|192,Ne[He++]=63&rt|128):55296==(64512&rt)&&dt+1<je.length&&56320==(64512&je.charCodeAt(dt+1))?(rt=65536+((1023&rt)<<10)+(1023&je.charCodeAt(++dt)),Ne[He++]=rt>>18|240,Ne[He++]=rt>>12&63|128,Ne[He++]=rt>>6&63|128,Ne[He++]=63&rt|128):(Ne[He++]=rt>>12|224,Ne[He++]=rt>>6&63|128,Ne[He++]=63&rt|128)}return Ne},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(je,Ne){if(!Array.isArray(je))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=Ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,dt=[];for(let rt=0;rt<je.length;rt+=3){const on=je[rt],_n=rt+1<je.length,hr=_n?je[rt+1]:0,wr=rt+2<je.length,Nr=wr?je[rt+2]:0;let Me=(15&hr)<<2|Nr>>6,Et=63&Nr;wr||(Et=64,_n||(Me=64)),dt.push(He[on>>2],He[(3&on)<<4|hr>>4],He[Me],He[Et])}return dt.join("")},encodeString(je,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?btoa(je):this.encodeByteArray(ke(je),Ne)},decodeString(je,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?atob(je):function(je){const Ne=[];let He=0,dt=0;for(;He<je.length;){const rt=je[He++];if(rt<128)Ne[dt++]=String.fromCharCode(rt);else if(rt>191&&rt<224){const on=je[He++];Ne[dt++]=String.fromCharCode((31&rt)<<6|63&on)}else if(rt>239&&rt<365){const wr=((7&rt)<<18|(63&je[He++])<<12|(63&je[He++])<<6|63&je[He++])-65536;Ne[dt++]=String.fromCharCode(55296+(wr>>10)),Ne[dt++]=String.fromCharCode(56320+(1023&wr))}else{const on=je[He++],_n=je[He++];Ne[dt++]=String.fromCharCode((15&rt)<<12|(63&on)<<6|63&_n)}}return Ne.join("")}(this.decodeStringToByteArray(je,Ne))},decodeStringToByteArray(je,Ne){this.init_();const He=Ne?this.charToByteMapWebSafe_:this.charToByteMap_,dt=[];for(let rt=0;rt<je.length;){const on=He[je.charAt(rt++)],hr=rt<je.length?He[je.charAt(rt)]:0;++rt;const Nr=rt<je.length?He[je.charAt(rt)]:64;++rt;const Ve=rt<je.length?He[je.charAt(rt)]:64;if(++rt,null==on||null==hr||null==Nr||null==Ve)throw Error();dt.push(on<<2|hr>>4),64!==Nr&&(dt.push(hr<<4&240|Nr>>2),64!==Ve&&dt.push(Nr<<6&192|Ve))}return dt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let je=0;je<this.ENCODED_VALS.length;je++)this.byteToCharMap_[je]=this.ENCODED_VALS.charAt(je),this.charToByteMap_[this.byteToCharMap_[je]]=je,this.byteToCharMapWebSafe_[je]=this.ENCODED_VALS_WEBSAFE.charAt(je),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[je]]=je,je>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(je)]=je,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(je)]=je)}}},Ee=function(je){const Ne=ke(je);return he.encodeByteArray(Ne,!0)},pe=function(je){return Ee(je).replace(/\./g,"")},be=function(je){try{return he.decodeString(je,!0)}catch(Ne){console.error("base64Decode failed: ",Ne)}return null};function ce(je){return de(void 0,je)}function de(je,Ne){if(!(Ne instanceof Object))return Ne;switch(Ne.constructor){case Date:return new Date(Ne.getTime());case Object:void 0===je&&(je={});break;case Array:je=[];break;default:return Ne}for(const He in Ne)!Ne.hasOwnProperty(He)||!ie(He)||(je[He]=de(je[He],Ne[He]));return je}function ie(je){return"__proto__"!==je}function Ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function st(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(je){return!1}}function nt(){return"object"==typeof self&&self.self===self}function Re(){const je="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof je&&void 0!==je.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const je=Ie();return je.indexOf("MSIE ")>=0||je.indexOf("Trident/")>=0}function gt(){return!1}function xt(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function mt(){return new Promise((je,Ne)=>{try{let He=!0;const dt="validate-browser-context-for-indexeddb-analytics-module",rt=self.indexedDB.open(dt);rt.onsuccess=()=>{rt.result.close(),He||self.indexedDB.deleteDatabase(dt),je(!0)},rt.onupgradeneeded=()=>{He=!1},rt.onerror=()=>{var on;Ne((null===(on=rt.error)||void 0===on?void 0:on.message)||"")}}catch(He){Ne(He)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Se=()=>{try{return function Oe(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const je=process.env.__FIREBASE_DEFAULTS__;return je?JSON.parse(je):void 0})()||(()=>{if("undefined"==typeof document)return;let je;try{je=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(He){return}const Ne=je&&be(je[1]);return Ne&&JSON.parse(Ne)})()}catch(je){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${je}`)}},Gt=()=>{var je;return null===(je=Se())||void 0===je?void 0:je.config},bt=je=>{var Ne;return null===(Ne=Se())||void 0===Ne?void 0:Ne[`_${je}`]};class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ne,He)=>{this.resolve=Ne,this.reject=He})}wrapCallback(Ne){return(He,dt)=>{He?this.reject(He):this.resolve(dt),"function"==typeof Ne&&(this.promise.catch(()=>{}),1===Ne.length?Ne(He):Ne(He,dt))}}}function $e(je,Ne){if(je.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const dt=Ne||"demo-project",rt=je.iat||0,on=je.sub||je.user_id;if(!on)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _n=Object.assign({iss:`https://securetoken.google.com/${dt}`,aud:dt,iat:rt,exp:rt+3600,auth_time:rt,sub:on,user_id:on,firebase:{sign_in_provider:"custom",identities:{}}},je);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(_n)),""].join(".")}class Xe extends Error{constructor(Ne,He,dt){super(He),this.code=Ne,this.customData=dt,this.name="FirebaseError",Object.setPrototypeOf(this,Xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(Ne,He,dt){this.service=Ne,this.serviceName=He,this.errors=dt}create(Ne,...He){const dt=He[0]||{},rt=`${this.service}/${Ne}`,on=this.errors[Ne],_n=on?function ht(je,Ne){return je.replace(ft,(He,dt)=>{const rt=Ne[dt];return null!=rt?String(rt):`<${dt}?>`})}(on,dt):"Error";return new Xe(rt,`${this.serviceName}: ${_n} (${rt}).`,dt)}}const ft=/\{\$([^}]+)}/g;function Ft(je){return JSON.parse(je)}function Nt(je){return JSON.stringify(je)}const bn=function(je){let Ne={},He={},dt={},rt="";try{const on=je.split(".");Ne=Ft(be(on[0])||""),He=Ft(be(on[1])||""),rt=on[2],dt=He.d||{},delete He.d}catch(on){}return{header:Ne,claims:He,data:dt,signature:rt}},Rn=function(je){const He=bn(je).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},Wn=function(je){const Ne=bn(je).claims;return"object"==typeof Ne&&!0===Ne.admin};function ur(je,Ne){return Object.prototype.hasOwnProperty.call(je,Ne)}function Un(je,Ne){if(Object.prototype.hasOwnProperty.call(je,Ne))return je[Ne]}function or(je){for(const Ne in je)if(Object.prototype.hasOwnProperty.call(je,Ne))return!1;return!0}function mr(je,Ne,He){const dt={};for(const rt in je)Object.prototype.hasOwnProperty.call(je,rt)&&(dt[rt]=Ne.call(He,je[rt],rt,je));return dt}function zt(je,Ne){if(je===Ne)return!0;const He=Object.keys(je),dt=Object.keys(Ne);for(const rt of He){if(!dt.includes(rt))return!1;const on=je[rt],_n=Ne[rt];if(rr(on)&&rr(_n)){if(!zt(on,_n))return!1}else if(on!==_n)return!1}for(const rt of dt)if(!He.includes(rt))return!1;return!0}function rr(je){return null!==je&&"object"==typeof je}function tr(je){const Ne=[];for(const[He,dt]of Object.entries(je))Array.isArray(dt)?dt.forEach(rt=>{Ne.push(encodeURIComponent(He)+"="+encodeURIComponent(rt))}):Ne.push(encodeURIComponent(He)+"="+encodeURIComponent(dt));return Ne.length?"&"+Ne.join("&"):""}function nr(je){const Ne={};return je.replace(/^\?/,"").split("&").forEach(dt=>{if(dt){const[rt,on]=dt.split("=");Ne[decodeURIComponent(rt)]=decodeURIComponent(on)}}),Ne}function Cr(je){const Ne=je.indexOf("?");if(!Ne)return"";const He=je.indexOf("#",Ne);return je.substring(Ne,He>0?He:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ne=1;Ne<this.blockSize;++Ne)this.pad_[Ne]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ne,He){He||(He=0);const dt=this.W_;if("string"==typeof Ne)for(let Ve=0;Ve<16;Ve++)dt[Ve]=Ne.charCodeAt(He)<<24|Ne.charCodeAt(He+1)<<16|Ne.charCodeAt(He+2)<<8|Ne.charCodeAt(He+3),He+=4;else for(let Ve=0;Ve<16;Ve++)dt[Ve]=Ne[He]<<24|Ne[He+1]<<16|Ne[He+2]<<8|Ne[He+3],He+=4;for(let Ve=16;Ve<80;Ve++){const Me=dt[Ve-3]^dt[Ve-8]^dt[Ve-14]^dt[Ve-16];dt[Ve]=4294967295&(Me<<1|Me>>>31)}let Nr,pt,rt=this.chain_[0],on=this.chain_[1],_n=this.chain_[2],hr=this.chain_[3],wr=this.chain_[4];for(let Ve=0;Ve<80;Ve++){Ve<40?Ve<20?(Nr=hr^on&(_n^hr),pt=1518500249):(Nr=on^_n^hr,pt=1859775393):Ve<60?(Nr=on&_n|hr&(on|_n),pt=2400959708):(Nr=on^_n^hr,pt=3395469782);const Me=(rt<<5|rt>>>27)+Nr+wr+pt+dt[Ve]&4294967295;wr=hr,hr=_n,_n=4294967295&(on<<30|on>>>2),on=rt,rt=Me}this.chain_[0]=this.chain_[0]+rt&4294967295,this.chain_[1]=this.chain_[1]+on&4294967295,this.chain_[2]=this.chain_[2]+_n&4294967295,this.chain_[3]=this.chain_[3]+hr&4294967295,this.chain_[4]=this.chain_[4]+wr&4294967295}update(Ne,He){if(null==Ne)return;void 0===He&&(He=Ne.length);const dt=He-this.blockSize;let rt=0;const on=this.buf_;let _n=this.inbuf_;for(;rt<He;){if(0===_n)for(;rt<=dt;)this.compress_(Ne,rt),rt+=this.blockSize;if("string"==typeof Ne){for(;rt<He;)if(on[_n]=Ne.charCodeAt(rt),++_n,++rt,_n===this.blockSize){this.compress_(on),_n=0;break}}else for(;rt<He;)if(on[_n]=Ne[rt],++_n,++rt,_n===this.blockSize){this.compress_(on),_n=0;break}}this.inbuf_=_n,this.total_+=He}digest(){const Ne=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let rt=this.blockSize-1;rt>=56;rt--)this.buf_[rt]=255&He,He/=256;this.compress_(this.buf_);let dt=0;for(let rt=0;rt<5;rt++)for(let on=24;on>=0;on-=8)Ne[dt]=this.chain_[rt]>>on&255,++dt;return Ne}}function fr(je,Ne){const He=new Tn(je,Ne);return He.subscribe.bind(He)}class Tn{constructor(Ne,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{Ne(this)}).catch(dt=>{this.error(dt)})}next(Ne){this.forEachObserver(He=>{He.next(Ne)})}error(Ne){this.forEachObserver(He=>{He.error(Ne)}),this.close(Ne)}complete(){this.forEachObserver(Ne=>{Ne.complete()}),this.close()}subscribe(Ne,He,dt){let rt;if(void 0===Ne&&void 0===He&&void 0===dt)throw new Error("Missing Observer.");rt=function Tt(je,Ne){if("object"!=typeof je||null===je)return!1;for(const He of Ne)if(He in je&&"function"==typeof je[He])return!0;return!1}(Ne,["next","error","complete"])?Ne:{next:Ne,error:He,complete:dt},void 0===rt.next&&(rt.next=yr),void 0===rt.error&&(rt.error=yr),void 0===rt.complete&&(rt.complete=yr);const on=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?rt.error(this.finalError):rt.complete()}catch(_n){}}),this.observers.push(rt),on}unsubscribeOne(Ne){void 0===this.observers||void 0===this.observers[Ne]||(delete this.observers[Ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ne){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,Ne)}sendOne(Ne,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ne])try{He(this.observers[Ne])}catch(dt){"undefined"!=typeof console&&console.error&&console.error(dt)}})}close(Ne){this.finalized||(this.finalized=!0,void 0!==Ne&&(this.finalError=Ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const Bn=function(je,Ne,He,dt){let rt;if(dt<Ne?rt="at least "+Ne:dt>He&&(rt=0===He?"none":"no more than "+He),rt)throw new Error(je+" failed: Was called with "+dt+(1===dt?" argument.":" arguments.")+" Expects "+rt+".")};function Dr(je,Ne){return`${je} failed: ${Ne} argument `}function jn(je,Ne,He,dt){if((!dt||He)&&"function"!=typeof He)throw new Error(Dr(je,Ne)+"must be a valid function.")}function ji(je,Ne,He,dt){if((!dt||He)&&("object"!=typeof He||null===He))throw new Error(Dr(je,Ne)+"must be a valid context object.")}const Fn=function(je){const Ne=[];let He=0;for(let dt=0;dt<je.length;dt++){let rt=je.charCodeAt(dt);if(rt>=55296&&rt<=56319){const on=rt-55296;dt++,ne(dt<je.length,"Surrogate pair missing trail surrogate."),rt=65536+(on<<10)+(je.charCodeAt(dt)-56320)}rt<128?Ne[He++]=rt:rt<2048?(Ne[He++]=rt>>6|192,Ne[He++]=63&rt|128):rt<65536?(Ne[He++]=rt>>12|224,Ne[He++]=rt>>6&63|128,Ne[He++]=63&rt|128):(Ne[He++]=rt>>18|240,Ne[He++]=rt>>12&63|128,Ne[He++]=rt>>6&63|128,Ne[He++]=63&rt|128)}return Ne},si=function(je){let Ne=0;for(let He=0;He<je.length;He++){const dt=je.charCodeAt(He);dt<128?Ne++:dt<2048?Ne+=2:dt>=55296&&dt<=56319?(Ne+=4,He++):Ne+=3}return Ne};function un(je,Ne=1e3,He=2){const dt=Ne*Math.pow(He,je),rt=Math.round(.5*dt*(Math.random()-.5)*2);return Math.min(144e5,dt+rt)}function On(je){return je&&je._delegate?je._delegate:je}},4153:(tn,ot,H)=>{"use strict";H.d(ot,{dr:()=>Dr,YG:()=>Yr,wI:()=>Ne,W2:()=>He,Gu:()=>pt,gu:()=>Ve,pK:()=>hn,Ie:()=>fn,u8:()=>ar,IK:()=>Hr,td:()=>Fr,Q$:()=>ei,q_:()=>hi,jP:()=>_r,Nd:()=>Ke,yq:()=>pr,ZU:()=>kr,UN:()=>Jn,wd:()=>Ut,sr:()=>Dn,Pc:()=>N,r4:()=>Is,j9:()=>Cr});var a=H(5e3),ne=H(4182),z=H(655),ke=H(6498),Le=H(6688),he=H(7043),Ee=H(4850);function be(m,k,E,V){return(0,he.m)(E)&&(V=E,E=void 0),V?be(m,k,E).pipe((0,Ee.U)(oe=>(0,Le.k)(oe)?V(...oe):V(oe))):new ke.y(oe=>{ce(m,k,function ut(Xt){oe.next(arguments.length>1?Array.prototype.slice.call(arguments):Xt)},oe,E)})}function ce(m,k,E,V,oe){let ut;if(function Ie(m){return m&&"function"==typeof m.addEventListener&&"function"==typeof m.removeEventListener}(m)){const Xt=m;m.addEventListener(k,E,oe),ut=()=>Xt.removeEventListener(k,E,oe)}else if(function ie(m){return m&&"function"==typeof m.on&&"function"==typeof m.off}(m)){const Xt=m;m.on(k,E),ut=()=>Xt.off(k,E)}else if(function de(m){return m&&"function"==typeof m.addListener&&"function"==typeof m.removeListener}(m)){const Xt=m;m.addListener(k,E),ut=()=>Xt.removeListener(k,E)}else{if(!m||!m.length)throw new TypeError("Invalid event target");for(let Xt=0,mn=m.length;Xt<mn;Xt++)ce(m[Xt],k,E,V,oe)}V.add(ut)}var Ge=H(8929),st=H(591),nt=H(4740),vt=(H(8834),H(3953),H(3880),H(1911),H(9658)),gt=H(5730),xt=H(697),mt=(H(4292),H(4414)),ve=(H(3457),H(4349),H(1308)),Gt=H(2198),bt=H(7545),at=H(5778),$e=H(9808);const Xe=vt.i,ft=["*"],Ft=["outlet"],Nt=[[["","slot","top"]],"*"],bn=["[slot=top]","*"],Rn=m=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(m):"function"==typeof requestAnimationFrame?requestAnimationFrame(m):setTimeout(m),Wn=m=>!!m.resolveComponentFactory;let ur=(()=>{class m{constructor(E,V){this.injector=E,this.el=V,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(E){this.el.nativeElement.value=this.lastValue=null==E?"":E,Un(this.el)}handleChangeEvent(E,V){E===this.el.nativeElement&&(V!==this.lastValue&&(this.lastValue=V,this.onChange(V)),Un(this.el))}_handleBlurEvent(E){E===this.el.nativeElement&&(this.onTouched(),Un(this.el))}registerOnChange(E){this.onChange=E}registerOnTouched(E){this.onTouched=E}setDisabledState(E){this.el.nativeElement.disabled=E}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let E;try{E=this.injector.get(ne.a5)}catch(oe){}if(!E)return;E.statusChanges&&(this.statusChanges=E.statusChanges.subscribe(()=>Un(this.el)));const V=E.control;V&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(ut=>{if(void 0!==V[ut]){const Xt=V[ut].bind(V);V[ut]=(...mn)=>{Xt(...mn),Un(this.el)}}})}}return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.zs3),a.Y36(a.SBq))},m.\u0275dir=a.lG2({type:m,hostBindings:function(E,V){1&E&&a.NdJ("ionBlur",function(ut){return V._handleBlurEvent(ut.target)})}}),m})();const Un=m=>{Rn(()=>{const k=m.nativeElement,E=null!=k.value&&k.value.toString().length>0,V=or(k);mr(k,V);const oe=k.closest("ion-item");oe&&mr(oe,E?[...V,"item-has-value"]:V)})},or=m=>{const k=m.classList,E=[];for(let V=0;V<k.length;V++){const oe=k.item(V);null!==oe&&zt(oe,"ng-")&&E.push(`ion-${oe.substring(3)}`)}return E},mr=(m,k)=>{const E=m.classList;E.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),E.add(...k)},zt=(m,k)=>m.substring(0,k.length)===k;let Cr=(()=>{class m extends ur{constructor(E,V){super(E,V)}_handleInputEvent(E){this.handleChangeEvent(E,E.value)}}return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.zs3),a.Y36(a.SBq))},m.\u0275dir=a.lG2({type:m,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(E,V){1&E&&a.NdJ("ionChange",function(ut){return V._handleInputEvent(ut.target)})},features:[a._Bn([{provide:ne.JU,useExisting:m,multi:!0}]),a.qOj]}),m})();const an=(m,k)=>{const E=m.prototype;k.forEach(V=>{Object.defineProperty(E,V,{get(){return this.el[V]},set(oe){this.z.runOutsideAngular(()=>this.el[V]=oe)}})})},fr=(m,k)=>{const E=m.prototype;k.forEach(V=>{E[V]=function(){const oe=arguments;return this.z.runOutsideAngular(()=>this.el[V].apply(this.el,oe))}})},Tn=(m,k,E)=>{E.forEach(V=>m[V]=be(k,V))};function Tt(m){return function(E){const{defineCustomElementFn:V,inputs:oe,methods:ut}=m;return void 0!==V&&V(),oe&&an(E,oe),ut&&fr(E,ut),E}}let Dr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-app"]],ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0})],m),m})(),Yr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionFocus","ionBlur"])}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],m),m})(),Ne=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],m),m})(),He=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],m),m})(),pt=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],m),m})(),Ve=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],m),m})(),hn=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],m),m})(),fn=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],m),m})(),ar=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],m),m})(),Hr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionSwipe"])}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["side"]})],m),m})(),Fr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionDrag"])}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],m),m})(),ei=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],m),m})(),hi=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],m),m})(),Ke=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-row"]],ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0})],m),m})(),pr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode","selectedTab","translucent"]})],m),m})(),kr=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],m),m})(),Ut=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","size"]})],m),m})(),Dn=(()=>{let m=class{constructor(E,V,oe){this.z=oe,E.detach(),this.el=V.nativeElement}};return m.\u0275fac=function(E){return new(E||m)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:ft,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),m=(0,z.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode"]})],m),m})();class Yn{constructor(k={}){this.data=k}get(k){return this.data[k]}}let ui=(()=>{class m{constructor(E,V){this.zone=E,this.appRef=V}create(E,V,oe){return new Br(E,V,oe,this.appRef,this.zone)}}return m.\u0275fac=function(E){return new(E||m)(a.LFG(a.R0b),a.LFG(a.z2F))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac}),m})();class Br{constructor(k,E,V,oe,ut){this.resolverOrInjector=k,this.injector=E,this.location=V,this.appRef=oe,this.zone=ut,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(k,E,V,oe){return this.zone.run(()=>new Promise(ut=>{ut(Os(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,k,E,V,oe))}))}removeViewFromDom(k,E){return this.zone.run(()=>new Promise(V=>{const oe=this.elRefMap.get(E);if(oe){oe.destroy(),this.elRefMap.delete(E);const ut=this.elEventsMap.get(E);ut&&(ut(),this.elEventsMap.delete(E))}V()}))}}const Os=(m,k,E,V,oe,ut,Xt,mn,Zn,ti,Ai)=>{let ci;const ns=a.zs3.create({providers:Ji(ti),parent:E});if(k&&Wn(k)){const Ps=k.resolveComponentFactory(Zn);ci=V?V.createComponent(Ps,V.length,ns):Ps.create(ns)}else{if(!V)return null;ci=V.createComponent(Zn,{index:V.indexOf,injector:ns,environmentInjector:k})}const ws=ci.instance,bs=ci.location.nativeElement;if(ti&&Object.assign(ws,ti),Ai)for(const Ps of Ai)bs.classList.add(Ps);const us=Ir(m,ws,bs);return mn.appendChild(bs),V||oe.attachView(ci.hostView),ci.changeDetectorRef.reattach(),ut.set(bs,ci),Xt.set(bs,us),bs},Sr=[xt.L,xt.a,xt.b,xt.c,xt.d],Ir=(m,k,E)=>m.run(()=>{const V=Sr.filter(oe=>"function"==typeof k[oe]).map(oe=>{const ut=Xt=>k[oe](Xt.detail);return E.addEventListener(oe,ut),()=>E.removeEventListener(oe,ut)});return()=>V.forEach(oe=>oe())}),Xn=new a.OlP("NavParamsToken"),Ji=m=>[{provide:Xn,useValue:m},{provide:Yn,useFactory:Zr,deps:[Xn]}],Zr=m=>new Yn(m),ta=(m,k)=>((m=m.filter(E=>E.stackId!==k.stackId)).push(k),m),Ar=(m,k)=>{const E=m.createUrlTree(["."],{relativeTo:k});return m.serializeUrl(E)},mi=(m,k)=>{if(!m)return;const E=Js(k);for(let V=0;V<E.length;V++){if(V>=m.length)return E[V];if(E[V]!==m[V])return}},Js=m=>m.split("/").map(k=>k.trim()).filter(k=>""!==k),Hs=m=>{m&&(m.ref.destroy(),m.unlistenEvents())};class pi{constructor(k,E,V,oe,ut,Xt){this.containerEl=E,this.router=V,this.navCtrl=oe,this.zone=ut,this.location=Xt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==k?Js(k):void 0}createView(k,E){var V;const oe=Ar(this.router,E),ut=null===(V=null==k?void 0:k.location)||void 0===V?void 0:V.nativeElement,Xt=Ir(this.zone,k.instance,ut);return{id:this.nextId++,stackId:mi(this.tabsPrefix,oe),unlistenEvents:Xt,element:ut,ref:k,url:oe}}getExistingView(k){const E=Ar(this.router,k),V=this.views.find(oe=>oe.url===E);return V&&V.ref.changeDetectorRef.reattach(),V}setActive(k){var E,V;const oe=this.navCtrl.consumeTransition();let{direction:ut,animation:Xt,animationBuilder:mn}=oe;const Zn=this.activeView,ti=((m,k)=>!k||m.stackId!==k.stackId)(k,Zn);ti&&(ut="back",Xt=void 0);const Ai=this.views.slice();let ci;const ns=this.router;ns.getCurrentNavigation?ci=ns.getCurrentNavigation():!(null===(E=ns.navigations)||void 0===E)&&E.value&&(ci=ns.navigations.value),null!==(V=null==ci?void 0:ci.extras)&&void 0!==V&&V.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const ws=this.views.includes(k),bs=this.insertView(k,ut);ws||k.ref.changeDetectorRef.detectChanges();const us=k.animationBuilder;return void 0===mn&&"back"===ut&&!ti&&void 0!==us&&(mn=us),Zn&&(Zn.animationBuilder=mn),this.zone.runOutsideAngular(()=>this.wait(()=>(Zn&&Zn.ref.changeDetectorRef.detach(),k.ref.changeDetectorRef.reattach(),this.transition(k,Zn,Xt,this.canGoBack(1),!1,mn).then(()=>os(k,bs,Ai,this.location,this.zone)).then(()=>({enteringView:k,direction:ut,animation:Xt,tabSwitch:ti})))))}canGoBack(k,E=this.getActiveStackId()){return this.getStack(E).length>k}pop(k,E=this.getActiveStackId()){return this.zone.run(()=>{var V,oe;const ut=this.getStack(E);if(ut.length<=k)return Promise.resolve(!1);const Xt=ut[ut.length-k-1];let mn=Xt.url;const Zn=Xt.savedData;if(Zn){const Ai=Zn.get("primary");null!==(oe=null===(V=null==Ai?void 0:Ai.route)||void 0===V?void 0:V._routerState)&&void 0!==oe&&oe.snapshot.url&&(mn=Ai.route._routerState.snapshot.url)}const{animationBuilder:ti}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(mn,Object.assign(Object.assign({},Xt.savedExtras),{animation:ti})).then(()=>!0)})}startBackTransition(){const k=this.activeView;if(k){const E=this.getStack(k.stackId),V=E[E.length-2],oe=V.animationBuilder;return this.wait(()=>this.transition(V,k,"back",this.canGoBack(2),!0,oe))}return Promise.resolve()}endBackTransition(k){k?(this.skipTransition=!0,this.pop(1)):this.activeView&&fs(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(k){const E=this.getStack(k);return E.length>0?E[E.length-1]:void 0}getRootUrl(k){const E=this.getStack(k);return E.length>0?E[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(Hs),this.activeView=void 0,this.views=[]}getStack(k){return this.views.filter(E=>E.stackId===k)}insertView(k,E){return this.activeView=k,this.views=((m,k,E)=>"root"===E?ta(m,k):"forward"===E?((m,k)=>(m.indexOf(k)>=0?m=m.filter(V=>V.stackId!==k.stackId||V.id<=k.id):m.push(k),m))(m,k):((m,k)=>m.indexOf(k)>=0?m.filter(V=>V.stackId!==k.stackId||V.id<=k.id):ta(m,k))(m,k))(this.views,k,E),this.views.slice()}transition(k,E,V,oe,ut,Xt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(E===k)return Promise.resolve(!1);const mn=k?k.element:void 0,Zn=E?E.element:void 0,ti=this.containerEl;return mn&&mn!==Zn&&(mn.classList.add("ion-page"),mn.classList.add("ion-page-invisible"),mn.parentElement!==ti&&ti.appendChild(mn),ti.commit)?ti.commit(mn,Zn,{deepWait:!0,duration:void 0===V?0:void 0,direction:V,showGoBack:oe,progressAnimation:ut,animationBuilder:Xt}):Promise.resolve(!1)}wait(k){return(0,z.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const E=this.runningTask=k();return E.finally(()=>this.runningTask=void 0),E})}}const os=(m,k,E,V,oe)=>"function"==typeof requestAnimationFrame?new Promise(ut=>{requestAnimationFrame(()=>{fs(m,k,E,V,oe),ut()})}):Promise.resolve(),fs=(m,k,E,V,oe)=>{oe.run(()=>E.filter(ut=>!k.includes(ut)).forEach(Hs)),k.forEach(ut=>{const mn=V.path().split("?")[0].split("#")[0];if(ut!==m&&ut.url!==mn){const Zn=ut.element;Zn.setAttribute("aria-hidden","true"),Zn.classList.add("ion-page-hidden"),ut.ref.changeDetectorRef.detach()}})};let vs=(()=>{class m{get(E,V){const oe=Di();return oe?oe.get(E,V):null}getBoolean(E,V){const oe=Di();return!!oe&&oe.getBoolean(E,V)}getNumber(E,V){const oe=Di();return oe?oe.getNumber(E,V):0}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const ps=new a.OlP("USERCONFIG"),Di=()=>{if("undefined"!=typeof window){const m=window.Ionic;if(null!=m&&m.config)return m.config}return null};let No=(()=>{class m{constructor(E,V){this.doc=E,this.backButton=new Ge.xQ,this.keyboardDidShow=new Ge.xQ,this.keyboardDidHide=new Ge.xQ,this.pause=new Ge.xQ,this.resume=new Ge.xQ,this.resize=new Ge.xQ,V.run(()=>{var oe;let ut;this.win=E.defaultView,this.backButton.subscribeWithPriority=function(Xt,mn){return this.subscribe(Zn=>Zn.register(Xt,ti=>V.run(()=>mn(ti))))},ts(this.pause,E,"pause"),ts(this.resume,E,"resume"),ts(this.backButton,E,"ionBackButton"),ts(this.resize,this.win,"resize"),ts(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ts(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Xt=>{ut=Xt}),null!==(oe=this.win)&&void 0!==oe&&oe.cordova?E.addEventListener("deviceready",()=>{ut("cordova")},{once:!0}):ut("dom")})}is(E){return(0,vt.a)(this.win,E)}platforms(){return(0,vt.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(E){return Hi(this.win.location.href,E)}isLandscape(){return!this.isPortrait()}isPortrait(){var E,V;return null===(V=(E=this.win).matchMedia)||void 0===V?void 0:V.call(E,"(orientation: portrait)").matches}testUserAgent(E){const V=this.win.navigator;return!!((null==V?void 0:V.userAgent)&&V.userAgent.indexOf(E)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return m.\u0275fac=function(E){return new(E||m)(a.LFG($e.K0),a.LFG(a.R0b))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const Hi=(m,k)=>{k=k.replace(/[[\]\\]/g,"\\$&");const V=new RegExp("[\\?&]"+k+"=([^&#]*)").exec(m);return V?decodeURIComponent(V[1].replace(/\+/g," ")):null},ts=(m,k,E)=>{k&&k.addEventListener(E,V=>{m.next(null!=V?V.detail:void 0)})};let gs=(()=>{class m{constructor(E,V,oe,ut){this.location=V,this.serializer=oe,this.router=ut,this.direction=Ys,this.animated=Gs,this.guessDirection="forward",this.lastNavId=-1,ut&&ut.events.subscribe(Xt=>{if(Xt instanceof nt.OD){const mn=Xt.restoredState?Xt.restoredState.navigationId:Xt.id;this.guessDirection=mn<this.lastNavId?"back":"forward",this.guessAnimation=Xt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Xt.id:mn}}),E.backButton.subscribeWithPriority(0,Xt=>{this.pop(),Xt()})}navigateForward(E,V={}){return this.setDirection("forward",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}navigateBack(E,V={}){return this.setDirection("back",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}navigateRoot(E,V={}){return this.setDirection("root",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}back(E={animated:!0,animationDirection:"back"}){return this.setDirection("back",E.animated,E.animationDirection,E.animation),this.location.back()}pop(){return(0,z.mG)(this,void 0,void 0,function*(){let E=this.topOutlet;for(;E&&!(yield E.pop());)E=E.parentOutlet})}setDirection(E,V,oe,ut){this.direction=E,this.animated=ai(E,V,oe),this.animationBuilder=ut}setTopOutlet(E){this.topOutlet=E}consumeTransition(){let V,E="root";const oe=this.animationBuilder;return"auto"===this.direction?(E=this.guessDirection,V=this.guessAnimation):(V=this.animated,E=this.direction),this.direction=Ys,this.animated=Gs,this.animationBuilder=void 0,{direction:E,animation:V,animationBuilder:oe}}navigate(E,V){if(Array.isArray(E))return this.router.navigate(E,V);{const oe=this.serializer.parse(E.toString());return void 0!==V.queryParams&&(oe.queryParams=Object.assign({},V.queryParams)),void 0!==V.fragment&&(oe.fragment=V.fragment),this.router.navigateByUrl(oe,V)}}}return m.\u0275fac=function(E){return new(E||m)(a.LFG(No),a.LFG($e.Ye),a.LFG(nt.Hx),a.LFG(nt.F0,8))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})();const ai=(m,k,E)=>{if(!1!==k){if(void 0!==E)return E;if("forward"===m||"back"===m)return m;if("root"===m&&!0===k)return"forward"}},Ys="auto",Gs=void 0;let _r=(()=>{class m{constructor(E,V,oe,ut,Xt,mn,Zn,ti,Ai,ci,ns,ws,bs){this.parentContexts=E,this.location=V,this.config=Xt,this.navCtrl=mn,this.componentFactoryResolver=Zn,this.parentOutlet=bs,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new st.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=Ai.nativeElement,this.name=oe||nt.eC,this.tabsPrefix="true"===ut?Ar(ci,ws):void 0,this.stackCtrl=new pi(this.tabsPrefix,this.nativeEl,ci,mn,ns,ti),E.onChildOutletCreated(this.name,this)}set animation(E){this.nativeEl.animation=E}set animated(E){this.nativeEl.animated=E}set swipeGesture(E){this._swipeGesture=E,this.nativeEl.swipeHandler=E?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:V=>this.stackCtrl.endBackTransition(V)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const E=this.getContext();null!=E&&E.route&&this.activateWith(E.route,E.resolver||null)}new Promise(E=>(0,gt.c)(this.nativeEl,E)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(E,V){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const V=this.getContext();this.activatedView.savedData=new Map(V.children.contexts);const oe=this.activatedView.savedData.get("primary");if(oe&&V.route&&(oe.route=Object.assign({},V.route)),this.activatedView.savedExtras={},V.route){const ut=V.route.snapshot;this.activatedView.savedExtras.queryParams=ut.queryParams,this.activatedView.savedExtras.fragment=ut.fragment}}const E=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,V){var oe;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;let ut,Xt=this.stackCtrl.getExistingView(E);if(Xt){ut=this.activated=Xt.ref;const mn=Xt.savedData;mn&&(this.getContext().children.contexts=mn),this.updateActivatedRouteProxy(ut.instance,E)}else{const mn=E._futureSnapshot;if(null==mn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Zn=this.parentContexts.getOrCreateContext(this.name).children,ti=new st.X(null),Ai=this.createActivatedRouteProxy(ti,E),ci=new gi(Ai,Zn,this.location.injector),ns=null!==(oe=mn.routeConfig.component)&&void 0!==oe?oe:mn.component;if((V=V||this.componentFactoryResolver)&&Wn(V)){const ws=V.resolveComponentFactory(ns);ut=this.activated=this.location.createComponent(ws,this.location.length,ci)}else ut=this.activated=this.location.createComponent(ns,{index:this.location.length,injector:ci,environmentInjector:null!=V?V:this.environmentInjector});ti.next(ut.instance),Xt=this.stackCtrl.createView(this.activated,E),this.proxyMap.set(ut.instance,Ai),this.currentActivatedRoute$.next({component:ut.instance,activatedRoute:E})}this.activatedView=Xt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Xt).then(mn=>{this.activateEvents.emit(ut.instance),this.stackEvents.emit(mn)})}canGoBack(E=1,V){return this.stackCtrl.canGoBack(E,V)}pop(E=1,V){return this.stackCtrl.pop(E,V)}getLastUrl(E){const V=this.stackCtrl.getLastUrl(E);return V?V.url:void 0}getLastRouteView(E){return this.stackCtrl.getLastUrl(E)}getRootView(E){return this.stackCtrl.getRootUrl(E)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(E,V){const oe=new nt.gz;return oe._futureSnapshot=V._futureSnapshot,oe._routerState=V._routerState,oe.snapshot=V.snapshot,oe.outlet=V.outlet,oe.component=V.component,oe._paramMap=this.proxyObservable(E,"paramMap"),oe._queryParamMap=this.proxyObservable(E,"queryParamMap"),oe.url=this.proxyObservable(E,"url"),oe.params=this.proxyObservable(E,"params"),oe.queryParams=this.proxyObservable(E,"queryParams"),oe.fragment=this.proxyObservable(E,"fragment"),oe.data=this.proxyObservable(E,"data"),oe}proxyObservable(E,V){return E.pipe((0,Gt.h)(oe=>!!oe),(0,bt.w)(oe=>this.currentActivatedRoute$.pipe((0,Gt.h)(ut=>null!==ut&&ut.component===oe),(0,bt.w)(ut=>ut&&ut.activatedRoute[V]),(0,at.x)())))}updateActivatedRouteProxy(E,V){const oe=this.proxyMap.get(E);if(!oe)throw new Error("Could not find activated route proxy for view");oe._futureSnapshot=V._futureSnapshot,oe._routerState=V._routerState,oe.snapshot=V.snapshot,oe.outlet=V.outlet,oe.component=V.component,this.currentActivatedRoute$.next({component:E,activatedRoute:V})}}return m.\u0275fac=function(E){return new(E||m)(a.Y36(nt.y6),a.Y36(a.s_b),a.$8M("name"),a.$8M("tabs"),a.Y36(vs),a.Y36(gs),a.Y36(a._Vd,8),a.Y36($e.Ye),a.Y36(a.SBq),a.Y36(nt.F0),a.Y36(a.R0b),a.Y36(nt.gz),a.Y36(m,12))},m.\u0275dir=a.lG2({type:m,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),m})();class gi{constructor(k,E,V){this.route=k,this.childContexts=E,this.parent=V}get(k,E){return k===nt.gz?this.route:k===nt.y6?this.childContexts:this.parent.get(k,E)}}let Jn=(()=>{class m{constructor(E){this.navCtrl=E,this.ionTabsWillChange=new a.vpe,this.ionTabsDidChange=new a.vpe}onPageSelected(E){const V=E.enteringView.stackId;E.tabSwitch&&void 0!==V&&(this.ionTabsWillChange.emit({tab:V}),this.tabBar&&(this.tabBar.selectedTab=V),this.ionTabsDidChange.emit({tab:V}))}select(E){const V="string"==typeof E,oe=V?E:E.detail.tab,ut=this.outlet.getActiveStackId()===oe,Xt=`${this.outlet.tabsPrefix}/${oe}`;if(V||E.stopPropagation(),ut){const mn=this.outlet.getActiveStackId(),Zn=this.outlet.getLastRouteView(mn);if((null==Zn?void 0:Zn.url)===Xt)return;const ti=this.outlet.getRootView(oe);return this.navCtrl.navigateRoot(Xt,Object.assign(Object.assign({},ti&&Xt===ti.url&&ti.savedExtras),{animated:!0,animationDirection:"back"}))}{const mn=this.outlet.getLastRouteView(oe);return this.navCtrl.navigateRoot((null==mn?void 0:mn.url)||Xt,Object.assign(Object.assign({},null==mn?void 0:mn.savedExtras),{animated:!0,animationDirection:"back"}))}}getSelected(){return this.outlet.getActiveStackId()}}return m.\u0275fac=function(E){return new(E||m)(a.Y36(gs))},m.\u0275cmp=a.Xpm({type:m,selectors:[["ion-tabs"]],contentQueries:function(E,V,oe){if(1&E&&a.Suo(oe,pr,5),2&E){let ut;a.iGM(ut=a.CRH())&&(V.tabBar=ut.first)}},viewQuery:function(E,V){if(1&E&&a.Gf(Ft,5,_r),2&E){let oe;a.iGM(oe=a.CRH())&&(V.outlet=oe.first)}},hostBindings:function(E,V){1&E&&a.NdJ("ionTabButtonClick",function(ut){return V.select(ut)})},inputs:{environmentInjector:"environmentInjector"},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:bn,decls:5,vars:1,consts:[[1,"tabs-inner"],["tabs","true",3,"environmentInjector","stackEvents"],["outlet",""]],template:function(E,V){1&E&&(a.F$t(Nt),a.Hsn(0),a.TgZ(1,"div",0)(2,"ion-router-outlet",1,2),a.NdJ("stackEvents",function(ut){return V.onPageSelected(ut)}),a.qZA()(),a.Hsn(4,1)),2&E&&(a.xp6(2),a.Q6J("environmentInjector",V.environmentInjector))},dependencies:[_r],styles:["[_nghost-%COMP%] {\n        display: flex;\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n\n        flex-direction: column;\n\n        width: 100%;\n        height: 100%;\n\n        contain: layout size style;\n        z-index: $z-index-page-container;\n      }\n      .tabs-inner[_ngcontent-%COMP%] {\n        position: relative;\n\n        flex: 1;\n\n        contain: layout size style;\n      }"]}),m})();class pa{constructor(k){this.ctrl=k}create(k){return this.ctrl.create(k||{})}dismiss(k,E,V){return this.ctrl.dismiss(k,E,V)}getTop(){return this.ctrl.getTop()}}class bo{}let Yt=(()=>{class m extends pa{constructor(E,V,oe,ut){super(mt.m),this.angularDelegate=E,this.resolver=V,this.injector=oe,this.environmentInjector=ut}create(E){var V;return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(null!==(V=this.resolver)&&void 0!==V?V:this.environmentInjector,this.injector)}))}}return m.\u0275fac=function(E){return new(E||m)(a.LFG(ui),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(bo,8))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac}),m})(),br=(()=>{class m extends pa{constructor(E,V,oe,ut){super(mt.c),this.angularDelegate=E,this.resolver=V,this.injector=oe,this.environmentInjector=ut}create(E){var V;return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(null!==(V=this.resolver)&&void 0!==V?V:this.environmentInjector,this.injector)}))}}return m.\u0275fac=function(E){return new(E||m)(a.LFG(ui),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(bo,8))},m.\u0275prov=a.Yz7({token:m,factory:m.\u0275fac}),m})();class Is{shouldDetach(k){return!1}shouldAttach(k){return!1}store(k,E){}retrieve(k){return null}shouldReuseRoute(k,E){if(k.routeConfig!==E.routeConfig)return!1;const V=k.params,oe=E.params,ut=Object.keys(V),Xt=Object.keys(oe);if(ut.length!==Xt.length)return!1;for(const mn of ut)if(oe[mn]!==V[mn])return!1;return!0}}const Ss=(m,k,E)=>()=>{if(k.defaultView&&"undefined"!=typeof window){(m=>{const k=window,E=k.Ionic;E&&E.config&&"Object"!==E.config.constructor.name||(k.Ionic=k.Ionic||{},k.Ionic.config=Object.assign(Object.assign({},k.Ionic.config),m))})(Object.assign(Object.assign({},m),{_zoneGate:ut=>E.run(ut)}));const oe="__zone_symbol__addEventListener"in k.body?"__zone_symbol__addEventListener":"addEventListener";return function Ue(){var m=[];if("undefined"!=typeof window){var k=window;(!k.customElements||k.Element&&(!k.Element.prototype.closest||!k.Element.prototype.matches||!k.Element.prototype.remove||!k.Element.prototype.getRootNode))&&m.push(H.e(6748).then(H.t.bind(H,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||k.NodeList&&!k.NodeList.prototype.forEach||!k.fetch||!function(){try{var V=new URL("b","http://a");return V.pathname="c%20d","http://a/c%20d"===V.href&&V.searchParams}catch(oe){return!1}}()||"undefined"==typeof WeakMap)&&m.push(H.e(2214).then(H.t.bind(H,4144,23)))}return Promise.all(m)}().then(()=>((m,k)=>"undefined"==typeof window?Promise.resolve():(0,ve.p)().then(()=>(Xe(),(0,ve.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",null,[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),k))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Rn,jmp:ut=>E.runOutsideAngular(ut),ael(ut,Xt,mn,Zn){ut[oe](Xt,mn,Zn)},rel(ut,Xt,mn,Zn){ut.removeEventListener(Xt,mn,Zn)}}))}};let N=(()=>{class m{static forRoot(E){return{ngModule:m,providers:[{provide:ps,useValue:E},{provide:a.ip1,useFactory:Ss,multi:!0,deps:[ps,$e.K0,a.R0b]}]}}}return m.\u0275fac=function(E){return new(E||m)},m.\u0275mod=a.oAB({type:m}),m.\u0275inj=a.cJS({providers:[ui,Yt,br],imports:[[$e.ez]]}),m})()},8834:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>nt});var a=H(5730),ne=H(3457);let z;const Le=Re=>Re.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),he=Re=>{if(void 0===z){const ct=void 0!==Re.style.webkitAnimationName;z=void 0===Re.style.animationName&&ct?"-webkit-":""}return z},Ee=(Re,De,ct)=>{const me=De.startsWith("animation")?he(Re):"";Re.style.setProperty(me+De,ct)},pe=(Re,De)=>{const ct=De.startsWith("animation")?he(Re):"";Re.style.removeProperty(ct+De)},de=[],st=(Re=[],De)=>{if(void 0!==De){const ct=Array.isArray(De)?De:[De];return[...Re,...ct]}return Re},nt=Re=>{let De,ct,me,vt,gt,xt,ve,at,$e,Ue,Xe,Ft,Nt,Be=[],mt=[],ye=[],Oe=!1,ae={},Ce=[],Se=[],lt={},J=0,Gt=!1,bt=!1,Qe=!0,ht=!1,ft=!0,bn=!1;const In=Re,Qn=[],Rn=[],Wn=[],ur=[],Un=[],or=[],mr=[],zt=[],rr=[],Pr=[],tr="function"==typeof AnimationEffect||void 0!==ne.w&&"function"==typeof ne.w.AnimationEffect,nr="function"==typeof Element&&"function"==typeof Element.prototype.animate&&tr,an=()=>Pr,yr=(_e,Ye)=>((null!=Ye&&Ye.oneTimeCallback?Rn:Qn).push({c:_e,o:Ye}),Nt),Dr=()=>{if(nr)Pr.forEach(_e=>{_e.cancel()}),Pr.length=0;else{const _e=Wn.slice();(0,a.r)(()=>{_e.forEach(Ye=>{pe(Ye,"animation-name"),pe(Ye,"animation-duration"),pe(Ye,"animation-timing-function"),pe(Ye,"animation-iteration-count"),pe(Ye,"animation-delay"),pe(Ye,"animation-play-state"),pe(Ye,"animation-fill-mode"),pe(Ye,"animation-direction")})})}},Or=()=>{Un.forEach(_e=>{null!=_e&&_e.parentNode&&_e.parentNode.removeChild(_e)}),Un.length=0},On=()=>void 0!==gt?gt:ve?ve.getFill():"both",je=()=>void 0!==$e?$e:void 0!==xt?xt:ve?ve.getDirection():"normal",Ne=()=>Gt?"linear":void 0!==me?me:ve?ve.getEasing():"linear",He=()=>bt?0:void 0!==Ue?Ue:void 0!==ct?ct:ve?ve.getDuration():0,dt=()=>void 0!==vt?vt:ve?ve.getIterations():1,rt=()=>void 0!==Xe?Xe:void 0!==De?De:ve?ve.getDelay():0,ar=()=>{0!==J&&(J--,0===J&&((()=>{bi(),zt.forEach(jt=>jt()),rr.forEach(jt=>jt());const _e=Qe?1:0,Ye=Ce,yt=Se,Ot=lt;Wn.forEach(jt=>{const ln=jt.classList;Ye.forEach(An=>ln.add(An)),yt.forEach(An=>ln.remove(An));for(const An in Ot)Ot.hasOwnProperty(An)&&Ee(jt,An,Ot[An])}),Qn.forEach(jt=>jt.c(_e,Nt)),Rn.forEach(jt=>jt.c(_e,Nt)),Rn.length=0,ft=!0,Qe&&(ht=!0),Qe=!0})(),ve&&ve.animationFinish()))},Hr=(_e=!0)=>{Or();const Ye=(Re=>(Re.forEach(De=>{for(const ct in De)if(De.hasOwnProperty(ct)){const me=De[ct];if("easing"===ct)De["animation-timing-function"]=me,delete De[ct];else{const vt=Le(ct);vt!==ct&&(De[vt]=me,delete De[ct])}}}),Re))(Be);Wn.forEach(yt=>{if(Ye.length>0){const Ot=((Re=[])=>Re.map(De=>{const ct=De.offset,me=[];for(const vt in De)De.hasOwnProperty(vt)&&"offset"!==vt&&me.push(`${vt}: ${De[vt]};`);return`${100*ct}% { ${me.join(" ")} }`}).join(" "))(Ye);Ft=void 0!==Re?Re:(Re=>{let De=de.indexOf(Re);return De<0&&(De=de.push(Re)-1),`ion-animation-${De}`})(Ot);const jt=((Re,De,ct)=>{var me;const vt=(Re=>{const De=void 0!==Re.getRootNode?Re.getRootNode():Re;return De.head||De})(ct),gt=he(ct),xt=vt.querySelector("#"+Re);if(xt)return xt;const Be=(null!==(me=ct.ownerDocument)&&void 0!==me?me:document).createElement("style");return Be.id=Re,Be.textContent=`@${gt}keyframes ${Re} { ${De} } @${gt}keyframes ${Re}-alt { ${De} }`,vt.appendChild(Be),Be})(Ft,Ot,yt);Un.push(jt),Ee(yt,"animation-duration",`${He()}ms`),Ee(yt,"animation-timing-function",Ne()),Ee(yt,"animation-delay",`${rt()}ms`),Ee(yt,"animation-fill-mode",On()),Ee(yt,"animation-direction",je());const ln=dt()===1/0?"infinite":dt().toString();Ee(yt,"animation-iteration-count",ln),Ee(yt,"animation-play-state","paused"),_e&&Ee(yt,"animation-name",`${jt.id}-alt`),(0,a.r)(()=>{Ee(yt,"animation-name",jt.id||null)})}})},ei=(_e=!0)=>{(()=>{or.forEach(Ot=>Ot()),mr.forEach(Ot=>Ot());const _e=mt,Ye=ye,yt=ae;Wn.forEach(Ot=>{const jt=Ot.classList;_e.forEach(ln=>jt.add(ln)),Ye.forEach(ln=>jt.remove(ln));for(const ln in yt)yt.hasOwnProperty(ln)&&Ee(Ot,ln,yt[ln])})})(),Be.length>0&&(nr?(Wn.forEach(_e=>{const Ye=_e.animate(Be,{id:In,delay:rt(),duration:He(),easing:Ne(),iterations:dt(),fill:On(),direction:je()});Ye.pause(),Pr.push(Ye)}),Pr.length>0&&(Pr[0].onfinish=()=>{ar()})):Hr(_e)),Oe=!0},hi=_e=>{if(_e=Math.min(Math.max(_e,0),.9999),nr)Pr.forEach(Ye=>{Ye.currentTime=Ye.effect.getComputedTiming().delay+He()*_e,Ye.pause()});else{const Ye=`-${He()*_e}ms`;Wn.forEach(yt=>{Be.length>0&&(Ee(yt,"animation-delay",Ye),Ee(yt,"animation-play-state","paused"))})}},vr=_e=>{Pr.forEach(Ye=>{Ye.effect.updateTiming({delay:rt(),duration:He(),easing:Ne(),iterations:dt(),fill:On(),direction:je()})}),void 0!==_e&&hi(_e)},Pi=(_e=!0,Ye)=>{(0,a.r)(()=>{Wn.forEach(yt=>{Ee(yt,"animation-name",Ft||null),Ee(yt,"animation-duration",`${He()}ms`),Ee(yt,"animation-timing-function",Ne()),Ee(yt,"animation-delay",void 0!==Ye?`-${Ye*He()}ms`:`${rt()}ms`),Ee(yt,"animation-fill-mode",On()||null),Ee(yt,"animation-direction",je()||null);const Ot=dt()===1/0?"infinite":dt().toString();Ee(yt,"animation-iteration-count",Ot),_e&&Ee(yt,"animation-name",`${Ft}-alt`),(0,a.r)(()=>{Ee(yt,"animation-name",Ft||null)})})})},Ii=(_e=!1,Ye=!0,yt)=>(_e&&ur.forEach(Ot=>{Ot.update(_e,Ye,yt)}),nr?vr(yt):Pi(Ye,yt),Nt),wi=()=>{Oe&&(nr?Pr.forEach(_e=>{_e.pause()}):Wn.forEach(_e=>{Ee(_e,"animation-play-state","paused")}),bn=!0)},Lr=()=>{at=void 0,ar()},bi=()=>{at&&clearTimeout(at)},ee=_e=>new Promise(Ye=>{null!=_e&&_e.sync&&(bt=!0,yr(()=>bt=!1,{oneTimeCallback:!0})),Oe||ei(),ht&&(nr?(hi(0),vr()):Pi(),ht=!1),ft&&(J=ur.length+1,ft=!1),yr(()=>Ye(),{oneTimeCallback:!0}),ur.forEach(yt=>{yt.play()}),nr?(Pr.forEach(_e=>{_e.play()}),(0===Be.length||0===Wn.length)&&ar()):(()=>{if(bi(),(0,a.r)(()=>{Wn.forEach(_e=>{Be.length>0&&Ee(_e,"animation-play-state","running")})}),0===Be.length||0===Wn.length)ar();else{const _e=rt()||0,Ye=He()||0,yt=dt()||1;isFinite(yt)&&(at=setTimeout(Lr,_e+Ye*yt+100)),((Re,De)=>{let ct;const me={passive:!0},gt=xt=>{Re===xt.target&&(ct&&ct(),bi(),(0,a.r)(()=>{Wn.forEach(_e=>{pe(_e,"animation-duration"),pe(_e,"animation-delay"),pe(_e,"animation-play-state")}),(0,a.r)(ar)}))};Re&&(Re.addEventListener("webkitAnimationEnd",gt,me),Re.addEventListener("animationend",gt,me),ct=()=>{Re.removeEventListener("webkitAnimationEnd",gt,me),Re.removeEventListener("animationend",gt,me)})})(Wn[0])}})(),bn=!1}),Ke=(_e,Ye)=>{const yt=Be[0];return void 0===yt||void 0!==yt.offset&&0!==yt.offset?Be=[{offset:0,[_e]:Ye},...Be]:yt[_e]=Ye,Nt};return Nt={parentAnimation:ve,elements:Wn,childAnimations:ur,id:In,animationFinish:ar,from:Ke,to:(_e,Ye)=>{const yt=Be[Be.length-1];return void 0===yt||void 0!==yt.offset&&1!==yt.offset?Be=[...Be,{offset:1,[_e]:Ye}]:yt[_e]=Ye,Nt},fromTo:(_e,Ye,yt)=>Ke(_e,Ye).to(_e,yt),parent:_e=>(ve=_e,Nt),play:ee,pause:()=>(ur.forEach(_e=>{_e.pause()}),wi(),Nt),stop:()=>{ur.forEach(_e=>{_e.stop()}),Oe&&(Dr(),Oe=!1),Gt=!1,bt=!1,ft=!0,$e=void 0,Ue=void 0,Xe=void 0,J=0,ht=!1,Qe=!0,bn=!1},destroy:_e=>(ur.forEach(Ye=>{Ye.destroy(_e)}),(_e=>{Dr(),_e&&Or()})(_e),Wn.length=0,ur.length=0,Be.length=0,Qn.length=0,Rn.length=0,Oe=!1,ft=!0,Nt),keyframes:_e=>{const Ye=Be!==_e;return Be=_e,Ye&&(_e=>{nr?an().forEach(Ye=>{if(Ye.effect.setKeyframes)Ye.effect.setKeyframes(_e);else{const yt=new KeyframeEffect(Ye.effect.target,_e,Ye.effect.getTiming());Ye.effect=yt}}):Hr()})(Be),Nt},addAnimation:_e=>{if(null!=_e)if(Array.isArray(_e))for(const Ye of _e)Ye.parent(Nt),ur.push(Ye);else _e.parent(Nt),ur.push(_e);return Nt},addElement:_e=>{if(null!=_e)if(1===_e.nodeType)Wn.push(_e);else if(_e.length>=0)for(let Ye=0;Ye<_e.length;Ye++)Wn.push(_e[Ye]);else console.error("Invalid addElement value");return Nt},update:Ii,fill:_e=>(gt=_e,Ii(!0),Nt),direction:_e=>(xt=_e,Ii(!0),Nt),iterations:_e=>(vt=_e,Ii(!0),Nt),duration:_e=>(!nr&&0===_e&&(_e=1),ct=_e,Ii(!0),Nt),easing:_e=>(me=_e,Ii(!0),Nt),delay:_e=>(De=_e,Ii(!0),Nt),getWebAnimations:an,getKeyframes:()=>Be,getFill:On,getDirection:je,getDelay:rt,getIterations:dt,getEasing:Ne,getDuration:He,afterAddRead:_e=>(zt.push(_e),Nt),afterAddWrite:_e=>(rr.push(_e),Nt),afterClearStyles:(_e=[])=>{for(const Ye of _e)lt[Ye]="";return Nt},afterStyles:(_e={})=>(lt=_e,Nt),afterRemoveClass:_e=>(Se=st(Se,_e),Nt),afterAddClass:_e=>(Ce=st(Ce,_e),Nt),beforeAddRead:_e=>(or.push(_e),Nt),beforeAddWrite:_e=>(mr.push(_e),Nt),beforeClearStyles:(_e=[])=>{for(const Ye of _e)ae[Ye]="";return Nt},beforeStyles:(_e={})=>(ae=_e,Nt),beforeRemoveClass:_e=>(ye=st(ye,_e),Nt),beforeAddClass:_e=>(mt=st(mt,_e),Nt),onFinish:yr,isRunning:()=>0!==J&&!bn,progressStart:(_e=!1,Ye)=>(ur.forEach(yt=>{yt.progressStart(_e,Ye)}),wi(),Gt=_e,Oe||ei(),Ii(!1,!0,Ye),Nt),progressStep:_e=>(ur.forEach(Ye=>{Ye.progressStep(_e)}),hi(_e),Nt),progressEnd:(_e,Ye,yt)=>(Gt=!1,ur.forEach(Ot=>{Ot.progressEnd(_e,Ye,yt)}),void 0!==yt&&(Ue=yt),ht=!1,Qe=!0,0===_e?($e="reverse"===je()?"normal":"reverse","reverse"===$e&&(Qe=!1),nr?(Ii(),hi(1-Ye)):(Xe=(1-Ye)*He()*-1,Ii(!1,!1))):1===_e&&(nr?(Ii(),hi(Ye)):(Xe=Ye*He()*-1,Ii(!1,!1))),void 0!==_e&&(yr(()=>{Ue=void 0,$e=void 0,Xe=void 0},{oneTimeCallback:!0}),ve||ee()),Nt)}}},4349:(tn,ot,H)=>{"use strict";H.d(ot,{G:()=>Le});class ne{constructor(Ee,pe,be,ce,de){this.id=pe,this.name=be,this.disableScroll=de,this.priority=1e6*ce+pe,this.ctrl=Ee}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ee=this.ctrl.capture(this.name,this.id,this.priority);return Ee&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ee}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class z{constructor(Ee,pe,be,ce){this.id=pe,this.disable=be,this.disableScroll=ce,this.ctrl=Ee}block(){if(this.ctrl){if(this.disable)for(const Ee of this.disable)this.ctrl.disableGesture(Ee,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ee of this.disable)this.ctrl.enableGesture(Ee,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const ke="backdrop-no-scroll",Le=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ee){var pe;return new ne(this,this.newID(),Ee.name,null!==(pe=Ee.priority)&&void 0!==pe?pe:0,!!Ee.disableScroll)}createBlocker(Ee={}){return new z(this,this.newID(),Ee.disable,!!Ee.disableScroll)}start(Ee,pe,be){return this.canStart(Ee)?(this.requestedStart.set(pe,be),!0):(this.requestedStart.delete(pe),!1)}capture(Ee,pe,be){if(!this.start(Ee,pe,be))return!1;const ce=this.requestedStart;let de=-1e4;if(ce.forEach(ie=>{de=Math.max(de,ie)}),de===be){this.capturedId=pe,ce.clear();const ie=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ee}});return document.dispatchEvent(ie),!0}return ce.delete(pe),!1}release(Ee){this.requestedStart.delete(Ee),this.capturedId===Ee&&(this.capturedId=void 0)}disableGesture(Ee,pe){let be=this.disabledGestures.get(Ee);void 0===be&&(be=new Set,this.disabledGestures.set(Ee,be)),be.add(pe)}enableGesture(Ee,pe){const be=this.disabledGestures.get(Ee);void 0!==be&&be.delete(pe)}disableScroll(Ee){this.disabledScroll.add(Ee),1===this.disabledScroll.size&&document.body.classList.add(ke)}enableScroll(Ee){this.disabledScroll.delete(Ee),0===this.disabledScroll.size&&document.body.classList.remove(ke)}canStart(Ee){return!(void 0!==this.capturedId||this.isDisabled(Ee))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ee){const pe=this.disabledGestures.get(Ee);return!!(pe&&pe.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{MENU_BACK_BUTTON_PRIORITY:()=>Le,OVERLAY_BACK_BUTTON_PRIORITY:()=>ke,blockHardwareBackButton:()=>ne,startHardwareBackButton:()=>z});var a=H(5861);const ne=()=>{document.addEventListener("backbutton",()=>{})},z=()=>{const he=document;let Ee=!1;he.addEventListener("backbutton",()=>{if(Ee)return;let pe=0,be=[];const ce=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ie,Ge){be.push({priority:Ie,handler:Ge,id:pe++})}}});he.dispatchEvent(ce);const de=function(){var Ie=(0,a.Z)(function*(Ge){try{if(null!=Ge&&Ge.handler){const st=Ge.handler(ie);null!=st&&(yield st)}}catch(st){console.error(st)}});return function(st){return Ie.apply(this,arguments)}}(),ie=()=>{if(be.length>0){let Ie={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};be.forEach(Ge=>{Ge.priority>=Ie.priority&&(Ie=Ge)}),Ee=!0,be=be.filter(Ge=>Ge.id!==Ie.id),de(Ie).then(()=>Ee=!1)}};ie()})},ke=100,Le=99},5730:(tn,ot,H)=>{"use strict";H.d(ot,{a:()=>Ee,b:()=>pe,c:()=>z,d:()=>Ge,e:()=>st,f:()=>Ie,g:()=>be,h:()=>vt,i:()=>he,j:()=>ke,k:()=>ie,l:()=>nt,m:()=>de,n:()=>Re,o:()=>me,p:()=>ct,q:()=>gt,r:()=>ce,s:()=>xt,t:()=>a,u:()=>De});const a=(Be,mt=0)=>new Promise(ye=>{ne(Be,mt,ye)}),ne=(Be,mt=0,ye)=>{let Oe,ve;const ae={passive:!0},Se=()=>{Oe&&Oe()},lt=J=>{(void 0===J||Be===J.target)&&(Se(),ye(J))};return Be&&(Be.addEventListener("webkitTransitionEnd",lt,ae),Be.addEventListener("transitionend",lt,ae),ve=setTimeout(lt,mt+500),Oe=()=>{ve&&(clearTimeout(ve),ve=void 0),Be.removeEventListener("webkitTransitionEnd",lt,ae),Be.removeEventListener("transitionend",lt,ae)}),Se},z=(Be,mt)=>{Be.componentOnReady?Be.componentOnReady().then(ye=>mt(ye)):ce(()=>mt(Be))},ke=(Be,mt=[])=>{const ye={};return mt.forEach(Oe=>{Be.hasAttribute(Oe)&&(null!==Be.getAttribute(Oe)&&(ye[Oe]=Be.getAttribute(Oe)),Be.removeAttribute(Oe))}),ye},Le=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],he=(Be,mt)=>{let ye=Le;return mt&&mt.length>0&&(ye=ye.filter(Oe=>!mt.includes(Oe))),ke(Be,ye)},Ee=(Be,mt,ye,Oe)=>{var ve;if("undefined"!=typeof window){const ae=window,Ce=null===(ve=null==ae?void 0:ae.Ionic)||void 0===ve?void 0:ve.config;if(Ce){const Se=Ce.get("_ael");if(Se)return Se(Be,mt,ye,Oe);if(Ce._ael)return Ce._ael(Be,mt,ye,Oe)}}return Be.addEventListener(mt,ye,Oe)},pe=(Be,mt,ye,Oe)=>{var ve;if("undefined"!=typeof window){const ae=window,Ce=null===(ve=null==ae?void 0:ae.Ionic)||void 0===ve?void 0:ve.config;if(Ce){const Se=Ce.get("_rel");if(Se)return Se(Be,mt,ye,Oe);if(Ce._rel)return Ce._rel(Be,mt,ye,Oe)}}return Be.removeEventListener(mt,ye,Oe)},be=(Be,mt=Be)=>Be.shadowRoot||mt,ce=Be=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Be):"function"==typeof requestAnimationFrame?requestAnimationFrame(Be):setTimeout(Be),de=Be=>!!Be.shadowRoot&&!!Be.attachShadow,ie=Be=>{const mt=Be.closest("ion-item");return mt?mt.querySelector("ion-label"):null},Ie=Be=>{if(Be.focus(),Be.classList.contains("ion-focusable")){const mt=Be.closest("ion-app");mt&&mt.setFocus([Be])}},Ge=(Be,mt)=>{let ye;const Oe=Be.getAttribute("aria-labelledby"),ve=Be.id;let ae=null!==Oe&&""!==Oe.trim()?Oe:mt+"-lbl",Ce=null!==Oe&&""!==Oe.trim()?document.getElementById(Oe):ie(Be);return Ce?(null===Oe&&(Ce.id=ae),ye=Ce.textContent,Ce.setAttribute("aria-hidden","true")):""!==ve.trim()&&(Ce=document.querySelector(`label[for="${ve}"]`),Ce&&(""!==Ce.id?ae=Ce.id:Ce.id=ae=`${ve}-lbl`,ye=Ce.textContent)),{label:Ce,labelId:ae,labelText:ye}},st=(Be,mt,ye,Oe,ve)=>{if(Be||de(mt)){let ae=mt.querySelector("input.aux-input");ae||(ae=mt.ownerDocument.createElement("input"),ae.type="hidden",ae.classList.add("aux-input"),mt.appendChild(ae)),ae.disabled=ve,ae.name=ye,ae.value=Oe||""}},nt=(Be,mt,ye)=>Math.max(Be,Math.min(mt,ye)),Re=(Be,mt)=>{if(!Be){const ye="ASSERT: "+mt;throw console.error(ye),new Error(ye)}},De=Be=>Be.timeStamp||Date.now(),ct=Be=>{if(Be){const mt=Be.changedTouches;if(mt&&mt.length>0){const ye=mt[0];return{x:ye.clientX,y:ye.clientY}}if(void 0!==Be.pageX)return{x:Be.pageX,y:Be.pageY}}return{x:0,y:0}},me=Be=>{const mt="rtl"===document.dir;switch(Be){case"start":return mt;case"end":return!mt;default:throw new Error(`"${Be}" is not a valid value for [side]. Use "start" or "end" instead.`)}},vt=(Be,mt)=>{const ye=Be._original||Be;return{_original:Be,emit:gt(ye.emit.bind(ye),mt)}},gt=(Be,mt=0)=>{let ye;return(...Oe)=>{clearTimeout(ye),ye=setTimeout(Be,mt,...Oe)}},xt=(Be,mt)=>{if(null!=Be||(Be={}),null!=mt||(mt={}),Be===mt)return!0;const ye=Object.keys(Be);if(ye.length!==Object.keys(mt).length)return!1;for(const Oe of ye)if(!(Oe in mt)||Be[Oe]!==mt[Oe])return!1;return!0}},4292:(tn,ot,H)=>{"use strict";H.d(ot,{m:()=>de});var a=H(5861),ne=H(7593),z=H(5730),ke=H(9658),Le=H(8834);const he=ie=>(0,Le.c)().duration(ie?400:300),Ee=ie=>{let Ie,Ge;const st=ie.width+8,nt=(0,Le.c)(),Re=(0,Le.c)();ie.isEndSide?(Ie=st+"px",Ge="0px"):(Ie=-st+"px",Ge="0px"),nt.addElement(ie.menuInnerEl).fromTo("transform",`translateX(${Ie})`,`translateX(${Ge})`);const ct="ios"===(0,ke.b)(ie),me=ct?.2:.25;return Re.addElement(ie.backdropEl).fromTo("opacity",.01,me),he(ct).addAnimation([nt,Re])},pe=ie=>{let Ie,Ge;const st=(0,ke.b)(ie),nt=ie.width;ie.isEndSide?(Ie=-nt+"px",Ge=nt+"px"):(Ie=nt+"px",Ge=-nt+"px");const Re=(0,Le.c)().addElement(ie.menuInnerEl).fromTo("transform",`translateX(${Ge})`,"translateX(0px)"),De=(0,Le.c)().addElement(ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ie})`),ct=(0,Le.c)().addElement(ie.backdropEl).fromTo("opacity",.01,.32);return he("ios"===st).addAnimation([Re,De,ct])},be=ie=>{const Ie=(0,ke.b)(ie),Ge=ie.width*(ie.isEndSide?-1:1)+"px",st=(0,Le.c)().addElement(ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`);return he("ios"===Ie).addAnimation(st)},de=(()=>{const ie=new Map,Ie=[],Ge=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&Ue.open()});return function(Ue){return at.apply(this,arguments)}}(),st=function(){var at=(0,a.Z)(function*($e){const Ue=yield void 0!==$e?vt($e):gt();return void 0!==Ue&&Ue.close()});return function(Ue){return at.apply(this,arguments)}}(),nt=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&Ue.toggle()});return function(Ue){return at.apply(this,arguments)}}(),Re=function(){var at=(0,a.Z)(function*($e,Ue){const Xe=yield vt(Ue);return Xe&&(Xe.disabled=!$e),Xe});return function(Ue,Xe){return at.apply(this,arguments)}}(),De=function(){var at=(0,a.Z)(function*($e,Ue){const Xe=yield vt(Ue);return Xe&&(Xe.swipeGesture=$e),Xe});return function(Ue,Xe){return at.apply(this,arguments)}}(),ct=function(){var at=(0,a.Z)(function*($e){if(null!=$e){const Ue=yield vt($e);return void 0!==Ue&&Ue.isOpen()}return void 0!==(yield gt())});return function(Ue){return at.apply(this,arguments)}}(),me=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&!Ue.disabled});return function(Ue){return at.apply(this,arguments)}}(),vt=function(){var at=(0,a.Z)(function*($e){return yield bt(),"start"===$e||"end"===$e?Gt(Qe=>Qe.side===$e&&!Qe.disabled)||Gt(Qe=>Qe.side===$e):null!=$e?Gt(Xe=>Xe.menuId===$e):Gt(Xe=>!Xe.disabled)||(Ie.length>0?Ie[0].el:void 0)});return function(Ue){return at.apply(this,arguments)}}(),gt=function(){var at=(0,a.Z)(function*(){return yield bt(),Se()});return function(){return at.apply(this,arguments)}}(),xt=function(){var at=(0,a.Z)(function*(){return yield bt(),lt()});return function(){return at.apply(this,arguments)}}(),Be=function(){var at=(0,a.Z)(function*(){return yield bt(),J()});return function(){return at.apply(this,arguments)}}(),mt=(at,$e)=>{ie.set(at,$e)},ve=at=>{const $e=at.side;Ie.filter(Ue=>Ue.side===$e&&Ue!==at).forEach(Ue=>Ue.disabled=!0)},ae=function(){var at=(0,a.Z)(function*($e,Ue,Xe){if(J())return!1;if(Ue){const Qe=yield gt();Qe&&$e.el!==Qe&&(yield Qe.setOpen(!1,!1))}return $e._setOpen(Ue,Xe)});return function(Ue,Xe,Qe){return at.apply(this,arguments)}}(),Se=()=>Gt(at=>at._isOpen),lt=()=>Ie.map(at=>at.el),J=()=>Ie.some(at=>at.isAnimating),Gt=at=>{const $e=Ie.find(at);if(void 0!==$e)return $e.el},bt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(at=>new Promise($e=>(0,z.c)(at,$e))));return mt("reveal",be),mt("push",pe),mt("overlay",Ee),"undefined"!=typeof document&&document.addEventListener("ionBackButton",at=>{const $e=Se();$e&&at.detail.register(ne.MENU_BACK_BUTTON_PRIORITY,()=>$e.close())}),{registerAnimation:mt,get:vt,getMenus:xt,getOpen:gt,isEnabled:me,swipeGesture:De,isAnimating:Be,isOpen:ct,enable:Re,toggle:nt,close:st,open:Ge,_getOpenSync:Se,_createAnimation:(at,$e)=>{const Ue=ie.get(at);if(!Ue)throw new Error("animation not registered");return Ue($e)},_register:at=>{Ie.indexOf(at)<0&&(at.disabled||ve(at),Ie.push(at))},_unregister:at=>{const $e=Ie.indexOf(at);$e>-1&&Ie.splice($e,1)},_setOpen:ae,_setActiveMenu:ve}})()},3457:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>a});const a="undefined"!=typeof window?window:void 0},1308:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>Fi,H:()=>Wn,a:()=>Qe,b:()=>Zt,c:()=>fi,e:()=>Yr,f:()=>Ci,g:()=>ht,h:()=>Qn,i:()=>ir,j:()=>je,k:()=>Cn,p:()=>nt,r:()=>Fr,s:()=>Ge});var a=H(5861);let z,ke,Le,he=!1,Ee=!1,pe=!1,be=!1,ce=!1;const de="undefined"!=typeof window?window:{},ie=de.document||{head:{}},Ie={$flags$:0,$resourcesUrl$:"",jmp:ee=>ee(),raf:ee=>requestAnimationFrame(ee),ael:(ee,we,Ke,Je)=>ee.addEventListener(we,Ke,Je),rel:(ee,we,Ke,Je)=>ee.removeEventListener(we,Ke,Je),ce:(ee,we)=>new CustomEvent(ee,we)},Ge=ee=>{Object.assign(Ie,ee)},nt=ee=>Promise.resolve(ee),Re=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ee){}return!1})(),De=(ee,we,Ke,Je)=>{Ke&&Ke.map(([Ct,_e,Ye])=>{const yt=me(ee,Ct),Ot=ct(we,Ye),jt=vt(Ct);Ie.ael(yt,_e,Ot,jt),(we.$rmListeners$=we.$rmListeners$||[]).push(()=>Ie.rel(yt,_e,Ot,jt))})},ct=(ee,we)=>Ke=>{try{256&ee.$flags$?ee.$lazyInstance$[we](Ke):(ee.$queuedListeners$=ee.$queuedListeners$||[]).push([we,Ke])}catch(Je){vr(Je)}},me=(ee,we)=>4&we?ie:8&we?de:16&we?ie.body:ee,vt=ee=>0!=(2&ee),ye="s-id",Oe="sty-id",Ce="http://www.w3.org/1999/xlink",J=new WeakMap,Gt=(ee,we,Ke)=>{let Je=zn.get(ee);Re&&Ke?(Je=Je||new CSSStyleSheet,"string"==typeof Je?Je=we:Je.replaceSync(we)):Je=we,zn.set(ee,Je)},bt=(ee,we,Ke,Je)=>{let Ct=$e(we,Ke);const _e=zn.get(Ct);if(ee=11===ee.nodeType?ee:ie,_e)if("string"==typeof _e){let yt,Ye=J.get(ee=ee.head||ee);Ye||J.set(ee,Ye=new Set),Ye.has(Ct)||(ee.host&&(yt=ee.querySelector(`[${Oe}="${Ct}"]`))?yt.innerHTML=_e:(yt=ie.createElement("style"),yt.innerHTML=_e,ee.insertBefore(yt,ee.querySelector("link"))),Ye&&Ye.add(Ct))}else ee.adoptedStyleSheets.includes(_e)||(ee.adoptedStyleSheets=[...ee.adoptedStyleSheets,_e]);return Ct},$e=(ee,we)=>"sc-"+(we&&32&ee.$flags$?ee.$tagName$+"-"+we:ee.$tagName$),Ue=ee=>ee.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qe=ee=>Zi.push(ee),ht=ee=>Hr(ee).$modeName$,ft={},In=ee=>"object"==(ee=typeof ee)||"function"===ee,Qn=(ee,we,...Ke)=>{let Je=null,Ct=null,_e=null,Ye=!1,yt=!1;const Ot=[],jt=An=>{for(let qn=0;qn<An.length;qn++)Je=An[qn],Array.isArray(Je)?jt(Je):null!=Je&&"boolean"!=typeof Je&&((Ye="function"!=typeof ee&&!In(Je))&&(Je=String(Je)),Ye&&yt?Ot[Ot.length-1].$text$+=Je:Ot.push(Ye?Rn(null,Je):Je),yt=Ye)};if(jt(Ke),we){we.key&&(Ct=we.key),we.name&&(_e=we.name);{const An=we.className||we.class;An&&(we.class="object"!=typeof An?An:Object.keys(An).filter(qn=>An[qn]).join(" "))}}if("function"==typeof ee)return ee(null===we?{}:we,Ot,Un);const ln=Rn(ee,null);return ln.$attrs$=we,Ot.length>0&&(ln.$children$=Ot),ln.$key$=Ct,ln.$name$=_e,ln},Rn=(ee,we)=>({$flags$:0,$tag$:ee,$text$:we,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Wn={},Un={forEach:(ee,we)=>ee.map(or).forEach(we),map:(ee,we)=>ee.map(or).map(we).map(mr)},or=ee=>({vattrs:ee.$attrs$,vchildren:ee.$children$,vkey:ee.$key$,vname:ee.$name$,vtag:ee.$tag$,vtext:ee.$text$}),mr=ee=>{if("function"==typeof ee.vtag){const Ke=Object.assign({},ee.vattrs);return ee.vkey&&(Ke.key=ee.vkey),ee.vname&&(Ke.name=ee.vname),Qn(ee.vtag,Ke,...ee.vchildren||[])}const we=Rn(ee.vtag,ee.vtext);return we.$attrs$=ee.vattrs,we.$children$=ee.vchildren,we.$key$=ee.vkey,we.$name$=ee.vname,we},zt=(ee,we,Ke,Je,Ct,_e)=>{if(Ke!==Je){let Ye=hi(ee,we),yt=we.toLowerCase();if("class"===we){const Ot=ee.classList,jt=Pr(Ke),ln=Pr(Je);Ot.remove(...jt.filter(An=>An&&!ln.includes(An))),Ot.add(...ln.filter(An=>An&&!jt.includes(An)))}else if("style"===we){for(const Ot in Ke)(!Je||null==Je[Ot])&&(Ot.includes("-")?ee.style.removeProperty(Ot):ee.style[Ot]="");for(const Ot in Je)(!Ke||Je[Ot]!==Ke[Ot])&&(Ot.includes("-")?ee.style.setProperty(Ot,Je[Ot]):ee.style[Ot]=Je[Ot])}else if("key"!==we)if("ref"===we)Je&&Je(ee);else if(Ye||"o"!==we[0]||"n"!==we[1]){const Ot=In(Je);if((Ye||Ot&&null!==Je)&&!Ct)try{if(ee.tagName.includes("-"))ee[we]=Je;else{const ln=null==Je?"":Je;"list"===we?Ye=!1:(null==Ke||ee[we]!=ln)&&(ee[we]=ln)}}catch(ln){}let jt=!1;yt!==(yt=yt.replace(/^xlink\:?/,""))&&(we=yt,jt=!0),null==Je||!1===Je?(!1!==Je||""===ee.getAttribute(we))&&(jt?ee.removeAttributeNS(Ce,we):ee.removeAttribute(we)):(!Ye||4&_e||Ct)&&!Ot&&(Je=!0===Je?"":Je,jt?ee.setAttributeNS(Ce,we,Je):ee.setAttribute(we,Je))}else we="-"===we[2]?we.slice(3):hi(de,yt)?yt.slice(2):yt[2]+we.slice(3),Ke&&Ie.rel(ee,we,Ke,!1),Je&&Ie.ael(ee,we,Je,!1)}},rr=/\s/,Pr=ee=>ee?ee.split(rr):[],tr=(ee,we,Ke,Je)=>{const Ct=11===we.$elm$.nodeType&&we.$elm$.host?we.$elm$.host:we.$elm$,_e=ee&&ee.$attrs$||ft,Ye=we.$attrs$||ft;for(Je in _e)Je in Ye||zt(Ct,Je,_e[Je],void 0,Ke,we.$flags$);for(Je in Ye)zt(Ct,Je,_e[Je],Ye[Je],Ke,we.$flags$)},nr=(ee,we,Ke,Je)=>{const Ct=we.$children$[Ke];let Ye,yt,Ot,_e=0;if(he||(pe=!0,"slot"===Ct.$tag$&&(z&&Je.classList.add(z+"-s"),Ct.$flags$|=Ct.$children$?2:1)),null!==Ct.$text$)Ye=Ct.$elm$=ie.createTextNode(Ct.$text$);else if(1&Ct.$flags$)Ye=Ct.$elm$=ie.createTextNode("");else{if(be||(be="svg"===Ct.$tag$),Ye=Ct.$elm$=ie.createElementNS(be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ct.$flags$?"slot-fb":Ct.$tag$),be&&"foreignObject"===Ct.$tag$&&(be=!1),tr(null,Ct,be),(ee=>null!=ee)(z)&&Ye["s-si"]!==z&&Ye.classList.add(Ye["s-si"]=z),Ct.$children$)for(_e=0;_e<Ct.$children$.length;++_e)yt=nr(ee,Ct,_e,Ye),yt&&Ye.appendChild(yt);"svg"===Ct.$tag$?be=!1:"foreignObject"===Ye.tagName&&(be=!0)}return Ye["s-hn"]=Le,3&Ct.$flags$&&(Ye["s-sr"]=!0,Ye["s-cr"]=ke,Ye["s-sn"]=Ct.$name$||"",Ot=ee&&ee.$children$&&ee.$children$[Ke],Ot&&Ot.$tag$===Ct.$tag$&&ee.$elm$&&Cr(ee.$elm$,!1)),Ye},Cr=(ee,we)=>{Ie.$flags$|=1;const Ke=ee.childNodes;for(let Je=Ke.length-1;Je>=0;Je--){const Ct=Ke[Je];Ct["s-hn"]!==Le&&Ct["s-ol"]&&(yr(Ct).insertBefore(Ct,Tt(Ct)),Ct["s-ol"].remove(),Ct["s-ol"]=void 0,pe=!0),we&&Cr(Ct,we)}Ie.$flags$&=-2},an=(ee,we,Ke,Je,Ct,_e)=>{let yt,Ye=ee["s-cr"]&&ee["s-cr"].parentNode||ee;for(Ye.shadowRoot&&Ye.tagName===Le&&(Ye=Ye.shadowRoot);Ct<=_e;++Ct)Je[Ct]&&(yt=nr(null,Ke,Ct,ee),yt&&(Je[Ct].$elm$=yt,Ye.insertBefore(yt,Tt(we))))},fr=(ee,we,Ke,Je,Ct)=>{for(;we<=Ke;++we)(Je=ee[we])&&(Ct=Je.$elm$,Fn(Je),Ee=!0,Ct["s-ol"]?Ct["s-ol"].remove():Cr(Ct,!0),Ct.remove())},gn=(ee,we)=>ee.$tag$===we.$tag$&&("slot"===ee.$tag$?ee.$name$===we.$name$:ee.$key$===we.$key$),Tt=ee=>ee&&ee["s-ol"]||ee,yr=ee=>(ee["s-ol"]?ee["s-ol"]:ee).parentNode,Bn=(ee,we)=>{const Ke=we.$elm$=ee.$elm$,Je=ee.$children$,Ct=we.$children$,_e=we.$tag$,Ye=we.$text$;let yt;null===Ye?(be="svg"===_e||"foreignObject"!==_e&&be,"slot"===_e||tr(ee,we,be),null!==Je&&null!==Ct?((ee,we,Ke,Je)=>{let kr,et,Ct=0,_e=0,Ye=0,yt=0,Ot=we.length-1,jt=we[0],ln=we[Ot],An=Je.length-1,qn=Je[0],pr=Je[An];for(;Ct<=Ot&&_e<=An;)if(null==jt)jt=we[++Ct];else if(null==ln)ln=we[--Ot];else if(null==qn)qn=Je[++_e];else if(null==pr)pr=Je[--An];else if(gn(jt,qn))Bn(jt,qn),jt=we[++Ct],qn=Je[++_e];else if(gn(ln,pr))Bn(ln,pr),ln=we[--Ot],pr=Je[--An];else if(gn(jt,pr))("slot"===jt.$tag$||"slot"===pr.$tag$)&&Cr(jt.$elm$.parentNode,!1),Bn(jt,pr),ee.insertBefore(jt.$elm$,ln.$elm$.nextSibling),jt=we[++Ct],pr=Je[--An];else if(gn(ln,qn))("slot"===jt.$tag$||"slot"===pr.$tag$)&&Cr(ln.$elm$.parentNode,!1),Bn(ln,qn),ee.insertBefore(ln.$elm$,jt.$elm$),ln=we[--Ot],qn=Je[++_e];else{for(Ye=-1,yt=Ct;yt<=Ot;++yt)if(we[yt]&&null!==we[yt].$key$&&we[yt].$key$===qn.$key$){Ye=yt;break}Ye>=0?(et=we[Ye],et.$tag$!==qn.$tag$?kr=nr(we&&we[_e],Ke,Ye,ee):(Bn(et,qn),we[Ye]=void 0,kr=et.$elm$),qn=Je[++_e]):(kr=nr(we&&we[_e],Ke,_e,ee),qn=Je[++_e]),kr&&yr(jt.$elm$).insertBefore(kr,Tt(jt.$elm$))}Ct>Ot?an(ee,null==Je[An+1]?null:Je[An+1].$elm$,Ke,Je,_e,An):_e>An&&fr(we,Ct,Ot)})(Ke,Je,we,Ct):null!==Ct?(null!==ee.$text$&&(Ke.textContent=""),an(Ke,null,we,Ct,0,Ct.length-1)):null!==Je&&fr(Je,0,Je.length-1),be&&"svg"===_e&&(be=!1)):(yt=Ke["s-cr"])?yt.parentNode.textContent=Ye:ee.$text$!==Ye&&(Ke.data=Ye)},Dr=ee=>{const we=ee.childNodes;let Ke,Je,Ct,_e,Ye,yt;for(Je=0,Ct=we.length;Je<Ct;Je++)if(Ke=we[Je],1===Ke.nodeType){if(Ke["s-sr"])for(Ye=Ke["s-sn"],Ke.hidden=!1,_e=0;_e<Ct;_e++)if(yt=we[_e].nodeType,we[_e]["s-hn"]!==Ke["s-hn"]||""!==Ye){if(1===yt&&Ye===we[_e].getAttribute("slot")){Ke.hidden=!0;break}}else if(1===yt||3===yt&&""!==we[_e].textContent.trim()){Ke.hidden=!0;break}Dr(Ke)}},Or=[],jn=ee=>{let we,Ke,Je,Ct,_e,Ye,yt=0;const Ot=ee.childNodes,jt=Ot.length;for(;yt<jt;yt++){if(we=Ot[yt],we["s-sr"]&&(Ke=we["s-cr"])&&Ke.parentNode)for(Je=Ke.parentNode.childNodes,Ct=we["s-sn"],Ye=Je.length-1;Ye>=0;Ye--)Ke=Je[Ye],!Ke["s-cn"]&&!Ke["s-nr"]&&Ke["s-hn"]!==we["s-hn"]&&(ji(Ke,Ct)?(_e=Or.find(ln=>ln.$nodeToRelocate$===Ke),Ee=!0,Ke["s-sn"]=Ke["s-sn"]||Ct,_e?_e.$slotRefNode$=we:Or.push({$slotRefNode$:we,$nodeToRelocate$:Ke}),Ke["s-sr"]&&Or.map(ln=>{ji(ln.$nodeToRelocate$,Ke["s-sn"])&&(_e=Or.find(An=>An.$nodeToRelocate$===Ke),_e&&!ln.$slotRefNode$&&(ln.$slotRefNode$=_e.$slotRefNode$))})):Or.some(ln=>ln.$nodeToRelocate$===Ke)||Or.push({$nodeToRelocate$:Ke}));1===we.nodeType&&jn(we)}},ji=(ee,we)=>1===ee.nodeType?null===ee.getAttribute("slot")&&""===we||ee.getAttribute("slot")===we:ee["s-sn"]===we||""===we,Fn=ee=>{ee.$attrs$&&ee.$attrs$.ref&&ee.$attrs$.ref(null),ee.$children$&&ee.$children$.map(Fn)},ir=ee=>Hr(ee).$hostElement$,Yr=(ee,we,Ke)=>{const Je=ir(ee);return{emit:Ct=>ni(Je,we,{bubbles:!!(4&Ke),composed:!!(2&Ke),cancelable:!!(1&Ke),detail:Ct})}},ni=(ee,we,Ke)=>{const Je=Ie.ce(we,Ke);return ee.dispatchEvent(Je),Je},vn=(ee,we)=>{we&&!ee.$onRenderResolve$&&we["s-p"]&&we["s-p"].push(new Promise(Ke=>ee.$onRenderResolve$=Ke))},$t=(ee,we)=>{if(ee.$flags$|=16,!(4&ee.$flags$))return vn(ee,ee.$ancestorComponent$),fi(()=>un(ee,we));ee.$flags$|=512},un=(ee,we)=>{const Je=ee.$lazyInstance$;let Ct;return we&&(ee.$flags$|=256,ee.$queuedListeners$&&(ee.$queuedListeners$.map(([_e,Ye])=>He(Je,_e,Ye)),ee.$queuedListeners$=null),Ct=He(Je,"componentWillLoad")),Ct=dt(Ct,()=>He(Je,"componentWillRender")),dt(Ct,()=>Ln(ee,Je,we))},Ln=function(){var ee=(0,a.Z)(function*(we,Ke,Je){const Ct=we.$hostElement$,Ye=Ct["s-rc"];Je&&(ee=>{const we=ee.$cmpMeta$,Ke=ee.$hostElement$,Je=we.$flags$,_e=bt(Ke.shadowRoot?Ke.shadowRoot:Ke.getRootNode(),we,ee.$modeName$);10&Je&&(Ke["s-sc"]=_e,Ke.classList.add(_e+"-h"),2&Je&&Ke.classList.add(_e+"-s"))})(we);Sn(we,Ke),Ye&&(Ye.map(Ot=>Ot()),Ct["s-rc"]=void 0);{const Ot=Ct["s-p"],jt=()=>On(we);0===Ot.length?jt():(Promise.all(Ot).then(jt),we.$flags$|=4,Ot.length=0)}});return function(Ke,Je,Ct){return ee.apply(this,arguments)}}(),Sn=(ee,we,Ke)=>{try{we=we.render&&we.render(),ee.$flags$&=-17,ee.$flags$|=2,((ee,we)=>{const Ke=ee.$hostElement$,Je=ee.$cmpMeta$,Ct=ee.$vnode$||Rn(null,null),_e=(ee=>ee&&ee.$tag$===Wn)(we)?we:Qn(null,null,we);if(Le=Ke.tagName,Je.$attrsToReflect$&&(_e.$attrs$=_e.$attrs$||{},Je.$attrsToReflect$.map(([Ye,yt])=>_e.$attrs$[yt]=Ke[Ye])),_e.$tag$=null,_e.$flags$|=4,ee.$vnode$=_e,_e.$elm$=Ct.$elm$=Ke.shadowRoot||Ke,z=Ke["s-sc"],ke=Ke["s-cr"],he=0!=(1&Je.$flags$),Ee=!1,Bn(Ct,_e),Ie.$flags$|=1,pe){jn(_e.$elm$);let Ye,yt,Ot,jt,ln,An,qn=0;for(;qn<Or.length;qn++)Ye=Or[qn],yt=Ye.$nodeToRelocate$,yt["s-ol"]||(Ot=ie.createTextNode(""),Ot["s-nr"]=yt,yt.parentNode.insertBefore(yt["s-ol"]=Ot,yt));for(qn=0;qn<Or.length;qn++)if(Ye=Or[qn],yt=Ye.$nodeToRelocate$,Ye.$slotRefNode$){for(jt=Ye.$slotRefNode$.parentNode,ln=Ye.$slotRefNode$.nextSibling,Ot=yt["s-ol"];Ot=Ot.previousSibling;)if(An=Ot["s-nr"],An&&An["s-sn"]===yt["s-sn"]&&jt===An.parentNode&&(An=An.nextSibling,!An||!An["s-nr"])){ln=An;break}(!ln&&jt!==yt.parentNode||yt.nextSibling!==ln)&&yt!==ln&&(!yt["s-hn"]&&yt["s-ol"]&&(yt["s-hn"]=yt["s-ol"].parentNode.nodeName),jt.insertBefore(yt,ln))}else 1===yt.nodeType&&(yt.hidden=!0)}Ee&&Dr(_e.$elm$),Ie.$flags$&=-2,Or.length=0})(ee,we)}catch(Je){vr(Je,ee.$hostElement$)}return null},On=ee=>{const Ke=ee.$hostElement$,Ct=ee.$lazyInstance$,_e=ee.$ancestorComponent$;He(Ct,"componentDidRender"),64&ee.$flags$?He(Ct,"componentDidUpdate"):(ee.$flags$|=64,rt(Ke),He(Ct,"componentDidLoad"),ee.$onReadyResolve$(Ke),_e||Ne()),ee.$onInstanceResolve$(Ke),ee.$onRenderResolve$&&(ee.$onRenderResolve$(),ee.$onRenderResolve$=void 0),512&ee.$flags$&&Xi(()=>$t(ee,!1)),ee.$flags$&=-517},je=ee=>{{const we=Hr(ee),Ke=we.$hostElement$.isConnected;return Ke&&2==(18&we.$flags$)&&$t(we,!1),Ke}},Ne=ee=>{rt(ie.documentElement),Xi(()=>ni(de,"appload",{detail:{namespace:"ionic"}}))},He=(ee,we,Ke)=>{if(ee&&ee[we])try{return ee[we](Ke)}catch(Je){vr(Je)}},dt=(ee,we)=>ee&&ee.then?ee.then(we):we(),rt=ee=>ee.classList.add("hydrated"),_n=(ee,we,Ke,Je,Ct,_e,Ye)=>{let yt,Ot,jt,ln;if(1===_e.nodeType){for(yt=_e.getAttribute("c-id"),yt&&(Ot=yt.split("."),(Ot[0]===Ye||"0"===Ot[0])&&(jt={$flags$:0,$hostId$:Ot[0],$nodeId$:Ot[1],$depth$:Ot[2],$index$:Ot[3],$tag$:_e.tagName.toLowerCase(),$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},we.push(jt),_e.removeAttribute("c-id"),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt,ee=jt,Je&&"0"===jt.$depth$&&(Je[jt.$index$]=jt.$elm$))),ln=_e.childNodes.length-1;ln>=0;ln--)_n(ee,we,Ke,Je,Ct,_e.childNodes[ln],Ye);if(_e.shadowRoot)for(ln=_e.shadowRoot.childNodes.length-1;ln>=0;ln--)_n(ee,we,Ke,Je,Ct,_e.shadowRoot.childNodes[ln],Ye)}else if(8===_e.nodeType)Ot=_e.nodeValue.split("."),(Ot[1]===Ye||"0"===Ot[1])&&(yt=Ot[0],jt={$flags$:0,$hostId$:Ot[1],$nodeId$:Ot[2],$depth$:Ot[3],$index$:Ot[4],$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===yt?(jt.$elm$=_e.nextSibling,jt.$elm$&&3===jt.$elm$.nodeType&&(jt.$text$=jt.$elm$.textContent,we.push(jt),_e.remove(),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt,Je&&"0"===jt.$depth$&&(Je[jt.$index$]=jt.$elm$))):jt.$hostId$===Ye&&("s"===yt?(jt.$tag$="slot",_e["s-sn"]=Ot[5]?jt.$name$=Ot[5]:"",_e["s-sr"]=!0,Je&&(jt.$elm$=ie.createElement(jt.$tag$),jt.$name$&&jt.$elm$.setAttribute("name",jt.$name$),_e.parentNode.insertBefore(jt.$elm$,_e),_e.remove(),"0"===jt.$depth$&&(Je[jt.$index$]=jt.$elm$)),Ke.push(jt),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt):"r"===yt&&(Je?_e.remove():(Ct["s-cr"]=_e,_e["s-cn"]=!0))));else if(ee&&"style"===ee.$tag$){const An=Rn(null,_e.textContent);An.$elm$=_e,An.$index$="0",ee.$children$=[An]}},hr=(ee,we)=>{if(1===ee.nodeType){let Ke=0;for(;Ke<ee.childNodes.length;Ke++)hr(ee.childNodes[Ke],we);if(ee.shadowRoot)for(Ke=0;Ke<ee.shadowRoot.childNodes.length;Ke++)hr(ee.shadowRoot.childNodes[Ke],we)}else if(8===ee.nodeType){const Ke=ee.nodeValue.split(".");"o"===Ke[0]&&(we.set(Ke[1]+"."+Ke[2],ee),ee.nodeValue="",ee["s-en"]=Ke[3])}},Ve=(ee,we,Ke)=>{if(we.$members$){ee.watchers&&(we.$watchers$=ee.watchers);const Je=Object.entries(we.$members$),Ct=ee.prototype;if(Je.map(([_e,[Ye]])=>{31&Ye||2&Ke&&32&Ye?Object.defineProperty(Ct,_e,{get(){return((ee,we)=>Hr(this).$instanceValues$.get(we))(0,_e)},set(yt){((ee,we,Ke,Je)=>{const Ct=Hr(ee),_e=Ct.$hostElement$,Ye=Ct.$instanceValues$.get(we),yt=Ct.$flags$,Ot=Ct.$lazyInstance$;Ke=((ee,we)=>null==ee||In(ee)?ee:4&we?"false"!==ee&&(""===ee||!!ee):2&we?parseFloat(ee):1&we?String(ee):ee)(Ke,Je.$members$[we][0]);const jt=Number.isNaN(Ye)&&Number.isNaN(Ke);if((!(8&yt)||void 0===Ye)&&Ke!==Ye&&!jt&&(Ct.$instanceValues$.set(we,Ke),Ot)){if(Je.$watchers$&&128&yt){const An=Je.$watchers$[we];An&&An.map(qn=>{try{Ot[qn](Ke,Ye,we)}catch(pr){vr(pr,_e)}})}2==(18&yt)&&$t(Ct,!1)}})(this,_e,yt,we)},configurable:!0,enumerable:!0}):1&Ke&&64&Ye&&Object.defineProperty(Ct,_e,{value(...yt){const Ot=Hr(this);return Ot.$onInstancePromise$.then(()=>Ot.$lazyInstance$[_e](...yt))}})}),1&Ke){const _e=new Map;Ct.attributeChangedCallback=function(Ye,yt,Ot){Ie.jmp(()=>{const jt=_e.get(Ye);if(this.hasOwnProperty(jt))Ot=this[jt],delete this[jt];else if(Ct.hasOwnProperty(jt)&&"number"==typeof this[jt]&&this[jt]==Ot)return;this[jt]=(null!==Ot||"boolean"!=typeof this[jt])&&Ot})},ee.observedAttributes=Je.filter(([Ye,yt])=>15&yt[0]).map(([Ye,yt])=>{const Ot=yt[1]||Ye;return _e.set(Ot,Ye),512&yt[0]&&we.$attrsToReflect$.push([Ye,Ot]),Ot})}}return ee},Me=function(){var ee=(0,a.Z)(function*(we,Ke,Je,Ct,_e){if(0==(32&Ke.$flags$)){{if(Ke.$flags$|=32,(_e=Ii(Je)).then){const jt=()=>{};_e=yield _e,jt()}_e.isProxied||(Je.$watchers$=_e.watchers,Ve(_e,Je,2),_e.isProxied=!0);const Ot=()=>{};Ke.$flags$|=8;try{new _e(Ke)}catch(jt){vr(jt)}Ke.$flags$&=-9,Ke.$flags$|=128,Ot(),Et(Ke.$lazyInstance$)}if(_e.style){let Ot=_e.style;"string"!=typeof Ot&&(Ot=Ot[Ke.$modeName$=(ee=>Zi.map(we=>we(ee)).find(we=>!!we))(we)]);const jt=$e(Je,Ke.$modeName$);if(!zn.has(jt)){const ln=()=>{};Gt(jt,Ot,!!(1&Je.$flags$)),ln()}}}const Ye=Ke.$ancestorComponent$,yt=()=>$t(Ke,!0);Ye&&Ye["s-rc"]?Ye["s-rc"].push(yt):yt()});return function(Ke,Je,Ct,_e,Ye){return ee.apply(this,arguments)}}(),Et=ee=>{He(ee,"connectedCallback")},hn=ee=>{const we=ee["s-cr"]=ie.createComment("");we["s-cn"]=!0,ee.insertBefore(we,ee.firstChild)},Zt=(ee,we={})=>{const Je=[],Ct=we.exclude||[],_e=de.customElements,Ye=ie.head,yt=Ye.querySelector("meta[charset]"),Ot=ie.createElement("style"),jt=[],ln=ie.querySelectorAll(`[${Oe}]`);let An,qn=!0,pr=0;for(Object.assign(Ie,we),Ie.$resourcesUrl$=new URL(we.resourcesUrl||"./",ie.baseURI).href,Ie.$flags$|=2;pr<ln.length;pr++)Gt(ln[pr].getAttribute(Oe),Ue(ln[pr].innerHTML),!0);ee.map(kr=>{kr[1].map(et=>{const Ze={$flags$:et[0],$tagName$:et[1],$members$:et[2],$listeners$:et[3]};Ze.$members$=et[2],Ze.$listeners$=et[3],Ze.$attrsToReflect$=[],Ze.$watchers$={};const _t=Ze.$tagName$,Ut=class extends HTMLElement{constructor(en){super(en),ei(en=this,Ze),1&Ze.$flags$&&en.attachShadow({mode:"open",delegatesFocus:!!(16&Ze.$flags$)})}connectedCallback(){An&&(clearTimeout(An),An=null),qn?jt.push(this):Ie.jmp(()=>(ee=>{if(0==(1&Ie.$flags$)){const we=Hr(ee),Ke=we.$cmpMeta$,Je=()=>{};if(1&we.$flags$)De(ee,we,Ke.$listeners$),Et(we.$lazyInstance$);else{let Ct;if(we.$flags$|=1,Ct=ee.getAttribute(ye),Ct){if(1&Ke.$flags$){const _e=bt(ee.shadowRoot,Ke,ee.getAttribute("s-mode"));ee.classList.remove(_e+"-h",_e+"-s")}((ee,we,Ke,Je)=>{const _e=ee.shadowRoot,Ye=[],Ot=_e?[]:null,jt=Je.$vnode$=Rn(we,null);Ie.$orgLocNodes$||hr(ie.body,Ie.$orgLocNodes$=new Map),ee[ye]=Ke,ee.removeAttribute(ye),_n(jt,Ye,[],Ot,ee,ee,Ke),Ye.map(ln=>{const An=ln.$hostId$+"."+ln.$nodeId$,qn=Ie.$orgLocNodes$.get(An),pr=ln.$elm$;qn&&""===qn["s-en"]&&qn.parentNode.insertBefore(pr,qn.nextSibling),_e||(pr["s-hn"]=we,qn&&(pr["s-ol"]=qn,pr["s-ol"]["s-nr"]=pr)),Ie.$orgLocNodes$.delete(An)}),_e&&Ot.map(ln=>{ln&&_e.appendChild(ln)})})(ee,Ke.$tagName$,Ct,we)}Ct||12&Ke.$flags$&&hn(ee);{let _e=ee;for(;_e=_e.parentNode||_e.host;)if(1===_e.nodeType&&_e.hasAttribute("s-id")&&_e["s-p"]||_e["s-p"]){vn(we,we.$ancestorComponent$=_e);break}}Ke.$members$&&Object.entries(Ke.$members$).map(([_e,[Ye]])=>{if(31&Ye&&ee.hasOwnProperty(_e)){const yt=ee[_e];delete ee[_e],ee[_e]=yt}}),Xi(()=>Me(ee,we,Ke))}Je()}})(this))}disconnectedCallback(){Ie.jmp(()=>(ee=>{if(0==(1&Ie.$flags$)){const we=Hr(this),Ke=we.$lazyInstance$;we.$rmListeners$&&(we.$rmListeners$.map(Je=>Je()),we.$rmListeners$=void 0),He(Ke,"disconnectedCallback")}})())}componentOnReady(){return Hr(this).$onReadyPromise$}};Ze.$lazyBundleId$=kr[0],!Ct.includes(_t)&&!_e.get(_t)&&(Je.push(_t),_e.define(_t,Ve(Ut,Ze,1)))})}),Ot.innerHTML=Je+"{visibility:hidden}.hydrated{visibility:inherit}",Ot.setAttribute("data-styles",""),Ye.insertBefore(Ot,yt?yt.nextSibling:Ye.firstChild),qn=!1,jt.length?jt.map(kr=>kr.connectedCallback()):Ie.jmp(()=>An=setTimeout(Ne,30))},Cn=ee=>{const we=new URL(ee,Ie.$resourcesUrl$);return we.origin!==de.location.origin?we.href:we.pathname},ar=new WeakMap,Hr=ee=>ar.get(ee),Fr=(ee,we)=>ar.set(we.$lazyInstance$=ee,we),ei=(ee,we)=>{const Ke={$flags$:0,$hostElement$:ee,$cmpMeta$:we,$instanceValues$:new Map};return Ke.$onInstancePromise$=new Promise(Je=>Ke.$onInstanceResolve$=Je),Ke.$onReadyPromise$=new Promise(Je=>Ke.$onReadyResolve$=Je),ee["s-p"]=[],ee["s-rc"]=[],De(ee,Ke,we.$listeners$),ar.set(ee,Ke)},hi=(ee,we)=>we in ee,vr=(ee,we)=>(0,console.error)(ee,we),Pi=new Map,Ii=(ee,we,Ke)=>{const Je=ee.$tagName$.replace(/-/g,"_"),Ct=ee.$lazyBundleId$,_e=Pi.get(Ct);return _e?_e[Je]:H(863)(`./${Ct}.entry.js`).then(Ye=>(Pi.set(Ct,Ye),Ye[Je]),vr)},zn=new Map,Zi=[],oi=[],wi=[],Qi=(ee,we)=>Ke=>{ee.push(Ke),ce||(ce=!0,we&&4&Ie.$flags$?Xi(bi):Ie.raf(bi))},Lr=ee=>{for(let we=0;we<ee.length;we++)try{ee[we](performance.now())}catch(Ke){vr(Ke)}ee.length=0},bi=()=>{Lr(oi),Lr(wi),(ce=oi.length>0)&&Ie.raf(bi)},Xi=ee=>nt().then(ee),Ci=Qi(oi,!1),fi=Qi(wi,!0),Fi={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},697:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>ke,a:()=>Le,b:()=>he,c:()=>Ee,d:()=>pe,e:()=>mt,g:()=>ve,l:()=>xt,s:()=>ye,t:()=>de});var a=H(5861),ne=H(1308),z=H(5730);const ke="ionViewWillEnter",Le="ionViewDidEnter",he="ionViewWillLeave",Ee="ionViewDidLeave",pe="ionViewWillUnload",de=ae=>new Promise((Ce,Se)=>{(0,ne.c)(()=>{ie(ae),Ie(ae).then(lt=>{lt.animation&&lt.animation.destroy(),Ge(ae),Ce(lt)},lt=>{Ge(ae),Se(lt)})})}),ie=ae=>{const Ce=ae.enteringEl,Se=ae.leavingEl;Oe(Ce,Se,ae.direction),ae.showGoBack?Ce.classList.add("can-go-back"):Ce.classList.remove("can-go-back"),ye(Ce,!1),Ce.style.setProperty("pointer-events","none"),Se&&(ye(Se,!1),Se.style.setProperty("pointer-events","none"))},Ie=function(){var ae=(0,a.Z)(function*(Ce){const Se=yield st(Ce);return Se&&ne.B.isBrowser?nt(Se,Ce):Re(Ce)});return function(Se){return ae.apply(this,arguments)}}(),Ge=ae=>{const Ce=ae.enteringEl,Se=ae.leavingEl;Ce.classList.remove("ion-page-invisible"),Ce.style.removeProperty("pointer-events"),void 0!==Se&&(Se.classList.remove("ion-page-invisible"),Se.style.removeProperty("pointer-events"))},st=function(){var ae=(0,a.Z)(function*(Ce){return Ce.leavingEl&&Ce.animated&&0!==Ce.duration?Ce.animationBuilder?Ce.animationBuilder:"ios"===Ce.mode?(yield Promise.resolve().then(H.bind(H,3953))).iosTransitionAnimation:(yield Promise.resolve().then(H.bind(H,3880))).mdTransitionAnimation:void 0});return function(Se){return ae.apply(this,arguments)}}(),nt=function(){var ae=(0,a.Z)(function*(Ce,Se){yield De(Se,!0);const lt=Ce(Se.baseEl,Se);vt(Se.enteringEl,Se.leavingEl);const J=yield me(lt,Se);return Se.progressCallback&&Se.progressCallback(void 0),J&&gt(Se.enteringEl,Se.leavingEl),{hasCompleted:J,animation:lt}});return function(Se,lt){return ae.apply(this,arguments)}}(),Re=function(){var ae=(0,a.Z)(function*(Ce){const Se=Ce.enteringEl,lt=Ce.leavingEl;return yield De(Ce,!1),vt(Se,lt),gt(Se,lt),{hasCompleted:!0}});return function(Se){return ae.apply(this,arguments)}}(),De=function(){var ae=(0,a.Z)(function*(Ce,Se){const J=(void 0!==Ce.deepWait?Ce.deepWait:Se)?[mt(Ce.enteringEl),mt(Ce.leavingEl)]:[Be(Ce.enteringEl),Be(Ce.leavingEl)];yield Promise.all(J),yield ct(Ce.viewIsReady,Ce.enteringEl)});return function(Se,lt){return ae.apply(this,arguments)}}(),ct=function(){var ae=(0,a.Z)(function*(Ce,Se){Ce&&(yield Ce(Se))});return function(Se,lt){return ae.apply(this,arguments)}}(),me=(ae,Ce)=>{const Se=Ce.progressCallback,lt=new Promise(J=>{ae.onFinish(Gt=>J(1===Gt))});return Se?(ae.progressStart(!0),Se(ae)):ae.play(),lt},vt=(ae,Ce)=>{xt(Ce,he),xt(ae,ke)},gt=(ae,Ce)=>{xt(ae,Le),xt(Ce,Ee)},xt=(ae,Ce)=>{if(ae){const Se=new CustomEvent(Ce,{bubbles:!1,cancelable:!1});ae.dispatchEvent(Se)}},Be=ae=>ae?new Promise(Ce=>(0,z.c)(ae,Ce)):Promise.resolve(),mt=function(){var ae=(0,a.Z)(function*(Ce){const Se=Ce;if(Se){if(null!=Se.componentOnReady){if(null!=(yield Se.componentOnReady()))return}else if(null!=Se.__registerHost)return void(yield new Promise(J=>(0,z.r)(J)));yield Promise.all(Array.from(Se.children).map(mt))}});return function(Se){return ae.apply(this,arguments)}}(),ye=(ae,Ce)=>{Ce?(ae.setAttribute("aria-hidden","true"),ae.classList.add("ion-page-hidden")):(ae.hidden=!1,ae.removeAttribute("aria-hidden"),ae.classList.remove("ion-page-hidden"))},Oe=(ae,Ce,Se)=>{void 0!==ae&&(ae.style.zIndex="back"===Se?"99":"101"),void 0!==Ce&&(Ce.style.zIndex="100")},ve=ae=>ae.classList.contains("ion-page")?ae:ae.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||ae},1911:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>be});var a=H(4349);const ne=(Ie,Ge,st,nt)=>{const Re=z(Ie)?{capture:!!nt.capture,passive:!!nt.passive}:!!nt.capture;let De,ct;return Ie.__zone_symbol__addEventListener?(De="__zone_symbol__addEventListener",ct="__zone_symbol__removeEventListener"):(De="addEventListener",ct="removeEventListener"),Ie[De](Ge,st,Re),()=>{Ie[ct](Ge,st,Re)}},z=Ie=>{if(void 0===ke)try{const Ge=Object.defineProperty({},"passive",{get:()=>{ke=!0}});Ie.addEventListener("optsTest",()=>{},Ge)}catch(Ge){ke=!1}return!!ke};let ke;const Ee=Ie=>Ie instanceof Document?Ie:Ie.ownerDocument,be=Ie=>{let Ge=!1,st=!1,nt=!0,Re=!1;const De=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ie),ct=De.canStart,me=De.onWillStart,vt=De.onStart,gt=De.onEnd,xt=De.notCaptured,Be=De.onMove,mt=De.threshold,ye=De.passive,Oe=De.blurOnStart,ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},ae=((Ie,Ge,st)=>{const nt=st*(Math.PI/180),Re="x"===Ie,De=Math.cos(nt),ct=Ge*Ge;let me=0,vt=0,gt=!1,xt=0;return{start(Be,mt){me=Be,vt=mt,xt=0,gt=!0},detect(Be,mt){if(!gt)return!1;const ye=Be-me,Oe=mt-vt,ve=ye*ye+Oe*Oe;if(ve<ct)return!1;const ae=Math.sqrt(ve),Ce=(Re?ye:Oe)/ae;return xt=Ce>De?1:Ce<-De?-1:0,gt=!1,!0},isGesture:()=>0!==xt,getDirection:()=>xt}})(De.direction,De.threshold,De.maxAngle),Ce=a.G.createGesture({name:Ie.gestureName,priority:Ie.gesturePriority,disableScroll:Ie.disableScroll}),J=()=>{!Ge||(Re=!1,Be&&Be(ve))},Gt=()=>!!Ce.capture()&&(Ge=!0,nt=!1,ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime,me?me(ve).then(at):at(),!0),at=()=>{Oe&&(()=>{if("undefined"!=typeof document){const ht=document.activeElement;null!=ht&&ht.blur&&ht.blur()}})(),vt&&vt(ve),nt=!0},$e=()=>{Ge=!1,st=!1,Re=!1,nt=!0,Ce.release()},Ue=ht=>{const ft=Ge,Ft=nt;if($e(),Ft){if(ce(ve,ht),ft)return void(gt&&gt(ve));xt&&xt(ve)}},Xe=((Ie,Ge,st,nt,Re)=>{let De,ct,me,vt,gt,xt,Be,mt=0;const ye=bt=>{mt=Date.now()+2e3,Ge(bt)&&(!ct&&st&&(ct=ne(Ie,"touchmove",st,Re)),me||(me=ne(bt.target,"touchend",ve,Re)),vt||(vt=ne(bt.target,"touchcancel",ve,Re)))},Oe=bt=>{mt>Date.now()||!Ge(bt)||(!xt&&st&&(xt=ne(Ee(Ie),"mousemove",st,Re)),Be||(Be=ne(Ee(Ie),"mouseup",ae,Re)))},ve=bt=>{Ce(),nt&&nt(bt)},ae=bt=>{Se(),nt&&nt(bt)},Ce=()=>{ct&&ct(),me&&me(),vt&&vt(),ct=me=vt=void 0},Se=()=>{xt&&xt(),Be&&Be(),xt=Be=void 0},lt=()=>{Ce(),Se()},J=(bt=!0)=>{bt?(De||(De=ne(Ie,"touchstart",ye,Re)),gt||(gt=ne(Ie,"mousedown",Oe,Re))):(De&&De(),gt&&gt(),De=gt=void 0,lt())};return{enable:J,stop:lt,destroy:()=>{J(!1),nt=st=Ge=void 0}}})(De.el,ht=>{const ft=ie(ht);return!(st||!nt||(de(ht,ve),ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime=ft,ve.velocityX=ve.velocityY=ve.deltaX=ve.deltaY=0,ve.event=ht,ct&&!1===ct(ve))||(Ce.release(),!Ce.start()))&&(st=!0,0===mt?Gt():(ae.start(ve.startX,ve.startY),!0))},ht=>{Ge?!Re&&nt&&(Re=!0,ce(ve,ht),requestAnimationFrame(J)):(ce(ve,ht),ae.detect(ve.currentX,ve.currentY)&&(!ae.isGesture()||!Gt())&&Qe())},Ue,{capture:!1,passive:ye}),Qe=()=>{$e(),Xe.stop(),xt&&xt(ve)};return{enable(ht=!0){ht||(Ge&&Ue(void 0),$e()),Xe.enable(ht)},destroy(){Ce.destroy(),Xe.destroy()}}},ce=(Ie,Ge)=>{if(!Ge)return;const st=Ie.currentX,nt=Ie.currentY,Re=Ie.currentTime;de(Ge,Ie);const De=Ie.currentX,ct=Ie.currentY,vt=(Ie.currentTime=ie(Ge))-Re;if(vt>0&&vt<100){const xt=(ct-nt)/vt;Ie.velocityX=(De-st)/vt*.7+.3*Ie.velocityX,Ie.velocityY=.7*xt+.3*Ie.velocityY}Ie.deltaX=De-Ie.startX,Ie.deltaY=ct-Ie.startY,Ie.event=Ge},de=(Ie,Ge)=>{let st=0,nt=0;if(Ie){const Re=Ie.changedTouches;if(Re&&Re.length>0){const De=Re[0];st=De.clientX,nt=De.clientY}else void 0!==Ie.pageX&&(st=Ie.pageX,nt=Ie.pageY)}Ge.currentX=st,Ge.currentY=nt},ie=Ie=>Ie.timeStamp||Date.now()},9658:(tn,ot,H)=>{"use strict";H.d(ot,{a:()=>de,b:()=>J,c:()=>z,g:()=>ce,i:()=>Gt});var a=H(1308);class ne{constructor(){this.m=new Map}reset(at){this.m=new Map(Object.entries(at))}get(at,$e){const Ue=this.m.get(at);return void 0!==Ue?Ue:$e}getBoolean(at,$e=!1){const Ue=this.m.get(at);return void 0===Ue?$e:"string"==typeof Ue?"true"===Ue:!!Ue}getNumber(at,$e){const Ue=parseFloat(this.m.get(at));return isNaN(Ue)?void 0!==$e?$e:NaN:Ue}set(at,$e){this.m.set(at,$e)}}const z=new ne,be="ionic-persist-config",ce=bt=>ie(bt),de=(bt,at)=>("string"==typeof bt&&(at=bt,bt=void 0),ce(bt).includes(at)),ie=(bt=window)=>{if(void 0===bt)return[];bt.Ionic=bt.Ionic||{};let at=bt.Ionic.platforms;return null==at&&(at=bt.Ionic.platforms=Ie(bt),at.forEach($e=>bt.document.documentElement.classList.add(`plt-${$e}`))),at},Ie=bt=>{const at=z.get("platform");return Object.keys(Se).filter($e=>{const Ue=null==at?void 0:at[$e];return"function"==typeof Ue?Ue(bt):Se[$e](bt)})},st=bt=>!!(ae(bt,/iPad/i)||ae(bt,/Macintosh/i)&&gt(bt)),De=bt=>ae(bt,/android|sink/i),gt=bt=>Ce(bt,"(any-pointer:coarse)"),Be=bt=>mt(bt)||ye(bt),mt=bt=>!!(bt.cordova||bt.phonegap||bt.PhoneGap),ye=bt=>{const at=bt.Capacitor;return!(null==at||!at.isNative)},ae=(bt,at)=>at.test(bt.navigator.userAgent),Ce=(bt,at)=>{var $e;return null===($e=bt.matchMedia)||void 0===$e?void 0:$e.call(bt,at).matches},Se={ipad:st,iphone:bt=>ae(bt,/iPhone/i),ios:bt=>ae(bt,/iPhone|iPod/i)||st(bt),android:De,phablet:bt=>{const at=bt.innerWidth,$e=bt.innerHeight,Ue=Math.min(at,$e),Xe=Math.max(at,$e);return Ue>390&&Ue<520&&Xe>620&&Xe<800},tablet:bt=>{const at=bt.innerWidth,$e=bt.innerHeight,Ue=Math.min(at,$e),Xe=Math.max(at,$e);return st(bt)||(bt=>De(bt)&&!ae(bt,/mobile/i))(bt)||Ue>460&&Ue<820&&Xe>780&&Xe<1400},cordova:mt,capacitor:ye,electron:bt=>ae(bt,/electron/i),pwa:bt=>{var at;return!(!(null===(at=bt.matchMedia)||void 0===at?void 0:at.call(bt,"(display-mode: standalone)").matches)&&!bt.navigator.standalone)},mobile:gt,mobileweb:bt=>gt(bt)&&!Be(bt),desktop:bt=>!gt(bt),hybrid:Be};let lt;const J=bt=>bt&&(0,a.g)(bt)||lt,Gt=(bt={})=>{if("undefined"==typeof window)return;const at=window.document,$e=window,Ue=$e.Ionic=$e.Ionic||{},Xe={};bt._ael&&(Xe.ael=bt._ael),bt._rel&&(Xe.rel=bt._rel),bt._ce&&(Xe.ce=bt._ce),(0,a.s)(Xe);const Qe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(bt=>{try{const at=bt.sessionStorage.getItem(be);return null!==at?JSON.parse(at):{}}catch(at){return{}}})($e)),{persistConfig:!1}),Ue.config),(bt=>{const at={};return bt.location.search.slice(1).split("&").map($e=>$e.split("=")).map(([$e,Ue])=>[decodeURIComponent($e),decodeURIComponent(Ue)]).filter(([$e])=>((bt,at)=>bt.substr(0,at.length)===at)($e,"ionic:")).map(([$e,Ue])=>[$e.slice("ionic:".length),Ue]).forEach(([$e,Ue])=>{at[$e]=Ue}),at})($e)),bt);z.reset(Qe),z.getBoolean("persistConfig")&&((bt,at)=>{try{bt.sessionStorage.setItem(be,JSON.stringify(at))}catch($e){return}})($e,Qe),ie($e),Ue.config=z,Ue.mode=lt=z.get("mode",at.documentElement.getAttribute("mode")||(de($e,"ios")?"ios":"md")),z.set("mode",lt),at.documentElement.setAttribute("mode",lt),at.documentElement.classList.add(lt),z.getBoolean("_testing")&&z.set("animated",!1);const ht=Ft=>{var Nt;return null===(Nt=Ft.tagName)||void 0===Nt?void 0:Nt.startsWith("ION-")},ft=Ft=>["ios","md"].includes(Ft);(0,a.a)(Ft=>{for(;Ft;){const Nt=Ft.mode||Ft.getAttribute("mode");if(Nt){if(ft(Nt))return Nt;ht(Ft)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}Ft=Ft.parentElement}return lt})}},3953:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{iosTransitionAnimation:()=>Ie,shadow:()=>Ee});var a=H(8834),ne=H(697);H(3457),H(1308);const he=Ge=>document.querySelector(`${Ge}.ion-cloned-element`),Ee=Ge=>Ge.shadowRoot||Ge,pe=Ge=>{const st="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs"),nt="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=st){const Re=st.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Re?Re.querySelector(nt):null}return Ge.querySelector(nt)},be=(Ge,st)=>{const nt="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs");let Re=[];if(null!=nt){const De=nt.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=De&&(Re=De.querySelectorAll("ion-buttons"))}else Re=Ge.querySelectorAll("ion-buttons");for(const De of Re){const ct=De.closest("ion-header"),me=ct&&!ct.classList.contains("header-collapse-condense-inactive"),vt=De.querySelector("ion-back-button"),gt=De.classList.contains("buttons-collapse"),xt="start"===De.slot||""===De.slot;if(null!==vt&&xt&&(gt&&me&&st||!gt))return vt}return null},de=(Ge,st,nt,Re,De,ct)=>{const me=st?`calc(100% - ${ct.right+4}px)`:ct.left-4+"px",vt=st?"7px":"-7px",gt=st?"-4px":"4px",xt=st?"-4px":"4px",Be=st?"right":"left",mt=st?"left":"right",ve=nt?[{offset:0,opacity:1,transform:`translate3d(${gt}, ${ct.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${vt}, ${De.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${vt}, ${De.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${gt}, ${ct.top-46}px, 0) scale(1)`}],Se=nt?[{offset:0,opacity:1,transform:`translate3d(${xt}, ${ct.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${xt}, ${ct.top-46}px, 0) scale(1)`}],lt=(0,a.c)(),J=(0,a.c)(),Gt=he("ion-back-button"),bt=Ee(Gt).querySelector(".button-text"),at=Ee(Gt).querySelector("ion-icon");Gt.text=Re.text,Gt.mode=Re.mode,Gt.icon=Re.icon,Gt.color=Re.color,Gt.disabled=Re.disabled,Gt.style.setProperty("display","block"),Gt.style.setProperty("position","fixed"),J.addElement(at),lt.addElement(bt),lt.beforeStyles({"transform-origin":`${Be} center`}).beforeAddWrite(()=>{Re.style.setProperty("display","none"),Gt.style.setProperty(Be,me)}).afterAddWrite(()=>{Re.style.setProperty("display",""),Gt.style.setProperty("display","none"),Gt.style.removeProperty(Be)}).keyframes(ve),J.beforeStyles({"transform-origin":`${mt} center`}).keyframes(Se),Ge.addAnimation([lt,J])},ie=(Ge,st,nt,Re,De,ct)=>{const me=st?`calc(100% - ${De.right}px)`:`${De.left}px`,vt=st?"-18px":"18px",gt=st?"right":"left",mt=nt?[{offset:0,opacity:0,transform:`translate3d(${vt}, ${ct.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${vt}, ${ct.top-4}px, 0) scale(0.5)`}],ye=he("ion-title"),Oe=(0,a.c)();ye.innerText=Re.innerText,ye.size=Re.size,ye.color=Re.color,Oe.addElement(ye),Oe.beforeStyles({"transform-origin":`${gt} center`,height:"46px",display:"",position:"relative",[gt]:me}).beforeAddWrite(()=>{Re.style.setProperty("display","none")}).afterAddWrite(()=>{Re.style.setProperty("display",""),ye.style.setProperty("display","none")}).keyframes(mt),Ge.addAnimation(Oe)},Ie=(Ge,st)=>{var nt;try{const Re="cubic-bezier(0.32,0.72,0,1)",De="opacity",ct="transform",me="0%",gt="rtl"===Ge.ownerDocument.dir,xt=gt?"-99.5%":"99.5%",Be=gt?"33%":"-33%",mt=st.enteringEl,ye=st.leavingEl,Oe="back"===st.direction,ve=mt.querySelector(":scope > ion-content"),ae=mt.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ce=mt.querySelectorAll(":scope > ion-header > ion-toolbar"),Se=(0,a.c)(),lt=(0,a.c)();if(Se.addElement(mt).duration((null!==(nt=st.duration)&&void 0!==nt?nt:0)||540).easing(st.easing||Re).fill("both").beforeRemoveClass("ion-page-invisible"),ye&&null!=Ge){const at=(0,a.c)();at.addElement(Ge),Se.addAnimation(at)}if(ve||0!==Ce.length||0!==ae.length?(lt.addElement(ve),lt.addElement(ae)):lt.addElement(mt.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(lt),Oe?lt.beforeClearStyles([De]).fromTo("transform",`translateX(${Be})`,`translateX(${me})`).fromTo(De,.8,1):lt.beforeClearStyles([De]).fromTo("transform",`translateX(${xt})`,`translateX(${me})`),ve){const at=Ee(ve).querySelector(".transition-effect");if(at){const $e=at.querySelector(".transition-cover"),Ue=at.querySelector(".transition-shadow"),Xe=(0,a.c)(),Qe=(0,a.c)(),ht=(0,a.c)();Xe.addElement(at).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Qe.addElement($e).beforeClearStyles([De]).fromTo(De,0,.1),ht.addElement(Ue).beforeClearStyles([De]).fromTo(De,.03,.7),Xe.addAnimation([Qe,ht]),lt.addAnimation([Xe])}}const J=mt.querySelector("ion-header.header-collapse-condense"),{forward:Gt,backward:bt}=((Ge,st,nt,Re,De)=>{const ct=be(Re,nt),me=pe(De),vt=pe(Re),gt=be(De,nt),xt=null!==ct&&null!==me&&!nt,Be=null!==vt&&null!==gt&&nt;if(xt){const mt=me.getBoundingClientRect(),ye=ct.getBoundingClientRect();ie(Ge,st,nt,me,mt,ye),de(Ge,st,nt,ct,mt,ye)}else if(Be){const mt=vt.getBoundingClientRect(),ye=gt.getBoundingClientRect();ie(Ge,st,nt,vt,mt,ye),de(Ge,st,nt,gt,mt,ye)}return{forward:xt,backward:Be}})(Se,gt,Oe,mt,ye);if(Ce.forEach(at=>{const $e=(0,a.c)();$e.addElement(at),Se.addAnimation($e);const Ue=(0,a.c)();Ue.addElement(at.querySelector("ion-title"));const Xe=(0,a.c)(),Qe=Array.from(at.querySelectorAll("ion-buttons,[menuToggle]")),ht=at.closest("ion-header"),ft=null==ht?void 0:ht.classList.contains("header-collapse-condense-inactive");let Ft;Ft=Qe.filter(Oe?Rn=>{const Wn=Rn.classList.contains("buttons-collapse");return Wn&&!ft||!Wn}:Rn=>!Rn.classList.contains("buttons-collapse")),Xe.addElement(Ft);const Nt=(0,a.c)();Nt.addElement(at.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const bn=(0,a.c)();bn.addElement(Ee(at).querySelector(".toolbar-background"));const In=(0,a.c)(),Qn=at.querySelector("ion-back-button");if(Qn&&In.addElement(Qn),$e.addAnimation([Ue,Xe,Nt,bn,In]),Xe.fromTo(De,.01,1),Nt.fromTo(De,.01,1),Oe)ft||Ue.fromTo("transform",`translateX(${Be})`,`translateX(${me})`).fromTo(De,.01,1),Nt.fromTo("transform",`translateX(${Be})`,`translateX(${me})`),In.fromTo(De,.01,1);else if(J||Ue.fromTo("transform",`translateX(${xt})`,`translateX(${me})`).fromTo(De,.01,1),Nt.fromTo("transform",`translateX(${xt})`,`translateX(${me})`),bn.beforeClearStyles([De,"transform"]),(null==ht?void 0:ht.translucent)?bn.fromTo("transform",gt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):bn.fromTo(De,.01,"var(--opacity)"),Gt||In.fromTo(De,.01,1),Qn&&!Gt){const Wn=(0,a.c)();Wn.addElement(Ee(Qn).querySelector(".button-text")).fromTo("transform",gt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),$e.addAnimation(Wn)}}),ye){const at=(0,a.c)(),$e=ye.querySelector(":scope > ion-content"),Ue=ye.querySelectorAll(":scope > ion-header > ion-toolbar"),Xe=ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if($e||0!==Ue.length||0!==Xe.length?(at.addElement($e),at.addElement(Xe)):at.addElement(ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Se.addAnimation(at),Oe){at.beforeClearStyles([De]).fromTo("transform",`translateX(${me})`,gt?"translateX(-100%)":"translateX(100%)");const Qe=(0,ne.g)(ye);Se.afterAddWrite(()=>{"normal"===Se.getDirection()&&Qe.style.setProperty("display","none")})}else at.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).fromTo(De,1,.8);if($e){const Qe=Ee($e).querySelector(".transition-effect");if(Qe){const ht=Qe.querySelector(".transition-cover"),ft=Qe.querySelector(".transition-shadow"),Ft=(0,a.c)(),Nt=(0,a.c)(),bn=(0,a.c)();Ft.addElement(Qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Nt.addElement(ht).beforeClearStyles([De]).fromTo(De,.1,0),bn.addElement(ft).beforeClearStyles([De]).fromTo(De,.7,.03),Ft.addAnimation([Nt,bn]),at.addAnimation([Ft])}}Ue.forEach(Qe=>{const ht=(0,a.c)();ht.addElement(Qe);const ft=(0,a.c)();ft.addElement(Qe.querySelector("ion-title"));const Ft=(0,a.c)(),Nt=Qe.querySelectorAll("ion-buttons,[menuToggle]"),bn=Qe.closest("ion-header"),In=null==bn?void 0:bn.classList.contains("header-collapse-condense-inactive"),Qn=Array.from(Nt).filter(mr=>{const zt=mr.classList.contains("buttons-collapse");return zt&&!In||!zt});Ft.addElement(Qn);const Rn=(0,a.c)(),Wn=Qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Wn.length>0&&Rn.addElement(Wn);const ur=(0,a.c)();ur.addElement(Ee(Qe).querySelector(".toolbar-background"));const Un=(0,a.c)(),or=Qe.querySelector("ion-back-button");if(or&&Un.addElement(or),ht.addAnimation([ft,Ft,Rn,Un,ur]),Se.addAnimation(ht),Un.fromTo(De,.99,0),Ft.fromTo(De,.99,0),Rn.fromTo(De,.99,0),Oe){if(In||ft.fromTo("transform",`translateX(${me})`,gt?"translateX(-100%)":"translateX(100%)").fromTo(De,.99,0),Rn.fromTo("transform",`translateX(${me})`,gt?"translateX(-100%)":"translateX(100%)"),ur.beforeClearStyles([De,"transform"]),(null==bn?void 0:bn.translucent)?ur.fromTo("transform","translateX(0px)",gt?"translateX(-100%)":"translateX(100%)"):ur.fromTo(De,"var(--opacity)",0),or&&!bt){const zt=(0,a.c)();zt.addElement(Ee(or).querySelector(".button-text")).fromTo("transform",`translateX(${me})`,`translateX(${(gt?-124:124)+"px"})`),ht.addAnimation(zt)}}else In||ft.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).fromTo(De,.99,0).afterClearStyles([ct,De]),Rn.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).afterClearStyles([ct,De]),Un.afterClearStyles([De]),ft.afterClearStyles([De]),Ft.afterClearStyles([De])})}return Se}catch(Re){throw Re}}},3880:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{mdTransitionAnimation:()=>Le});var a=H(8834),ne=H(697);H(3457),H(1308);const Le=(he,Ee)=>{var pe,be,ce;const Ie="back"===Ee.direction,st=Ee.leavingEl,nt=(0,ne.g)(Ee.enteringEl),Re=nt.querySelector("ion-toolbar"),De=(0,a.c)();if(De.addElement(nt).fill("both").beforeRemoveClass("ion-page-invisible"),Ie?De.duration((null!==(pe=Ee.duration)&&void 0!==pe?pe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration((null!==(be=Ee.duration)&&void 0!==be?be:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Re){const ct=(0,a.c)();ct.addElement(Re),De.addAnimation(ct)}if(st&&Ie){De.duration((null!==(ce=Ee.duration)&&void 0!==ce?ce:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ct=(0,a.c)();ct.addElement((0,ne.g)(st)).onFinish(me=>{1===me&&ct.elements.length>0&&ct.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(ct)}return De}},4414:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>$e,a:()=>pe,b:()=>be,c:()=>Ie,d:()=>Oe,e:()=>st,f:()=>ae,g:()=>lt,h:()=>he,i:()=>Gt,j:()=>De,k:()=>mt,m:()=>de,s:()=>at});var a=H(5861),ne=H(9658),z=H(7593),ke=H(5730);let Le=0;const he=new WeakMap,Ee=Ue=>({create:Xe=>nt(Ue,Xe),dismiss:(Xe,Qe,ht)=>xt(document,Xe,Qe,Ue,ht),getTop:()=>(0,a.Z)(function*(){return mt(document,Ue)})()}),pe=Ee("ion-alert"),be=Ee("ion-action-sheet"),de=Ee("ion-modal"),Ie=Ee("ion-popover"),st=Ue=>{"undefined"!=typeof document&&gt(document);const Xe=Le++;Ue.overlayIndex=Xe,Ue.hasAttribute("id")||(Ue.id=`ion-overlay-${Xe}`)},nt=(Ue,Xe)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(Ue).then(()=>{const Qe=document.createElement(Ue);return Qe.classList.add("overlay-hidden"),Object.assign(Qe,Object.assign(Object.assign({},Xe),{hasController:!0})),Ce(document).appendChild(Qe),new Promise(ht=>(0,ke.c)(Qe,ht))}):Promise.resolve(),Re='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',De=(Ue,Xe)=>{let Qe=Ue.querySelector(Re);const ht=null==Qe?void 0:Qe.shadowRoot;ht&&(Qe=ht.querySelector(Re)||Qe),Qe?(0,ke.f)(Qe):Xe.focus()},me=(Ue,Xe)=>{const Qe=Array.from(Ue.querySelectorAll(Re));let ht=Qe.length>0?Qe[Qe.length-1]:null;const ft=null==ht?void 0:ht.shadowRoot;ft&&(ht=ft.querySelector(Re)||ht),ht?ht.focus():Xe.focus()},gt=Ue=>{0===Le&&(Le=1,Ue.addEventListener("focus",Xe=>{((Ue,Xe)=>{const Qe=mt(Xe,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ht=Ue.target;Qe&&ht&&!Qe.classList.contains("ion-disable-focus-trap")&&(Qe.shadowRoot?(()=>{if(Qe.contains(ht))Qe.lastFocus=ht;else{const Nt=Qe.lastFocus;De(Qe,Qe),Nt===Xe.activeElement&&me(Qe,Qe),Qe.lastFocus=Xe.activeElement}})():(()=>{if(Qe===ht)Qe.lastFocus=void 0;else{const Nt=(0,ke.g)(Qe);if(!Nt.contains(ht))return;const bn=Nt.querySelector(".ion-overlay-wrapper");if(!bn)return;if(bn.contains(ht))Qe.lastFocus=ht;else{const In=Qe.lastFocus;De(bn,Qe),In===Xe.activeElement&&me(bn,Qe),Qe.lastFocus=Xe.activeElement}}})())})(Xe,Ue)},!0),Ue.addEventListener("ionBackButton",Xe=>{const Qe=mt(Ue);null!=Qe&&Qe.backdropDismiss&&Xe.detail.register(z.OVERLAY_BACK_BUTTON_PRIORITY,()=>Qe.dismiss(void 0,$e))}),Ue.addEventListener("keyup",Xe=>{if("Escape"===Xe.key){const Qe=mt(Ue);null!=Qe&&Qe.backdropDismiss&&Qe.dismiss(void 0,$e)}}))},xt=(Ue,Xe,Qe,ht,ft)=>{const Ft=mt(Ue,ht,ft);return Ft?Ft.dismiss(Xe,Qe):Promise.reject("overlay does not exist")},mt=(Ue,Xe,Qe)=>{const ht=((Ue,Xe)=>(void 0===Xe&&(Xe="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ue.querySelectorAll(Xe)).filter(Qe=>Qe.overlayIndex>0)))(Ue,Xe).filter(ft=>!(Ue=>Ue.classList.contains("overlay-hidden"))(ft));return void 0===Qe?ht[ht.length-1]:ht.find(ft=>ft.id===Qe)},ye=(Ue=!1)=>{const Qe=Ce(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Qe||(Ue?Qe.setAttribute("aria-hidden","true"):Qe.removeAttribute("aria-hidden"))},Oe=function(){var Ue=(0,a.Z)(function*(Xe,Qe,ht,ft,Ft){var Nt,bn;if(Xe.presented)return;ye(!0),Xe.presented=!0,Xe.willPresent.emit(),null===(Nt=Xe.willPresentShorthand)||void 0===Nt||Nt.emit();const In=(0,ne.b)(Xe),Qn=Xe.enterAnimation?Xe.enterAnimation:ne.c.get(Qe,"ios"===In?ht:ft);(yield Se(Xe,Qn,Xe.el,Ft))&&(Xe.didPresent.emit(),null===(bn=Xe.didPresentShorthand)||void 0===bn||bn.emit()),"ION-TOAST"!==Xe.el.tagName&&ve(Xe.el),Xe.keyboardClose&&(null===document.activeElement||!Xe.el.contains(document.activeElement))&&Xe.el.focus()});return function(Qe,ht,ft,Ft,Nt){return Ue.apply(this,arguments)}}(),ve=function(){var Ue=(0,a.Z)(function*(Xe){let Qe=document.activeElement;if(!Qe)return;const ht=null==Qe?void 0:Qe.shadowRoot;ht&&(Qe=ht.querySelector(Re)||Qe),yield Xe.onDidDismiss(),Qe.focus()});return function(Qe){return Ue.apply(this,arguments)}}(),ae=function(){var Ue=(0,a.Z)(function*(Xe,Qe,ht,ft,Ft,Nt,bn){var In,Qn;if(!Xe.presented)return!1;ye(!1),Xe.presented=!1;try{Xe.el.style.setProperty("pointer-events","none"),Xe.willDismiss.emit({data:Qe,role:ht}),null===(In=Xe.willDismissShorthand)||void 0===In||In.emit({data:Qe,role:ht});const Rn=(0,ne.b)(Xe),Wn=Xe.leaveAnimation?Xe.leaveAnimation:ne.c.get(ft,"ios"===Rn?Ft:Nt);"gesture"!==ht&&(yield Se(Xe,Wn,Xe.el,bn)),Xe.didDismiss.emit({data:Qe,role:ht}),null===(Qn=Xe.didDismissShorthand)||void 0===Qn||Qn.emit({data:Qe,role:ht}),he.delete(Xe),Xe.el.classList.add("overlay-hidden"),Xe.el.style.removeProperty("pointer-events")}catch(Rn){console.error(Rn)}return Xe.el.remove(),!0});return function(Qe,ht,ft,Ft,Nt,bn,In){return Ue.apply(this,arguments)}}(),Ce=Ue=>Ue.querySelector("ion-app")||Ue.body,Se=function(){var Ue=(0,a.Z)(function*(Xe,Qe,ht,ft){ht.classList.remove("overlay-hidden");const Nt=Qe(Xe.el,ft);(!Xe.animated||!ne.c.getBoolean("animated",!0))&&Nt.duration(0),Xe.keyboardClose&&Nt.beforeAddWrite(()=>{const In=ht.ownerDocument.activeElement;null!=In&&In.matches("input,ion-input, ion-textarea")&&In.blur()});const bn=he.get(Xe)||[];return he.set(Xe,[...bn,Nt]),yield Nt.play(),!0});return function(Qe,ht,ft,Ft){return Ue.apply(this,arguments)}}(),lt=(Ue,Xe)=>{let Qe;const ht=new Promise(ft=>Qe=ft);return J(Ue,Xe,ft=>{Qe(ft.detail)}),ht},J=(Ue,Xe,Qe)=>{const ht=ft=>{(0,ke.b)(Ue,Xe,ht),Qe(ft)};(0,ke.a)(Ue,Xe,ht)},Gt=Ue=>"cancel"===Ue||Ue===$e,bt=Ue=>Ue(),at=(Ue,Xe)=>{if("function"==typeof Ue)return ne.c.get("_zoneGate",bt)(()=>{try{return Ue(Xe)}catch(ht){throw ht}})},$e="backdrop"},5867:(tn,ot,H)=>{"use strict";H.d(ot,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=H(9681);(0,a.registerVersion)("firebase","9.14.0","app")},127:(tn,ot,H)=>{"use strict";H.d(ot,{Z:()=>a.Z});var a=H(3942);a.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(tn,ot,H)=>{"use strict";H.r(ot);var a=H(5861),ne=H(3942),z=H(2090),ke=H(9681),Le=H(1877),he=H(655),Ee=H(4859);const st=function Ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},nt=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new z.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new Le.Yd("@firebase/auth");function me(b,...p){ct.logLevel<=Le.in.ERROR&&ct.error(`Auth (${ke.SDK_VERSION}): ${b}`,...p)}function vt(b,...p){throw mt(b,...p)}function gt(b,...p){return mt(b,...p)}function xt(b,p,_){const A=Object.assign(Object.assign({},nt()),{[p]:_});return new z.LL("auth","Firebase",A).create(p,{appName:b.name})}function Be(b,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&vt(b,"argument-error"),xt(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(b,...p){if("string"!=typeof b){const _=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(_,...A)}return Re.create(b,...p)}function ye(b,p,..._){if(!b)throw mt(p,..._)}function Oe(b){const p="INTERNAL ASSERTION FAILED: "+b;throw me(p),new Error(p)}function ve(b,p){b||Oe(p)}const ae=new Map;function Ce(b){ve(b instanceof Function,"Expected a class definition");let p=ae.get(b);return p?(ve(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,ae.set(b,p),p)}function J(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Gt(){return"http:"===bt()||"https:"===bt()}function bt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ue{constructor(p,_){this.shortDelay=p,this.longDelay=_,ve(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,z.uI)()||(0,z.b$)()}get(){return function at(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,z.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Xe(b,p){ve(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Qe{static initialize(p,_,A){this.fetchImpl=p,_&&(this.headersImpl=_),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ht={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},ft=new Ue(3e4,6e4);function Ft(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function Nt(b,p,_,A){return bn.apply(this,arguments)}function bn(){return(bn=(0,a.Z)(function*(b,p,_,A,K={}){return In(b,K,(0,a.Z)(function*(){let ue={},tt={};A&&("GET"===p?tt=A:ue={body:JSON.stringify(A)});const Lt=(0,z.xO)(Object.assign({key:b.config.apiKey},tt)).slice(1),pn=yield b._getAdditionalHeaders();return pn["Content-Type"]="application/json",b.languageCode&&(pn["X-Firebase-Locale"]=b.languageCode),Qe.fetch()(ur(b,b.config.apiHost,_,Lt),Object.assign({method:p,headers:pn,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function In(b,p,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,a.Z)(function*(b,p,_){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},ht),p);try{const K=new Un(b),ue=yield Promise.race([_(),K.promise]);K.clearNetworkTimeout();const tt=yield ue.json();if("needConfirmation"in tt)throw or(b,"account-exists-with-different-credential",tt);if(ue.ok&&!("errorMessage"in tt))return tt;{const Lt=ue.ok?tt.errorMessage:tt.error.message,[pn,Hn]=Lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===pn)throw or(b,"credential-already-in-use",tt);if("EMAIL_EXISTS"===pn)throw or(b,"email-already-in-use",tt);if("USER_DISABLED"===pn)throw or(b,"user-disabled",tt);const Er=A[pn]||pn.toLowerCase().replace(/[_\s]+/g,"-");if(Hn)throw xt(b,Er,Hn);vt(b,Er)}}catch(K){if(K instanceof z.ZR)throw K;vt(b,"network-request-failed")}})).apply(this,arguments)}function Rn(b,p,_,A){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,a.Z)(function*(b,p,_,A,K={}){const ue=yield Nt(b,p,_,A,K);return"mfaPendingCredential"in ue&&vt(b,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function ur(b,p,_,A){const K=`${p}${_}?${A}`;return b.config.emulator?Xe(b.config,K):`${b.config.apiScheme}://${K}`}class Un{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,A)=>{this.timer=setTimeout(()=>A(gt(this.auth,"network-request-failed")),ft.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(b,p,_){const A={appName:b.name};_.email&&(A.email=_.email),_.phoneNumber&&(A.phoneNumber=_.phoneNumber);const K=gt(b,p,A);return K.customData._tokenResponse=_,K}function zt(){return(zt=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function rr(b,p){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function tr(b,p){return nr.apply(this,arguments)}function nr(){return(nr=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Cr(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Tn(){return(Tn=(0,a.Z)(function*(b,p=!1){const _=(0,z.m9)(b),A=yield _.getIdToken(p),K=Tt(A);ye(K&&K.exp&&K.auth_time&&K.iat,_.auth,"internal-error");const ue="object"==typeof K.firebase?K.firebase:void 0,tt=null==ue?void 0:ue.sign_in_provider;return{claims:K,token:A,authTime:Cr(gn(K.auth_time)),issuedAtTime:Cr(gn(K.iat)),expirationTime:Cr(gn(K.exp)),signInProvider:tt||null,signInSecondFactor:(null==ue?void 0:ue.sign_in_second_factor)||null}})).apply(this,arguments)}function gn(b){return 1e3*Number(b)}function Tt(b){var p;const[_,A,K]=b.split(".");if(void 0===_||void 0===A||void 0===K)return me("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,z.tV)(A);return ue?JSON.parse(ue):(me("Failed to decode base64 JWT payload"),null)}catch(ue){return me("Caught error parsing JWT payload as JSON",null===(p=ue)||void 0===p?void 0:p.toString()),null}}function Bn(b,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,a.Z)(function*(b,p,_=!1){if(_)return p;try{return yield p}catch(A){throw A instanceof z.ZR&&Or(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}function Or({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class jn{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),A)}iteration(){var p=this;return(0,a.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===(null===(_=A)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class ji{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fn(b){return si.apply(this,arguments)}function si(){return(si=(0,a.Z)(function*(b){var p;const _=b.auth,A=yield b.getIdToken(),K=yield Bn(b,tr(_,{idToken:A}));ye(null==K?void 0:K.users.length,_,"internal-error");const ue=K.users[0];b._notifyReloadListener(ue);const tt=null!==(p=ue.providerUserInfo)&&void 0!==p&&p.length?vn(ue.providerUserInfo):[],Lt=ni(b.providerData,tt),Er=!!b.isAnonymous&&!(b.email&&ue.passwordHash||null!=Lt&&Lt.length),$n={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:Lt,metadata:new ji(ue.createdAt,ue.lastLoginAt),isAnonymous:Er};Object.assign(b,$n)})).apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(function*(b){const p=(0,z.m9)(b);yield Fn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ni(b,p){return[...b.filter(A=>!p.some(K=>K.providerId===A.providerId)),...p]}function vn(b){return b.map(p=>{var{providerId:_}=p,A=(0,he._T)(p,["providerId"]);return{providerId:_,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function un(){return(un=(0,a.Z)(function*(b,p){const _=yield In(b,{},(0,a.Z)(function*(){const A=(0,z.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:K,apiKey:ue}=b.config,tt=ur(b,K,"/v1/token",`key=${ue}`),Lt=yield b._getAdditionalHeaders();return Lt["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(tt,{method:"POST",headers:Lt,body:A})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Ln{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ye(p.idToken,"internal-error"),ye(void 0!==p.idToken,"internal-error"),ye(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function yr(b){const p=Tt(b);return ye(p,"internal-error"),ye(void 0!==p.exp,"internal-error"),ye(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var A=this;return(0,a.Z)(function*(){return ye(!A.accessToken||A.refreshToken,p,"user-token-expired"),_||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var A=this;return(0,a.Z)(function*(){const{accessToken:K,refreshToken:ue,expiresIn:tt}=yield function $t(b,p){return un.apply(this,arguments)}(p,_);A.updateTokensAndExpiration(K,ue,Number(tt))})()}updateTokensAndExpiration(p,_,A){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,_){const{refreshToken:A,accessToken:K,expirationTime:ue}=_,tt=new Ln;return A&&(ye("string"==typeof A,"internal-error",{appName:p}),tt.refreshToken=A),K&&(ye("string"==typeof K,"internal-error",{appName:p}),tt.accessToken=K),ue&&(ye("number"==typeof ue,"internal-error",{appName:p}),tt.expirationTime=ue),tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ln,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function Sn(b,p){ye("string"==typeof b||void 0===b,"internal-error",{appName:p})}class On{constructor(p){var{uid:_,auth:A,stsTokenManager:K}=p,ue=(0,he._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new ji(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,a.Z)(function*(){const A=yield Bn(_,_.stsTokenManager.getToken(_.auth,p));return ye(A,_.auth,"internal-error"),_.accessToken!==A&&(_.accessToken=A,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),A})()}getIdTokenResult(p){return function fr(b){return Tn.apply(this,arguments)}(this,p)}reload(){return function ir(b){return Yr.apply(this,arguments)}(this)}_assign(p){this!==p&&(ye(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new On(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var A=this;return(0,a.Z)(function*(){let K=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),K=!0),_&&(yield Fn(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,a.Z)(function*(){const _=yield p.getIdToken();return yield Bn(p,function mr(b,p){return zt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var A,K,ue,tt,Lt,pn,Hn,Er;const $n=null!==(A=_.displayName)&&void 0!==A?A:void 0,lo=null!==(K=_.email)&&void 0!==K?K:void 0,uo=null!==(ue=_.phoneNumber)&&void 0!==ue?ue:void 0,Mo=null!==(tt=_.photoURL)&&void 0!==tt?tt:void 0,dd=null!==(Lt=_.tenantId)&&void 0!==Lt?Lt:void 0,lc=null!==(pn=_._redirectEventId)&&void 0!==pn?pn:void 0,qd=null!==(Hn=_.createdAt)&&void 0!==Hn?Hn:void 0,Rh=null!==(Er=_.lastLoginAt)&&void 0!==Er?Er:void 0,{uid:Yd,emailVerified:Oh,isAnonymous:Ta,providerData:hd,stsTokenManager:Uc}=_;ye(Yd&&Uc,p,"internal-error");const Kd=Ln.fromJSON(this.name,Uc);ye("string"==typeof Yd,p,"internal-error"),Sn($n,p.name),Sn(lo,p.name),ye("boolean"==typeof Oh,p,"internal-error"),ye("boolean"==typeof Ta,p,"internal-error"),Sn(uo,p.name),Sn(Mo,p.name),Sn(dd,p.name),Sn(lc,p.name),Sn(qd,p.name),Sn(Rh,p.name);const fd=new On({uid:Yd,auth:p,email:lo,emailVerified:Oh,displayName:$n,isAnonymous:Ta,photoURL:Mo,phoneNumber:uo,tenantId:dd,stsTokenManager:Kd,createdAt:qd,lastLoginAt:Rh});return hd&&Array.isArray(hd)&&(fd.providerData=hd.map(jc=>Object.assign({},jc))),lc&&(fd._redirectEventId=lc),fd}static _fromIdTokenResponse(p,_,A=!1){return(0,a.Z)(function*(){const K=new Ln;K.updateFromServerResponse(_);const ue=new On({uid:_.localId,auth:p,stsTokenManager:K,isAnonymous:A});return yield Fn(ue),ue})()}}const Ne=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,A){var K=this;return(0,a.Z)(function*(){K.storage[_]=A})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=A.storage[_];return void 0===K?null:K})()}_remove(_){var A=this;return(0,a.Z)(function*(){delete A.storage[_]})()}_addListener(_,A){}_removeListener(_,A){}}return b.type="NONE",b})();function He(b,p,_){return`firebase:${b}:${p}:${_}`}class dt{constructor(p,_,A){this.persistence=p,this.auth=_,this.userKey=A;const{config:K,name:ue}=this.auth;this.fullUserKey=He(this.userKey,K.apiKey,ue),this.fullPersistenceKey=He("persistence",K.apiKey,ue),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?On._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,a.Z)(function*(){if(_.persistence===p)return;const A=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,A?_.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,A="authUser"){return(0,a.Z)(function*(){if(!_.length)return new dt(Ce(Ne),p,A);const K=(yield Promise.all(_.map(function(){var Hn=(0,a.Z)(function*(Er){if(yield Er._isAvailable())return Er});return function(Er){return Hn.apply(this,arguments)}}()))).filter(Hn=>Hn);let ue=K[0]||Ce(Ne);const tt=He(A,p.config.apiKey,p.name);let Lt=null;for(const Hn of _)try{const Er=yield Hn._get(tt);if(Er){const $n=On._fromJSON(p,Er);Hn!==ue&&(Lt=$n),ue=Hn;break}}catch(Er){}const pn=K.filter(Hn=>Hn._shouldAllowMigration);return ue._shouldAllowMigration&&pn.length?(ue=pn[0],Lt&&(yield ue._set(tt,Lt.toJSON())),yield Promise.all(_.map(function(){var Hn=(0,a.Z)(function*(Er){if(Er!==ue)try{yield Er._remove(tt)}catch($n){}});return function(Er){return Hn.apply(this,arguments)}}())),new dt(ue,p,A)):new dt(ue,p,A)})()}}function rt(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(wr(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(on(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(pt(p))return"Blackberry";if(Ve(p))return"Webos";if(_n(p))return"Safari";if((p.includes("chrome/")||hr(p))&&!p.includes("edge/"))return"Chrome";if(Nr(p))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function on(b=(0,z.z$)()){return/firefox\//i.test(b)}function _n(b=(0,z.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function hr(b=(0,z.z$)()){return/crios\//i.test(b)}function wr(b=(0,z.z$)()){return/iemobile/i.test(b)}function Nr(b=(0,z.z$)()){return/android/i.test(b)}function pt(b=(0,z.z$)()){return/blackberry/i.test(b)}function Ve(b=(0,z.z$)()){return/webos/i.test(b)}function Me(b=(0,z.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function fn(b=(0,z.z$)()){return Me(b)||Nr(b)||Ve(b)||pt(b)||/windows phone/i.test(b)||wr(b)}function Cn(b,p=[]){let _;switch(b){case"Browser":_=rt((0,z.z$)());break;case"Worker":_=`${rt((0,z.z$)())}-${b}`;break;default:_=b}const A=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${ke.SDK_VERSION}/${A}`}class ar{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const A=ue=>new Promise((tt,Lt)=>{try{tt(p(ue))}catch(pn){Lt(pn)}});A.onAbort=_,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,a.Z)(function*(){var A;if(_.auth.currentUser===p)return;const K=[];try{for(const ue of _.queue)yield ue(p),ue.onAbort&&K.push(ue.onAbort)}catch(ue){K.reverse();for(const tt of K)try{tt()}catch(Lt){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(A=ue)||void 0===A?void 0:A.message})}})()}}class Hr{constructor(p,_,A){this.app=p,this.heartbeatServiceProvider=_,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ei(this),this.idTokenSubscription=new ei(this),this.beforeStateQueue=new ar(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,_){var A=this;return _&&(this._popupRedirectResolver=Ce(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var K,ue;if(!A._deleted&&(A.persistenceManager=yield dt.create(A,p),!A._deleted)){if(null!==(K=A._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(tt){}yield A.initializeCurrentUser(_),A.lastNotifiedUid=(null===(ue=A.currentUser)||void 0===ue?void 0:ue.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,a.Z)(function*(){var A;const K=yield _.assertedPersistence.getCurrentUser();let ue=K,tt=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Lt=null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId,pn=null==ue?void 0:ue._redirectEventId,Hn=yield _.tryRedirectSignIn(p);(!Lt||Lt===pn)&&(null==Hn?void 0:Hn.user)&&(ue=Hn.user,tt=!0)}if(!ue)return _.directlySetCurrentUser(null);if(!ue._redirectEventId){if(tt)try{yield _.beforeStateQueue.runMiddleware(ue)}catch(Lt){ue=K,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Lt))}return ue?_.reloadAndSetCurrentUserOrClear(ue):_.directlySetCurrentUser(null)}return ye(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ue._redirectEventId?_.directlySetCurrentUser(ue):_.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(p){var _=this;return(0,a.Z)(function*(){let A=null;try{A=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(K){yield _._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,a.Z)(function*(){var A;try{yield Fn(p)}catch(K){if("auth/network-request-failed"!==(null===(A=K)||void 0===A?void 0:A.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function $e(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){const A=p?(0,z.m9)(p):null;return A&&ye(A.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(A&&A._clone(_))})()}_updateCurrentUser(p,_=!1){var A=this;return(0,a.Z)(function*(){if(!A._deleted)return p&&ye(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),_||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,a.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(Ce(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new z.LL("auth","Firebase",p())}onAuthStateChanged(p,_,A){return this.registerStateListener(this.authStateSubscription,p,_,A)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,A){return this.registerStateListener(this.idTokenSubscription,p,_,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var A=this;return(0,a.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(_);return null===p?K.removeCurrentUser():K.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const A=p&&Ce(p)||_._popupRedirectResolver;ye(A,_,"argument-error"),_.redirectPersistenceManager=yield dt.create(_,[Ce(A._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,a.Z)(function*(){var A,K;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(A=_._currentUser)||void 0===A?void 0:A._redirectEventId)===p?_._currentUser:(null===(K=_.redirectUser)||void 0===K?void 0:K._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,a.Z)(function*(){if(p===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,A,K){if(this._deleted)return()=>{};const ue="function"==typeof _?_:_.next.bind(_),tt=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(tt,this,"internal-error"),tt.then(()=>ue(this.currentUser)),"function"==typeof _?p.addObserver(_,A,K):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Cn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var _;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const K=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return K&&(A["X-Firebase-Client"]=K),A})()}}function Fr(b){return(0,z.m9)(b)}class ei{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,z.ne)(_=>this.observer=_)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function Ii(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Zi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Oe("not implemented")}_getIdTokenResponse(p){return Oe("not implemented")}_linkToIdToken(p,_){return Oe("not implemented")}_getReauthenticationResolver(p){return Oe("not implemented")}}function oi(b,p){return wi.apply(this,arguments)}function wi(){return(wi=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:resetPassword",Ft(b,p))})).apply(this,arguments)}function Qi(b,p){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function bi(b,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",Ft(b,p))})).apply(this,arguments)}function fi(){return(fi=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPassword",Ft(b,p))})).apply(this,arguments)}function Fi(b,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:sendOobCode",Ft(b,p))})).apply(this,arguments)}function we(b,p){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,a.Z)(function*(b,p){return Fi(b,p)})).apply(this,arguments)}function Je(b,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,a.Z)(function*(b,p){return Fi(b,p)})).apply(this,arguments)}function _e(b,p){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,a.Z)(function*(b,p){return Fi(b,p)})).apply(this,arguments)}function yt(b,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.Z)(function*(b,p){return Fi(b,p)})).apply(this,arguments)}function ln(){return(ln=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",Ft(b,p))})).apply(this,arguments)}function qn(){return(qn=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",Ft(b,p))})).apply(this,arguments)}class pr extends Zi{constructor(p,_,A,K=null){super("password",A),this._email=p,this._password=_,this._tenantId=K}static _fromEmailAndPassword(p,_){return new pr(p,_,"password")}static _fromEmailAndCode(p,_,A=null){return new pr(p,_,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function Ci(b,p){return fi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function jt(b,p){return ln.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:vt(p,"internal-error")}})()}_linkToIdToken(p,_){var A=this;return(0,a.Z)(function*(){switch(A.signInMethod){case"password":return Qi(p,{idToken:_,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function An(b,p){return qn.apply(this,arguments)}(p,{idToken:_,email:A._email,oobCode:A._password});default:vt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function kr(b,p){return et.apply(this,arguments)}function et(){return(et=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithIdp",Ft(b,p))})).apply(this,arguments)}class _t extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new _t(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):vt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K}=_,ue=(0,he._T)(_,["providerId","signInMethod"]);if(!A||!K)return null;const tt=new _t(A,K);return tt.idToken=ue.idToken||void 0,tt.accessToken=ue.accessToken||void 0,tt.secret=ue.secret,tt.nonce=ue.nonce,tt.pendingToken=ue.pendingToken||null,tt}_getIdTokenResponse(p){return kr(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,kr(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,kr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,z.xO)(_)}return p}}function Ut(b,p){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:sendVerificationCode",Ft(b,p))})).apply(this,arguments)}function Yn(){return(Yn=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ft(b,p))})).apply(this,arguments)}function Br(){return(Br=(0,a.Z)(function*(b,p){const _=yield Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ft(b,p));if(_.temporaryProof)throw or(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Os={USER_NOT_FOUND:"user-not-found"};function Ir(){return(Ir=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ft(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Os)})).apply(this,arguments)}class Xn extends Zi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Xn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Xn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Dn(b,p){return Yn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function ui(b,p){return Br.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Sr(b,p){return Ir.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:A,verificationCode:K}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:A,code:K}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ue}=p;return A||_||K||ue?new Xn({verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ue}):null}}class Us{constructor(p){var _,A,K,ue,tt,Lt;const pn=(0,z.zd)((0,z.pd)(p)),Hn=null!==(_=pn.apiKey)&&void 0!==_?_:null,Er=null!==(A=pn.oobCode)&&void 0!==A?A:null,$n=function Ji(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=pn.mode)&&void 0!==K?K:null);ye(Hn&&Er&&$n,"argument-error"),this.apiKey=Hn,this.operation=$n,this.code=Er,this.continueUrl=null!==(ue=pn.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(tt=pn.languageCode)&&void 0!==tt?tt:null,this.tenantId=null!==(Lt=pn.tenantId)&&void 0!==Lt?Lt:null}static parseLink(p){const _=function Zr(b){const p=(0,z.zd)((0,z.pd)(b)).link,_=p?(0,z.zd)((0,z.pd)(p)).deep_link_id:null,A=(0,z.zd)((0,z.pd)(b)).deep_link_id;return(A?(0,z.zd)((0,z.pd)(A)).link:null)||A||_||p||b}(p);try{return new Us(_)}catch(A){return null}}}let es=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,A){return pr._fromEmailAndPassword(_,A)}static credentialWithLink(_,A){const K=Us.parseLink(A);return ye(K,"argument-error"),pr._fromEmailAndCode(_,K.code,K.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class js{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ar extends js{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class cr extends Ar{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ye("providerId"in _&&"signInMethod"in _,"argument-error"),_t._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ye(p.idToken||p.accessToken,"argument-error"),_t._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return cr.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return cr.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:ue,nonce:tt,providerId:Lt}=p;if(!A&&!K&&!_&&!ue||!Lt)return null;try{return new cr(Lt)._credential({idToken:_,accessToken:A,nonce:tt,pendingToken:ue})}catch(pn){return null}}}let mi=(()=>{class b extends Ar{constructor(){super("facebook.com")}static credential(_){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Js=(()=>{class b extends Ar{constructor(){super("google.com"),this.addScope("profile")}static credential(_,A){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:A})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:A,oauthAccessToken:K}=_;if(!A&&!K)return null;try{return b.credential(A,K)}catch(ue){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Hs=(()=>{class b extends Ar{constructor(){super("github.com")}static credential(_){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class os extends Zi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return kr(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,kr(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,kr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K,pendingToken:ue}=_;return A&&K&&ue&&A===K?new os(A,ue):null}static _create(p,_){return new os(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class vs extends js{constructor(p){ye(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return vs.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return vs.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=os.fromJSON(p);return ye(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:A}=p;if(!_||!A)return null;try{return os._create(A,_)}catch(K){return null}}}let ps=(()=>{class b extends Ar{constructor(){super("twitter.com")}static credential(_,A){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:A})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=_;if(!A||!K)return null;try{return b.credential(A,K)}catch(ue){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Di(b,p){return No.apply(this,arguments)}function No(){return(No=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signUp",Ft(b,p))})).apply(this,arguments)}class Hi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,A,K=!1){return(0,a.Z)(function*(){const ue=yield On._fromIdTokenResponse(p,A,K),tt=ts(A);return new Hi({user:ue,providerId:tt,_tokenResponse:A,operationType:_})})()}static _forOperation(p,_,A){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const K=ts(A);return new Hi({user:p,providerId:K,_tokenResponse:A,operationType:_})})()}}function ts(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ai(){return(ai=(0,a.Z)(function*(b){var p;const _=Fr(b);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Hi({user:_.currentUser,providerId:null,operationType:"signIn"});const A=yield Di(_,{returnSecureToken:!0}),K=yield Hi._fromIdTokenResponse(_,"signIn",A,!0);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class Ys extends z.ZR{constructor(p,_,A,K){var ue;super(_.code,_.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,Ys.prototype),this.customData={appName:p.name,tenantId:null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:_.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,_,A,K){return new Ys(p,_,A,K)}}function Gs(b,p,_,A){return("reauthenticate"===p?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?Ys._fromErrorAndOperation(b,ue,p,A):ue})}function _r(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function Jn(){return(Jn=(0,a.Z)(function*(b,p){const _=(0,z.m9)(b);yield Rr(!0,_,p);const{providerUserInfo:A}=yield rr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),K=_r(A||[]);return _.providerData=_.providerData.filter(ue=>K.has(ue.providerId)),K.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function _s(b,p){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,a.Z)(function*(b,p,_=!1){const A=yield Bn(b,p._linkToIdToken(b.auth,yield b.getIdToken()),_);return Hi._forOperation(b,"link",A)})).apply(this,arguments)}function Rr(b,p,_){return as.apply(this,arguments)}function as(){return(as=(0,a.Z)(function*(b,p,_){yield Fn(p);const K=!1===b?"provider-already-linked":"no-such-provider";ye(_r(p.providerData).has(_)===b,p.auth,K)})).apply(this,arguments)}function Ts(b,p){return ls.apply(this,arguments)}function ls(){return(ls=(0,a.Z)(function*(b,p,_=!1){var A;const{auth:K}=b,ue="reauthenticate";try{const tt=yield Bn(b,Gs(K,ue,p,b),_);ye(tt.idToken,K,"internal-error");const Lt=Tt(tt.idToken);ye(Lt,K,"internal-error");const{sub:pn}=Lt;return ye(b.uid===pn,K,"user-mismatch"),Hi._forOperation(b,ue,tt)}catch(tt){throw"auth/user-not-found"===(null===(A=tt)||void 0===A?void 0:A.code)&&vt(K,"user-mismatch"),tt}})).apply(this,arguments)}function Es(b,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,a.Z)(function*(b,p,_=!1){const A="signIn",K=yield Gs(b,A,p),ue=yield Hi._fromIdTokenResponse(b,A,K);return _||(yield b._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function Vr(b,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(b,p){return Es(Fr(b),p)})).apply(this,arguments)}function eo(b,p){return pa.apply(this,arguments)}function pa(){return(pa=(0,a.Z)(function*(b,p){const _=(0,z.m9)(b);return yield Rr(!1,_,p.providerId),_s(_,p)})).apply(this,arguments)}function Ks(b,p){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,a.Z)(function*(b,p){return Ts((0,z.m9)(b),p)})).apply(this,arguments)}function ga(b,p){return ks.apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithCustomToken",Ft(b,p))})).apply(this,arguments)}function bo(){return(bo=(0,a.Z)(function*(b,p){const _=Fr(b),A=yield ga(_,{token:p,returnSecureToken:!0}),K=yield Hi._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class Yt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?br._fromServerResponse(p,_):vt(p,"internal-error")}}class br extends Yt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new br(_)}}function na(b,p,_){var A;ye((null===(A=_.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),ye(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ye(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ye(_.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Li(){return(Li=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b),K={requestType:"PASSWORD_RESET",email:p};_&&na(A,K,_),yield Je(A,K)})).apply(this,arguments)}function Gi(){return(Gi=(0,a.Z)(function*(b,p,_){yield oi((0,z.m9)(b),{oobCode:p,newPassword:_})})).apply(this,arguments)}function Ss(){return(Ss=(0,a.Z)(function*(b,p){yield bi((0,z.m9)(b),{oobCode:p})})).apply(this,arguments)}function G(b,p){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)(function*(b,p){const _=(0,z.m9)(b),A=yield oi(_,{oobCode:p}),K=A.requestType;switch(ye(K,_,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(A.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(A.mfaInfo,_,"internal-error");default:ye(A.email,_,"internal-error")}let ue=null;return A.mfaInfo&&(ue=Yt._fromServerResponse(Fr(_),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ue},operation:K}})).apply(this,arguments)}function m(){return(m=(0,a.Z)(function*(b,p){const{data:_}=yield G((0,z.m9)(b),p);return _.email})).apply(this,arguments)}function E(){return(E=(0,a.Z)(function*(b,p,_){const A=Fr(b),K=yield Di(A,{returnSecureToken:!0,email:p,password:_}),ue=yield Hi._fromIdTokenResponse(A,"signIn",K);return yield A._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function ut(){return(ut=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b),K={requestType:"EMAIL_SIGNIN",email:p};ye(_.handleCodeInApp,A,"argument-error"),_&&na(A,K,_),yield _e(A,K)})).apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b),K=es.credentialWithLink(p,_||J());return ye(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Vr(A,K)})).apply(this,arguments)}function ti(b,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:createAuthUri",Ft(b,p))})).apply(this,arguments)}function ns(){return(ns=(0,a.Z)(function*(b,p){const A={identifier:p,continueUri:Gt()?J():"http://localhost"},{signinMethods:K}=yield ti((0,z.m9)(b),A);return K||[]})).apply(this,arguments)}function bs(){return(bs=(0,a.Z)(function*(b,p){const _=(0,z.m9)(b),K={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&na(_.auth,K,p);const{email:ue}=yield we(_.auth,K);ue!==b.email&&(yield b.reload())})).apply(this,arguments)}function Ps(){return(Ps=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};_&&na(A.auth,ue,_);const{email:tt}=yield yt(A.auth,ue);tt!==b.email&&(yield b.reload())})).apply(this,arguments)}function Co(b,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ia(){return(ia=(0,a.Z)(function*(b,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const A=(0,z.m9)(b),ue={idToken:yield A.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},tt=yield Bn(A,Co(A.auth,ue));A.displayName=tt.displayName||null,A.photoURL=tt.photoUrl||null;const Lt=A.providerData.find(({providerId:pn})=>"password"===pn);Lt&&(Lt.displayName=A.displayName,Lt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(tt)})).apply(this,arguments)}function $(b,p,_){return re.apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(b,p,_){const{auth:A}=b,ue={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(ue.email=p),_&&(ue.password=_);const tt=yield Bn(b,Qi(A,ue));yield b._updateTokensIfNecessary(tt,!0)})).apply(this,arguments)}class Dt{constructor(p,_,A={}){this.isNewUser=p,this.providerId=_,this.profile=A}}class Pt extends Dt{constructor(p,_,A,K){super(p,_,A),this.username=K}}class xn extends Dt{constructor(p,_){super(p,"facebook.com",_)}}class Kr extends Pt{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Gr extends Dt{constructor(p,_){super(p,"google.com",_)}}class Wr extends Pt{constructor(p,_,A){super(p,"twitter.com",_,A)}}function $r(b){const{user:p,_tokenResponse:_}=b;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Pe(b){var p,_;if(!b)return null;const{providerId:A}=b,K=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ue=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&(null==b?void 0:b.idToken)){const tt=null===(_=null===(p=Tt(b.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(tt)return new Dt(ue,"anonymous"!==tt&&"custom"!==tt?tt:null)}if(!A)return null;switch(A){case"facebook.com":return new xn(ue,K);case"github.com":return new Kr(ue,K);case"google.com":return new Gr(ue,K);case"twitter.com":return new Wr(ue,K,b.screenName||null);case"custom":case"anonymous":return new Dt(ue,null);default:return new Dt(ue,A,K)}}(_)}class Vi{constructor(p,_,A){this.type=p,this.credential=_,this.auth=A}static _fromIdtoken(p,_){return new Vi("enroll",p,_)}static _fromMfaPendingCredential(p){return new Vi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,A;if(null!=p&&p.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Vi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(A=p.multiFactorSession)&&void 0!==A&&A.idToken)return Vi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Ma{constructor(p,_,A){this.session=p,this.hints=_,this.signInResolver=A}static _fromError(p,_){const A=Fr(p),K=_.customData._serverResponse,ue=(K.mfaInfo||[]).map(Lt=>Yt._fromServerResponse(A,Lt));ye(K.mfaPendingCredential,A,"internal-error");const tt=Vi._fromMfaPendingCredential(K.mfaPendingCredential);return new Ma(tt,ue,function(){var Lt=(0,a.Z)(function*(pn){const Hn=yield pn._process(A,tt);delete K.mfaInfo,delete K.mfaPendingCredential;const Er=Object.assign(Object.assign({},K),{idToken:Hn.idToken,refreshToken:Hn.refreshToken});switch(_.operationType){case"signIn":const $n=yield Hi._fromIdTokenResponse(A,_.operationType,Er);return yield A._updateCurrentUser($n.user),$n;case"reauthenticate":return ye(_.user,A,"internal-error"),Hi._forOperation(_.user,_.operationType,Er);default:vt(A,"internal-error")}});return function(pn){return Lt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,a.Z)(function*(){return _.signInResolver(p)})()}}function Wi(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:start",Ft(b,p))}class el{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(A=>Yt._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new el(p)}getSession(){var p=this;return(0,a.Z)(function*(){return Vi._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var A=this;return(0,a.Z)(function*(){const K=p,ue=yield A.getSession(),tt=yield Bn(A.user,K._process(A.user.auth,ue,_));return yield A.user._updateTokensIfNecessary(tt),A.user.reload()})()}unenroll(p){var _=this;return(0,a.Z)(function*(){var A;const K="string"==typeof p?p:p.uid,ue=yield _.user.getIdToken(),tt=yield Bn(_.user,function Ul(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Ft(b,p))}(_.user.auth,{idToken:ue,mfaEnrollmentId:K}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Lt})=>Lt!==K),yield _.user._updateTokensIfNecessary(tt);try{yield _.user.reload()}catch(Lt){if("auth/user-token-expired"!==(null===(A=Lt)||void 0===A?void 0:A.code))throw Lt}})()}}const Wa=new WeakMap,fo="__sak";class Go{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fo,"1"),this.storage.removeItem(fo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ma=(()=>{class b extends Go{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,A)=>this.onStorageEvent(_,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function po(){const b=(0,z.z$)();return _n(b)||Me(b)}()&&function Zt(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),ue=this.localCache[A];K!==ue&&_(A,ue,K)}}onStorageEvent(_,A=!1){if(!_.key)return void this.forAllChangedKeys((Lt,pn,Hn)=>{this.notifyListeners(Lt,Hn)});const K=_.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Lt=this.storage.getItem(K);if(_.newValue!==Lt)null!==_.newValue?this.storage.setItem(K,_.newValue):this.storage.removeItem(K);else if(this.localCache[K]===_.newValue&&!A)return}const ue=()=>{const Lt=this.storage.getItem(K);!A&&this.localCache[K]===Lt||this.notifyListeners(K,Lt)},tt=this.storage.getItem(K);!function hn(){return(0,z.w1)()&&10===document.documentMode}()||tt===_.newValue||_.newValue===_.oldValue?ue():setTimeout(ue,10)}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ue of Array.from(K))ue(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,A){var K=()=>super._set,ue=this;return(0,a.Z)(function*(){yield K().call(ue,_,A),ue.localCache[_]=JSON.stringify(A)})()}_get(_){var A=()=>super._get,K=this;return(0,a.Z)(function*(){const ue=yield A().call(K,_);return K.localCache[_]=JSON.stringify(ue),ue})()}_remove(_){var A=()=>super._remove,K=this;return(0,a.Z)(function*(){yield A().call(K,_),delete K.localCache[_]})()}}return b.type="LOCAL",b})(),ro=(()=>{class b extends Go{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,A){}_removeListener(_,A){}}return b.type="SESSION",b})();let rn=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const A=this.receivers.find(ue=>ue.isListeningto(_));if(A)return A;const K=new b(_);return this.receivers.push(K),K}isListeningto(_){return this.eventTarget===_}handleEvent(_){var A=this;return(0,a.Z)(function*(){const K=_,{eventId:ue,eventType:tt,data:Lt}=K.data,pn=A.handlersMap[tt];if(null==pn||!pn.size)return;K.ports[0].postMessage({status:"ack",eventId:ue,eventType:tt});const Hn=Array.from(pn).map(function(){var $n=(0,a.Z)(function*(lo){return lo(K.origin,Lt)});return function(lo){return $n.apply(this,arguments)}}()),Er=yield function sa(b){return Promise.all(b.map(function(){var p=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(A){return{fulfilled:!1,reason:A}}});return function(_){return p.apply(this,arguments)}}()))}(Hn);K.ports[0].postMessage({status:"done",eventId:ue,eventType:tt,response:Er})})()}_subscribe(_,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(A)}_unsubscribe(_,A){this.handlersMap[_]&&A&&this.handlersMap[_].delete(A),(!A||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function yi(b="",p=10){let _="";for(let A=0;A<p;A++)_+=Math.floor(10*Math.random());return b+_}class Ws{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,A=50){var K=this;return(0,a.Z)(function*(){const ue="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let tt,Lt;return new Promise((pn,Hn)=>{const Er=yi("",20);ue.port1.start();const $n=setTimeout(()=>{Hn(new Error("unsupported_event"))},A);Lt={messageChannel:ue,onMessage(lo){const uo=lo;if(uo.data.eventId===Er)switch(uo.data.status){case"ack":clearTimeout($n),tt=setTimeout(()=>{Hn(new Error("timeout"))},3e3);break;case"done":clearTimeout(tt),pn(uo.data.response);break;default:clearTimeout($n),clearTimeout(tt),Hn(new Error("invalid_response"))}}},K.handlers.add(Lt),ue.port1.addEventListener("message",Lt.onMessage),K.target.postMessage({eventType:p,eventId:Er,data:_},[ue.port2])}).finally(()=>{Lt&&K.removeMessageHandler(Lt)})})()}}function zi(){return window}function En(){return void 0!==zi().WorkerGlobalScope&&"function"==typeof zi().importScripts}function cn(){return(cn=(0,a.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ni="firebaseLocalStorageDb",ya="firebaseLocalStorage",Fo="fbase_key";class Wo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function zo(b,p){return b.transaction([ya],p?"readwrite":"readonly").objectStore(ya)}function qo(){const b=indexedDB.open(Ni,1);return new Promise((p,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(ya,{keyPath:Fo})}catch(K){_(K)}}),b.addEventListener("success",(0,a.Z)(function*(){const A=b.result;A.objectStoreNames.contains(ya)?p(A):(A.close(),yield function Hl(){const b=indexedDB.deleteDatabase(Ni);return new Wo(b).toPromise()}(),p(yield qo()))}))})}function Na(b,p,_){return fu.apply(this,arguments)}function fu(){return(fu=(0,a.Z)(function*(b,p,_){const A=zo(b,!0).put({[Fo]:p,value:_});return new Wo(A).toPromise()})).apply(this,arguments)}function oa(){return(oa=(0,a.Z)(function*(b,p){const _=zo(b,!1).get(p),A=yield new Wo(_).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function lr(b,p){const _=zo(b,!0).delete(p);return new Wo(_).toPromise()}const er=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield qo()),_.db})()}_withRetries(_){var A=this;return(0,a.Z)(function*(){let K=0;for(;;)try{const ue=yield A._openDb();return yield _(ue)}catch(ue){if(K++>3)throw ue;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return En()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=rn._getInstance(function Qt(){return En()?self:null}()),_.receiver._subscribe("keyChanged",function(){var A=(0,a.Z)(function*(K,ue){return{keyProcessed:(yield _._poll()).includes(ue.key)}});return function(K,ue){return A.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var A=(0,a.Z)(function*(K,ue){return["keyChanged"]});return function(K,ue){return A.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var A,K;if(_.activeServiceWorker=yield function zs(){return cn.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Ws(_.activeServiceWorker);const ue=yield _.sender._send("ping",{},800);!ue||(null===(A=ue[0])||void 0===A?void 0:A.fulfilled)&&(null===(K=ue[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var A=this;return(0,a.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function kt(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:_},A.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield qo();return yield Na(_,fo,"1"),yield lr(_,fo),!0}catch(_){}return!1})()}_withPendingWrite(_){var A=this;return(0,a.Z)(function*(){A.pendingWrites++;try{yield _()}finally{A.pendingWrites--}})()}_set(_,A){var K=this;return(0,a.Z)(function*(){return K._withPendingWrite((0,a.Z)(function*(){return yield K._withRetries(ue=>Na(ue,_,A)),K.localCache[_]=A,K.notifyServiceWorker(_)}))})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=yield A._withRetries(ue=>function Tl(b,p){return oa.apply(this,arguments)}(ue,_));return A.localCache[_]=K,K})()}_remove(_){var A=this;return(0,a.Z)(function*(){return A._withPendingWrite((0,a.Z)(function*(){return yield A._withRetries(K=>lr(K,_)),delete A.localCache[_],A.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const A=yield _._withRetries(tt=>{const Lt=zo(tt,!1).getAll();return new Wo(Lt).toPromise()});if(!A)return[];if(0!==_.pendingWrites)return[];const K=[],ue=new Set;for(const{fbase_key:tt,value:Lt}of A)ue.add(tt),JSON.stringify(_.localCache[tt])!==JSON.stringify(Lt)&&(_.notifyListeners(tt,Lt),K.push(tt));for(const tt of Object.keys(_.localCache))_.localCache[tt]&&!ue.has(tt)&&(_.notifyListeners(tt,null),K.push(tt));return K})()}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ue of Array.from(K))ue(A)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Yo(b,p){return Nt(b,"POST","/v2/accounts/mfaSignIn:start",Ft(b,p))}function vi(){return(vi=(0,a.Z)(function*(b){return(yield Nt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function _a(b){return new Promise((p,_)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=p,A.onerror=K=>{const ue=gt("internal-error");ue.customData=K,_(ue)},A.type="text/javascript",A.charset="UTF-8",function dn(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(A)})}function Ko(b){return`__${b}${Math.floor(1e6*Math.random())}`}const To=1e12;class Ti{constructor(p){this.auth=p,this.counter=To,this._widgets=new Map}render(p,_){const A=this.counter;return this._widgets.set(A,new ka(p,this.auth.name,_||{})),this.counter++,A}reset(p){var _;const A=p||To;null===(_=this._widgets.get(A))||void 0===_||_.delete(),this._widgets.delete(A)}getResponse(p){var _;return(null===(_=this._widgets.get(p||To))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,a.Z)(function*(){var A;return null===(A=_._widgets.get(p||To))||void 0===A||A.execute(),""})()}}class ka{constructor(p,_,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof p?document.getElementById(p):p;ye(K,"argument-error",{appName:_}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pu(b){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<b;A++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Gl=Ko("rcb"),So=new Ue(3e4,6e4);class Wl{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=zi().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ye(function mu(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(zi().grecaptcha):new Promise((A,K)=>{const ue=zi().setTimeout(()=>{K(gt(p,"network-request-failed"))},So.get());zi()[Gl]=()=>{zi().clearTimeout(ue),delete zi()[Gl];const Lt=zi().grecaptcha;if(!Lt)return void K(gt(p,"internal-error"));const pn=Lt.render;Lt.render=(Hn,Er)=>{const $n=pn(Hn,Er);return this.counter++,$n},this.hostLanguage=_,A(Lt)},_a(`https://www.google.com/recaptcha/api.js??${(0,z.xO)({onload:Gl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ue),K(gt(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=zi().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ao{load(p){return(0,a.Z)(function*(){return new Ti(p)})()}clearedOneInstance(){}}const zl="recaptcha",Rt={theme:"light",type:"image"};class Cs{constructor(p,_=Object.assign({},Rt),A){this.parameters=_,this.type=zl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fr(A),this.isInvisible="invisible"===this.parameters.size,ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof p?document.getElementById(p):p;ye(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ao:new Wl,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(_)||new Promise(ue=>{const tt=Lt=>{!Lt||(p.tokenChangeListeners.delete(tt),ue(Lt))};p.tokenChangeListeners.add(tt),p.isInvisible&&A.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(A=>A(_)),"function"==typeof p)p(_);else if("string"==typeof p){const A=zi()[p];"function"==typeof A&&A(_)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const A=document.createElement("div");_.appendChild(A),_=A}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){ye(Gt()&&!En(),p.auth,"internal-error"),yield function io(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function go(b){return vi.apply(this,arguments)}(p.auth);ye(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mo{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Xn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function Zo(){return(Zo=(0,a.Z)(function*(b,p,_){const A=Fr(b),K=yield Fa(A,p,(0,z.m9)(_));return new mo(K,ue=>Vr(A,ue))})).apply(this,arguments)}function As(){return(As=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b);yield Rr(!1,A,"phone");const K=yield Fa(A.auth,p,(0,z.m9)(_));return new mo(K,ue=>eo(A,ue))})).apply(this,arguments)}function Pa(){return(Pa=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b),K=yield Fa(A.auth,p,(0,z.m9)(_));return new mo(K,ue=>Ks(A,ue))})).apply(this,arguments)}function Fa(b,p,_){return Sl.apply(this,arguments)}function Sl(){return(Sl=(0,a.Z)(function*(b,p,_){var A;const K=yield _.verify();try{let ue;if(ye("string"==typeof K,b,"argument-error"),ye(_.type===zl,b,"argument-error"),ue="string"==typeof p?{phoneNumber:p}:p,"session"in ue){const tt=ue.session;if("phoneNumber"in ue)return ye("enroll"===tt.type,b,"internal-error"),(yield Wi(b,{idToken:tt.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ye("signin"===tt.type,b,"internal-error");const Lt=(null===(A=ue.multiFactorHint)||void 0===A?void 0:A.uid)||ue.multiFactorUid;return ye(Lt,b,"missing-multi-factor-info"),(yield Yo(b,{mfaPendingCredential:tt.credential,mfaEnrollmentId:Lt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:tt}=yield Ut(b,{phoneNumber:ue.phoneNumber,recaptchaToken:K});return tt}}finally{_._reset()}})).apply(this,arguments)}function tl(){return(tl=(0,a.Z)(function*(b,p){yield _s((0,z.m9)(b),p)})).apply(this,arguments)}let Qo=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=Fr(_)}verifyPhoneNumber(_,A){return Fa(this.auth,_,(0,z.m9)(A))}static credential(_,A){return Xn._fromVerification(_,A)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:A,temporaryProof:K}=_;return A&&K?Xn._fromTokenResponse(A,K):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Lo(b,p){return p?Ce(p):(ye(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class ki extends Zi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return kr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return kr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return kr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function xs(b){return Es(b.auth,new ki(b),b.bypassAuthState)}function cs(b){const{auth:p,user:_}=b;return ye(_,p,"internal-error"),Ts(_,new ki(b),b.bypassAuthState)}function Xr(b){return yu.apply(this,arguments)}function yu(){return(yu=(0,a.Z)(function*(b){const{auth:p,user:_}=b;return ye(_,p,"internal-error"),_s(_,new ki(b),b.bypassAuthState)})).apply(this,arguments)}class La{constructor(p,_,A,K,ue=!1){this.auth=p,this.resolver=A,this.user=K,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,a.Z)(function*(A,K){p.pendingPromise={resolve:A,reject:K};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ue){p.reject(ue)}});return function(A,K){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,a.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:ue,tenantId:tt,error:Lt,type:pn}=p;if(Lt)return void _.reject(Lt);const Hn={auth:_.auth,requestUri:A,sessionId:K,tenantId:tt||void 0,postBody:ue||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(pn)(Hn))}catch(Er){_.reject(Er)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return xs;case"linkViaPopup":case"linkViaRedirect":return Xr;case"reauthViaPopup":case"reauthViaRedirect":return cs;default:vt(this.auth,"internal-error")}}resolve(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oo=new Ue(2e3,1e4);function ys(){return(ys=(0,a.Z)(function*(b,p,_){const A=Fr(b);Be(b,p,js);const K=Lo(A,_);return new T(A,"signInViaPopup",p,K).executeNotNull()})).apply(this,arguments)}function Vo(){return(Vo=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b);Be(A.auth,p,js);const K=Lo(A.auth,_);return new T(A.auth,"reauthViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}function Xo(){return(Xo=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b);Be(A.auth,p,js);const K=Lo(A.auth,_);return new T(A.auth,"linkViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}let T=(()=>{class b extends La{constructor(_,A,K,ue,tt){super(_,A,ue,tt),this.provider=K,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const A=yield _.execute();return ye(A,_.auth,"internal-error"),A})()}onExecution(){var _=this;return(0,a.Z)(function*(){ve(1===_.filter.length,"Popup operations only handle one event");const A=yi();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],A),_.authWindow.associatedEvent=A,_.resolver._originValidation(_.auth).catch(K=>{_.reject(K)}),_.resolver._isIframeWebStorageSupported(_.auth,K=>{K||_.reject(gt(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var A,K;this.pollId=null!==(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,oo.get())};_()}}return b.currentPopupAction=null,b})();const w=new Map;class O extends La{constructor(p,_,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,a.Z)(function*(){let A=w.get(_.auth._key());if(!A){try{const ue=(yield function j(b,p){return te.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;A=()=>Promise.resolve(ue)}catch(K){A=()=>Promise.reject(K)}w.set(_.auth._key(),A)}return _.bypassAuthState||w.set(_.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,A=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(A,p);if("unknown"!==p.type){if(p.eventId){const K=yield A.auth._redirectUserForId(p.eventId);if(K)return A.user=K,_().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function te(){return(te=(0,a.Z)(function*(b,p){const _=Q(p),A=U(b);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(_));return yield A._remove(_),K})).apply(this,arguments)}function Ae(b,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,a.Z)(function*(b,p){return U(b)._set(Q(p),"true")})).apply(this,arguments)}function R(b,p){w.set(b._key(),p)}function U(b){return Ce(b._redirectPersistence)}function Q(b){return He("pendingRedirect",b.config.apiKey,b.name)}function wt(){return(wt=(0,a.Z)(function*(b,p,_){const A=Fr(b);Be(b,p,js);const K=Lo(A,_);return yield Ae(K,A),K._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b);Be(A.auth,p,js);const K=Lo(A.auth,_);yield Ae(K,A.auth);const ue=yield rl(A);return K._openRedirect(A.auth,p,"reauthViaRedirect",ue)})).apply(this,arguments)}function Pn(){return(Pn=(0,a.Z)(function*(b,p,_){const A=(0,z.m9)(b);Be(A.auth,p,js);const K=Lo(A.auth,_);yield Rr(!1,A,p.providerId),yield Ae(K,A.auth);const ue=yield rl(A);return K._openRedirect(A.auth,p,"linkViaRedirect",ue)})).apply(this,arguments)}function qs(){return(qs=(0,a.Z)(function*(b,p){return yield Fr(b)._initializationPromise,ao(b,p,!1)})).apply(this,arguments)}function ao(b,p){return wa.apply(this,arguments)}function wa(){return(wa=(0,a.Z)(function*(b,p,_=!1){const A=Fr(b),K=Lo(A,p),tt=yield new O(A,K,_).execute();return tt&&!_&&(delete tt.user._redirectEventId,yield A._persistUserIfCurrent(tt.user),yield A._setRedirectUser(null,p)),tt})).apply(this,arguments)}function rl(b){return aa.apply(this,arguments)}function aa(){return(aa=(0,a.Z)(function*(b){const p=yi(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class qa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(_=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function li(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return la(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var A;if(p.error&&!la(p)){const K=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";_.onError(gt(this.auth,K))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const A=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(is(p))}saveEventToCache(p){this.cachedEventUids.add(is(p)),this.lastProcessedEventTime=Date.now()}}function is(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function la({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Al(b){return _u.apply(this,arguments)}function _u(){return(_u=(0,a.Z)(function*(b,p={}){return Nt(b,"GET","/v1/projects",p)})).apply(this,arguments)}const xl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bd=/^https?/;function Hu(){return(Hu=(0,a.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield Al(b);for(const _ of p)try{if(Tc(_))return}catch(A){}vt(b,"unauthorized-domain")})).apply(this,arguments)}function Tc(b){const p=J(),{protocol:_,hostname:A}=new URL(p);if(b.startsWith("chrome-extension://")){const tt=new URL(b);return""===tt.hostname&&""===A?"chrome-extension:"===_&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&tt.hostname===A}if(!Bd.test(_))return!1;if(xl.test(b))return A===b;const K=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const $d=new Ue(3e4,6e4);function Gu(){const b=zi().___jsl;if(null!=b&&b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Wu=null;function Ud(b){return Wu=Wu||function Fs(b){return new Promise((p,_)=>{var A,K,ue;function tt(){Gu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Gu(),_(gt(b,"network-request-failed"))},timeout:$d.get()})}if(null!==(K=null===(A=zi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==K&&K.Iframe)p(gapi.iframes.getContext());else{if(null===(ue=zi().gapi)||void 0===ue||!ue.load){const Lt=Ko("iframefcb");return zi()[Lt]=()=>{gapi.load?tt():_(gt(b,"network-request-failed"))},_a(`https://apis.google.com/js/api.js?onload=${Lt}`).catch(pn=>_(pn))}tt()}}).catch(p=>{throw Wu=null,p})}(b),Wu}const jd=new Ue(5e3,15e3),Hd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rd(b){const p=b.config;ye(p.authDomain,b,"auth-domain-config-required");const _=p.emulator?Xe(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:b.name,v:ke.SDK_VERSION},K=nd.get(b.config.apiHost);K&&(A.eid=K);const ue=b._getFrameworks();return ue.length&&(A.fw=ue.join(",")),`${_}?${(0,z.xO)(A).slice(1)}`}function Ca(){return Ca=(0,a.Z)(function*(b){const p=yield Ud(b),_=zi().gapi;return ye(_,b,"internal-error"),p.open({where:document.body,url:rd(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hd,dontclear:!0},A=>new Promise(function(){var K=(0,a.Z)(function*(ue,tt){yield A.restyle({setHideOnLeave:!1});const Lt=gt(b,"network-request-failed"),pn=zi().setTimeout(()=>{tt(Lt)},jd.get());function Hn(){zi().clearTimeout(pn),ue(A)}A.ping(Hn).then(Hn,()=>{tt(Lt)})});return function(ue,tt){return K.apply(this,arguments)}}()))}),Ca.apply(this,arguments)}const Gd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Eu{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function hl(b,p,_,A,K,ue){ye(b.config.authDomain,b,"auth-domain-config-required"),ye(b.config.apiKey,b,"invalid-api-key");const tt={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:A,v:ke.SDK_VERSION,eventId:K};if(p instanceof js){p.setDefaultLanguage(b.languageCode),tt.providerId=p.providerId||"",(0,z.xb)(p.getCustomParameters())||(tt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[pn,Hn]of Object.entries(ue||{}))tt[pn]=Hn}if(p instanceof Ar){const pn=p.getScopes().filter(Hn=>""!==Hn);pn.length>0&&(tt.scopes=pn.join(","))}b.tenantId&&(tt.tid=b.tenantId);const Lt=tt;for(const pn of Object.keys(Lt))void 0===Lt[pn]&&delete Lt[pn];return`${function vo({config:b}){return b.emulator?Xe(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,z.xO)(Lt).slice(1)}`}const sl="webStorageSupport";class ua extends class ql{constructor(p){this.factorId=p}_process(p,_,A){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,A);case"signin":return this._finalizeSignIn(p,_.credential);default:return Oe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new ua(p)}_finalizeEnroll(p,_,A){return function Dl(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Ft(b,p))}(p,{idToken:_,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Qr(b,p){return Nt(b,"POST","/v2/accounts/mfaSignIn:finalize",Ft(b,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Yl=(()=>{class b{constructor(){}static assertion(_){return ua._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Zu="@firebase/auth",sd="0.20.11";class Ac{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(A=>{var K;p((null===(K=A)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Bo(){return window}function Qu(){return(Qu=(0,a.Z)(function*(b,p,_){var A;const{BuildInfo:K}=Bo();ve(p.sessionId,"AuthEvent did not contain a session ID");const ue=yield hs(p.sessionId),tt={};return Me()?tt.ibi=K.packageName:Nr()?tt.apn=K.packageName:vt(b,"operation-not-supported-in-this-environment"),K.displayName&&(tt.appDisplayName=K.displayName),tt.sessionId=ue,hl(b,_,p.type,void 0,null!==(A=p.eventId)&&void 0!==A?A:void 0,tt)})).apply(this,arguments)}function Rc(){return(Rc=(0,a.Z)(function*(b){const{BuildInfo:p}=Bo(),_={};Me()?_.iosBundleId=p.packageName:Nr()?_.androidPackageName=p.packageName:vt(b,"operation-not-supported-in-this-environment"),yield Al(b,_)})).apply(this,arguments)}function Ju(){return(Ju=(0,a.Z)(function*(b,p,_){const{cordova:A}=Bo();let K=()=>{};try{yield new Promise((ue,tt)=>{let Lt=null;function pn(){var $n;ue();const lo=null===($n=A.plugins.browsertab)||void 0===$n?void 0:$n.close;"function"==typeof lo&&lo(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Hn(){Lt||(Lt=window.setTimeout(()=>{tt(gt(b,"redirect-cancelled-by-user"))},2e3))}function Er(){"visible"===(null==document?void 0:document.visibilityState)&&Hn()}p.addPassiveListener(pn),document.addEventListener("resume",Hn,!1),Nr()&&document.addEventListener("visibilitychange",Er,!1),K=()=>{p.removePassiveListener(pn),document.removeEventListener("resume",Hn,!1),document.removeEventListener("visibilitychange",Er,!1),Lt&&window.clearTimeout(Lt)}})}finally{K()}})).apply(this,arguments)}function hs(b){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,a.Z)(function*(b){const p=Oc(b),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Oc(b){if(ve(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),_=new Uint8Array(p);for(let A=0;A<b.length;A++)_[A]=b.charCodeAt(A);return _}(0,z.Pz)("authIdTokenMaxAge"),function Kl(b){(0,ke._registerComponent)(new Ee.wA("auth",(p,{options:_})=>{const A=p.getProvider("app").getImmediate(),K=p.getProvider("heartbeat"),{apiKey:ue,authDomain:tt}=A.options;return((Lt,pn)=>{ye(ue&&!ue.includes(":"),"invalid-api-key",{appName:Lt.name}),ye(!(null!=tt&&tt.includes(":")),"argument-error",{appName:Lt.name});const Hn={apiKey:ue,authDomain:tt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Cn(b)},Er=new Hr(Lt,pn,Hn);return function lt(b,p){const _=(null==p?void 0:p.persistence)||[],A=(Array.isArray(_)?_:[_]).map(Ce);null!=p&&p.errorMap&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(A,null==p?void 0:p.popupRedirectResolver)}(Er,_),Er})(A,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,A)=>{p.getProvider("auth-internal").initialize()})),(0,ke._registerComponent)(new Ee.wA("auth-internal",p=>{const _=Fr(p.getProvider("auth").getImmediate());return new Ac(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ke.registerVersion)(Zu,sd,function Iu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,ke.registerVersion)(Zu,sd,"esm2017")}("Browser");class bu extends qa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function ad(b){return $a.apply(this,arguments)}function $a(){return($a=(0,a.Z)(function*(b){const p=yield Cu()._get(Du(b));return p&&(yield Cu()._remove(Du(b))),p})).apply(this,arguments)}function ld(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const A=Math.floor(Math.random()*p.length);b.push(p.charAt(A))}return b.join("")}function Cu(){return Ce(ma)}function Du(b){return He("authEvent",b.config.apiKey,b.name)}function ol(b){if(null==b||!b.includes("?"))return{};const[p,..._]=b.split("?");return(0,z.zd)(_.join("?"))}function nc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gt("no-auth-event")}}function ml(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Da(b=(0,z.z$)()){return!("file:"!==ml()&&"ionic:"!==ml()&&"capacitor:"!==ml()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function jr(){try{const b=self.localStorage,p=yi();if(b)return b.setItem(p,"1"),b.removeItem(p),!function cd(b=(0,z.z$)()){return function yl(){return(0,z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ic(b=(0,z.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,z.hl)()}catch(b){return Fc()&&(0,z.hl)()}return!1}function Fc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function vl(){return(function ud(){return"http:"===ml()||"https:"===ml()}()||(0,z.ru)()||Da())&&!function rc(){return(0,z.b$)()||(0,z.UG)()}()&&jr()&&!Fc()}function Ua(){return Da()&&"undefined"!=typeof document}function Ml(){return(Ml=(0,a.Z)(function*(){return!!Ua()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const da={LOCAL:"local",NONE:"none",SESSION:"session"},Vs=ye,sc="persistence";function Rl(b){return ea.apply(this,arguments)}function ea(){return(ea=(0,a.Z)(function*(b){yield b._initializationPromise;const p=Vc(),_=He(sc,b.config.apiKey,b.name);p&&p.setItem(_,b._getPersistence())})).apply(this,arguments)}function Vc(){var b;try{return(null===(b=function Lc(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(p){return null}}const El=ye;class _o{constructor(){this.browserResolver=Ce(class Jo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=ao,this._overrideRedirectResult=R}_openPopup(p,_,A,K){var ue=this;return(0,a.Z)(function*(){var tt;ve(null===(tt=ue.eventManagers[p._key()])||void 0===tt?void 0:tt.manager,"_initialize() not called before _openPopup()");const Lt=hl(p,_,A,J(),K);return function qu(b,p,_,A=500,K=600){const ue=Math.max((window.screen.availHeight-K)/2,0).toString(),tt=Math.max((window.screen.availWidth-A)/2,0).toString();let Lt="";const pn=Object.assign(Object.assign({},Gd),{width:A.toString(),height:K.toString(),top:ue,left:tt}),Hn=(0,z.z$)().toLowerCase();_&&(Lt=hr(Hn)?"_blank":_),on(Hn)&&(p=p||"http://localhost",pn.scrollbars="yes");const Er=Object.entries(pn).reduce((lo,[uo,Mo])=>`${lo}${uo}=${Mo},`,"");if(function Mt(b=(0,z.z$)()){var p;return Me(b)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Hn)&&"_self"!==Lt)return function Yu(b,p){const _=document.createElement("a");_.href=b,_.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(A)}(p||"",Lt),new Eu(null);const $n=window.open(p||"",Lt,Er);ye($n,b,"popup-blocked");try{$n.focus()}catch(lo){}return new Eu($n)}(p,Lt,yi())})()}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue._originValidation(p),function wn(b){zi().location.href=b}(hl(p,_,A,J(),K)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:K,promise:ue}=this.eventManagers[_];return K?Promise.resolve(K):(ve(ue,"If manager is not set, promise should be"),ue)}const A=this.initAndGetManager(p);return this.eventManagers[_]={promise:A},A.catch(()=>{delete this.eventManagers[_]}),A}initAndGetManager(p){var _=this;return(0,a.Z)(function*(){const A=yield function ba(b){return Ca.apply(this,arguments)}(p),K=new qa(p);return A.register("authEvent",ue=>(ye(null==ue?void 0:ue.authEvent,p,"invalid-auth-event"),{status:K.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:K},_.iframes[p._key()]=A,K})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(sl,{type:sl},K=>{var ue;const tt=null===(ue=null==K?void 0:K[0])||void 0===ue?void 0:ue[sl];void 0!==tt&&_(!!tt),vt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function dl(b){return Hu.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return fn()||_n()||Me()}}),this.cordovaResolver=Ce(class Jr{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ao,this._overrideRedirectResult=R}_initialize(p){var _=this;return(0,a.Z)(function*(){const A=p._key();let K=_.eventManagers.get(A);return K||(K=new bu(p),_.eventManagers.set(A,K),_.attachCallbackListeners(p,K)),K})()}_openPopup(p){vt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){!function ec(b){var p,_,A,K,ue,tt,Lt,pn,Hn,Er;const $n=Bo();ye("function"==typeof(null===(p=null==$n?void 0:$n.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(void 0!==(null===(_=null==$n?void 0:$n.BuildInfo)||void 0===_?void 0:_.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye("function"==typeof(null===(ue=null===(K=null===(A=null==$n?void 0:$n.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===ue?void 0:ue.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(pn=null===(Lt=null===(tt=null==$n?void 0:$n.cordova)||void 0===tt?void 0:tt.plugins)||void 0===Lt?void 0:Lt.browsertab)||void 0===pn?void 0:pn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(Er=null===(Hn=null==$n?void 0:$n.cordova)||void 0===Hn?void 0:Hn.InAppBrowser)||void 0===Er?void 0:Er.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const tt=yield ue._initialize(p);yield tt.initialized(),tt.resetRedirect(),function It(){w.clear()}(),yield ue._originValidation(p);const Lt=function tc(b,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:ld(),postBody:null,tenantId:b.tenantId,error:gt(b,"no-auth-event")}}(p,A,K);yield function Nc(b,p){return Cu()._set(Du(b),p)}(p,Lt);const pn=yield function Ba(b,p,_){return Qu.apply(this,arguments)}(p,Lt,_),Hn=yield function od(b){const{cordova:p}=Bo();return new Promise(_=>{p.plugins.browsertab.isAvailable(A=>{let K=null;A?p.plugins.browsertab.openUrl(b):K=p.InAppBrowser.open(b,function Et(b=(0,z.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(K)})})}(pn);return function Xu(b,p,_){return Ju.apply(this,arguments)}(p,tt,Hn)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Zl(b){return Rc.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:A,handleOpenURL:K,BuildInfo:ue}=Bo(),tt=setTimeout((0,a.Z)(function*(){yield ad(p),_.onEvent(nc())}),500),Lt=function(){var Er=(0,a.Z)(function*($n){clearTimeout(tt);const lo=yield ad(p);let uo=null;lo&&(null==$n?void 0:$n.url)&&(uo=function pl(b,p){var _,A;const K=function kc(b){const p=ol(b),_=p.link?decodeURIComponent(p.link):void 0,A=ol(_).link,K=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ol(K).link||K||A||_||b}(p);if(K.includes("/__/auth/callback")){const ue=ol(K),tt=ue.firebaseError?function Xl(b){try{return JSON.parse(b)}catch(p){return null}}(decodeURIComponent(ue.firebaseError)):null,Lt=null===(A=null===(_=null==tt?void 0:tt.code)||void 0===_?void 0:_.split("auth/"))||void 0===A?void 0:A[1],pn=Lt?gt(Lt):null;return pn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:pn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:K,postBody:null}}return null}(lo,$n.url)),_.onEvent(uo||nc())});return function(lo){return Er.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Lt);const pn=K,Hn=`${ue.packageName.toLowerCase()}://`;Bo().handleOpenURL=function(){var Er=(0,a.Z)(function*($n){if($n.toLowerCase().startsWith(Hn)&&Lt({url:$n}),"function"==typeof pn)try{pn($n)}catch(lo){console.error(lo)}});return function($n){return Er.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=ao,this._overrideRedirectResult=R}_initialize(p){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openPopup(p,_,A,K)})()}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openRedirect(p,_,A,K)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Ua()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return El(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const _=yield function eu(){return Ml.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function zd(b){return b.unwrap()}function oc(b){return ul(b)}function ul(b){const{_tokenResponse:p}=b instanceof z.ZR?b.customData:b;if(!p)return null;if(!(b instanceof z.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return Qo.credentialFromResult(b);const _=p.providerId;if(!_||"password"===_)return null;let A;switch(_){case"google.com":A=Js;break;case"facebook.com":A=mi;break;case"github.com":A=Hs;break;case"twitter.com":A=ps;break;default:const{oauthIdToken:K,oauthAccessToken:ue,oauthTokenSecret:tt,pendingToken:Lt,nonce:pn}=p;return ue||tt||K||Lt?Lt?_.startsWith("saml.")?os._create(_,Lt):_t._fromParams({providerId:_,signInMethod:_,pendingToken:Lt,idToken:K,accessToken:ue}):new cr(_).credential({idToken:K,accessToken:ue,rawNonce:pn}):null}return b instanceof z.ZR?A.credentialFromError(b):A.credentialFromResult(b)}function Ms(b,p){return p.catch(_=>{throw _ instanceof z.ZR&&function Tu(b,p){var _,A;const K=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(A=p)||void 0===A?void 0:A.code))p.resolver=new Il(b,function rs(b,p){var _;const A=(0,z.m9)(b),K=p;return ye(p.customData.operationType,A,"argument-error"),ye(null===(_=K.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,A,"argument-error"),Ma._fromError(A,K)}(b,p));else if(K){const ue=ul(p),tt=p;ue&&(tt.credential=ue,tt.tenantId=K.tenantId||void 0,tt.email=K.email||void 0,tt.phoneNumber=K.phoneNumber||void 0)}}(b,_),_}).then(_=>{const K=_.user;return{operationType:_.operationType,credential:oc(_),additionalUserInfo:$r(_),user:ha.getOrCreate(K)}})}function Su(b,p){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,a.Z)(function*(b,p){const _=yield p;return{verificationId:_.verificationId,confirm:A=>Ms(b,_.confirm(A))}})).apply(this,arguments)}class Il{constructor(p,_){this.resolver=_,this.auth=function Xs(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Ms(zd(this.auth),this.resolver.resolveSignIn(p))}}class ha{constructor(p){this._delegate=p,this.multiFactor=function Ra(b){const p=(0,z.m9)(b);return Wa.has(p)||Wa.set(p,el._fromUser(p)),Wa.get(p)}(p)}static getOrCreate(p){return ha.USER_MAP.has(p)||ha.USER_MAP.set(p,new ha(p)),ha.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,a.Z)(function*(){return Ms(_.auth,eo(_._delegate,p))})()}linkWithPhoneNumber(p,_){var A=this;return(0,a.Z)(function*(){return Su(A.auth,function yo(b,p,_){return As.apply(this,arguments)}(A._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,a.Z)(function*(){return Ms(_.auth,function qi(b,p,_){return Xo.apply(this,arguments)}(_._delegate,p,_o))})()}linkWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield Rl(Fr(_.auth)),function gr(b,p,_){return function xr(b,p,_){return Pn.apply(this,arguments)}(b,p,_)}(_._delegate,p,_o)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,a.Z)(function*(){return Ms(_.auth,Ks(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Su(this.auth,function za(b,p,_){return Pa.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return Ms(this.auth,function nl(b,p,_){return Vo.apply(this,arguments)}(this._delegate,p,_o))}reauthenticateWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield Rl(Fr(_.auth)),function Ht(b,p,_){return function sn(b,p,_){return Vn.apply(this,arguments)}(b,p,_)}(_._delegate,p,_o)})()}sendEmailVerification(p){return function ws(b,p){return bs.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,a.Z)(function*(){return yield function gi(b,p){return Jn.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function F(b,p){return $((0,z.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function Z(b,p){return $((0,z.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function so(b,p){return tl.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Zs(b,p){return ia.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function us(b,p,_){return Ps.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ha.USER_MAP=new WeakMap;const ja=ye;let Ol=(()=>{class b{constructor(_,A){if(this.app=_,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=_.options;ja(K,"invalid-api-key",{appName:_.name}),ja(K,"invalid-api-key",{appName:_.name});const ue="undefined"!=typeof window?_o:void 0;this._delegate=A.initialize({options:{persistence:Nl(K,_.name),popupRedirectResolver:ue}}),this._delegate._updateErrorMap(st),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ha.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,A){!function hi(b,p,_){const A=Fr(b);ye(A._canInitEmulator,A,"emulator-config-failed"),ye(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const K=!(null==_||!_.disableWarnings),ue=vr(p),{host:tt,port:Lt}=function Pi(b){const p=vr(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!_)return{host:"",port:null};const A=_[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const ue=K[1];return{host:ue,port:Ii(A.substr(ue.length+1))}}{const[ue,tt]=A.split(":");return{host:ue,port:Ii(tt)}}}(p);A.config.emulator={url:`${ue}//${tt}${null===Lt?"":`:${Lt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:tt,port:Lt,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function zn(){function b(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,A)}applyActionCode(_){return function Is(b,p){return Ss.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return G(this._delegate,_)}confirmPasswordReset(_,A){return function ko(b,p,_){return Gi.apply(this,arguments)}(this._delegate,_,A)}createUserWithEmailAndPassword(_,A){var K=this;return(0,a.Z)(function*(){return Ms(K._delegate,function k(b,p,_){return E.apply(this,arguments)}(K._delegate,_,A))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ci(b,p){return ns.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Xt(b,p){const _=Us.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){ja(vl(),_._delegate,"operation-not-supported-in-this-environment");const A=yield function ds(b,p){return qs.apply(this,arguments)}(_._delegate,_o);return A?Ms(_._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function al(b,p){Fr(b)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,A,K){const{next:ue,error:tt,complete:Lt}=ac(_,A,K);return this._delegate.onAuthStateChanged(ue,tt,Lt)}onIdTokenChanged(_,A,K){const{next:ue,error:tt,complete:Lt}=ac(_,A,K);return this._delegate.onIdTokenChanged(ue,tt,Lt)}sendSignInLinkToEmail(_,A){return function oe(b,p,_){return ut.apply(this,arguments)}(this._delegate,_,A)}sendPasswordResetEmail(_,A){return function ri(b,p,_){return Li.apply(this,arguments)}(this._delegate,_,A||void 0)}setPersistence(_){var A=this;return(0,a.Z)(function*(){let K;switch(function ll(b,p){Vs(Object.values(da).includes(p),b,"invalid-persistence-type"),(0,z.b$)()?Vs(p!==da.SESSION,b,"unsupported-persistence-type"):(0,z.UG)()?Vs(p===da.NONE,b,"unsupported-persistence-type"):Fc()?Vs(p===da.NONE||p===da.LOCAL&&(0,z.hl)(),b,"unsupported-persistence-type"):Vs(p===da.NONE||jr(),b,"unsupported-persistence-type")}(A._delegate,_),_){case da.SESSION:K=ro;break;case da.LOCAL:K=(yield Ce(er)._isAvailable())?er:ma;break;case da.NONE:K=Ne;break;default:return vt("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return Ms(this._delegate,function gs(b){return ai.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return Ms(this._delegate,Vr(this._delegate,_))}signInWithCustomToken(_){return Ms(this._delegate,function xa(b,p){return bo.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,A){return Ms(this._delegate,function V(b,p,_){return Vr((0,z.m9)(b),es.credential(p,_))}(this._delegate,_,A))}signInWithEmailLink(_,A){return Ms(this._delegate,function mn(b,p,_){return Zn.apply(this,arguments)}(this._delegate,_,A))}signInWithPhoneNumber(_,A){return Su(this._delegate,function Ia(b,p,_){return Zo.apply(this,arguments)}(this._delegate,_,A))}signInWithPopup(_){var A=this;return(0,a.Z)(function*(){return ja(vl(),A._delegate,"operation-not-supported-in-this-environment"),Ms(A._delegate,function vu(b,p,_){return ys.apply(this,arguments)}(A._delegate,_,_o))})()}signInWithRedirect(_){var A=this;return(0,a.Z)(function*(){return ja(vl(),A._delegate,"operation-not-supported-in-this-environment"),yield Rl(A._delegate),function fe(b,p,_){return function qe(b,p,_){return wt.apply(this,arguments)}(b,p,_)}(A._delegate,_,_o)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function N(b,p){return m.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=da,b})();function ac(b,p,_){let A=b;"function"!=typeof b&&({next:A,error:p,complete:_}=b);const K=A;return{next:tt=>K(tt&&ha.getOrCreate(tt)),error:p,complete:_}}function Nl(b,p){const _=function _l(b,p){const _=Vc();if(!_)return[];const A=He(sc,b,p);switch(_.getItem(A)){case da.NONE:return[Ne];case da.LOCAL:return[er,ro];case da.SESSION:return[ro];default:return[]}}(b,p);if("undefined"!=typeof self&&!_.includes(er)&&_.push(er),"undefined"!=typeof window)for(const A of[ma,ro])_.includes(A)||_.push(A);return _.includes(Ne)||_.push(Ne),_}class kl{constructor(){this.providerId="phone",this._delegate=new Qo(zd(ne.Z.auth()))}static credential(p,_){return Qo.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}kl.PHONE_SIGN_IN_METHOD=Qo.PHONE_SIGN_IN_METHOD,kl.PROVIDER_ID=Qo.PROVIDER_ID;const $c=ye;class Mh{constructor(p,_,A=ne.Z.app()){var K;$c(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Cs(p,_,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Au(b){b.INTERNAL.registerComponent(new Ee.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),A=p.getProvider("auth");return new Ol(_,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:es,FacebookAuthProvider:mi,GithubAuthProvider:Hs,GoogleAuthProvider:Js,OAuthProvider:cr,SAMLAuthProvider:vs,PhoneAuthProvider:kl,PhoneMultiFactorGenerator:Yl,RecaptchaVerifier:Mh,TwitterAuthProvider:ps,Auth:Ol,AuthCredential:Zi,Error:z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.24")}(ne.Z)},591:(tn,ot,H)=>{"use strict";H.d(ot,{X:()=>z});var a=H(8929),ne=H(5279);class z extends a.xQ{constructor(Le){super(),this._value=Le}get value(){return this.getValue()}_subscribe(Le){const he=super._subscribe(Le);return he&&!he.closed&&Le.next(this._value),he}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ne.N;return this._value}next(Le){super.next(this._value=Le)}}},6498:(tn,ot,H)=>{"use strict";H.d(ot,{y:()=>be});var a=H(3489),z=H(7668),ke=H(3292),he=H(3821),Ee=H(4843),pe=H(2830);let be=(()=>{class de{constructor(Ie){this._isScalar=!1,Ie&&(this._subscribe=Ie)}lift(Ie){const Ge=new de;return Ge.source=this,Ge.operator=Ie,Ge}subscribe(Ie,Ge,st){const{operator:nt}=this,Re=function Le(de,ie,Ie){if(de){if(de instanceof a.L)return de;if(de[z.b])return de[z.b]()}return de||ie||Ie?new a.L(de,ie,Ie):new a.L(ke.c)}(Ie,Ge,st);if(Re.add(nt?nt.call(Re,this.source):this.source||pe.v.useDeprecatedSynchronousErrorHandling&&!Re.syncErrorThrowable?this._subscribe(Re):this._trySubscribe(Re)),pe.v.useDeprecatedSynchronousErrorHandling&&Re.syncErrorThrowable&&(Re.syncErrorThrowable=!1,Re.syncErrorThrown))throw Re.syncErrorValue;return Re}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(Ge){pe.v.useDeprecatedSynchronousErrorHandling&&(Ie.syncErrorThrown=!0,Ie.syncErrorValue=Ge),function ne(de){for(;de;){const{closed:ie,destination:Ie,isStopped:Ge}=de;if(ie||Ge)return!1;de=Ie&&Ie instanceof a.L?Ie:null}return!0}(Ie)?Ie.error(Ge):console.warn(Ge)}}forEach(Ie,Ge){return new(Ge=ce(Ge))((st,nt)=>{let Re;Re=this.subscribe(De=>{try{Ie(De)}catch(ct){nt(ct),Re&&Re.unsubscribe()}},nt,st)})}_subscribe(Ie){const{source:Ge}=this;return Ge&&Ge.subscribe(Ie)}[he.L](){return this}pipe(...Ie){return 0===Ie.length?this:(0,Ee.U)(Ie)(this)}toPromise(Ie){return new(Ie=ce(Ie))((Ge,st)=>{let nt;this.subscribe(Re=>nt=Re,Re=>st(Re),()=>Ge(nt))})}}return de.create=ie=>new de(ie),de})();function ce(de){if(de||(de=pe.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},3292:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>z});var a=H(2830),ne=H(2782);const z={closed:!0,next(ke){},error(ke){if(a.v.useDeprecatedSynchronousErrorHandling)throw ke;(0,ne.z)(ke)},complete(){}}},826:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>ne});var a=H(3489);class ne extends a.L{notifyNext(ke,Le,he,Ee,pe){this.destination.next(Le)}notifyError(ke,Le){this.destination.error(ke)}notifyComplete(ke){this.destination.complete()}}},8929:(tn,ot,H)=>{"use strict";H.d(ot,{Yc:()=>Ee,xQ:()=>pe});var a=H(6498),ne=H(3489),z=H(2654),ke=H(5279),Le=H(5283),he=H(7668);class Ee extends ne.L{constructor(de){super(de),this.destination=de}}let pe=(()=>{class ce extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[he.b](){return new Ee(this)}lift(ie){const Ie=new be(this,this);return Ie.operator=ie,Ie}next(ie){if(this.closed)throw new ke.N;if(!this.isStopped){const{observers:Ie}=this,Ge=Ie.length,st=Ie.slice();for(let nt=0;nt<Ge;nt++)st[nt].next(ie)}}error(ie){if(this.closed)throw new ke.N;this.hasError=!0,this.thrownError=ie,this.isStopped=!0;const{observers:Ie}=this,Ge=Ie.length,st=Ie.slice();for(let nt=0;nt<Ge;nt++)st[nt].error(ie);this.observers.length=0}complete(){if(this.closed)throw new ke.N;this.isStopped=!0;const{observers:ie}=this,Ie=ie.length,Ge=ie.slice();for(let st=0;st<Ie;st++)Ge[st].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ie){if(this.closed)throw new ke.N;return super._trySubscribe(ie)}_subscribe(ie){if(this.closed)throw new ke.N;return this.hasError?(ie.error(this.thrownError),z.w.EMPTY):this.isStopped?(ie.complete(),z.w.EMPTY):(this.observers.push(ie),new Le.W(this,ie))}asObservable(){const ie=new a.y;return ie.source=this,ie}}return ce.create=(de,ie)=>new be(de,ie),ce})();class be extends pe{constructor(de,ie){super(),this.destination=de,this.source=ie}next(de){const{destination:ie}=this;ie&&ie.next&&ie.next(de)}error(de){const{destination:ie}=this;ie&&ie.error&&this.destination.error(de)}complete(){const{destination:de}=this;de&&de.complete&&this.destination.complete()}_subscribe(de){const{source:ie}=this;return ie?this.source.subscribe(de):z.w.EMPTY}}},5283:(tn,ot,H)=>{"use strict";H.d(ot,{W:()=>ne});var a=H(2654);class ne extends a.w{constructor(ke,Le){super(),this.subject=ke,this.subscriber=Le,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ke=this.subject,Le=ke.observers;if(this.subject=null,!Le||0===Le.length||ke.isStopped||ke.closed)return;const he=Le.indexOf(this.subscriber);-1!==he&&Le.splice(he,1)}}},3489:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>Ee});var a=H(7043),ne=H(3292),z=H(2654),ke=H(7668),Le=H(2830),he=H(2782);class Ee extends z.w{constructor(ce,de,ie){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!ce){this.destination=ne.c;break}if("object"==typeof ce){ce instanceof Ee?(this.syncErrorThrowable=ce.syncErrorThrowable,this.destination=ce,ce.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,ce));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,ce,de,ie)}}[ke.b](){return this}static create(ce,de,ie){const Ie=new Ee(ce,de,ie);return Ie.syncErrorThrowable=!1,Ie}next(ce){this.isStopped||this._next(ce)}error(ce){this.isStopped||(this.isStopped=!0,this._error(ce))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ce){this.destination.next(ce)}_error(ce){this.destination.error(ce),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ce}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ce,this}}class pe extends Ee{constructor(ce,de,ie,Ie){super(),this._parentSubscriber=ce;let Ge,st=this;(0,a.m)(de)?Ge=de:de&&(Ge=de.next,ie=de.error,Ie=de.complete,de!==ne.c&&(st=Object.create(de),(0,a.m)(st.unsubscribe)&&this.add(st.unsubscribe.bind(st)),st.unsubscribe=this.unsubscribe.bind(this))),this._context=st,this._next=Ge,this._error=ie,this._complete=Ie}next(ce){if(!this.isStopped&&this._next){const{_parentSubscriber:de}=this;Le.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?this.__tryOrSetError(de,this._next,ce)&&this.unsubscribe():this.__tryOrUnsub(this._next,ce)}}error(ce){if(!this.isStopped){const{_parentSubscriber:de}=this,{useDeprecatedSynchronousErrorHandling:ie}=Le.v;if(this._error)ie&&de.syncErrorThrowable?(this.__tryOrSetError(de,this._error,ce),this.unsubscribe()):(this.__tryOrUnsub(this._error,ce),this.unsubscribe());else if(de.syncErrorThrowable)ie?(de.syncErrorValue=ce,de.syncErrorThrown=!0):(0,he.z)(ce),this.unsubscribe();else{if(this.unsubscribe(),ie)throw ce;(0,he.z)(ce)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ce}=this;if(this._complete){const de=()=>this._complete.call(this._context);Le.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,de),this.unsubscribe()):(this.__tryOrUnsub(de),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ce,de){try{ce.call(this._context,de)}catch(ie){if(this.unsubscribe(),Le.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,he.z)(ie)}}__tryOrSetError(ce,de,ie){if(!Le.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{de.call(this._context,ie)}catch(Ie){return Le.v.useDeprecatedSynchronousErrorHandling?(ce.syncErrorValue=Ie,ce.syncErrorThrown=!0,!0):((0,he.z)(Ie),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ce}=this;this._context=null,this._parentSubscriber=null,ce.unsubscribe()}}},2654:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>he});var a=H(6688),ne=H(7830),z=H(7043);const Le=(()=>{function pe(be){return Error.call(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((ce,de)=>`${de+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be,this}return pe.prototype=Object.create(Error.prototype),pe})();class he{constructor(be){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,be&&(this._ctorUnsubscribe=!0,this._unsubscribe=be)}unsubscribe(){let be;if(this.closed)return;let{_parentOrParents:ce,_ctorUnsubscribe:de,_unsubscribe:ie,_subscriptions:Ie}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ce instanceof he)ce.remove(this);else if(null!==ce)for(let Ge=0;Ge<ce.length;++Ge)ce[Ge].remove(this);if((0,z.m)(ie)){de&&(this._unsubscribe=void 0);try{ie.call(this)}catch(Ge){be=Ge instanceof Le?Ee(Ge.errors):[Ge]}}if((0,a.k)(Ie)){let Ge=-1,st=Ie.length;for(;++Ge<st;){const nt=Ie[Ge];if((0,ne.K)(nt))try{nt.unsubscribe()}catch(Re){be=be||[],Re instanceof Le?be=be.concat(Ee(Re.errors)):be.push(Re)}}}if(be)throw new Le(be)}add(be){let ce=be;if(!be)return he.EMPTY;switch(typeof be){case"function":ce=new he(be);case"object":if(ce===this||ce.closed||"function"!=typeof ce.unsubscribe)return ce;if(this.closed)return ce.unsubscribe(),ce;if(!(ce instanceof he)){const Ie=ce;ce=new he,ce._subscriptions=[Ie]}break;default:throw new Error("unrecognized teardown "+be+" added to Subscription.")}let{_parentOrParents:de}=ce;if(null===de)ce._parentOrParents=this;else if(de instanceof he){if(de===this)return ce;ce._parentOrParents=[de,this]}else{if(-1!==de.indexOf(this))return ce;de.push(this)}const ie=this._subscriptions;return null===ie?this._subscriptions=[ce]:ie.push(ce),ce}remove(be){const ce=this._subscriptions;if(ce){const de=ce.indexOf(be);-1!==de&&ce.splice(de,1)}}}var pe;function Ee(pe){return pe.reduce((be,ce)=>be.concat(ce instanceof Le?ce.errors:ce),[])}he.EMPTY=((pe=new he).closed=!0,pe)},2830:(tn,ot,H)=>{"use strict";H.d(ot,{v:()=>ne});let a=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(z){if(z){const ke=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ke.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=z},get useDeprecatedSynchronousErrorHandling(){return a}}},1177:(tn,ot,H)=>{"use strict";H.d(ot,{Ds:()=>he,IY:()=>ke,ft:()=>pe});var a=H(3489),ne=H(6498),z=H(9249);class ke extends a.L{constructor(ce){super(),this.parent=ce}_next(ce){this.parent.notifyNext(ce)}_error(ce){this.parent.notifyError(ce),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class he extends a.L{notifyNext(ce){this.destination.next(ce)}notifyError(ce){this.destination.error(ce)}notifyComplete(){this.destination.complete()}}function pe(be,ce){if(ce.closed)return;if(be instanceof ne.y)return be.subscribe(ce);let de;try{de=(0,z.s)(be)(ce)}catch(ie){ce.error(ie)}return de}},1762:(tn,ot,H)=>{"use strict";H.d(ot,{N:()=>he,c:()=>Le});var a=H(8929),ne=H(6498),z=H(2654),ke=H(4327);class Le extends ne.y{constructor(de,ie){super(),this.source=de,this.subjectFactory=ie,this._refCount=0,this._isComplete=!1}_subscribe(de){return this.getSubject().subscribe(de)}getSubject(){const de=this._subject;return(!de||de.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let de=this._connection;return de||(this._isComplete=!1,de=this._connection=new z.w,de.add(this.source.subscribe(new Ee(this.getSubject(),this))),de.closed&&(this._connection=null,de=z.w.EMPTY)),de}refCount(){return(0,ke.x)()(this)}}const he=(()=>{const ce=Le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ce._subscribe},_isComplete:{value:ce._isComplete,writable:!0},getSubject:{value:ce.getSubject},connect:{value:ce.connect},refCount:{value:ce.refCount}}})();class Ee extends a.Yc{constructor(de,ie){super(de),this.connectable=ie}_error(de){this._unsubscribe(),super._error(de)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const de=this.connectable;if(de){this.connectable=null;const ie=de._connection;de._refCount=0,de._subject=null,de._connection=null,ie&&ie.unsubscribe()}}}},1221:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>ke});var a=H(1086),ne=H(9146);function ke(...Le){return function z(){return(0,ne.J)(1)}()((0,a.of)(...Le))}},8896:(tn,ot,H)=>{"use strict";H.d(ot,{E:()=>ne,c:()=>z});var a=H(6498);const ne=new a.y(Le=>Le.complete());function z(Le){return Le?function ke(Le){return new a.y(he=>Le.schedule(()=>he.complete()))}(Le):ne}},5254:(tn,ot,H)=>{"use strict";H.d(ot,{D:()=>st});var a=H(6498),ne=H(9249),z=H(2654),ke=H(3821),Ee=H(6454),pe=H(5430),de=H(8955),ie=H(8515);function st(nt,Re){return Re?function Ge(nt,Re){if(null!=nt){if(function ce(nt){return nt&&"function"==typeof nt[ke.L]}(nt))return function Le(nt,Re){return new a.y(De=>{const ct=new z.w;return ct.add(Re.schedule(()=>{const me=nt[ke.L]();ct.add(me.subscribe({next(vt){ct.add(Re.schedule(()=>De.next(vt)))},error(vt){ct.add(Re.schedule(()=>De.error(vt)))},complete(){ct.add(Re.schedule(()=>De.complete()))}}))})),ct})}(nt,Re);if((0,de.t)(nt))return function he(nt,Re){return new a.y(De=>{const ct=new z.w;return ct.add(Re.schedule(()=>nt.then(me=>{ct.add(Re.schedule(()=>{De.next(me),ct.add(Re.schedule(()=>De.complete()))}))},me=>{ct.add(Re.schedule(()=>De.error(me)))}))),ct})}(nt,Re);if((0,ie.z)(nt))return(0,Ee.r)(nt,Re);if(function Ie(nt){return nt&&"function"==typeof nt[pe.hZ]}(nt)||"string"==typeof nt)return function be(nt,Re){if(!nt)throw new Error("Iterable cannot be null");return new a.y(De=>{const ct=new z.w;let me;return ct.add(()=>{me&&"function"==typeof me.return&&me.return()}),ct.add(Re.schedule(()=>{me=nt[pe.hZ](),ct.add(Re.schedule(function(){if(De.closed)return;let vt,gt;try{const xt=me.next();vt=xt.value,gt=xt.done}catch(xt){return void De.error(xt)}gt?De.complete():(De.next(vt),this.schedule())}))})),ct})}(nt,Re)}throw new TypeError((null!==nt&&typeof nt||nt)+" is not observable")}(nt,Re):nt instanceof a.y?nt:new a.y((0,ne.s)(nt))}},3009:(tn,ot,H)=>{"use strict";H.d(ot,{n:()=>ke});var a=H(6498),ne=H(3650),z=H(6454);function ke(Le,he){return he?(0,z.r)(Le,he):new a.y((0,ne.V)(Le))}},6787:(tn,ot,H)=>{"use strict";H.d(ot,{T:()=>Le});var a=H(6498),ne=H(2866),z=H(9146),ke=H(3009);function Le(...he){let Ee=Number.POSITIVE_INFINITY,pe=null,be=he[he.length-1];return(0,ne.K)(be)?(pe=he.pop(),he.length>1&&"number"==typeof he[he.length-1]&&(Ee=he.pop())):"number"==typeof be&&(Ee=he.pop()),null===pe&&1===he.length&&he[0]instanceof a.y?he[0]:(0,z.J)(Ee)((0,ke.n)(he,pe))}},1086:(tn,ot,H)=>{"use strict";H.d(ot,{of:()=>ke});var a=H(2866),ne=H(3009),z=H(6454);function ke(...Le){let he=Le[Le.length-1];return(0,a.K)(he)?(Le.pop(),(0,z.r)(Le,he)):(0,ne.n)(Le)}},1737:(tn,ot,H)=>{"use strict";H.d(ot,{_:()=>ne});var a=H(6498);function ne(ke,Le){return new a.y(Le?he=>Le.schedule(z,0,{error:ke,subscriber:he}):he=>he.error(ke))}function z({error:ke,subscriber:Le}){Le.error(ke)}},7314:(tn,ot,H)=>{"use strict";H.d(ot,{d:()=>ne});var a=H(3489);function ne(Le=null){return he=>he.lift(new z(Le))}class z{constructor(he){this.defaultValue=he}call(he,Ee){return Ee.subscribe(new ke(he,this.defaultValue))}}class ke extends a.L{constructor(he,Ee){super(he),this.defaultValue=Ee,this.isEmpty=!0}_next(he){this.isEmpty=!1,this.destination.next(he)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(tn,ot,H)=>{"use strict";H.d(ot,{x:()=>ne});var a=H(3489);function ne(Le,he){return Ee=>Ee.lift(new z(Le,he))}class z{constructor(he,Ee){this.compare=he,this.keySelector=Ee}call(he,Ee){return Ee.subscribe(new ke(he,this.compare,this.keySelector))}}class ke extends a.L{constructor(he,Ee,pe){super(he),this.keySelector=pe,this.hasKey=!1,"function"==typeof Ee&&(this.compare=Ee)}compare(he,Ee){return he===Ee}_next(he){let Ee;try{const{keySelector:be}=this;Ee=be?be(he):he}catch(be){return this.destination.error(be)}let pe=!1;if(this.hasKey)try{const{compare:be}=this;pe=be(this.key,Ee)}catch(be){return this.destination.error(be)}else this.hasKey=!0;pe||(this.key=Ee,this.destination.next(he))}}},2198:(tn,ot,H)=>{"use strict";H.d(ot,{h:()=>ne});var a=H(3489);function ne(Le,he){return function(pe){return pe.lift(new z(Le,he))}}class z{constructor(he,Ee){this.predicate=he,this.thisArg=Ee}call(he,Ee){return Ee.subscribe(new ke(he,this.predicate,this.thisArg))}}class ke extends a.L{constructor(he,Ee,pe){super(he),this.predicate=Ee,this.thisArg=pe,this.count=0}_next(he){let Ee;try{Ee=this.predicate.call(this.thisArg,he,this.count++)}catch(pe){return void this.destination.error(pe)}Ee&&this.destination.next(he)}}},7224:(tn,ot,H)=>{"use strict";H.d(ot,{P:()=>Ee});var a=H(4450),ne=H(2198),z=H(2986),ke=H(7314),Le=H(4907),he=H(5379);function Ee(pe,be){const ce=arguments.length>=2;return de=>de.pipe(pe?(0,ne.h)((ie,Ie)=>pe(ie,Ie,de)):he.y,(0,z.q)(1),ce?(0,ke.d)(be):(0,Le.T)(()=>new a.K))}},4850:(tn,ot,H)=>{"use strict";H.d(ot,{U:()=>ne});var a=H(3489);function ne(Le,he){return function(pe){if("function"!=typeof Le)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new z(Le,he))}}class z{constructor(he,Ee){this.project=he,this.thisArg=Ee}call(he,Ee){return Ee.subscribe(new ke(he,this.project,this.thisArg))}}class ke extends a.L{constructor(he,Ee,pe){super(he),this.project=Ee,this.count=0,this.thisArg=pe||this}_next(he){let Ee;try{Ee=this.project.call(this.thisArg,he,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(Ee)}}},9146:(tn,ot,H)=>{"use strict";H.d(ot,{J:()=>z});var a=H(1709),ne=H(5379);function z(ke=Number.POSITIVE_INFINITY){return(0,a.zg)(ne.y,ke)}},1709:(tn,ot,H)=>{"use strict";H.d(ot,{zg:()=>ke});var a=H(4850),ne=H(5254),z=H(1177);function ke(pe,be,ce=Number.POSITIVE_INFINITY){return"function"==typeof be?de=>de.pipe(ke((ie,Ie)=>(0,ne.D)(pe(ie,Ie)).pipe((0,a.U)((Ge,st)=>be(ie,Ge,Ie,st))),ce)):("number"==typeof be&&(ce=be),de=>de.lift(new Le(pe,ce)))}class Le{constructor(be,ce=Number.POSITIVE_INFINITY){this.project=be,this.concurrent=ce}call(be,ce){return ce.subscribe(new he(be,this.project,this.concurrent))}}class he extends z.Ds{constructor(be,ce,de=Number.POSITIVE_INFINITY){super(be),this.project=ce,this.concurrent=de,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(be){this.active<this.concurrent?this._tryNext(be):this.buffer.push(be)}_tryNext(be){let ce;const de=this.index++;try{ce=this.project(be,de)}catch(ie){return void this.destination.error(ie)}this.active++,this._innerSub(ce)}_innerSub(be){const ce=new z.IY(this),de=this.destination;de.add(ce);const ie=(0,z.ft)(be,ce);ie!==ce&&de.add(ie)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(be){this.destination.next(be)}notifyComplete(){const be=this.buffer;this.active--,be.length>0?this._next(be.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(tn,ot,H)=>{"use strict";H.d(ot,{ht:()=>be,QV:()=>Ee});var a=H(3489),ne=H(8896),z=H(1086),ke=H(1737);class he{constructor(ie,Ie,Ge){this.kind=ie,this.value=Ie,this.error=Ge,this.hasValue="N"===ie}observe(ie){switch(this.kind){case"N":return ie.next&&ie.next(this.value);case"E":return ie.error&&ie.error(this.error);case"C":return ie.complete&&ie.complete()}}do(ie,Ie,Ge){switch(this.kind){case"N":return ie&&ie(this.value);case"E":return Ie&&Ie(this.error);case"C":return Ge&&Ge()}}accept(ie,Ie,Ge){return ie&&"function"==typeof ie.next?this.observe(ie):this.do(ie,Ie,Ge)}toObservable(){switch(this.kind){case"N":return(0,z.of)(this.value);case"E":return(0,ke._)(this.error);case"C":return(0,ne.c)()}throw new Error("unexpected notification kind value")}static createNext(ie){return void 0!==ie?new he("N",ie):he.undefinedValueNotification}static createError(ie){return new he("E",void 0,ie)}static createComplete(){return he.completeNotification}}function Ee(de,ie=0){return function(Ge){return Ge.lift(new pe(de,ie))}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0);class pe{constructor(ie,Ie=0){this.scheduler=ie,this.delay=Ie}call(ie,Ie){return Ie.subscribe(new be(ie,this.scheduler,this.delay))}}class be extends a.L{constructor(ie,Ie,Ge=0){super(ie),this.scheduler=Ie,this.delay=Ge}static dispatch(ie){const{notification:Ie,destination:Ge}=ie;Ie.observe(Ge),this.unsubscribe()}scheduleMessage(ie){this.destination.add(this.scheduler.schedule(be.dispatch,this.delay,new ce(ie,this.destination)))}_next(ie){this.scheduleMessage(he.createNext(ie))}_error(ie){this.scheduleMessage(he.createError(ie)),this.unsubscribe()}_complete(){this.scheduleMessage(he.createComplete()),this.unsubscribe()}}class ce{constructor(ie,Ie){this.notification=ie,this.destination=Ie}}},4327:(tn,ot,H)=>{"use strict";H.d(ot,{x:()=>ne});var a=H(3489);function ne(){return function(he){return he.lift(new z(he))}}class z{constructor(he){this.connectable=he}call(he,Ee){const{connectable:pe}=this;pe._refCount++;const be=new ke(he,pe),ce=Ee.subscribe(be);return be.closed||(be.connection=pe.connect()),ce}}class ke extends a.L{constructor(he,Ee){super(he),this.connectable=Ee}_unsubscribe(){const{connectable:he}=this;if(!he)return void(this.connection=null);this.connectable=null;const Ee=he._refCount;if(Ee<=0)return void(this.connection=null);if(he._refCount=Ee-1,Ee>1)return void(this.connection=null);const{connection:pe}=this,be=he._connection;this.connection=null,be&&(!pe||be===pe)&&be.unsubscribe()}}},2014:(tn,ot,H)=>{"use strict";H.d(ot,{R:()=>ne});var a=H(3489);function ne(Le,he){let Ee=!1;return arguments.length>=2&&(Ee=!0),function(be){return be.lift(new z(Le,he,Ee))}}class z{constructor(he,Ee,pe=!1){this.accumulator=he,this.seed=Ee,this.hasSeed=pe}call(he,Ee){return Ee.subscribe(new ke(he,this.accumulator,this.seed,this.hasSeed))}}class ke extends a.L{constructor(he,Ee,pe,be){super(he),this.accumulator=Ee,this._seed=pe,this.hasSeed=be,this.index=0}get seed(){return this._seed}set seed(he){this.hasSeed=!0,this._seed=he}_next(he){if(this.hasSeed)return this._tryNext(he);this.seed=he,this.destination.next(he)}_tryNext(he){const Ee=this.index++;let pe;try{pe=this.accumulator(this.seed,he,Ee)}catch(be){this.destination.error(be)}this.seed=pe,this.destination.next(pe)}}},2474:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>Ee});var a=H(1762);class z{constructor(be,ce){this.subjectFactory=be,this.selector=ce}call(be,ce){const{selector:de}=this,ie=this.subjectFactory(),Ie=de(ie).subscribe(be);return Ie.add(ce.subscribe(ie)),Ie}}var ke=H(4327),Le=H(8929);function he(){return new Le.xQ}function Ee(){return pe=>(0,ke.x)()(function ne(pe,be){return function(de){let ie;if(ie="function"==typeof pe?pe:function(){return pe},"function"==typeof be)return de.lift(new z(ie,be));const Ie=Object.create(de,a.N);return Ie.source=de,Ie.subjectFactory=ie,Ie}}(he)(pe))}},1059:(tn,ot,H)=>{"use strict";H.d(ot,{O:()=>z});var a=H(1221),ne=H(2866);function z(...ke){const Le=ke[ke.length-1];return(0,ne.K)(Le)?(ke.pop(),he=>(0,a.z)(ke,he,Le)):he=>(0,a.z)(ke,he)}},8915:(tn,ot,H)=>{"use strict";H.d(ot,{R:()=>Re});var a=H(6498);let ne=1;const z=Promise.resolve(),ke={};function Le(ct){return ct in ke&&(delete ke[ct],!0)}const he={setImmediate(ct){const me=ne++;return ke[me]=!0,z.then(()=>Le(me)&&ct()),me},clearImmediate(ct){Le(ct)}};var pe=H(6686),ce=H(2268);const Ie=new class de extends ce.v{flush(me){this.active=!0,this.scheduled=void 0;const{actions:vt}=this;let gt,xt=-1,Be=vt.length;me=me||vt.shift();do{if(gt=me.execute(me.state,me.delay))break}while(++xt<Be&&(me=vt.shift()));if(this.active=!1,gt){for(;++xt<Be&&(me=vt.shift());)me.unsubscribe();throw gt}}}(class be extends pe.o{constructor(me,vt){super(me,vt),this.scheduler=me,this.work=vt}requestAsyncId(me,vt,gt=0){return null!==gt&&gt>0?super.requestAsyncId(me,vt,gt):(me.actions.push(this),me.scheduled||(me.scheduled=he.setImmediate(me.flush.bind(me,null))))}recycleAsyncId(me,vt,gt=0){if(null!==gt&&gt>0||null===gt&&this.delay>0)return super.recycleAsyncId(me,vt,gt);0===me.actions.length&&(he.clearImmediate(vt),me.scheduled=void 0)}});var Ge=H(6688);class nt extends a.y{constructor(me,vt=0,gt=Ie){super(),this.source=me,this.delayTime=vt,this.scheduler=gt,(!function st(ct){return!(0,Ge.k)(ct)&&ct-parseFloat(ct)+1>=0}(vt)||vt<0)&&(this.delayTime=0),(!gt||"function"!=typeof gt.schedule)&&(this.scheduler=Ie)}static create(me,vt=0,gt=Ie){return new nt(me,vt,gt)}static dispatch(me){const{source:vt,subscriber:gt}=me;return this.add(vt.subscribe(gt))}_subscribe(me){return this.scheduler.schedule(nt.dispatch,this.delayTime,{source:this.source,subscriber:me})}}function Re(ct,me=0){return function(gt){return gt.lift(new De(ct,me))}}class De{constructor(me,vt){this.scheduler=me,this.delay=vt}call(me,vt){return new nt(vt,this.delay,this.scheduler).subscribe(me)}}},7545:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>ke});var a=H(4850),ne=H(5254),z=H(1177);function ke(Ee,pe){return"function"==typeof pe?be=>be.pipe(ke((ce,de)=>(0,ne.D)(Ee(ce,de)).pipe((0,a.U)((ie,Ie)=>pe(ce,ie,de,Ie))))):be=>be.lift(new Le(Ee))}class Le{constructor(pe){this.project=pe}call(pe,be){return be.subscribe(new he(pe,this.project))}}class he extends z.Ds{constructor(pe,be){super(pe),this.project=be,this.index=0}_next(pe){let be;const ce=this.index++;try{be=this.project(pe,ce)}catch(de){return void this.destination.error(de)}this._innerSub(be)}_innerSub(pe){const be=this.innerSubscription;be&&be.unsubscribe();const ce=new z.IY(this),de=this.destination;de.add(ce),this.innerSubscription=(0,z.ft)(pe,ce),this.innerSubscription!==ce&&de.add(this.innerSubscription)}_complete(){const{innerSubscription:pe}=this;(!pe||pe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(pe){this.destination.next(pe)}}},2986:(tn,ot,H)=>{"use strict";H.d(ot,{q:()=>ke});var a=H(3489),ne=H(4231),z=H(8896);function ke(Ee){return pe=>0===Ee?(0,z.c)():pe.lift(new Le(Ee))}class Le{constructor(pe){if(this.total=pe,this.total<0)throw new ne.W}call(pe,be){return be.subscribe(new he(pe,this.total))}}class he extends a.L{constructor(pe,be){super(pe),this.total=be,this.count=0}_next(pe){const be=this.total,ce=++this.count;ce<=be&&(this.destination.next(pe),ce===be&&(this.destination.complete(),this.unsubscribe()))}}},2868:(tn,ot,H)=>{"use strict";H.d(ot,{b:()=>ke});var a=H(3489);function ne(){}var z=H(7043);function ke(Ee,pe,be){return function(de){return de.lift(new Le(Ee,pe,be))}}class Le{constructor(pe,be,ce){this.nextOrObserver=pe,this.error=be,this.complete=ce}call(pe,be){return be.subscribe(new he(pe,this.nextOrObserver,this.error,this.complete))}}class he extends a.L{constructor(pe,be,ce,de){super(pe),this._tapNext=ne,this._tapError=ne,this._tapComplete=ne,this._tapError=ce||ne,this._tapComplete=de||ne,(0,z.m)(be)?(this._context=this,this._tapNext=be):be&&(this._context=be,this._tapNext=be.next||ne,this._tapError=be.error||ne,this._tapComplete=be.complete||ne)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(be){return void this.destination.error(be)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(be){return void this.destination.error(be)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},4907:(tn,ot,H)=>{"use strict";H.d(ot,{T:()=>z});var a=H(4450),ne=H(3489);function z(Ee=he){return pe=>pe.lift(new ke(Ee))}class ke{constructor(pe){this.errorFactory=pe}call(pe,be){return be.subscribe(new Le(pe,this.errorFactory))}}class Le extends ne.L{constructor(pe,be){super(pe),this.errorFactory=be,this.hasValue=!1}_next(pe){this.hasValue=!0,this.destination.next(pe)}_complete(){if(this.hasValue)return this.destination.complete();{let pe;try{pe=this.errorFactory()}catch(be){pe=be}this.destination.error(pe)}}}function he(){return new a.K}},6454:(tn,ot,H)=>{"use strict";H.d(ot,{r:()=>z});var a=H(6498),ne=H(2654);function z(ke,Le){return new a.y(he=>{const Ee=new ne.w;let pe=0;return Ee.add(Le.schedule(function(){pe!==ke.length?(he.next(ke[pe++]),he.closed||Ee.add(this.schedule())):he.complete()})),Ee})}},6686:(tn,ot,H)=>{"use strict";H.d(ot,{o:()=>z});var a=H(2654);class ne extends a.w{constructor(Le,he){super()}schedule(Le,he=0){return this}}class z extends ne{constructor(Le,he){super(Le,he),this.scheduler=Le,this.work=he,this.pending=!1}schedule(Le,he=0){if(this.closed)return this;this.state=Le;const Ee=this.id,pe=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(pe,Ee,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(pe,this.id,he),this}requestAsyncId(Le,he,Ee=0){return setInterval(Le.flush.bind(Le,this),Ee)}recycleAsyncId(Le,he,Ee=0){if(null!==Ee&&this.delay===Ee&&!1===this.pending)return he;clearInterval(he)}execute(Le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(Le,he);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,he){let pe,Ee=!1;try{this.work(Le)}catch(be){Ee=!0,pe=!!be&&be||new Error(be)}if(Ee)return this.unsubscribe(),pe}_unsubscribe(){const Le=this.id,he=this.scheduler,Ee=he.actions,pe=Ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&Ee.splice(pe,1),null!=Le&&(this.id=this.recycleAsyncId(he,Le,null)),this.delay=null}}},2268:(tn,ot,H)=>{"use strict";H.d(ot,{v:()=>ne});let a=(()=>{class z{constructor(Le,he=z.now){this.SchedulerAction=Le,this.now=he}schedule(Le,he=0,Ee){return new this.SchedulerAction(this,Le).schedule(Ee,he)}}return z.now=()=>Date.now(),z})();class ne extends a{constructor(ke,Le=a.now){super(ke,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():Le()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ke,Le=0,he){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(ke,Le,he):super.schedule(ke,Le,he)}flush(ke){const{actions:Le}=this;if(this.active)return void Le.push(ke);let he;this.active=!0;do{if(he=ke.execute(ke.state,ke.delay))break}while(ke=Le.shift());if(this.active=!1,he){for(;ke=Le.shift();)ke.unsubscribe();throw he}}}},353:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>z});var a=H(6686);const z=new(H(2268).v)(a.o)},341:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>he,N:()=>Le});var a=H(6686),z=H(2268);const Le=new class ke extends z.v{}(class ne extends a.o{constructor(pe,be){super(pe,be),this.scheduler=pe,this.work=be}schedule(pe,be=0){return be>0?super.schedule(pe,be):(this.delay=be,this.state=pe,this.scheduler.flush(this),this)}execute(pe,be){return be>0||this.closed?super.execute(pe,be):this._execute(pe,be)}requestAsyncId(pe,be,ce=0){return null!==ce&&ce>0||null===ce&&this.delay>0?super.requestAsyncId(pe,be,ce):pe.flush(this)}}),he=Le},5430:(tn,ot,H)=>{"use strict";H.d(ot,{hZ:()=>ne});const ne=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(tn,ot,H)=>{"use strict";H.d(ot,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(tn,ot,H)=>{"use strict";H.d(ot,{W:()=>ne});const ne=(()=>{function z(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return z.prototype=Object.create(Error.prototype),z})()},4450:(tn,ot,H)=>{"use strict";H.d(ot,{K:()=>ne});const ne=(()=>{function z(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return z.prototype=Object.create(Error.prototype),z})()},5279:(tn,ot,H)=>{"use strict";H.d(ot,{N:()=>ne});const ne=(()=>{function z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return z.prototype=Object.create(Error.prototype),z})()},2782:(tn,ot,H)=>{"use strict";function a(ne){setTimeout(()=>{throw ne},0)}H.d(ot,{z:()=>a})},5379:(tn,ot,H)=>{"use strict";function a(ne){return ne}H.d(ot,{y:()=>a})},6688:(tn,ot,H)=>{"use strict";H.d(ot,{k:()=>a});const a=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},8515:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>a});const a=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},7043:(tn,ot,H)=>{"use strict";function a(ne){return"function"==typeof ne}H.d(ot,{m:()=>a})},7830:(tn,ot,H)=>{"use strict";function a(ne){return null!==ne&&"object"==typeof ne}H.d(ot,{K:()=>a})},8955:(tn,ot,H)=>{"use strict";function a(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}H.d(ot,{t:()=>a})},2866:(tn,ot,H)=>{"use strict";function a(ne){return ne&&"function"==typeof ne.schedule}H.d(ot,{K:()=>a})},4843:(tn,ot,H)=>{"use strict";H.d(ot,{U:()=>z,z:()=>ne});var a=H(5379);function ne(...ke){return z(ke)}function z(ke){return 0===ke.length?a.y:1===ke.length?ke[0]:function(he){return ke.reduce((Ee,pe)=>pe(Ee),he)}}},9249:(tn,ot,H)=>{"use strict";H.d(ot,{s:()=>de});var a=H(3650),ne=H(2782),ke=H(5430),he=H(3821),pe=H(8515),be=H(8955),ce=H(7830);const de=ie=>{if(ie&&"function"==typeof ie[he.L])return(ie=>Ie=>{const Ge=ie[he.L]();if("function"!=typeof Ge.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ge.subscribe(Ie)})(ie);if((0,pe.z)(ie))return(0,a.V)(ie);if((0,be.t)(ie))return(ie=>Ie=>(ie.then(Ge=>{Ie.closed||(Ie.next(Ge),Ie.complete())},Ge=>Ie.error(Ge)).then(null,ne.z),Ie))(ie);if(ie&&"function"==typeof ie[ke.hZ])return(ie=>Ie=>{const Ge=ie[ke.hZ]();for(;;){let st;try{st=Ge.next()}catch(nt){return Ie.error(nt),Ie}if(st.done){Ie.complete();break}if(Ie.next(st.value),Ie.closed)break}return"function"==typeof Ge.return&&Ie.add(()=>{Ge.return&&Ge.return()}),Ie})(ie);{const Ge=`You provided ${(0,ce.K)(ie)?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ge)}}},3650:(tn,ot,H)=>{"use strict";H.d(ot,{V:()=>a});const a=ne=>z=>{for(let ke=0,Le=ne.length;ke<Le&&!z.closed;ke++)z.next(ne[ke]);z.complete()}},448:(tn,ot,H)=>{"use strict";H.d(ot,{D:()=>Le});var a=H(3489);class ne extends a.L{constructor(Ee,pe,be){super(),this.parent=Ee,this.outerValue=pe,this.outerIndex=be,this.index=0}_next(Ee){this.parent.notifyNext(this.outerValue,Ee,this.outerIndex,this.index++,this)}_error(Ee){this.parent.notifyError(Ee,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var z=H(9249),ke=H(6498);function Le(he,Ee,pe,be,ce=new ne(he,pe,be)){if(!ce.closed)return Ee instanceof ke.y?Ee.subscribe(ce):(0,z.s)(Ee)(ce)}},863:(tn,ot,H)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,1435,9230],"./ion-datetime_3.entry.js":[4959,1435,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function ne(z){if(!H.o(a,z))return Promise.resolve().then(()=>{var he=new Error("Cannot find module '"+z+"'");throw he.code="MODULE_NOT_FOUND",he});var ke=a[z],Le=ke[0];return Promise.all(ke.slice(1).map(H.e)).then(()=>H(Le))}ne.keys=()=>Object.keys(a),ne.id=863,tn.exports=ne},655:(tn,ot,H)=>{"use strict";function ke(ve,ae){var Ce={};for(var Se in ve)Object.prototype.hasOwnProperty.call(ve,Se)&&ae.indexOf(Se)<0&&(Ce[Se]=ve[Se]);if(null!=ve&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Se=Object.getOwnPropertySymbols(ve);lt<Se.length;lt++)ae.indexOf(Se[lt])<0&&Object.prototype.propertyIsEnumerable.call(ve,Se[lt])&&(Ce[Se[lt]]=ve[Se[lt]])}return Ce}function Le(ve,ae,Ce,Se){var Gt,lt=arguments.length,J=lt<3?ae:null===Se?Se=Object.getOwnPropertyDescriptor(ae,Ce):Se;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(ve,ae,Ce,Se);else for(var bt=ve.length-1;bt>=0;bt--)(Gt=ve[bt])&&(J=(lt<3?Gt(J):lt>3?Gt(ae,Ce,J):Gt(ae,Ce))||J);return lt>3&&J&&Object.defineProperty(ae,Ce,J),J}function pe(ve,ae,Ce,Se){return new(Ce||(Ce=Promise))(function(J,Gt){function bt(Ue){try{$e(Se.next(Ue))}catch(Xe){Gt(Xe)}}function at(Ue){try{$e(Se.throw(Ue))}catch(Xe){Gt(Xe)}}function $e(Ue){Ue.done?J(Ue.value):function lt(J){return J instanceof Ce?J:new Ce(function(Gt){Gt(J)})}(Ue.value).then(bt,at)}$e((Se=Se.apply(ve,ae||[])).next())})}H.d(ot,{_T:()=>ke,gn:()=>Le,mG:()=>pe})},9808:(tn,ot,H)=>{"use strict";H.d(ot,{Do:()=>me,EM:()=>Ys,HT:()=>Le,JF:()=>_s,K0:()=>Ee,Mx:()=>wi,O5:()=>we,PM:()=>Hi,S$:()=>Re,V_:()=>ce,Ye:()=>vt,b0:()=>ct,bD:()=>fs,ez:()=>os,q:()=>z,sg:()=>fi,tP:()=>qn,w_:()=>he});var a=H(5e3);let ne=null;function z(){return ne}function Le(F){ne||(ne=F)}class he{}const Ee=new a.OlP("DocumentToken");let pe=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=a.Yz7({token:F,factory:function(){return function be(){return(0,a.LFG)(de)}()},providedIn:"platform"}),F})();const ce=new a.OlP("Location Initialized");let de=(()=>{class F extends pe{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return z().getBaseHref(this._doc)}onPopState($){const re=z().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",$,!1),()=>re.removeEventListener("popstate",$)}onHashChange($){const re=z().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",$,!1),()=>re.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,re,Pe){ie()?this._history.pushState($,re,Pe):this.location.hash=Pe}replaceState($,re,Pe){ie()?this._history.replaceState($,re,Pe):this.location.hash=Pe}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)(a.LFG(Ee))},F.\u0275prov=a.Yz7({token:F,factory:function(){return function Ie(){return new de((0,a.LFG)(Ee))}()},providedIn:"platform"}),F})();function ie(){return!!window.history.pushState}function Ge(F,Z){if(0==F.length)return Z;if(0==Z.length)return F;let $=0;return F.endsWith("/")&&$++,Z.startsWith("/")&&$++,2==$?F+Z.substring(1):1==$?F+Z:F+"/"+Z}function st(F){const Z=F.match(/#|\?|$/),$=Z&&Z.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function nt(F){return F&&"?"!==F[0]?"?"+F:F}let Re=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=a.Yz7({token:F,factory:function(){return(0,a.f3M)(ct)},providedIn:"root"}),F})();const De=new a.OlP("appBaseHref");let ct=(()=>{class F extends Re{constructor($,re){var Pe,Dt,Pt;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(Pt=null!==(Pe=null!=re?re:this._platformLocation.getBaseHrefFromDOM())&&void 0!==Pe?Pe:null===(Dt=(0,a.f3M)(Ee).location)||void 0===Dt?void 0:Dt.origin)&&void 0!==Pt?Pt:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ge(this._baseHref,$)}path($=!1){const re=this._platformLocation.pathname+nt(this._platformLocation.search),Pe=this._platformLocation.hash;return Pe&&$?`${re}${Pe}`:re}pushState($,re,Pe,Dt){const Pt=this.prepareExternalUrl(Pe+nt(Dt));this._platformLocation.pushState($,re,Pt)}replaceState($,re,Pe,Dt){const Pt=this.prepareExternalUrl(Pe+nt(Dt));this._platformLocation.replaceState($,re,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,Pe;null===(Pe=(re=this._platformLocation).historyGo)||void 0===Pe||Pe.call(re,$)}}return F.\u0275fac=function($){return new($||F)(a.LFG(pe),a.LFG(De,8))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),me=(()=>{class F extends Re{constructor($,re){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl($){const re=Ge(this._baseHref,$);return re.length>0?"#"+re:re}pushState($,re,Pe,Dt){let Pt=this.prepareExternalUrl(Pe+nt(Dt));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.pushState($,re,Pt)}replaceState($,re,Pe,Dt){let Pt=this.prepareExternalUrl(Pe+nt(Dt));0==Pt.length&&(Pt=this._platformLocation.pathname),this._platformLocation.replaceState($,re,Pt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,Pe;null===(Pe=(re=this._platformLocation).historyGo)||void 0===Pe||Pe.call(re,$)}}return F.\u0275fac=function($){return new($||F)(a.LFG(pe),a.LFG(De,8))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac}),F})(),vt=(()=>{class F{constructor($){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const re=this._locationStrategy.getBaseHref();this._baseHref=st(Be(re)),this._locationStrategy.onPopState(Pe=>{this._subject.emit({url:this.path(!0),pop:!0,state:Pe.state,type:Pe.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,re=""){return this.path()==this.normalize($+nt(re))}normalize($){return F.stripTrailingSlash(function xt(F,Z){return F&&Z.startsWith(F)?Z.substring(F.length):Z}(this._baseHref,Be($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,re="",Pe=null){this._locationStrategy.pushState(Pe,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+nt(re)),Pe)}replaceState($,re="",Pe=null){this._locationStrategy.replaceState(Pe,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+nt(re)),Pe)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var re,Pe;null===(Pe=(re=this._locationStrategy).historyGo)||void 0===Pe||Pe.call(re,$)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{var re;const Pe=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(Pe,1),0===this._urlChangeListeners.length&&(null===(re=this._urlChangeSubscription)||void 0===re||re.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",re){this._urlChangeListeners.forEach(Pe=>Pe($,re))}subscribe($,re,Pe){return this._subject.subscribe({next:$,error:re,complete:Pe})}}return F.normalizeQueryParams=nt,F.joinWithSlash=Ge,F.stripTrailingSlash=st,F.\u0275fac=function($){return new($||F)(a.LFG(Re))},F.\u0275prov=a.Yz7({token:F,factory:function(){return function gt(){return new vt((0,a.LFG)(Re))}()},providedIn:"root"}),F})();function Be(F){return F.replace(/\/index.html$/,"")}function wi(F,Z){Z=encodeURIComponent(Z);for(const $ of F.split(";")){const re=$.indexOf("="),[Pe,Dt]=-1==re?[$,""]:[$.slice(0,re),$.slice(re+1)];if(Pe.trim()===Z)return decodeURIComponent(Dt)}return null}class Ci{constructor(Z,$,re,Pe){this.$implicit=Z,this.ngForOf=$,this.index=re,this.count=Pe}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fi=(()=>{class F{constructor($,re,Pe){this._viewContainer=$,this._template=re,this._differs=Pe,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const re=this._viewContainer;$.forEachOperation((Pe,Dt,Pt)=>{if(null==Pe.previousIndex)re.createEmbeddedView(this._template,new Ci(Pe.item,this._ngForOf,-1,-1),null===Pt?void 0:Pt);else if(null==Pt)re.remove(null===Dt?void 0:Dt);else if(null!==Dt){const xn=re.get(Dt);re.move(xn,Pt),Fi(xn,Pe)}});for(let Pe=0,Dt=re.length;Pe<Dt;Pe++){const xn=re.get(Pe).context;xn.index=Pe,xn.count=Dt,xn.ngForOf=this._ngForOf}$.forEachIdentityChange(Pe=>{Fi(re.get(Pe.currentIndex),Pe)})}static ngTemplateContextGuard($,re){return!0}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function Fi(F,Z){F.context.$implicit=Z.item}let we=(()=>{class F{constructor($,re){this._viewContainer=$,this._context=new Ke,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){Je("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){Je("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,re){return!0}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b),a.Y36(a.Rgc))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Ke{constructor(){this.$implicit=null,this.ngIf=null}}function Je(F,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,a.AaK)(Z)}'.`)}let qn=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const re=this._viewContainerRef;if(this._viewRef&&re.remove(re.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Pe,ngTemplateOutletContext:Dt,ngTemplateOutletInjector:Pt}=this;this._viewRef=re.createEmbeddedView(Pe,Dt,Pt?{injector:Pt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),F})(),os=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=a.oAB({type:F}),F.\u0275inj=a.cJS({}),F})();const fs="browser";function Hi(F){return"server"===F}let Ys=(()=>{class F{}return F.\u0275prov=(0,a.Yz7)({token:F,providedIn:"root",factory:()=>new Gs((0,a.LFG)(Ee),window)}),F})();class Gs{constructor(Z,$){this.document=Z,this.window=$,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const $=function gi(F,Z){const $=F.getElementById(Z)||F.getElementsByName(Z)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const re=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let Pe=re.currentNode;for(;Pe;){const Dt=Pe.shadowRoot;if(Dt){const Pt=Dt.getElementById(Z)||Dt.querySelector(`[name="${Z}"]`);if(Pt)return Pt}Pe=re.nextNode()}}return null}(this.document,Z);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=Z)}}scrollToElement(Z){const $=Z.getBoundingClientRect(),re=$.left+this.window.pageXOffset,Pe=$.top+this.window.pageYOffset,Dt=this.offset();this.window.scrollTo(re-Dt[0],Pe-Dt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=_r(this.window.history)||_r(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function _r(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class _s{}},5e3:(tn,ot,H)=>{"use strict";H.d(ot,{$8M:()=>Qr,$Z:()=>qf,AFp:()=>yE,AaK:()=>pe,CHM:()=>na,CRH:()=>Y0,CZH:()=>Yy,CqO:()=>$g,D6c:()=>Nb,EJc:()=>Yw,EpF:()=>ly,F$t:()=>jg,F4k:()=>bp,FYo:()=>Bt,FiY:()=>ds,G48:()=>gb,Gf:()=>z0,GfV:()=>Si,GkF:()=>Bg,Gpc:()=>de,Hsn:()=>Eh,JOm:()=>Jo,KtG:()=>ri,LFG:()=>fe,LSH:()=>Qd,Lbi:()=>Ww,Lck:()=>FI,MMx:()=>h_,NdJ:()=>_c,OlP:()=>Ti,Oqu:()=>Xg,PXZ:()=>ub,Q6J:()=>wp,QGY:()=>vf,QP$:()=>hr,Qsj:()=>qt,R0b:()=>ju,RDi:()=>b,Rgc:()=>am,SBq:()=>xe,Sil:()=>Zw,Suo:()=>q0,TTD:()=>Ar,TgZ:()=>Bu,X6Q:()=>pb,XFs:()=>zt,Xpm:()=>$t,Xts:()=>iu,Y36:()=>oh,YKP:()=>T0,YNc:()=>sy,Yjl:()=>dt,Yz7:()=>ht,Z0I:()=>bn,ZZ4:()=>F_,_Bn:()=>D0,_UZ:()=>Nd,_Vd:()=>P,_c5:()=>Rb,_uU:()=>by,aQg:()=>L_,c2e:()=>zw,cJS:()=>Ft,cg1:()=>Dh,dDg:()=>sb,dqk:()=>yr,eFA:()=>ME,ekj:()=>Yg,eoX:()=>SE,f3M:()=>wt,g9A:()=>_E,h0i:()=>Fp,hGG:()=>Ob,iGM:()=>W0,ifc:()=>Tt,ip1:()=>mE,jDz:()=>A0,kL8:()=>$y,lG2:()=>He,lqb:()=>Ru,lri:()=>DE,n5z:()=>cl,oAB:()=>On,oxw:()=>_f,q4F:()=>Oo,qLn:()=>Eo,qOj:()=>df,qZA:()=>Od,rWj:()=>TE,sBO:()=>mb,sIi:()=>ff,s_b:()=>Wy,soG:()=>Ky,tb:()=>EE,tp0:()=>ao,uIk:()=>Rs,vHH:()=>st,vpe:()=>Jc,wAp:()=>Tr,xp6:()=>Em,z2F:()=>Zy,zSh:()=>vd,zs3:()=>qc});var a=H(8929),ne=H(2654),z=H(6498),ke=H(6787),Le=H(2474);function he(n){for(let r in n)if(n[r]===he)return r;throw Error("Could not find renamed property on target object.")}function Ee(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=he({__forward_ref__:he});function de(n){return n.__forward_ref__=de,n.toString=function(){return pe(this())},n}function ie(n){return Ie(n)?n():n}function Ie(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===de}class st extends Error{constructor(r,s){super(function nt(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Re(n){return"string"==typeof n?n:null==n?"":String(n)}function gt(n,r){throw new st(-201,!1)}function at(n,r){null==n&&function $e(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function ht(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nt(n){return In(n,ur)||In(n,or)}function bn(n){return null!==Nt(n)}function In(n,r){return n.hasOwnProperty(r)?n[r]:null}function Wn(n){return n&&(n.hasOwnProperty(Un)||n.hasOwnProperty(mr))?n[Un]:null}const ur=he({\u0275prov:he}),Un=he({\u0275inj:he}),or=he({ngInjectableDef:he}),mr=he({ngInjectorDef:he});var zt=(()=>((zt=zt||{})[zt.Default=0]="Default",zt[zt.Host=1]="Host",zt[zt.Self=2]="Self",zt[zt.SkipSelf=4]="SkipSelf",zt[zt.Optional=8]="Optional",zt))();let rr;function tr(n){const r=rr;return rr=n,r}function nr(n,r,s){const l=Nt(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&zt.Optional?null:void 0!==r?r:void gt(pe(n))}function an(n){return{toString:n}.toString()}var fr=(()=>((fr=fr||{})[fr.OnPush=0]="OnPush",fr[fr.Default=1]="Default",fr))(),Tt=(()=>{return(n=Tt||(Tt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Tt;var n})();const yr=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Or={},jn=[],ji=he({\u0275cmp:he}),Fn=he({\u0275dir:he}),si=he({\u0275pipe:he}),ir=he({\u0275mod:he}),Yr=he({\u0275fac:he}),ni=he({__NG_ELEMENT_ID__:he});let vn=0;function $t(n){return an(()=>{const s=!0===n.standalone,l={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===fr.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||jn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Tt.Emulated,id:"c"+vn++,styles:n.styles||jn,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,C=n.features;return f.inputs=Ne(n.inputs,l),f.outputs=Ne(n.outputs),C&&C.forEach(x=>x(f)),f.directiveDefs=v?()=>("function"==typeof v?v():v).map(Ln).filter(Sn):null,f.pipeDefs=v?()=>("function"==typeof v?v():v).map(_n).filter(Sn):null,f})}function Ln(n){return rt(n)||on(n)}function Sn(n){return null!==n}function On(n){return an(()=>({type:n.type,bootstrap:n.bootstrap||jn,declarations:n.declarations||jn,imports:n.imports||jn,exports:n.exports||jn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ne(n,r){if(null==n)return Or;const s={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),s[f]=l,r&&(r[f]=v)}return s}const He=$t;function dt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function rt(n){return n[ji]||null}function on(n){return n[Fn]||null}function _n(n){return n[si]||null}function hr(n){const r=rt(n)||on(n)||_n(n);return null!==r&&r.standalone}function wr(n,r){const s=n[ir]||null;if(!s&&!0===r)throw new Error(`Type ${pe(n)} does not have '\u0275mod' property.`);return s}function Je(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ct(n){return Array.isArray(n)&&!0===n[1]}function _e(n){return 0!=(8&n.flags)}function Ye(n){return 2==(2&n.flags)}function yt(n){return 1==(1&n.flags)}function Ot(n){return null!==n.template}function jt(n){return 0!=(256&n[2])}function es(n,r){return n.hasOwnProperty(Yr)?n[Yr]:null}class js{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ar(){return cr}function cr(n){return n.type.prototype.ngOnChanges&&(n.setInput=Js),mi}function mi(){const n=pi(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Or)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function Js(n,r,s,l){const f=pi(n)||function os(n,r){return n[Hs]=r}(n,{previous:Or,current:null}),v=f.current||(f.current={}),C=f.previous,x=this.declaredInputs[s],L=C[x];v[x]=new js(L&&L.currentValue,r,C===Or),n[l]=r}Ar.ngInherit=!0;const Hs="__ngSimpleChanges__";function pi(n){return n[Hs]||null}function ai(n){for(;Array.isArray(n);)n=n[0];return n}function _r(n,r){return ai(r[n])}function gi(n,r){return ai(r[n.index])}function _s(n,r){return n.data[r]}function Rr(n,r){const s=r[n];return Je(s)?s:s[0]}function Ts(n){return 64==(64&n[2])}function Es(n,r){return null==r?null:n[r]}function Ri(n){n[18]=0}function Vr(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const Kn={lFrame:Zs(null),bindingsEnabled:!0};function ks(){return Kn.bindingsEnabled}function Yt(){return Kn.lFrame.lView}function br(){return Kn.lFrame.tView}function na(n){return Kn.lFrame.contextLView=n,n[8]}function ri(n){return Kn.lFrame.contextLView=null,n}function Li(){let n=ko();for(;null!==n&&64===n.type;)n=n.parent;return n}function ko(){return Kn.lFrame.currentTNode}function Is(n,r){const s=Kn.lFrame;s.currentTNode=n,s.isParent=r}function Ss(){return Kn.lFrame.isParent}function G(){Kn.lFrame.isParent=!1}function ut(){return Kn.lFrame.bindingIndex++}function ti(n,r){const s=Kn.lFrame;s.bindingIndex=s.bindingRootIndex=n,ci(r)}function ci(n){Kn.lFrame.currentDirectiveIndex=n}function ws(){return Kn.lFrame.currentQueryIndex}function bs(n){Kn.lFrame.currentQueryIndex=n}function us(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Ps(n,r,s){if(s&zt.SkipSelf){let f=r,v=n;for(;!(f=f.parent,null!==f||s&zt.Host||(f=us(v),null===f||(v=v[15],10&f.type))););if(null===f)return!1;r=f,n=v}const l=Kn.lFrame=ra();return l.currentTNode=r,l.lView=n,!0}function Co(n){const r=ra(),s=n[1];Kn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function ra(){const n=Kn.lFrame,r=null===n?null:n.child;return null===r?Zs(n):r}function Zs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ia(){const n=Kn.lFrame;return Kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const F=ia;function Z(){const n=ia();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Pe(){return Kn.lFrame.selectedIndex}function Dt(n){Kn.lFrame.selectedIndex=n}function Pt(){const n=Kn.lFrame;return _s(n.tView,n.selectedIndex)}function ii(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const v=n.data[s].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:x,ngAfterViewInit:L,ngAfterViewChecked:Y,ngOnDestroy:le}=v;C&&(n.contentHooks||(n.contentHooks=[])).push(-s,C),x&&((n.contentHooks||(n.contentHooks=[])).push(s,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,x)),L&&(n.viewHooks||(n.viewHooks=[])).push(-s,L),Y&&((n.viewHooks||(n.viewHooks=[])).push(s,Y),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,Y)),null!=le&&(n.destroyHooks||(n.destroyHooks=[])).push(s,le)}}function xi(n,r,s){no(n,r,3,s)}function ms(n,r,s,l){(3&n[2])===s&&no(n,r,s,l)}function to(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function no(n,r,s,l){const v=null!=l?l:-1,C=r.length-1;let x=0;for(let L=void 0!==l?65535&n[18]:0;L<C;L++)if("number"==typeof r[L+1]){if(x=r[L],null!=l&&x>=l)break}else r[L]<0&&(n[18]+=65536),(x<v||-1==v)&&(Do(n,s,r,L),n[18]=(4294901760&n[18])+L+2),L++}function Do(n,r,s,l){const f=s[l]<0,v=s[l+1],x=n[f?-s[l]:s[l]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class Qs{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Ra(n,r,s){let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const v=s[l++],C=s[l++],x=s[l++];n.setAttribute(r,C,x,v)}else{const v=f,C=s[++l];Go(v)?n.setProperty(r,v,C):n.setAttribute(r,v,C),l++}}return l}function fo(n){return 3===n||4===n||6===n}function Go(n){return 64===n.charCodeAt(0)}function po(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||hu(n,s,f,null,-1===s||2===s?r[++l]:null)}}return n}function hu(n,r,s,l,f){let v=0,C=n.length;if(-1===r)C=-1;else for(;v<n.length;){const x=n[v++];if("number"==typeof x){if(x===r){C=-1;break}if(x>r){C=v-1;break}}}for(;v<n.length;){const x=n[v];if("number"==typeof x)break;if(x===s){if(null===l)return void(null!==f&&(n[v+1]=f));if(l===n[v+1])return void(n[v+2]=f)}v++,null!==l&&v++,null!==f&&v++}-1!==C&&(n.splice(C,0,r),v=C+1),n.splice(v++,0,s),null!==l&&n.splice(v++,0,l),null!==f&&n.splice(v++,0,f)}function jl(n){return-1!==n}function zr(n){return 32767&n}function Po(n,r){let s=function ma(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let ro=!0;function sa(n){const r=ro;return ro=n,r}let zi=0;const wn={};function zs(n,r){const s=kt(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,cn(l.data,n),cn(r,null),cn(l.blueprint,null));const f=Qt(n,r),v=n.injectorIndex;if(jl(f)){const C=zr(f),x=Po(f,r),L=x[1].data;for(let Y=0;Y<8;Y++)r[v+Y]=x[C+Y]|L[C+Y]}return r[v+8]=f,v}function cn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function kt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Qt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){if(l=Yo(f),null===l)return-1;if(s++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Ni(n,r,s){!function En(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(ni)&&(l=s[ni]),null==l&&(l=s[ni]=zi++);const f=255&l;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function ya(n,r,s){if(s&zt.Optional||void 0!==n)return n;gt()}function Fo(n,r,s,l){if(s&zt.Optional&&void 0===l&&(l=null),0==(s&(zt.Self|zt.Host))){const f=n[9],v=tr(void 0);try{return f?f.get(r,l,s&zt.Optional):nr(r,l,s&zt.Optional)}finally{tr(v)}}return ya(l,0,s)}function Wo(n,r,s,l=zt.Default,f){if(null!==n){if(1024&r[2]){const C=function er(n,r,s,l,f){let v=n,C=r;for(;null!==v&&null!==C&&1024&C[2]&&!(256&C[2]);){const x=zo(v,C,s,l|zt.Self,wn);if(x!==wn)return x;let L=v.parent;if(!L){const Y=C[21];if(Y){const le=Y.get(s,wn,l);if(le!==wn)return le}L=Yo(C),C=C[15]}v=L}return f}(n,r,s,l,wn);if(C!==wn)return C}const v=zo(n,r,s,l,wn);if(v!==wn)return v}return Fo(r,s,l,f)}function zo(n,r,s,l,f){const v=function fu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ni)?n[ni]:void 0;return"number"==typeof r?r>=0?255&r:va:r}(s);if("function"==typeof v){if(!Ps(r,n,l))return l&zt.Host?ya(f,0,l):Fo(r,s,l,f);try{const C=v(l);if(null!=C||l&zt.Optional)return C;gt()}finally{F()}}else if("number"==typeof v){let C=null,x=kt(n,r),L=-1,Y=l&zt.Host?r[16][6]:null;for((-1===x||l&zt.SkipSelf)&&(L=-1===x?Qt(n,r):r[x+8],-1!==L&&oa(l,!1)?(C=r[1],x=zr(L),r=Po(L,r)):x=-1);-1!==x;){const le=r[1];if(Tl(v,x,le.data)){const Te=Hl(x,r,s,C,l,Y);if(Te!==wn)return Te}L=r[x+8],-1!==L&&oa(l,r[1].data[x+8]===Y)&&Tl(v,x,r)?(C=le,x=zr(L),r=Po(L,r)):x=-1}}return f}function Hl(n,r,s,l,f,v){const C=r[1],x=C.data[n+8],le=qo(x,C,s,null==l?Ye(x)&&ro:l!=C&&0!=(3&x.type),f&zt.Host&&v===x);return null!==le?Na(r,C,le,x):wn}function qo(n,r,s,l,f){const v=n.providerIndexes,C=r.data,x=1048575&v,L=n.directiveStart,le=v>>20,it=f?x+le:n.directiveEnd;for(let At=l?x:x+le;At<it;At++){const Kt=C[At];if(At<L&&s===Kt||At>=L&&Kt.type===s)return At}if(f){const At=C[L];if(At&&Ot(At)&&At.type===s)return L}return null}function Na(n,r,s,l){let f=n[s];const v=r.data;if(function Vi(n){return n instanceof Qs}(f)){const C=f;C.resolving&&function ct(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new st(-200,`Circular dependency in DI detected for ${n}${s}`)}(function De(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Re(n)}(v[s]));const x=sa(C.canSeeViewProviders);C.resolving=!0;const L=C.injectImpl?tr(C.injectImpl):null;Ps(n,l,zt.Default);try{f=n[s]=C.factory(void 0,v,n,l),r.firstCreatePass&&s>=l.directiveStart&&function Oi(n,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:v}=r.type.prototype;if(l){const C=cr(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),v&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v))}(s,v[s],r)}finally{null!==L&&tr(L),sa(x),C.resolving=!1,F()}}return f}function Tl(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function oa(n,r){return!(n&zt.Self||n&zt.Host&&r)}class lr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return Wo(this._tNode,this._lView,r,l,s)}}function va(){return new lr(Li(),Yt())}function cl(n){return an(()=>{const r=n.prototype.constructor,s=r[Yr]||Mi(r),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const v=f[Yr]||Mi(f);if(v&&v!==s)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function Mi(n){return Ie(n)?()=>{const r=Mi(ie(n));return r&&r()}:es(n)}function Yo(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Qr(n){return function Oa(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const v=s[f];if(fo(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(v===r)return s[f+1];f+=2}}}return null}(Li(),n)}const vi="__parameters__";function di(n,r,s){return an(()=>{const l=function Ko(n){return function(...s){if(n){const l=n(...s);for(const f in l)this[f]=l[f]}}}(r);function f(...v){if(this instanceof f)return l.apply(this,v),this;const C=new f(...v);return x.annotation=C,x;function x(L,Y,le){const Te=L.hasOwnProperty(vi)?L[vi]:Object.defineProperty(L,vi,{value:[]})[vi];for(;Te.length<=le;)Te.push(null);return(Te[le]=Te[le]||[]).push(C),L}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Ti{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ht({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),yo(l,r)):r!==n&&r.push(l)}return r}function As(n,r){n.forEach(s=>Array.isArray(s)?As(s,r):r(s))}function za(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Pa(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Fa(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function xs(n,r,s){let l=Xr(n,r);return l>=0?n[1|l]=s:(l=~l,function tl(n,r,s,l){let f=n.length;if(f==r)n.push(s,l);else if(1===f)n.push(l,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function cs(n,r){const s=Xr(n,r);if(s>=0)return n[1|s]}function Xr(n,r){return function La(n,r,s){let l=0,f=n.length>>s;for(;f!==l;){const v=l+(f-l>>1),C=n[v<<s];if(r===C)return v<<s;C>r?f=v:l=v+1}return~(f<<s)}(n,r,1)}const w={},O="__NG_DI_FLAG__",j="ngTempTokenPath",Ae=/\n/gm,It="__source";let R;function U(n){const r=R;return R=n,r}function Q(n,r=zt.Default){if(void 0===R)throw new st(-203,!1);return null===R?nr(n,void 0,r):R.get(n,r&zt.Optional?null:void 0,r)}function fe(n,r=zt.Default){return(function Pr(){return rr}()||Q)(ie(n),r)}function wt(n,r=zt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),fe(n,r)}function Ht(n){const r=[];for(let s=0;s<n.length;s++){const l=ie(n[s]);if(Array.isArray(l)){if(0===l.length)throw new st(900,!1);let f,v=zt.Default;for(let C=0;C<l.length;C++){const x=l[C],L=Vn(x);"number"==typeof L?-1===L?f=x.token:v|=L:f=x}r.push(fe(f,v))}else r.push(fe(l))}return r}function sn(n,r){return n[O]=r,n.prototype[O]=r,n}function Vn(n){return n[O]}const ds=sn(di("Optional"),8),ao=sn(di("SkipSelf"),4);var Jo=(()=>((Jo=Jo||{})[Jo.Important=1]="Important",Jo[Jo.DashCase=2]="DashCase",Jo))();const Zu=new Map;let sd=0;const Bo="__ngContext__";function Bi(n,r){Je(r)?(n[Bo]=r[20],function Iu(n){Zu.set(n[20],n)}(r)):n[Bo]=r}function bu(n,r){return undefined(n,r)}function $a(n){const r=n[3];return Ct(r)?r[3]:r}function Cu(n){return Xl(n[13])}function Du(n){return Xl(n[4])}function Xl(n){for(;null!==n&&!Ct(n);)n=n[4];return n}function ol(n,r,s,l,f){if(null!=l){let v,C=!1;Ct(l)?v=l:Je(l)&&(C=!0,l=l[0]);const x=ai(l);0===n&&null!==s?null==f?eu(r,s,x):Ua(r,s,x,f||null,!0):1===n&&null!==s?Ua(r,s,x,f||null,!0):2===n?function oc(n,r,s){const l=Vs(n,r);l&&function Lc(n,r,s,l){n.removeChild(r,s,l)}(n,l,r,s)}(r,x,C):3===n&&r.destroyNode(x),null!=v&&function Bc(n,r,s,l,f){const v=s[7];v!==ai(s)&&ol(r,n,l,v,f);for(let x=10;x<s.length;x++){const L=s[x];ul(L[1],L,n,r,l,v)}}(r,n,v,s,f)}}function nc(n,r,s){return n.createElement(r,s)}function Da(n,r){const s=n[9],l=s.indexOf(r),f=r[3];512&r[2]&&(r[2]&=-513,Vr(f,-1)),s.splice(l,1)}function rc(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const f=l[17];null!==f&&f!==n&&Da(f,l),r>0&&(n[s-1][4]=l[4]);const v=Pa(n,10+r);!function al(n,r){ul(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const C=v[19];null!==C&&C.detachView(v[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function yl(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&ul(n,r,s,3,null,null),function Jl(n){let r=n[13];if(!r)return ic(n[1],n);for(;r;){let s=null;if(Je(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)Je(r)&&ic(r[1],r),r=r[3];null===r&&(r=n),Je(r)&&ic(r[1],r),s=r&&r[4]}r=s}}(r)}}function ic(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function jr(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof Qs)){const v=s[l+1];if(Array.isArray(v))for(let C=0;C<v.length;C+=2){const x=f[v[C]],L=v[C+1];try{L.call(x)}finally{}}else try{v.call(f)}finally{}}}}(n,r),function cd(n,r){const s=n.cleanup,l=r[7];let f=-1;if(null!==s)for(let v=0;v<s.length-1;v+=2)if("string"==typeof s[v]){const C=s[v+1],x="function"==typeof C?C(r):ai(r[C]),L=l[f=s[v+2]],Y=s[v+3];"boolean"==typeof Y?x.removeEventListener(s[v],L,Y):Y>=0?l[f=Y]():l[f=-Y].unsubscribe(),v+=2}else{const C=l[f=s[v+1]];s[v].call(C)}if(null!==l){for(let v=f+1;v<l.length;v++)(0,l[v])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Ct(r[3])){s!==r[3]&&Da(s,r);const l=r[19];null!==l&&l.detachView(n)}!function xc(n){Zu.delete(n[20])}(r)}}function Fc(n,r,s){return function vl(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const f=n.data[l.directiveStart].encapsulation;if(f===Tt.None||f===Tt.Emulated)return null}return gi(l,s)}(n,r.parent,s)}function Ua(n,r,s,l,f){n.insertBefore(r,s,l,f)}function eu(n,r,s){n.appendChild(r,s)}function Ml(n,r,s,l,f){null!==l?Ua(n,r,s,l,f):eu(n,r,s)}function Vs(n,r){return n.parentNode(r)}function ll(n,r,s){return ea(n,r,s)}let Au,ea=function Rl(n,r,s){return 40&n.type?gi(n,s):null};function El(n,r,s,l){const f=Fc(n,l,r),v=r[11],x=ll(l.parent||r[6],l,r);if(null!=f)if(Array.isArray(s))for(let L=0;L<s.length;L++)Ml(v,f,s[L],x,!1);else Ml(v,f,s,x,!1)}function _o(n,r){if(null!==r){const s=r.type;if(3&s)return gi(r,n);if(4&s)return Xs(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return _o(n,l);{const f=n[r.index];return Ct(f)?Xs(-1,f):ai(f)}}if(32&s)return bu(r,n)()||ai(n[r.index]);{const l=zd(n,r);return null!==l?Array.isArray(l)?l[0]:_o($a(n[16]),l):_o(n,r.next)}}return null}function zd(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Xs(n,r){const s=10+n+1;if(s<r.length){const l=r[s],f=l[1].firstChild;if(null!==f)return _o(l,f)}return r[7]}function Tu(n,r,s,l,f,v,C){for(;null!=s;){const x=l[s.index],L=s.type;if(C&&0===r&&(x&&Bi(ai(x),l),s.flags|=4),64!=(64&s.flags))if(8&L)Tu(n,r,s.child,l,f,v,!1),ol(r,n,f,x,v);else if(32&L){const Y=bu(s,l);let le;for(;le=Y();)ol(r,n,f,le,v);ol(r,n,f,x,v)}else 16&L?Su(n,r,l,s,f,v):ol(r,n,f,x,v);s=C?s.projectionNext:s.next}}function ul(n,r,s,l,f,v){Tu(s,l,n.firstChild,r,f,v,!1)}function Su(n,r,s,l,f,v){const C=s[16],L=C[6].projection[l.projection];if(Array.isArray(L))for(let Y=0;Y<L.length;Y++)ol(r,n,f,L[Y],v);else Tu(n,r,L,C[3],f,v,!0)}function ha(n,r,s){n.setAttribute(r,"style",s)}function ja(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function b(n){Au=n}class Lt{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function uo(n){return n instanceof Lt?n.changingThisBreaksApplicationSecurity:n}const fd=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ds=(()=>((Ds=Ds||{})[Ds.NONE=0]="NONE",Ds[Ds.HTML=1]="HTML",Ds[Ds.STYLE=2]="STYLE",Ds[Ds.SCRIPT=3]="SCRIPT",Ds[Ds.URL=4]="URL",Ds[Ds.RESOURCE_URL=5]="RESOURCE_URL",Ds))();function Qd(n){const r=function ru(){const n=Yt();return n&&n[12]}();return r?r.sanitize(Ds.URL,n)||"":function Mo(n,r){const s=function dd(n){return n instanceof Lt&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?uo(n):function jc(n){return(n=String(n)).match(fd)?n:"unsafe:"+n}(Re(n))}const iu=new Ti("ENVIRONMENT_INITIALIZER"),su=new Ti("INJECTOR",-1),Uh=new Ti("INJECTOR_DEF_TYPES");class xf{get(r,s=w){if(s===w){const l=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw l.name="NullInjectorError",l}return s}}function jp(...n){return{\u0275providers:Mf(0,n)}}function Mf(n,...r){const s=[],l=new Set;let f;return As(r,v=>{const C=v;Pl(C,s,[],l)&&(f||(f=[]),f.push(C))}),void 0!==f&&cc(f,s),s}function cc(n,r){for(let s=0;s<n.length;s++){const{providers:f}=n[s];As(f,v=>{r.push(v)})}}function Pl(n,r,s,l){if(!(n=ie(n)))return!1;let f=null,v=Wn(n);const C=!v&&rt(n);if(v||C){if(C&&!C.standalone)return!1;f=n}else{const L=n.ngModule;if(v=Wn(L),!v)return!1;f=L}const x=l.has(f);if(C){if(x)return!1;if(l.add(f),C.dependencies){const L="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const Y of L)Pl(Y,r,s,l)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let Y;l.add(f);try{As(v.imports,le=>{Pl(le,r,s,l)&&(Y||(Y=[]),Y.push(le))})}finally{}void 0!==Y&&cc(Y,r)}if(!x){const Y=es(f)||(()=>new f);r.push({provide:f,useFactory:Y,deps:jn},{provide:Uh,useValue:f,multi:!0},{provide:iu,useValue:()=>fe(f),multi:!0})}const L=v.providers;null==L||x||As(L,le=>{r.push(le)})}}return f!==n&&void 0!==n.providers}const jh=he({provide:String,useValue:he});function hc(n){return null!==n&&"object"==typeof n&&jh in n}function Fl(n){return"function"==typeof n}const vd=new Ti("Set Injector scope."),ou={},_d={};let fc;function Ed(){return void 0===fc&&(fc=new xf),fc}class Ru{}class fa extends Ru{constructor(r,s,l,f){super(),this.parent=s,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ou(r,C=>this.processProvider(C)),this.records.set(su,Za(void 0,this)),f.has("environment")&&this.records.set(Ru,Za(void 0,this));const v=this.records.get(vd);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Uh.multi,jn,zt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=U(this),l=tr(void 0);try{return r()}finally{U(s),tr(l)}}get(r,s=w,l=zt.Default){this.assertNotDestroyed();const f=U(this),v=tr(void 0);try{if(!(l&zt.SkipSelf)){let x=this.records.get(r);if(void 0===x){const L=function pc(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ti}(r)&&Nt(r);x=L&&this.injectableDefInScope(L)?Za(Jd(r),ou):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(l&zt.Self?Ed():this.parent).get(r,s=l&zt.Optional&&s===w?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[j]=C[j]||[]).unshift(pe(r)),f)throw C;return function gr(n,r,s,l){const f=n[j];throw r[It]&&f.unshift(r[It]),n.message=function xr(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=pe(r);if(Array.isArray(r))f=r.map(pe).join(" -> ");else if("object"==typeof r){let v=[];for(let C in r)if(r.hasOwnProperty(C)){let x=r[C];v.push(C+":"+("string"==typeof x?JSON.stringify(x):pe(x)))}f=`{${v.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${n.replace(Ae,"\n  ")}`}("\n"+n.message,f,s,l),n.ngTokenPath=f,n[j]=null,n}(C,r,"R3InjectorError",this.source)}throw C}finally{tr(v),U(f)}}resolveInjectorInitializers(){const r=U(this),s=tr(void 0);try{const l=this.get(iu.multi,jn,zt.Self);for(const f of l)f()}finally{U(r),tr(s)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(pe(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new st(205,!1)}processProvider(r){let s=Fl(r=ie(r))?r:ie(r&&r.provide);const l=function Id(n){return hc(n)?Za(void 0,n.useValue):Za(Hh(n),ou)}(r);if(Fl(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=Za(void 0,ou,!0),f.factory=()=>Ht(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,l)}hydrate(r,s){return s.value===ou&&(s.value=_d,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Of(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ie(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function Jd(n){const r=Nt(n),s=null!==r?r.factory:es(n);if(null!==s)return s;if(n instanceof Ti)throw new st(204,!1);if(n instanceof Function)return function eh(n){const r=n.length;if(r>0)throw Fa(r,"?"),new st(204,!1);const s=function Qn(n){const r=n&&(n[ur]||n[or]);if(r){const s=function Rn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new st(204,!1)}function Hh(n,r,s){let l;if(Fl(n)){const f=ie(n);return es(f)||Jd(f)}if(hc(n))l=()=>ie(n.useValue);else if(function yd(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Ht(n.deps||[]));else if(function Rf(n){return!(!n||!n.useExisting)}(n))l=()=>fe(ie(n.useExisting));else{const f=ie(n&&(n.useClass||n.provide));if(!function Wc(n){return!!n.deps}(n))return es(f)||Jd(f);l=()=>new f(...Ht(n.deps))}return l}function Za(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Nf(n){return!!n.\u0275providers}function Ou(n,r){for(const s of n)Array.isArray(s)?Ou(s,r):Nf(s)?Ou(s.\u0275providers,r):r(s)}class h{}class D{resolveComponentFactory(r){throw function u(n){const r=Error(`No component factory found for ${pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let P=(()=>{class n{}return n.NULL=new D,n})();function W(){return se(Li(),Yt())}function se(n,r){return new xe(gi(n,r))}let xe=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=W,n})();function We(n){return n instanceof xe?n.nativeElement:n}class Bt{}let qt=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Mn(){const n=Yt(),s=Rr(Li().index,n);return(Je(s)?s:n)[11]}(),n})(),dr=(()=>{class n{}return n.\u0275prov=ht({token:n,providedIn:"root",factory:()=>null}),n})();class Si{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Oo=new Si("14.2.12"),Qa={};function wd(n){return n.ngOriginalError}class Eo{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&wd(r);for(;s&&wd(s);)s=wd(s);return s||null}}function Nu(n){return n instanceof Function?n():n}function qp(n,r,s){let l=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=r.length;if(f+v===l||n.charCodeAt(f+v)<=32)return f}s=f+1}}const Yp="ng-template";function pm(n,r,s){let l=0;for(;l<n.length;){let f=n[l++];if(s&&"class"===f){if(f=n[l],-1!==qp(f.toLowerCase(),r,0))return!0}else if(1===f){for(;l<n.length&&"string"==typeof(f=n[l++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Vf(n){return 4===n.type&&n.value!==Yp}function ov(n,r,s){return r===(4!==n.type||s?n.value:Yp)}function gm(n,r,s){let l=4;const f=n.attrs||[],v=function rh(n){for(let r=0;r<n.length;r++)if(fo(n[r]))return r;return n.length}(f);let C=!1;for(let x=0;x<r.length;x++){const L=r[x];if("number"!=typeof L){if(!C)if(4&l){if(l=2|1&l,""!==L&&!ov(n,L,s)||""===L&&1===r.length){if(au(l))return!1;C=!0}}else{const Y=8&l?L:r[++x];if(8&l&&null!==n.attrs){if(!pm(n.attrs,Y,s)){if(au(l))return!1;C=!0}continue}const Te=mm(8&l?"class":L,f,Vf(n),s);if(-1===Te){if(au(l))return!1;C=!0;continue}if(""!==Y){let it;it=Te>v?"":f[Te+1].toLowerCase();const At=8&l?it:null;if(At&&-1!==qp(At,Y,0)||2&l&&Y!==it){if(au(l))return!1;C=!0}}}}else{if(!C&&!au(l)&&!au(L))return!1;if(C&&au(L))continue;C=!1,l=L|1&l}}return au(l)||C}function au(n){return 0==(1&n)}function mm(n,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let v=!1;for(;f<r.length;){const C=r[f];if(C===n)return f;if(3===C||6===C)v=!0;else{if(1===C||2===C){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=v?1:2}return-1}return function Kp(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function ym(n,r,s=!1){for(let l=0;l<r.length;l++)if(gm(n,r[l],s))return!0;return!1}function Bf(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let f=0;f<n.length;f++)if(n[f]!==l[f])continue e;return!0}}return!1}function Zp(n,r){return n?":not("+r.trim()+")":r}function vm(n){let r=n[0],s=1,l=2,f="",v=!1;for(;s<n.length;){let C=n[s];if("string"==typeof C)if(2&l){const x=n[++s];f+="["+C+(x.length>0?'="'+x+'"':"")+"]"}else 8&l?f+="."+C:4&l&&(f+=" "+C);else""!==f&&!au(C)&&(r+=Zp(v,f),f=""),l=C,v=v||!au(l);s++}return""!==f&&(r+=Zp(v,f)),r}const qr={};function Em(n){$f(br(),Yt(),Pe()+n,!1)}function $f(n,r,s,l){if(!l)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&xi(r,v,s)}else{const v=n.preOrderHooks;null!==v&&ms(r,v,0,s)}Dt(s)}function tg(n,r=null,s=null,l){const f=bm(n,r,s,l);return f.resolveInjectorInitializers(),f}function bm(n,r=null,s=null,l,f=new Set){const v=[s||jn,jp(n)];return l=l||("object"==typeof n?void 0:pe(n)),new fa(v,r||Ed(),l||null,f)}let qc=(()=>{class n{static create(s,l){var f;if(Array.isArray(s))return tg({name:""},l,s,"");{const v=null!==(f=s.name)&&void 0!==f?f:"";return tg({name:v},s.parent,s.providers,v)}}}return n.THROW_IF_NOT_FOUND=w,n.NULL=new xf,n.\u0275prov=ht({token:n,providedIn:"any",factory:()=>fe(su)}),n.__NG_ELEMENT_ID__=-1,n})();function oh(n,r=zt.Default){const s=Yt();return null===s?fe(n,r):Wo(Li(),s,ie(n),r)}function qf(){throw new Error("invalid")}function ah(n,r){return n<<17|r<<2}function Ll(n){return n>>17&32767}function dg(n){return 2|n}function gc(n){return(131068&n)>>2}function Yf(n,r){return-131069&n|r<<2}function fg(n){return 1|n}function ep(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const f=s[l],v=s[l+1];if(-1!==v){const C=n.data[v];bs(f),C.contentQueries(2,r[v],v)}}}function ef(n,r,s,l,f,v,C,x,L,Y,le){const Te=r.blueprint.slice();return Te[0]=f,Te[2]=76|l,(null!==le||n&&1024&n[2])&&(Te[2]|=1024),Ri(Te),Te[3]=Te[15]=n,Te[8]=s,Te[10]=C||n&&n[10],Te[11]=x||n&&n[11],Te[12]=L||n&&n[12]||null,Te[9]=Y||n&&n[9]||null,Te[6]=v,Te[20]=function Ac(){return sd++}(),Te[21]=le,Te[16]=2==r.type?n[16]:Te,Te}function Kc(n,r,s,l,f){let v=n.data[r];if(null===v)v=function tp(n,r,s,l,f){const v=ko(),C=Ss(),L=n.data[r]=function yv(n,r,s,l,f,v){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?v:v&&v.parent,s,r,l,f);return null===n.firstChild&&(n.firstChild=L),null!==v&&(C?null==v.child&&null!==L.parent&&(v.child=L):null===v.next&&(v.next=L)),L}(n,r,s,l,f),function mn(){return Kn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=s,v.value=l,v.attrs=f;const C=function Gi(){const n=Kn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();v.injectorIndex=null===C?-1:C.injectorIndex}return Is(v,!0),v}function dh(n,r,s,l){if(0===s)return-1;const f=r.length;for(let v=0;v<s;v++)r.push(l),n.blueprint.push(l),n.data.push(null);return f}function tf(n,r,s){Co(r);try{const l=n.viewQuery;null!==l&&fp(1,l,s);const f=n.template;null!==f&&rp(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ep(n,r),n.staticViewQueries&&fp(2,n.viewQuery,s);const v=n.components;null!==v&&function Ig(n,r){for(let s=0;s<r.length;s++)qm(n,r[s])}(r,v)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,Z()}}function np(n,r,s,l){const f=r[2];if(128!=(128&f)){Co(r);try{Ri(r),function oe(n){return Kn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&rp(n,r,s,2,l);const C=3==(3&f);if(C){const Y=n.preOrderCheckHooks;null!==Y&&xi(r,Y,null)}else{const Y=n.preOrderHooks;null!==Y&&ms(r,Y,0,null),to(r,0)}if(function Mg(n){for(let r=Cu(n);null!==r;r=Du(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const f=s[l],v=f[3];0==(512&f[2])&&Vr(v,1),f[2]|=512}}}(r),function Dv(n){for(let r=Cu(n);null!==r;r=Du(r))for(let s=10;s<r.length;s++){const l=r[s],f=l[1];Ts(l)&&np(f,l,f.template,l[8])}}(r),null!==n.contentQueries&&ep(n,r),C){const Y=n.contentCheckHooks;null!==Y&&xi(r,Y)}else{const Y=n.contentHooks;null!==Y&&ms(r,Y,1),to(r,1)}!function gv(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)Dt(~f);else{const v=f,C=s[++l],x=s[++l];ti(C,v),x(2,r[v])}}}finally{Dt(-1)}}(n,r);const x=n.components;null!==x&&function mv(n,r){for(let s=0;s<r.length;s++)Rg(n,r[s])}(r,x);const L=n.viewQuery;if(null!==L&&fp(2,L,l),C){const Y=n.viewCheckHooks;null!==Y&&xi(r,Y)}else{const Y=n.viewHooks;null!==Y&&ms(r,Y,2),to(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Vr(r[3],-1))}finally{Z()}}}function rp(n,r,s,l,f){const v=Pe(),C=2&l;try{Dt(-1),C&&r.length>22&&$f(n,r,22,!1),s(l,f)}finally{Dt(v)}}function jm(n,r,s){if(_e(r)){const f=r.directiveEnd;for(let v=r.directiveStart;v<f;v++){const C=n.data[v];C.contentQueries&&C.contentQueries(1,s[v],v)}}}function nf(n,r,s){!ks()||(function Sg(n,r,s,l){const f=s.directiveStart,v=s.directiveEnd;n.firstCreatePass||zs(s,r),Bi(l,r);const C=s.initialInputs;for(let x=f;x<v;x++){const L=n.data[x],Y=Ot(L);Y&&wv(r,s,L);const le=Na(r,n,x,s);Bi(le,r),null!==C&&Ag(0,x-f,le,L,0,C),Y&&(Rr(s.index,r)[8]=le)}}(n,r,s,gi(s,r)),128==(128&s.flags)&&function Ev(n,r,s){const l=s.directiveStart,f=s.directiveEnd,v=s.index,C=function Ai(){return Kn.lFrame.currentDirectiveIndex}();try{Dt(v);for(let x=l;x<f;x++){const L=n.data[x],Y=r[x];ci(x),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&up(L,Y)}}finally{Dt(-1),ci(C)}}(n,r,s))}function wg(n,r,s=gi){const l=r.localNames;if(null!==l){let f=r.index+1;for(let v=0;v<l.length;v+=2){const C=l[v+1],x=-1===C?s(r,n):n[C];n[f++]=x}}}function ip(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=rf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function rf(n,r,s,l,f,v,C,x,L,Y){const le=22+l,Te=le+f,it=function bg(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:qr);return s}(le,Te),At="function"==typeof Y?Y():Y;return it[1]={type:n,blueprint:it,template:s,queries:null,viewQuery:x,declTNode:r,data:it.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Te,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:L,consts:At,incompleteFirstPass:!1}}function sp(n,r,s,l){const f=Og(r);null===s?f.push(l):(f.push(s),n.firstCreatePass&&Bs(n).push(l,f.length-1))}function op(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const f=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,f):s[l]=[r,f]}return s}function Fu(n,r){const l=r.directiveEnd,f=n.data,v=r.attrs,C=[];let x=null,L=null;for(let Y=r.directiveStart;Y<l;Y++){const le=f[Y],Te=le.inputs,it=null===v||Vf(r)?null:bv(Te,v);C.push(it),x=op(Te,Y,x),L=op(le.outputs,Y,L)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=C,r.inputs=x,r.outputs=L}function ap(n,r){const s=Rr(r,n);16&s[2]||(s[2]|=32)}function Tg(n,r,s,l){let f=!1;if(ks()){const v=function Gm(n,r,s){const l=n.directiveRegistry;let f=null;if(l)for(let v=0;v<l.length;v++){const C=l[v];ym(s,C.selectors,!1)&&(f||(f=[]),Ni(zs(s,r),n,C.type),Ot(C)?(cp(n,s),f.unshift(C)):f.push(C))}return f}(n,r,s),C=null===l?null:{"":-1};if(null!==v){f=!0,zm(s,n.data.length,v.length);for(let le=0;le<v.length;le++){const Te=v[le];Te.providersResolver&&Te.providersResolver(Te)}let x=!1,L=!1,Y=dh(n,r,v.length,null);for(let le=0;le<v.length;le++){const Te=v[le];s.mergedAttrs=po(s.mergedAttrs,Te.hostAttrs),dp(n,s,r,Y,Te),Iv(Y,Te,C),null!==Te.contentQueries&&(s.flags|=8),(null!==Te.hostBindings||null!==Te.hostAttrs||0!==Te.hostVars)&&(s.flags|=128);const it=Te.type.prototype;!x&&(it.ngOnChanges||it.ngOnInit||it.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),x=!0),!L&&(it.ngOnChanges||it.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),L=!0),Y++}Fu(n,s)}C&&function Wm(n,r,s){if(r){const l=n.localNames=[];for(let f=0;f<r.length;f+=2){const v=s[r[f+1]];if(null==v)throw new st(-301,!1);l.push(r[f],v)}}}(s,l,C)}return s.mergedAttrs=po(s.mergedAttrs,s.attrs),f}function lp(n,r,s,l,f,v){const C=v.hostBindings;if(C){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const L=~r.index;(function _v(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=L&&x.push(L),x.push(l,f,C)}}function up(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function cp(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function Iv(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;Ot(r)&&(s[""]=n)}}function zm(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function dp(n,r,s,l,f){n.data[l]=f;const v=f.factory||(f.factory=es(f.type)),C=new Qs(v,Ot(f),oh);n.blueprint[l]=C,s[l]=C,lp(n,r,0,l,dh(n,s,f.hostVars,qr),f)}function wv(n,r,s){const l=gi(r,n),f=ip(s),v=n[10],C=Dd(n,ef(n,f,null,s.onPush?32:16,l,r,v,v.createRenderer(l,s),null,null,null));n[r.index]=C}function Vl(n,r,s,l,f,v){const C=gi(n,r);!function af(n,r,s,l,f,v,C){if(null==v)n.removeAttribute(r,f,s);else{const x=null==C?Re(v):C(v,l||"",f);n.setAttribute(r,f,x,s)}}(r[11],C,v,n.value,s,l,f)}function Ag(n,r,s,l,f,v){const C=v[r];if(null!==C){const x=l.setInput;for(let L=0;L<C.length;){const Y=C[L++],le=C[L++],Te=C[L++];null!==x?l.setInput(s,Te,Y,le):s[le]=Te}}}function bv(n,r){let s=null,l=0;for(;l<r.length;){const f=r[l];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[l+1])),l+=2}else l+=2;else l+=4}return s}function xg(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function Rg(n,r){const s=Rr(r,n);if(Ts(s)){const l=s[1];48&s[2]?np(l,s,l.template,s[8]):s[5]>0&&hp(s)}}function hp(n){for(let l=Cu(n);null!==l;l=Du(l))for(let f=10;f<l.length;f++){const v=l[f];if(Ts(v))if(512&v[2]){const C=v[1];np(C,v,C.template,v[8])}else v[5]>0&&hp(v)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const f=Rr(s[l],n);Ts(f)&&f[5]>0&&hp(f)}}function qm(n,r){const s=Rr(r,n),l=s[1];(function Ym(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),tf(l,s,s[8])}function Dd(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function _i(n){for(;n;){n[2]|=32;const r=$a(n);if(jt(n)&&!r)return n;n=r}return null}function lf(n,r,s,l=!0){const f=r[10];f.begin&&f.begin();try{np(n,r,n.template,s)}catch(C){throw l&&lu(r,C),C}finally{f.end&&f.end()}}function fp(n,r,s){bs(0),r(n,s)}function Og(n){return n[7]||(n[7]=[])}function Bs(n){return n.cleanup||(n.cleanup=[])}function lu(n,r){const s=n[9],l=s?s.get(Eo,null):null;l&&l.handleError(r)}function gp(n,r,s,l,f){for(let v=0;v<s.length;){const C=s[v++],x=s[v++],L=r[C],Y=n.data[C];null!==Y.setInput?Y.setInput(L,f,l,x):L[x]=f}}function Td(n,r,s){let l=s?n.styles:null,f=s?n.classes:null,v=0;if(null!==r)for(let C=0;C<r.length;C++){const x=r[C];"number"==typeof x?v=x:1==v?f=be(f,x):2==v&&(l=be(l,x+": "+r[++C]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=f:n.classesWithoutHost=f}function uf(n,r,s,l,f=!1){for(;null!==s;){const v=r[s.index];if(null!==v&&l.push(ai(v)),Ct(v))for(let x=10;x<v.length;x++){const L=v[x],Y=L[1].firstChild;null!==Y&&uf(L[1],L,Y,l)}const C=s.type;if(8&C)uf(n,r,s.child,l);else if(32&C){const x=bu(s,r);let L;for(;L=x();)l.push(L)}else if(16&C){const x=zd(r,s);if(Array.isArray(x))l.push(...x);else{const L=$a(r[16]);uf(L[1],L,x,l,!0)}}s=f?s.projectionNext:s.next}return l}class Sd{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return uf(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Ct(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(rc(r,l),Pa(s,l))}this._attachedToViewContainer=!1}yl(this._lView[1],this._lView)}onDestroy(r){sp(this._lView[1],this._lView,null,r)}markForCheck(){_i(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){lf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new st(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ca(n,r){ul(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new st(902,!1);this._appRef=r}}class Km extends Sd{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;lf(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class hh extends P{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=rt(r);return new cf(s,this.ngModule)}}function Zm(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class Sv{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){const f=this.injector.get(r,Qa,l);return f!==Qa||s===Qa?f:this.parentInjector.get(r,s,l)}}class cf extends h{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function _m(n){return n.map(vm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Zm(this.componentDef.inputs)}get outputs(){return Zm(this.componentDef.outputs)}create(r,s,l,f){let v=(f=f||this.ngModule)instanceof Ru?f:null==f?void 0:f.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const C=v?new Sv(r,v):r,x=C.get(Bt,null);if(null===x)throw new st(407,!1);const L=C.get(dr,null),Y=x.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",Te=l?function Hm(n,r,s){return n.selectRootElement(r,s===Tt.ShadowDom)}(Y,l,this.componentDef.encapsulation):nc(Y,le,function t0(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(le)),it=this.componentDef.onPush?288:272,At=rf(0,null,null,1,0,null,null,null,null,null),Kt=ef(null,At,null,it,null,null,x,Y,L,C,null);let yn,kn;Co(Kt);try{const sr=function Ng(n,r,s,l,f,v){const C=s[1];s[22]=n;const L=Kc(C,22,2,"#host",null),Y=L.mergedAttrs=r.hostAttrs;null!==Y&&(Td(L,Y,!0),null!==n&&(Ra(f,n,Y),null!==L.classes&&ja(f,n,L.classes),null!==L.styles&&ha(f,n,L.styles)));const le=l.createRenderer(n,r),Te=ef(s,ip(r),null,r.onPush?32:16,s[22],L,l,le,v||null,null,null);return C.firstCreatePass&&(Ni(zs(L,s),C,r.type),cp(C,L),zm(L,s.length,1)),Dd(s,Te),s[22]=Te}(Te,this.componentDef,Kt,x,Y);if(Te)if(l)Ra(Y,Te,["ng-version",Oo.full]);else{const{attrs:Mr,classes:nn}=function av(n){const r=[],s=[];let l=1,f=2;for(;l<n.length;){let v=n[l];if("string"==typeof v)2===f?""!==v&&r.push(v,n[++l]):8===f&&s.push(v);else{if(!au(f))break;f=v}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Mr&&Ra(Y,Te,Mr),nn&&nn.length>0&&ja(Y,Te,nn.join(" "))}if(kn=_s(At,22),void 0!==s){const Mr=kn.projection=[];for(let nn=0;nn<this.ngContentSelectors.length;nn++){const Ur=s[nn];Mr.push(null!=Ur?Array.from(Ur):null)}}yn=function Qm(n,r,s,l){const f=s[1],v=function Dg(n,r,s){const l=Li();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),dp(n,l,r,dh(n,r,1,null),s),Fu(n,l));const f=Na(r,n,l.directiveStart,l);Bi(f,r);const v=gi(l,r);return v&&Bi(v,r),f}(f,s,r);if(n[8]=s[8]=v,null!==l)for(const x of l)x(v,r);if(r.contentQueries){const x=Li();r.contentQueries(1,v,x.directiveStart)}const C=Li();return!f.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Dt(C.index),lp(s[1],C,0,C.directiveStart,C.directiveEnd,r),up(r,v)),v}(sr,this.componentDef,Kt,[kg]),tf(At,Kt,null)}finally{Z()}return new xv(this.componentType,yn,se(kn,Kt),Kt,kn)}}class xv extends class kf{}{constructor(r,s,l,f,v){super(),this.location=l,this._rootLView=f,this._tNode=v,this.instance=s,this.hostView=this.changeDetectorRef=new Km(f),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[r])){const v=this._rootLView;gp(v[1],v,f,r,s),ap(v,this._tNode.index)}}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function kg(){const n=Li();ii(Yt()[1],n)}function df(n){let r=function mp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let f;if(Ot(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new st(903,!1);f=r.\u0275dir}if(f){if(s){l.push(f);const C=n;C.inputs=hf(n.inputs),C.declaredInputs=hf(n.declaredInputs),C.outputs=hf(n.outputs);const x=f.hostBindings;x&&Pg(n,x);const L=f.viewQuery,Y=f.contentQueries;if(L&&Xm(n,L),Y&&vp(n,Y),Ee(n.inputs,f.inputs),Ee(n.declaredInputs,f.declaredInputs),Ee(n.outputs,f.outputs),Ot(f)&&f.data.animation){const le=n.data;le.animation=(le.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let C=0;C<v.length;C++){const x=v[C];x&&x.ngInherit&&x(n),x===df&&(s=!1)}}r=Object.getPrototypeOf(r)}!function yp(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=r+=f.hostVars,f.hostAttrs=po(f.hostAttrs,s=po(s,f.hostAttrs))}}(l)}function hf(n){return n===Or?{}:n===jn?[]:n}function Xm(n,r){const s=n.viewQuery;n.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function vp(n,r){const s=n.contentQueries;n.contentQueries=s?(l,f,v)=>{r(l,f,v),s(l,f,v)}:r}function Pg(n,r){const s=n.hostBindings;n.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}let ph=null;function Ad(){if(!ph){const n=yr.Symbol;if(n&&n.iterator)ph=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(ph=l)}}}return ph}function ff(n){return!!_p(n)&&(Array.isArray(n)||!(n instanceof Map)&&Ad()in n)}function _p(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ga(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Rs(n,r,s,l){const f=Yt();return Ga(f,ut(),r)&&(br(),Vl(Pt(),f,n,r,s,l)),Rs}function sy(n,r,s,l,f,v,C,x){const L=Yt(),Y=br(),le=n+22,Te=Y.firstCreatePass?function Ip(n,r,s,l,f,v,C,x,L){const Y=r.consts,le=Kc(r,n,4,C||null,Es(Y,x));Tg(r,s,le,Es(Y,L)),ii(r,le);const Te=le.tViews=rf(2,le,l,f,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,le),Te.queries=r.queries.embeddedTView(le)),le}(le,Y,L,r,s,l,f,v,C):Y.data[le];Is(Te,!1);const it=L[11].createComment("");El(Y,L,it,Te),Bi(it,L),Dd(L,L[le]=xg(it,L,it,Te)),yt(Te)&&nf(Y,L,Te),null!=C&&wg(L,Te,x)}function wp(n,r,s){const l=Yt();return Ga(l,ut(),r)&&function bl(n,r,s,l,f,v,C,x){const L=gi(r,s);let le,Y=r.inputs;!x&&null!=Y&&(le=Y[l])?(gp(n,s,le,l,f),Ye(r)&&ap(s,r.index)):3&r.type&&(l=function Cg(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=C?C(f,r.value||"",l):f,v.setProperty(L,l,f))}(br(),Pt(),l,n,r,l[11],s,!1),wp}function _h(n,r,s,l,f){const C=f?"class":"style";gp(n,s,r.inputs[C],C,l)}function Bu(n,r,s,l){const f=Yt(),v=br(),C=22+n,x=f[11],L=f[C]=nc(x,r,function $r(){return Kn.lFrame.currentNamespace}()),Y=v.firstCreatePass?function Fv(n,r,s,l,f,v,C){const x=r.consts,Y=Kc(r,n,2,f,Es(x,v));return Tg(r,s,Y,Es(x,C)),null!==Y.attrs&&Td(Y,Y.attrs,!1),null!==Y.mergedAttrs&&Td(Y,Y.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Y),Y}(C,v,f,0,r,s,l):v.data[C];Is(Y,!0);const le=Y.mergedAttrs;null!==le&&Ra(x,L,le);const Te=Y.classes;null!==Te&&ja(x,L,Te);const it=Y.styles;return null!==it&&ha(x,L,it),64!=(64&Y.flags)&&El(v,f,L,Y),0===function Ks(){return Kn.lFrame.elementDepthCount}()&&Bi(L,f),function Ho(){Kn.lFrame.elementDepthCount++}(),yt(Y)&&(nf(v,f,Y),jm(v,Y,f)),null!==l&&wg(f,Y),Bu}function Od(){let n=Li();Ss()?G():(n=n.parent,Is(n,!1));const r=n;!function ga(){Kn.lFrame.elementDepthCount--}();const s=br();return s.firstCreatePass&&(ii(s,n),_e(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Dl(n){return 0!=(16&n.flags)}(r)&&_h(s,r,Yt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Ul(n){return 0!=(32&n.flags)}(r)&&_h(s,r,Yt(),r.stylesWithoutHost,!1),Od}function Nd(n,r,s,l){return Bu(n,r,s,l),Od(),Nd}function yf(n,r,s){const l=Yt(),f=br(),v=n+22,C=f.firstCreatePass?function ay(n,r,s,l,f){const v=r.consts,C=Es(v,l),x=Kc(r,n,8,"ng-container",C);return null!==C&&Td(x,C,!0),Tg(r,s,x,Es(v,f)),null!==r.queries&&r.queries.elementStart(r,x),x}(v,f,l,r,s):f.data[v];Is(C,!0);const x=l[v]=l[11].createComment("");return El(f,l,x,C),Bi(x,l),yt(C)&&(nf(f,l,C),jm(f,C,l)),null!=s&&wg(l,C),yf}function Vg(){let n=Li();const r=br();return Ss()?G():(n=n.parent,Is(n,!1)),r.firstCreatePass&&(ii(r,n),_e(n)&&r.queries.elementEnd(n)),Vg}function Bg(n,r,s){return yf(n,r,s),Vg(),Bg}function ly(){return Yt()}function vf(n){return!!n&&"function"==typeof n.then}function bp(n){return!!n&&"function"==typeof n.subscribe}const $g=bp;function _c(n,r,s,l){const f=Yt(),v=br(),C=Li();return function Cp(n,r,s,l,f,v,C,x){const L=yt(l),le=n.firstCreatePass&&Bs(n),Te=r[8],it=Og(r);let At=!0;if(3&l.type||x){const kn=gi(l,r),sr=x?x(kn):kn,Mr=it.length,nn=x?Ki=>x(ai(Ki[l.index])):l.index;let Ur=null;if(!x&&L&&(Ur=function uy(n,r,s,l){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const C=f[v];if(C===s&&f[v+1]===l){const x=r[7],L=f[v+2];return x.length>L?x[L]:null}"string"==typeof C&&(v+=2)}return null}(n,r,f,l.index)),null!==Ur)(Ur.__ngLastListenerFn__||Ur).__ngNextListenerFn__=v,Ur.__ngLastListenerFn__=v,At=!1;else{v=cy(l,r,Te,v,!1);const Ki=s.listen(sr,f,v);it.push(v,Ki),le&&le.push(f,nn,Mr,Mr+1)}}else v=cy(l,r,Te,v,!1);const Kt=l.outputs;let yn;if(At&&null!==Kt&&(yn=Kt[f])){const kn=yn.length;if(kn)for(let sr=0;sr<kn;sr+=2){const wo=r[yn[sr]][yn[sr+1]].subscribe(v),Df=it.length;it.push(v,wo),le&&le.push(f,l.index,Df,-(Df+1))}}}(v,f,f[11],C,n,r,0,l),_c}function Dp(n,r,s,l){try{return!1!==s(l)}catch(f){return lu(n,f),!1}}function cy(n,r,s,l,f){return function v(C){if(C===Function)return l;_i(2&n.flags?Rr(n.index,r):r);let L=Dp(r,0,l,C),Y=v.__ngNextListenerFn__;for(;Y;)L=Dp(r,0,Y,C)&&L,Y=Y.__ngNextListenerFn__;return f&&!1===L&&(C.preventDefault(),C.returnValue=!1),L}}function _f(n=1){return function $(n){return(Kn.lFrame.contextLView=function re(n,r){for(;n>0;)r=r[15],n--;return r}(n,Kn.lFrame.contextLView))[8]}(n)}function Tp(n,r){let s=null;const l=function nh(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const v=r[f];if("*"!==v){if(null===l?ym(n,v,!0):Bf(l,v))return f}else s=f}return s}function jg(n){const r=Yt()[16][6];if(!r.projection){const l=r.projection=Fa(n?n.length:1,null),f=l.slice();let v=r.child;for(;null!==v;){const C=n?Tp(v,n):0;null!==C&&(f[C]?f[C].projectionNext=v:l[C]=v,f[C]=v),v=v.next}}}function Eh(n,r=0,s){const l=Yt(),f=br(),v=Kc(f,22+n,16,null,s||null);null===v.projection&&(v.projection=r),G(),64!=(64&v.flags)&&function Ms(n,r,s){Su(r[11],0,r,s,Fc(n,s,r),ll(s.parent||r[6],s,r))}(f,l,v)}function yy(n,r,s,l,f){const v=n[s+1],C=null===r;let x=l?Ll(v):gc(v),L=!1;for(;0!==x&&(!1===L||C);){const le=n[x+1];Vv(n[x],r)&&(L=!0,n[x+1]=l?fg(le):dg(le)),x=l?Ll(le):gc(le)}L&&(n[s+1]=l?dg(v):fg(v))}function Vv(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Xr(n,r)>=0}function Yg(n,r){return function cu(n,r,s,l){const f=Yt(),v=br(),C=function Xt(n){const r=Kn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);v.firstUpdatePass&&function Zg(n,r,s,l){const f=n.data;if(null===f[s+1]){const v=f[Pe()],C=function Kg(n,r){return r>=n.expandoStartIndex}(n,s);(function wy(n,r){return 0!=(n.flags&(r?16:32))})(v,l)&&null===r&&!C&&(r=!1),r=function Hv(n,r,s,l){const f=function ns(n){const r=Kn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=Pd(s=Zc(null,n,r,s,l),r.attrs,l),v=null);else{const C=r.directiveStylingLast;if(-1===C||n[C]!==f)if(s=Zc(f,n,r,s,l),null===v){let L=function Gv(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==gc(l))return n[Ll(l)]}(n,r,l);void 0!==L&&Array.isArray(L)&&(L=Zc(null,n,r,L[1],l),L=Pd(L,r.attrs,l),function Iy(n,r,s,l){n[Ll(s?r.classBindings:r.styleBindings)]=l}(n,r,l,L))}else v=function Wv(n,r,s){let l;const f=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<f;v++)l=Pd(l,n[v].hostAttrs,s);return Pd(l,r.attrs,s)}(n,r,l)}return void 0!==v&&(l?r.residualClasses=v:r.residualStyles=v),s}(f,v,r,l),function Lv(n,r,s,l,f,v){let C=v?r.classBindings:r.styleBindings,x=Ll(C),L=gc(C);n[l]=s;let le,Y=!1;if(Array.isArray(s)){const Te=s;le=Te[1],(null===le||Xr(Te,le)>0)&&(Y=!0)}else le=s;if(f)if(0!==L){const it=Ll(n[x+1]);n[l+1]=ah(it,x),0!==it&&(n[it+1]=Yf(n[it+1],l)),n[x+1]=function cg(n,r){return 131071&n|r<<17}(n[x+1],l)}else n[l+1]=ah(x,0),0!==x&&(n[x+1]=Yf(n[x+1],l)),x=l;else n[l+1]=ah(L,0),0===x?x=l:n[L+1]=Yf(n[L+1],l),L=l;Y&&(n[l+1]=dg(n[l+1])),yy(n,le,l,!0),yy(n,le,l,!1),function my(n,r,s,l,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&Xr(v,r)>=0&&(s[l+1]=fg(s[l+1]))}(r,le,n,l,v),C=ah(x,L),v?r.classBindings=C:r.styleBindings=C}(f,v,r,s,C,l)}}(v,n,C,l),r!==qr&&Ga(f,C,r)&&function Qg(n,r,s,l,f,v,C,x){if(!(3&r.type))return;const L=n.data,Y=L[x+1];Ap(function hg(n){return 1==(1&n)}(Y)?bc(L,r,s,f,gc(Y),C):void 0)||(Ap(v)||function bd(n){return 2==(2&n)}(Y)&&(v=bc(L,null,s,f,x,C)),function Il(n,r,s,l,f){if(r)f?n.addClass(s,l):n.removeClass(s,l);else{let v=-1===l.indexOf("-")?void 0:Jo.DashCase;null==f?n.removeStyle(s,l,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=Jo.Important),n.setStyle(s,l,f,v))}}(l,C,_r(Pe(),s),f,v))}(v,v.data[Pe()],f,f[11],n,f[C+1]=function Yv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=pe(uo(n)))),n}(r,s),l,C)}(n,r,null,!0),Yg}function Zc(n,r,s,l,f){let v=null;const C=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<C&&(v=r[x],l=Pd(l,v.hostAttrs,f),v!==n);)x++;return null!==n&&(s.directiveStylingLast=x),l}function Pd(n,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?f=C:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),xs(n,C,!!s||r[++v]))}return void 0===n?null:n}function bc(n,r,s,l,f,v){const C=null===r;let x;for(;f>0;){const L=n[f],Y=Array.isArray(L),le=Y?L[1]:L,Te=null===le;let it=s[f+1];it===qr&&(it=Te?jn:void 0);let At=Te?cs(it,l):le===l?it:void 0;if(Y&&!Ap(At)&&(At=cs(L,l)),Ap(At)&&(x=At,C))return x;const Kt=n[f+1];f=C?Ll(Kt):gc(Kt)}if(null!==r){let L=v?r.residualClasses:r.residualStyles;null!=L&&(x=cs(L,l))}return x}function Ap(n){return void 0!==n}function by(n,r=""){const s=Yt(),l=br(),f=n+22,v=l.firstCreatePass?Kc(l,f,1,r,null):l.data[f],C=s[f]=function Ls(n,r){return n.createText(r)}(s[11],r);El(l,s,C,v),Is(v,!1)}function Xg(n){return Jg("",n,""),Xg}function Jg(n,r,s){const l=Yt(),f=function mf(n,r,s,l){return Ga(n,ut(),s)?r+Re(s)+l:qr}(l,n,r,s);return f!==qr&&function yc(n,r,s){const l=_r(r,n);!function Jr(n,r,s){n.setValue(r,s)}(n[11],l,s)}(l,Pe(),f),Jg}const bh=void 0;var Vy=["en",[["a","p"],["AM","PM"],bh],[["AM","PM"],bh,bh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bh,"{1} 'at' {0}",bh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function e_(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Ch={};function Dh(n){const r=function Uy(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Np(r);if(s)return s;const l=r.split("-")[0];if(s=Np(l),s)return s;if("en"===l)return Vy;throw new st(701,!1)}function $y(n){return Dh(n)[Tr.PluralCase]}function Np(n){return n in Ch||(Ch[n]=yr.ng&&yr.ng.common&&yr.ng.common.locales&&yr.ng.common.locales[n]),Ch[n]}var Tr=(()=>((Tr=Tr||{})[Tr.LocaleId=0]="LocaleId",Tr[Tr.DayPeriodsFormat=1]="DayPeriodsFormat",Tr[Tr.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tr[Tr.DaysFormat=3]="DaysFormat",Tr[Tr.DaysStandalone=4]="DaysStandalone",Tr[Tr.MonthsFormat=5]="MonthsFormat",Tr[Tr.MonthsStandalone=6]="MonthsStandalone",Tr[Tr.Eras=7]="Eras",Tr[Tr.FirstDayOfWeek=8]="FirstDayOfWeek",Tr[Tr.WeekendRange=9]="WeekendRange",Tr[Tr.DateFormat=10]="DateFormat",Tr[Tr.TimeFormat=11]="TimeFormat",Tr[Tr.DateTimeFormat=12]="DateTimeFormat",Tr[Tr.NumberSymbols=13]="NumberSymbols",Tr[Tr.NumberFormats=14]="NumberFormats",Tr[Tr.CurrencyCode=15]="CurrencyCode",Tr[Tr.CurrencySymbol=16]="CurrencySymbol",Tr[Tr.CurrencyName=17]="CurrencyName",Tr[Tr.Currencies=18]="Currencies",Tr[Tr.Directionality=19]="Directionality",Tr[Tr.PluralCase=20]="PluralCase",Tr[Tr.ExtraData=21]="ExtraData",Tr))();const Th="en-US";let i_=Th;function a_(n,r,s,l,f){if(n=ie(n),Array.isArray(n))for(let v=0;v<n.length;v++)a_(n[v],r,s,l,f);else{const v=br(),C=Yt();let x=Fl(n)?n:ie(n.provide),L=Hh(n);const Y=Li(),le=1048575&Y.providerIndexes,Te=Y.directiveStart,it=Y.providerIndexes>>20;if(Fl(n)||!n.multi){const At=new Qs(L,f,oh),Kt=u_(x,r,f?le:le+it,Te);-1===Kt?(Ni(zs(Y,C),v,x),l_(v,n,r.length),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(At),C.push(At)):(s[Kt]=At,C[Kt]=At)}else{const At=u_(x,r,le+it,Te),Kt=u_(x,r,le,le+it),yn=At>=0&&s[At],kn=Kt>=0&&s[Kt];if(f&&!kn||!f&&!yn){Ni(zs(Y,C),v,x);const sr=function PI(n,r,s,l,f){const v=new Qs(n,s,oh);return v.multi=[],v.index=r,v.componentProviders=0,C0(v,f,l&&!s),v}(f?kI:NI,s.length,f,l,L);!f&&kn&&(s[Kt].providerFactory=sr),l_(v,n,r.length,0),r.push(x),Y.directiveStart++,Y.directiveEnd++,f&&(Y.providerIndexes+=1048576),s.push(sr),C.push(sr)}else l_(v,n,At>-1?At:Kt,C0(s[f?Kt:At],L,!f&&l));!f&&l&&kn&&s[Kt].componentProviders++}}}function l_(n,r,s,l){const f=Fl(r),v=function Hp(n){return!!n.useClass}(r);if(f||v){const L=(v?ie(r.useClass):r).prototype.ngOnDestroy;if(L){const Y=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const le=Y.indexOf(s);-1===le?Y.push(s,[l,L]):Y[le+1].push(l,L)}else Y.push(s,L)}}}function C0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function u_(n,r,s,l){for(let f=s;f<l;f++)if(r[f]===n)return f;return-1}function NI(n,r,s,l){return c_(this.multi,[])}function kI(n,r,s,l){const f=this.multi;let v;if(this.providerFactory){const C=this.providerFactory.componentProviders,x=Na(s,s[1],this.providerFactory.index,l);v=x.slice(0,C),c_(f,v);for(let L=C;L<x.length;L++)v.push(x[L])}else v=[],c_(f,v);return v}function c_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function D0(n,r=[]){return s=>{s.providersResolver=(l,f)=>function OI(n,r,s){const l=br();if(l.firstCreatePass){const f=Ot(n);a_(s,l.data,l.blueprint,f,!0),a_(r,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,r)}}class Fp{}class T0{}function FI(n,r){return new S0(n,null!=r?r:null)}class S0 extends Fp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hh(this);const l=wr(r);this._bootstrapComponents=Nu(l.bootstrap),this._r3Injector=bm(r,s,[{provide:Fp,useValue:this},{provide:P,useValue:this.componentFactoryResolver}],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class d_ extends T0{constructor(r){super(),this.moduleType=r}create(r){return new S0(this.moduleType,r)}}class LI extends Fp{constructor(r,s,l){super(),this.componentFactoryResolver=new hh(this),this.instance=null;const f=new fa([...r,{provide:Fp,useValue:this},{provide:P,useValue:this.componentFactoryResolver}],s||Ed(),l,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function h_(n,r,s=null){return new LI(n,r,s).injector}let VI=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const l=Mf(0,s.type),f=l.length>0?h_([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ht({token:n,providedIn:"environment",factory:()=>new n(fe(Ru))}),n})();function A0(n){n.getStandaloneInjector=r=>r.get(VI).getOrCreateStandaloneInjector(n)}function p_(n){return r=>{setTimeout(n,void 0,r)}}const Jc=class cw extends a.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var f,v,C;let x=r,L=s||(()=>null),Y=l;if(r&&"object"==typeof r){const Te=r;x=null===(f=Te.next)||void 0===f?void 0:f.bind(Te),L=null===(v=Te.error)||void 0===v?void 0:v.bind(Te),Y=null===(C=Te.complete)||void 0===C?void 0:C.bind(Te)}this.__isAsync&&(L=p_(L),x&&(x=p_(x)),Y&&(Y=p_(Y)));const le=super.subscribe({next:x,error:L,complete:Y});return r instanceof ne.w&&r.add(le),le}};function dw(){return this._results[Ad()]()}class g_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Ad(),l=g_.prototype;l[s]||(l[s]=dw)}get changes(){return this._changes||(this._changes=new Jc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=yo(r);(this._changesDetected=!function Zo(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],v=r[l];if(s&&(f=s(f),v=s(v)),v!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let am=(()=>{class n{}return n.__NG_ELEMENT_ID__=pw,n})();const hw=am,fw=class extends hw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r,s){const l=this._declarationTContainer.tViews,f=ef(this._declarationLView,l,r,16,null,l.declTNode,null,null,null,null,s||null);f[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(f[19]=C.createEmbeddedView(l)),tf(l,f,r),new Sd(f)}};function pw(){return Gy(Li(),Yt())}function Gy(n,r){return 4&n.type?new fw(r,n,se(n,r)):null}let Wy=(()=>{class n{}return n.__NG_ELEMENT_ID__=gw,n})();function gw(){return j0(Li(),Yt())}const mw=Wy,$0=class extends mw{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return se(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){const r=Qt(this._hostTNode,this._hostLView);if(jl(r)){const s=Po(r,this._hostLView),l=zr(r);return new lr(s[1].data[l+8],s)}return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=U0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){let f,v;"number"==typeof l?f=l:null!=l&&(f=l.index,v=l.injector);const C=r.createEmbeddedView(s||{},v);return this.insert(C,f),C}createComponent(r,s,l,f,v){const C=r&&!function mo(n){return"function"==typeof n}(r);let x;if(C)x=s;else{const Te=s||{};x=Te.index,l=Te.injector,f=Te.projectableNodes,v=Te.environmentInjector||Te.ngModuleRef}const L=C?r:new cf(rt(r)),Y=l||this.parentInjector;if(!v&&null==L.ngModule){const it=(C?Y:this.parentInjector).get(Ru,null);it&&(v=it)}const le=L.create(Y,f,void 0,v);return this.insert(le.hostView,x),le}insert(r,s){const l=r._lView,f=l[1];if(function ls(n){return Ct(n[3])}(l)){const le=this.indexOf(r);if(-1!==le)this.detach(le);else{const Te=l[3],it=new $0(Te,Te[6],Te[3]);it.detach(it.indexOf(r))}}const v=this._adjustIndex(s),C=this._lContainer;!function ml(n,r,s,l){const f=10+l,v=s.length;l>0&&(s[f-1][4]=r),l<v-10?(r[4]=s[f],za(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const C=r[17];null!==C&&s!==C&&function ud(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(C,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=64}(f,l,C,v);const x=Xs(v,C),L=l[11],Y=Vs(L,C[7]);return null!==Y&&function Pc(n,r,s,l,f,v){l[0]=f,l[6]=r,ul(n,l,s,1,f,v)}(f,C[6],L,l,Y,x),r.attachToViewContainerRef(),za(m_(C),v,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=U0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=rc(this._lContainer,s);l&&(Pa(m_(this._lContainer),s),yl(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=rc(this._lContainer,s);return l&&null!=Pa(m_(this._lContainer),s)?new Sd(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function U0(n){return n[8]}function m_(n){return n[8]||(n[8]=[])}function j0(n,r){let s;const l=r[n.index];if(Ct(l))s=l;else{let f;if(8&n.type)f=ai(l);else{const v=r[11];f=v.createComment("");const C=gi(n,r);Ua(v,Vs(v,C),f,function sc(n,r){return n.nextSibling(r)}(v,C),!1)}r[n.index]=s=xg(l,r,f,n),Dd(r,s)}return new $0(s,n,r)}class y_{constructor(r){this.queryList=r,this.matches=null}clone(){return new y_(this.queryList)}setDirty(){this.queryList.setDirty()}}class v_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let v=0;v<l;v++){const C=s.getByIndex(v);f.push(this.queries[C.indexInDeclarationView].clone())}return new v_(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Q0(r,s).matches&&this.queries[s].setDirty()}}class H0{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class __{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,v=this.getByIndex(l).embeddedTView(r,f);v&&(v.indexInDeclarationView=l,null!==s?s.push(v):s=[v])}return null!==s?new __(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class E_{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new E_(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const v=l[f];this.matchTNodeWithReadOption(r,s,_w(s,v)),this.matchTNodeWithReadOption(r,s,qo(s,r,v,!1,!1))}else l===am?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,qo(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===xe||f===Wy||f===am&&4&s.type)this.addMatch(s.index,-2);else{const v=qo(s,r,f,!1,!1);null!==v&&this.addMatch(s.index,v)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function _w(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function Iw(n,r,s,l){return-1===s?function Ew(n,r){return 11&n.type?se(n,r):4&n.type?Gy(n,r):null}(r,n):-2===s?function ww(n,r,s){return s===xe?se(r,n):s===am?Gy(r,n):s===Wy?j0(r,n):void 0}(n,r,l):Na(n,n[1],s,r)}function G0(n,r,s,l){const f=r[19].queries[l];if(null===f.matches){const v=n.data,C=s.matches,x=[];for(let L=0;L<C.length;L+=2){const Y=C[L];x.push(Y<0?null:Iw(r,v[Y],C[L+1],s.metadata.read))}f.matches=x}return f.matches}function I_(n,r,s,l){const f=n.queries.getByIndex(s),v=f.matches;if(null!==v){const C=G0(n,r,f,s);for(let x=0;x<v.length;x+=2){const L=v[x];if(L>0)l.push(C[x/2]);else{const Y=v[x+1],le=r[-L];for(let Te=10;Te<le.length;Te++){const it=le[Te];it[17]===it[3]&&I_(it[1],it,Y,l)}if(null!==le[9]){const Te=le[9];for(let it=0;it<Te.length;it++){const At=Te[it];I_(At[1],At,Y,l)}}}}}return l}function W0(n){const r=Yt(),s=br(),l=ws();bs(l+1);const f=Q0(s,l);if(n.dirty&&function as(n){return 4==(4&n[2])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?I_(s,r,l,[]):G0(s,r,f,l);n.reset(v,We),n.notifyOnChanges()}return!0}return!1}function z0(n,r,s){const l=br();l.firstCreatePass&&(Z0(l,new H0(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),K0(l,Yt(),r)}function q0(n,r,s,l){const f=br();if(f.firstCreatePass){const v=Li();Z0(f,new H0(r,s,l),v.index),function Cw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}K0(f,Yt(),s)}function Y0(){return function bw(n,r){return n[19].queries[r].queryList}(Yt(),ws())}function K0(n,r,s){const l=new g_(4==(4&s));sp(n,r,l,l.destroy),null===r[19]&&(r[19]=new v_),r[19].queries.push(new y_(l))}function Z0(n,r,s){null===n.queries&&(n.queries=new __),n.queries.track(new E_(r,s))}function Q0(n,r){return n.queries.getByIndex(r)}function qy(...n){}const mE=new Ti("Application Initializer");let Yy=(()=>{class n{constructor(s){this.appInits=s,this.resolve=qy,this.reject=qy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(vf(v))s.push(v);else if($g(v)){const C=new Promise((x,L)=>{v.subscribe({complete:x,error:L})});s.push(C)}}Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(fe(mE,8))},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yE=new Ti("AppId",{providedIn:"root",factory:function vE(){return`${T_()}${T_()}${T_()}`}});function T_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _E=new Ti("Platform Initializer"),Ww=new Ti("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),EE=new Ti("appBootstrapListener");let zw=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Ky=new Ti("LocaleId",{providedIn:"root",factory:()=>wt(Ky,zt.Optional|zt.SkipSelf)||function qw(){return"undefined"!=typeof $localize&&$localize.locale||Th}()}),Yw=new Ti("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Kw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Zw=(()=>{class n{compileModuleSync(s){return new d_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),v=Nu(wr(s).declarations).reduce((C,x)=>{const L=rt(x);return L&&C.push(new cf(L)),C},[]);return new Kw(l,v)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Jw=(()=>Promise.resolve(0))();function S_(n){"undefined"==typeof Zone?Jw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ju{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Jc(!1),this.onMicrotaskEmpty=new Jc(!1),this.onStable=new Jc(!1),this.onError=new Jc(!1),"undefined"==typeof Zone)throw new st(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function eb(){let n=yr.requestAnimationFrame,r=yr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function rb(n){const r=()=>{!function nb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,x_(n),n.isCheckStableRunning=!0,A_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),x_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,v,C,x)=>{try{return bE(n),s.invokeTask(f,v,C,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),CE(n)}},onInvoke:(s,l,f,v,C,x,L)=>{try{return bE(n),s.invoke(f,v,C,x,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),CE(n)}},onHasTask:(s,l,f,v)=>{s.hasTask(f,v),l===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,x_(n),A_(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(s,l,f,v)=>(s.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ju.isInAngularZone())throw new st(909,!1)}static assertNotInAngularZone(){if(ju.isInAngularZone())throw new st(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const v=this._inner,C=v.scheduleEventTask("NgZoneEvent: "+f,r,tb,qy,qy);try{return v.runTask(C,s,l)}finally{v.cancelTask(C)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const tb={};function A_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function x_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function bE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,A_(n)}class ib{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Jc,this.onMicrotaskEmpty=new Jc,this.onStable=new Jc,this.onError=new Jc}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}const DE=new Ti(""),TE=new Ti("");let um,sb=(()=>{class n{constructor(s,l,f){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,um||(function ob(n){um=n}(f),f.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ju.assertNotInAngularZone(),S_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())S_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let v=-1;l&&l>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:v,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(fe(ju),fe(SE),fe(TE))},n.\u0275prov=ht({token:n,factory:n.\u0275fac}),n})(),SE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){var f;return null!==(f=null==um?void 0:um.findTestabilityInTree(this,s,l))&&void 0!==f?f:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),ed=null;const AE=new Ti("AllowMultipleToken"),M_=new Ti("PlatformDestroyListeners");class ub{constructor(r,s){this.name=r,this.token=s}}function ME(n,r,s=[]){const l=`Platform: ${r}`,f=new Ti(l);return(v=[])=>{let C=R_();if(!C||C.injector.get(AE,!1)){const x=[...s,...v,{provide:f,useValue:!0}];n?n(x):function cb(n){if(ed&&!ed.get(AE,!1))throw new st(400,!1);ed=n;const r=n.get(OE);(function xE(n){const r=n.get(_E,null);r&&r.forEach(s=>s())})(n)}(function RE(n=[],r){return qc.create({name:r,providers:[{provide:vd,useValue:"platform"},{provide:M_,useValue:new Set([()=>ed=null])},...n]})}(x,l))}return function hb(n){const r=R_();if(!r)throw new st(401,!1);return r}()}}function R_(){var n;return null!==(n=null==ed?void 0:ed.get(OE))&&void 0!==n?n:null}let OE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const f=function kE(n,r){let s;return s="noop"===n?new ib:("zone.js"===n?void 0:n)||new ju(r),s}(null==l?void 0:l.ngZone,function NE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),v=[{provide:ju,useValue:f}];return f.run(()=>{const C=qc.create({providers:v,parent:this.injector,name:s.moduleType.name}),x=s.create(C),L=x.injector.get(Eo,null);if(!L)throw new st(402,!1);return f.runOutsideAngular(()=>{const Y=f.onError.subscribe({next:le=>{L.handleError(le)}});x.onDestroy(()=>{Qy(this._modules,x),Y.unsubscribe()})}),function PE(n,r,s){try{const l=s();return vf(l)?l.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(L,f,()=>{const Y=x.injector.get(Yy);return Y.runInitializers(),Y.donePromise.then(()=>(function i(n){at(n,"Expected localeId to be defined"),"string"==typeof n&&(i_=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(Ky,Th)||Th),this._moduleDoBootstrap(x),x))})})}bootstrapModule(s,l=[]){const f=FE({},l);return function ab(n,r,s){const l=new d_(s);return Promise.resolve(l)}(0,0,s).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(s){const l=s.injector.get(Zy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new st(403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new st(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(M_,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(fe(qc))},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function FE(n,r){return Array.isArray(r)?r.reduce(FE,n):Object.assign(Object.assign({},n),r)}let Zy=(()=>{class n{constructor(s,l,f){this._zone=s,this._injector=l,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new z.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new z.y(x=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{ju.assertNotInAngularZone(),S_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const Y=this._zone.onUnstable.subscribe(()=>{ju.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{L.unsubscribe(),Y.unsubscribe()}});this.isStable=(0,ke.T)(v,C.pipe((0,Le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const f=s instanceof h;if(!this._injector.get(Yy).done)throw!f&&hr(s),new st(405,false);let C;C=f?s:this._injector.get(P).resolveComponentFactory(s),this.componentTypes.push(C.componentType);const x=function lb(n){return n.isBoundToModule}(C)?void 0:this._injector.get(Fp),Y=C.create(qc.NULL,[],l||C.selector,x),le=Y.location.nativeElement,Te=Y.injector.get(DE,null);return null==Te||Te.registerApplication(le),Y.onDestroy(()=>{this.detachView(Y.hostView),Qy(this.components,Y),null==Te||Te.unregisterApplication(le)}),this._loadComponent(Y),Y}tick(){if(this._runningTick)throw new st(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;Qy(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(EE,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>Qy(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new st(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(fe(ju),fe(Ru),fe(Eo))},n.\u0275prov=ht({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Qy(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let VE=!0,BE=!1;function pb(){return BE=!0,VE}function gb(){if(BE)throw new Error("Cannot enable prod mode after platform setup.");VE=!1}let mb=(()=>{class n{}return n.__NG_ELEMENT_ID__=yb,n})();function yb(n){return function vb(n,r,s){if(Ye(n)&&!s){const l=Rr(n.index,r);return new Sd(l,l)}return 47&n.type?new Sd(r[16],r):null}(Li(),Yt(),16==(16&n))}class HE{constructor(){}supports(r){return ff(r)}create(r){return new Cb(r)}}const bb=(n,r)=>r;class Cb{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||bb}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,v=null;for(;s||l;){const C=!l||s&&s.currentIndex<WE(l,f,v)?s:l,x=WE(C,f,v),L=C.currentIndex;if(C===l)f--,l=l._nextRemoved;else if(s=s._next,null==C.previousIndex)f++;else{v||(v=[]);const Y=x-f,le=L-f;if(Y!=le){for(let it=0;it<Y;it++){const At=it<v.length?v[it]:v[it]=0,Kt=At+it;le<=Kt&&Kt<Y&&(v[it]=At+1)}v[C.previousIndex]=le-Y}}x!==L&&r(C,x,L)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!ff(r))throw new st(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,v,C,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)v=r[x],C=this._trackByFn(x,v),null!==s&&Object.is(s.trackById,C)?(l&&(s=this._verifyReinsertion(s,v,C,x)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,C,x),l=!0),s=s._next}else f=0,function Rv(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[Ad()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,x=>{C=this._trackByFn(f,x),null!==s&&Object.is(s.trackById,C)?(l&&(s=this._verifyReinsertion(s,x,C,f)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,C,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,v,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,v,f)):r=this._addAfter(new Db(s,l),v,f),r}_verifyReinsertion(r,s,l,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==v?r=this._reinsertAfter(v,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,v=r._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new GE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Db{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Tb{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class GE{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new Tb,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function WE(n,r,s){const l=n.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class zE{constructor(){}supports(r){return r instanceof Map||_p(r)}create(){return new Sb}}class Sb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||_p(r)))throw new st(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const v=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,v)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const v=f._prev,C=f._next;return v&&(v._next=C),C&&(C._prev=v),f._next=null,f._prev=null,f}const l=new Ab(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class Ab{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function qE(){return new F_([new HE])}let F_=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||qE()),deps:[[n,new ao,new ds]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new st(901,!1)}}return n.\u0275prov=ht({token:n,providedIn:"root",factory:qE}),n})();function YE(){return new L_([new zE])}let L_=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||YE()),deps:[[n,new ao,new ds]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(l)return l;throw new st(901,!1)}}return n.\u0275prov=ht({token:n,providedIn:"root",factory:YE}),n})();const Rb=ME(null,"core",[]);let Ob=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(fe(Zy))},n.\u0275mod=On({type:n}),n.\u0275inj=Ft({}),n})();function Nb(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4182:(tn,ot,H)=>{"use strict";H.d(ot,{u5:()=>bo,JU:()=>ie,a5:()=>mr,JJ:()=>nr,On:()=>et});var a=H(5e3),ne=H(9808),z=H(5254),ke=H(6498),Le=H(6688),he=H(4850),Ee=H(7830);function be(G,B){return new ke.y(N=>{const m=G.length;if(0===m)return void N.complete();const k=new Array(m);let E=0,V=0;for(let oe=0;oe<m;oe++){const ut=(0,z.D)(G[oe]);let Xt=!1;N.add(ut.subscribe({next:mn=>{Xt||(Xt=!0,V++),k[oe]=mn},error:mn=>N.error(mn),complete:()=>{E++,(E===m||!Xt)&&(V===m&&N.next(B?B.reduce((mn,Zn,ti)=>(mn[Zn]=k[ti],mn),{}):k),N.complete())}}))}})}let ce=(()=>{class G{constructor(N,m){this._renderer=N,this._elementRef=m,this.onChange=k=>{},this.onTouched=()=>{}}setProperty(N,m){this._renderer.setProperty(this._elementRef.nativeElement,N,m)}registerOnTouched(N){this.onTouched=N}registerOnChange(N){this.onChange=N}setDisabledState(N){this.setProperty("disabled",N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(a.Qsj),a.Y36(a.SBq))},G.\u0275dir=a.lG2({type:G}),G})(),de=(()=>{class G extends ce{}return G.\u0275fac=function(){let B;return function(m){return(B||(B=a.n5z(G)))(m||G)}}(),G.\u0275dir=a.lG2({type:G,features:[a.qOj]}),G})();const ie=new a.OlP("NgValueAccessor"),st={provide:ie,useExisting:(0,a.Gpc)(()=>De),multi:!0},Re=new a.OlP("CompositionEventMode");let De=(()=>{class G extends ce{constructor(N,m,k){super(N,m),this._compositionMode=k,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function nt(){const G=(0,ne.q)()?(0,ne.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(N){this.setProperty("value",null==N?"":N)}_handleInput(N){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(N)}_compositionStart(){this._composing=!0}_compositionEnd(N){this._composing=!1,this._compositionMode&&this.onChange(N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Re,8))},G.\u0275dir=a.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(N,m){1&N&&a.NdJ("input",function(E){return m._handleInput(E.target.value)})("blur",function(){return m.onTouched()})("compositionstart",function(){return m._compositionStart()})("compositionend",function(E){return m._compositionEnd(E.target.value)})},features:[a._Bn([st]),a.qOj]}),G})();const gt=new a.OlP("NgValidators"),xt=new a.OlP("NgAsyncValidators");function bt(G){return null!=G}function at(G){return(0,a.QGY)(G)?(0,z.D)(G):G}function $e(G){let B={};return G.forEach(N=>{B=null!=N?Object.assign(Object.assign({},B),N):B}),0===Object.keys(B).length?null:B}function Ue(G,B){return B.map(N=>N(G))}function Qe(G){return G.map(B=>function Xe(G){return!G.validate}(B)?B:N=>B.validate(N))}function ft(G){return null!=G?function ht(G){if(!G)return null;const B=G.filter(bt);return 0==B.length?null:function(N){return $e(Ue(N,B))}}(Qe(G)):null}function Nt(G){return null!=G?function Ft(G){if(!G)return null;const B=G.filter(bt);return 0==B.length?null:function(N){return function pe(...G){if(1===G.length){const B=G[0];if((0,Le.k)(B))return be(B,null);if((0,Ee.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const N=Object.keys(B);return be(N.map(m=>B[m]),N)}}if("function"==typeof G[G.length-1]){const B=G.pop();return be(G=1===G.length&&(0,Le.k)(G[0])?G[0]:G,null).pipe((0,he.U)(N=>B(...N)))}return be(G,null)}(Ue(N,B).map(at)).pipe((0,he.U)($e))}}(Qe(G)):null}function bn(G,B){return null===G?[B]:Array.isArray(G)?[...G,B]:[G,B]}function Rn(G){return G?Array.isArray(G)?G:[G]:[]}function Wn(G,B){return Array.isArray(G)?G.includes(B):G===B}function ur(G,B){const N=Rn(B);return Rn(G).forEach(k=>{Wn(N,k)||N.push(k)}),N}function Un(G,B){return Rn(B).filter(N=>!Wn(G,N))}class or{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=ft(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,N){return!!this.control&&this.control.hasError(B,N)}getError(B,N){return this.control?this.control.getError(B,N):null}}class mr extends or{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class zt extends or{get formDirective(){return null}get path(){return null}}let nr=(()=>{class G extends class rr{constructor(B){this._cd=B}get isTouched(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.touched)}get isUntouched(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.untouched)}get isPristine(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.pristine)}get isDirty(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.dirty)}get isValid(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.valid)}get isInvalid(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.invalid)}get isPending(){var B,N;return!(null===(N=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===N||!N.pending)}get isSubmitted(){var B;return!(null===(B=this._cd)||void 0===B||!B.submitted)}}{constructor(N){super(N)}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(mr,2))},G.\u0275dir=a.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(N,m){2&N&&a.ekj("ng-untouched",m.isUntouched)("ng-touched",m.isTouched)("ng-pristine",m.isPristine)("ng-dirty",m.isDirty)("ng-valid",m.isValid)("ng-invalid",m.isInvalid)("ng-pending",m.isPending)},features:[a.qOj]}),G})();const un="VALID",Ln="INVALID",Sn="PENDING",On="DISABLED";function Ne(G){return Array.isArray(G)?ft(G):G||null}function dt(G){return Array.isArray(G)?Nt(G):G||null}function rt(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function Mt(G,B){var N,m;(function Cn(G,B){const N=function In(G){return G._rawValidators}(G);null!==B.validator?G.setValidators(bn(N,B.validator)):"function"==typeof N&&G.setValidators([N]);const m=function Qn(G){return G._rawAsyncValidators}(G);null!==B.asyncValidator?G.setAsyncValidators(bn(m,B.asyncValidator)):"function"==typeof m&&G.setAsyncValidators([m]);const k=()=>G.updateValueAndValidity();fn(B._rawValidators,k),fn(B._rawAsyncValidators,k)})(G,B),B.valueAccessor.writeValue(G.value),G.disabled&&(null===(m=(N=B.valueAccessor).setDisabledState)||void 0===m||m.call(N,!0)),function Hr(G,B){B.valueAccessor.registerOnChange(N=>{G._pendingValue=N,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ei(G,B)})}(G,B),function hi(G,B){const N=(m,k)=>{B.valueAccessor.writeValue(m),k&&B.viewToModelUpdate(m)};G.registerOnChange(N),B._registerOnDestroy(()=>{G._unregisterOnChange(N)})}(G,B),function Fr(G,B){B.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ei(G,B),"submit"!==G.updateOn&&G.markAsTouched()})}(G,B),function Zt(G,B){if(B.valueAccessor.setDisabledState){const N=m=>{B.valueAccessor.setDisabledState(m)};G.registerOnDisabledChange(N),B._registerOnDestroy(()=>{G._unregisterOnDisabledChange(N)})}}(G,B)}function fn(G,B){G.forEach(N=>{N.registerOnValidatorChange&&N.registerOnValidatorChange(B)})}function ei(G,B){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function we(G,B){const N=G.indexOf(B);N>-1&&G.splice(N,1)}function Ke(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const pr={provide:mr,useExisting:(0,a.Gpc)(()=>et)},kr=(()=>Promise.resolve())();let et=(()=>{class G extends mr{constructor(N,m,k,E,V){super(),this._changeDetectorRef=V,this.control=new class extends class hr{constructor(B,N){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=N,this._composedValidatorFn=Ne(this._rawValidators),this._composedAsyncValidatorFn=dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===un}get invalid(){return this.status===Ln}get pending(){return this.status==Sn}get disabled(){return this.status===On}get enabled(){return this.status!==On}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=Ne(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=dt(B)}addValidators(B){this.setValidators(ur(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(ur(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Un(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Un(B,this._rawAsyncValidators))}hasValidator(B){return Wn(this._rawValidators,B)}hasAsyncValidator(B){return Wn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(N=>{N.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(N=>{N.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=Sn,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=On,this.errors=null,this._forEachChild(m=>{m.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(m=>m(!0))}enable(B={}){const N=this._parentMarkedDirty(B.onlySelf);this.status=un,this._forEachChild(m=>{m.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:N})),this._onDisabledChange.forEach(m=>m(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}getRawValue(){return this.value}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===un||this.status===Sn)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(N=>N._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?On:un}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=Sn,this._hasOwnPendingAsyncValidator=!0;const N=at(this.asyncValidator(this));this._asyncValidationSubscription=N.subscribe(m=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(m,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,N={}){this.errors=B,this._updateControlsErrors(!1!==N.emitEvent)}get(B){let N=B;return null==N||(Array.isArray(N)||(N=N.split(".")),0===N.length)?null:N.reduce((m,k)=>m&&m._find(k),this)}getError(B,N){const m=N?this.get(N):this;return m&&m.errors?m.errors[B]:null}hasError(B,N){return!!this.getError(B,N)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?On:this.errors?Ln:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sn)?Sn:this._anyControlsHaveStatus(Ln)?Ln:un}_anyControlsHaveStatus(B){return this._anyControls(N=>N.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){rt(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(B){return null}}{constructor(B=null,N,m){super(function je(G){return(rt(G)?G.validators:G)||null}(N),function He(G,B){return(rt(B)?B.asyncValidators:G)||null}(m,N)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(N),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rt(N)&&(N.nonNullable||N.initialValueIsDefault)&&(this.defaultValue=Ke(B)?B.value:B)}setValue(B,N={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==N.emitModelToViewChange&&this._onChange.forEach(m=>m(this.value,!1!==N.emitViewToModelChange)),this.updateValueAndValidity(N)}patchValue(B,N={}){this.setValue(B,N)}reset(B=this.defaultValue,N={}){this._applyFormState(B),this.markAsPristine(N),this.markAsUntouched(N),this.setValue(this.value,N),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){we(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){we(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){Ke(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}},this._registered=!1,this.update=new a.vpe,this._parent=N,this._setValidators(m),this._setAsyncValidators(k),this.valueAccessor=function bi(G,B){if(!B)return null;let N,m,k;return Array.isArray(B),B.forEach(E=>{E.constructor===De?N=E:function Qi(G){return Object.getPrototypeOf(G.constructor)===de}(E)?m=E:k=E}),k||m||N||null}(0,E)}ngOnChanges(N){if(this._checkForErrors(),!this._registered||"name"in N){if(this._registered&&(this._checkName(),this.formDirective)){const m=N.name.previousValue;this.formDirective.removeControl({name:m,path:this._getPath(m)})}this._setUpControl()}"isDisabled"in N&&this._updateDisabled(N),function wi(G,B){if(!G.hasOwnProperty("model"))return!1;const N=G.model;return!!N.isFirstChange()||!Object.is(B,N.currentValue)}(N,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(N){this.viewModel=N,this.update.emit(N)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Mt(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(N){kr.then(()=>{var m;this.control.setValue(N,{emitViewToModelChange:!1}),null===(m=this._changeDetectorRef)||void 0===m||m.markForCheck()})}_updateDisabled(N){const m=N.isDisabled.currentValue,k=0!==m&&(0,a.D6c)(m);kr.then(()=>{var E;k&&!this.control.disabled?this.control.disable():!k&&this.control.disabled&&this.control.enable(),null===(E=this._changeDetectorRef)||void 0===E||E.markForCheck()})}_getPath(N){return this._parent?function Et(G,B){return[...B.path,G]}(N,this._parent):[N]}}return G.\u0275fac=function(N){return new(N||G)(a.Y36(zt,9),a.Y36(gt,10),a.Y36(xt,10),a.Y36(ie,10),a.Y36(a.sBO,8))},G.\u0275dir=a.lG2({type:G,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[a._Bn([pr]),a.qOj,a.TTD]}),G})(),Yn=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({}),G})(),xa=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[Yn]}),G})(),bo=(()=>{class G{}return G.\u0275fac=function(N){return new(N||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[xa]}),G})()},2313:(tn,ot,H)=>{"use strict";H.d(ot,{Dx:()=>fr,b2:()=>Pr,q6:()=>or});var a=H(9808),ne=H(5e3);class z extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ke extends z{static makeCurrent(){(0,a.HT)(new ke)}onAndCancel(Ve,Me,Et){return Ve.addEventListener(Me,Et,!1),()=>{Ve.removeEventListener(Me,Et,!1)}}dispatchEvent(Ve,Me){Ve.dispatchEvent(Me)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,Me){return(Me=Me||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,Me){return"window"===Me?window:"document"===Me?Ve:"body"===Me?Ve.body:null}getBaseHref(Ve){const Me=function he(){return Le=Le||document.querySelector("base"),Le?Le.getAttribute("href"):null}();return null==Me?null:function pe(pt){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",pt);const Ve=Ee.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(Me)}resetBaseElement(){Le=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,a.Mx)(document.cookie,Ve)}}let Ee,Le=null;const be=new ne.OlP("TRANSITION_ID"),de=[{provide:ne.ip1,useFactory:function ce(pt,Ve,Me){return()=>{Me.get(ne.CZH).donePromise.then(()=>{const Et=(0,a.q)(),Mt=Ve.querySelectorAll(`style[ng-transition="${pt}"]`);for(let hn=0;hn<Mt.length;hn++)Et.remove(Mt[hn])})}},deps:[be,a.K0,ne.zs3],multi:!0}];let Ie=(()=>{class pt{build(){return new XMLHttpRequest}}return pt.\u0275fac=function(Me){return new(Me||pt)},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();const Ge=new ne.OlP("EventManagerPlugins");let st=(()=>{class pt{constructor(Me,Et){this._zone=Et,this._eventNameToPlugin=new Map,Me.forEach(Mt=>Mt.manager=this),this._plugins=Me.slice().reverse()}addEventListener(Me,Et,Mt){return this._findPluginFor(Et).addEventListener(Me,Et,Mt)}addGlobalEventListener(Me,Et,Mt){return this._findPluginFor(Et).addGlobalEventListener(Me,Et,Mt)}getZone(){return this._zone}_findPluginFor(Me){const Et=this._eventNameToPlugin.get(Me);if(Et)return Et;const Mt=this._plugins;for(let hn=0;hn<Mt.length;hn++){const fn=Mt[hn];if(fn.supports(Me))return this._eventNameToPlugin.set(Me,fn),fn}throw new Error(`No event manager plugin found for event ${Me}`)}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(Ge),ne.LFG(ne.R0b))},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();class nt{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,Me,Et){const Mt=(0,a.q)().getGlobalEventTarget(this._doc,Ve);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${Me}`);return this.addEventListener(Mt,Me,Et)}}let Re=(()=>{class pt{constructor(){this._stylesSet=new Set}addStyles(Me){const Et=new Set;Me.forEach(Mt=>{this._stylesSet.has(Mt)||(this._stylesSet.add(Mt),Et.add(Mt))}),this.onStylesAdded(Et)}onStylesAdded(Me){}getAllStyles(){return Array.from(this._stylesSet)}}return pt.\u0275fac=function(Me){return new(Me||pt)},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})(),De=(()=>{class pt extends Re{constructor(Me){super(),this._doc=Me,this._hostNodes=new Map,this._hostNodes.set(Me.head,[])}_addStylesToHost(Me,Et,Mt){Me.forEach(hn=>{const fn=this._doc.createElement("style");fn.textContent=hn,Mt.push(Et.appendChild(fn))})}addHost(Me){const Et=[];this._addStylesToHost(this._stylesSet,Me,Et),this._hostNodes.set(Me,Et)}removeHost(Me){const Et=this._hostNodes.get(Me);Et&&Et.forEach(ct),this._hostNodes.delete(Me)}onStylesAdded(Me){this._hostNodes.forEach((Et,Mt)=>{this._addStylesToHost(Me,Mt,Et)})}ngOnDestroy(){this._hostNodes.forEach(Me=>Me.forEach(ct))}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(a.K0))},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();function ct(pt){(0,a.q)().remove(pt)}const me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vt=/%COMP%/g;function ve(pt,Ve,Me){for(let Et=0;Et<Ve.length;Et++){let Mt=Ve[Et];Array.isArray(Mt)?ve(pt,Mt,Me):(Mt=Mt.replace(vt,pt),Me.push(Mt))}return Me}function ae(pt){return Ve=>{if("__ngUnwrap__"===Ve)return pt;!1===pt(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let Se=(()=>{class pt{constructor(Me,Et,Mt){this.eventManager=Me,this.sharedStylesHost=Et,this.appId=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new lt(Me)}createRenderer(Me,Et){if(!Me||!Et)return this.defaultRenderer;switch(Et.encapsulation){case ne.ifc.Emulated:{let Mt=this.rendererByCompId.get(Et.id);return Mt||(Mt=new at(this.eventManager,this.sharedStylesHost,Et,this.appId),this.rendererByCompId.set(Et.id,Mt)),Mt.applyToHost(Me),Mt}case 1:case ne.ifc.ShadowDom:return new $e(this.eventManager,this.sharedStylesHost,Me,Et);default:if(!this.rendererByCompId.has(Et.id)){const Mt=ve(Et.id,Et.styles,[]);this.sharedStylesHost.addStyles(Mt),this.rendererByCompId.set(Et.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(st),ne.LFG(De),ne.LFG(ne.AFp))},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();class lt{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,Me){return Me?document.createElementNS(me[Me]||Me,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,Me){(bt(Ve)?Ve.content:Ve).appendChild(Me)}insertBefore(Ve,Me,Et){Ve&&(bt(Ve)?Ve.content:Ve).insertBefore(Me,Et)}removeChild(Ve,Me){Ve&&Ve.removeChild(Me)}selectRootElement(Ve,Me){let Et="string"==typeof Ve?document.querySelector(Ve):Ve;if(!Et)throw new Error(`The selector "${Ve}" did not match any elements`);return Me||(Et.textContent=""),Et}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,Me,Et,Mt){if(Mt){Me=Mt+":"+Me;const hn=me[Mt];hn?Ve.setAttributeNS(hn,Me,Et):Ve.setAttribute(Me,Et)}else Ve.setAttribute(Me,Et)}removeAttribute(Ve,Me,Et){if(Et){const Mt=me[Et];Mt?Ve.removeAttributeNS(Mt,Me):Ve.removeAttribute(`${Et}:${Me}`)}else Ve.removeAttribute(Me)}addClass(Ve,Me){Ve.classList.add(Me)}removeClass(Ve,Me){Ve.classList.remove(Me)}setStyle(Ve,Me,Et,Mt){Mt&(ne.JOm.DashCase|ne.JOm.Important)?Ve.style.setProperty(Me,Et,Mt&ne.JOm.Important?"important":""):Ve.style[Me]=Et}removeStyle(Ve,Me,Et){Et&ne.JOm.DashCase?Ve.style.removeProperty(Me):Ve.style[Me]=""}setProperty(Ve,Me,Et){Ve[Me]=Et}setValue(Ve,Me){Ve.nodeValue=Me}listen(Ve,Me,Et){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,Me,ae(Et)):this.eventManager.addEventListener(Ve,Me,ae(Et))}}function bt(pt){return"TEMPLATE"===pt.tagName&&void 0!==pt.content}class at extends lt{constructor(Ve,Me,Et,Mt){super(Ve),this.component=Et;const hn=ve(Mt+"-"+Et.id,Et.styles,[]);Me.addStyles(hn),this.contentAttr=function ye(pt){return"_ngcontent-%COMP%".replace(vt,pt)}(Mt+"-"+Et.id),this.hostAttr=function Oe(pt){return"_nghost-%COMP%".replace(vt,pt)}(Mt+"-"+Et.id)}applyToHost(Ve){super.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,Me){const Et=super.createElement(Ve,Me);return super.setAttribute(Et,this.contentAttr,""),Et}}class $e extends lt{constructor(Ve,Me,Et,Mt){super(Ve),this.sharedStylesHost=Me,this.hostEl=Et,this.shadowRoot=Et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const hn=ve(Mt.id,Mt.styles,[]);for(let fn=0;fn<hn.length;fn++){const Zt=document.createElement("style");Zt.textContent=hn[fn],this.shadowRoot.appendChild(Zt)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ve,Me){return super.appendChild(this.nodeOrShadowRoot(Ve),Me)}insertBefore(Ve,Me,Et){return super.insertBefore(this.nodeOrShadowRoot(Ve),Me,Et)}removeChild(Ve,Me){return super.removeChild(this.nodeOrShadowRoot(Ve),Me)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}}let Ue=(()=>{class pt extends nt{constructor(Me){super(Me)}supports(Me){return!0}addEventListener(Me,Et,Mt){return Me.addEventListener(Et,Mt,!1),()=>this.removeEventListener(Me,Et,Mt)}removeEventListener(Me,Et,Mt){return Me.removeEventListener(Et,Mt)}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(a.K0))},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();const Xe=["alt","control","meta","shift"],Qe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ht={alt:pt=>pt.altKey,control:pt=>pt.ctrlKey,meta:pt=>pt.metaKey,shift:pt=>pt.shiftKey};let ft=(()=>{class pt extends nt{constructor(Me){super(Me)}supports(Me){return null!=pt.parseEventName(Me)}addEventListener(Me,Et,Mt){const hn=pt.parseEventName(Et),fn=pt.eventCallback(hn.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(Me,hn.domEventName,fn))}static parseEventName(Me){const Et=Me.toLowerCase().split("."),Mt=Et.shift();if(0===Et.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const hn=pt._normalizeKey(Et.pop());let fn="",Zt=Et.indexOf("code");if(Zt>-1&&(Et.splice(Zt,1),fn="code."),Xe.forEach(ar=>{const Hr=Et.indexOf(ar);Hr>-1&&(Et.splice(Hr,1),fn+=ar+".")}),fn+=hn,0!=Et.length||0===hn.length)return null;const Cn={};return Cn.domEventName=Mt,Cn.fullKey=fn,Cn}static matchEventFullKeyCode(Me,Et){let Mt=Qe[Me.key]||Me.key,hn="";return Et.indexOf("code.")>-1&&(Mt=Me.code,hn="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Xe.forEach(fn=>{fn!==Mt&&(0,ht[fn])(Me)&&(hn+=fn+".")}),hn+=Mt,hn===Et)}static eventCallback(Me,Et,Mt){return hn=>{pt.matchEventFullKeyCode(hn,Me)&&Mt.runGuarded(()=>Et(hn))}}static _normalizeKey(Me){return"esc"===Me?"escape":Me}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(a.K0))},pt.\u0275prov=ne.Yz7({token:pt,factory:pt.\u0275fac}),pt})();const or=(0,ne.eFA)(ne._c5,"browser",[{provide:ne.Lbi,useValue:a.bD},{provide:ne.g9A,useValue:function Rn(){ke.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function ur(){return(0,ne.RDi)(document),document},deps:[]}]),mr=new ne.OlP(""),zt=[{provide:ne.rWj,useClass:class ie{addToWindow(Ve){ne.dqk.getAngularTestability=(Et,Mt=!0)=>{const hn=Ve.findTestabilityInTree(Et,Mt);if(null==hn)throw new Error("Could not find testability for element.");return hn},ne.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),ne.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),ne.dqk.frameworkStabilizers||(ne.dqk.frameworkStabilizers=[]),ne.dqk.frameworkStabilizers.push(Et=>{const Mt=ne.dqk.getAllAngularTestabilities();let hn=Mt.length,fn=!1;const Zt=function(Cn){fn=fn||Cn,hn--,0==hn&&Et(fn)};Mt.forEach(function(Cn){Cn.whenStable(Zt)})})}findTestabilityInTree(Ve,Me,Et){if(null==Me)return null;const Mt=Ve.getTestability(Me);return null!=Mt?Mt:Et?(0,a.q)().isShadowRoot(Me)?this.findTestabilityInTree(Ve,Me.host,!0):this.findTestabilityInTree(Ve,Me.parentElement,!0):null}},deps:[]},{provide:ne.lri,useClass:ne.dDg,deps:[ne.R0b,ne.eoX,ne.rWj]},{provide:ne.dDg,useClass:ne.dDg,deps:[ne.R0b,ne.eoX,ne.rWj]}],rr=[{provide:ne.zSh,useValue:"root"},{provide:ne.qLn,useFactory:function Wn(){return new ne.qLn},deps:[]},{provide:Ge,useClass:Ue,multi:!0,deps:[a.K0,ne.R0b,ne.Lbi]},{provide:Ge,useClass:ft,multi:!0,deps:[a.K0]},{provide:Se,useClass:Se,deps:[st,De,ne.AFp]},{provide:ne.FYo,useExisting:Se},{provide:Re,useExisting:De},{provide:De,useClass:De,deps:[a.K0]},{provide:st,useClass:st,deps:[Ge,ne.R0b]},{provide:a.JF,useClass:Ie,deps:[]},[]];let Pr=(()=>{class pt{constructor(Me){}static withServerTransition(Me){return{ngModule:pt,providers:[{provide:ne.AFp,useValue:Me.appId},{provide:be,useExisting:ne.AFp},de]}}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(mr,12))},pt.\u0275mod=ne.oAB({type:pt}),pt.\u0275inj=ne.cJS({providers:[...rr,...zt],imports:[a.ez,ne.hGG]}),pt})(),fr=(()=>{class pt{constructor(Me){this._doc=Me}getTitle(){return this._doc.title}setTitle(Me){this._doc.title=Me||""}}return pt.\u0275fac=function(Me){return new(Me||pt)(ne.LFG(a.K0))},pt.\u0275prov=ne.Yz7({token:pt,factory:function(Me){let Et=null;return Et=Me?new Me:function an(){return new fr((0,ne.LFG)(a.K0))}(),Et},providedIn:"root"}),pt})();"undefined"!=typeof window&&window},4740:(tn,ot,H)=>{"use strict";H.d(ot,{gz:()=>Di,y6:()=>Vr,OD:()=>en,eC:()=>an,wm:()=>gu,wN:()=>qo,F0:()=>di,rH:()=>Ti,Bz:()=>yu,Hx:()=>wr});var a=H(5e3),ne=H(5254),z=H(1086),ke=H(591),Le=H(4450),he=H(2866),Ee=H(6688),pe=H(826),be=H(448),ce=H(3009);const de={};function ie(...T){let S,w;return(0,he.K)(T[T.length-1])&&(w=T.pop()),"function"==typeof T[T.length-1]&&(S=T.pop()),1===T.length&&(0,Ee.k)(T[0])&&(T=T[0]),(0,ce.n)(T,w).lift(new Ie(S))}class Ie{constructor(S){this.resultSelector=S}call(S,w){return w.subscribe(new Ge(S,this.resultSelector))}}class Ge extends pe.L{constructor(S,w){super(S),this.resultSelector=w,this.active=0,this.values=[],this.observables=[]}_next(S){this.values.push(de),this.observables.push(S)}_complete(){const S=this.observables,w=S.length;if(0===w)this.destination.complete();else{this.active=w,this.toRespond=w;for(let O=0;O<w;O++)this.add((0,be.D)(this,S[O],void 0,O))}}notifyComplete(S){0==(this.active-=1)&&this.destination.complete()}notifyNext(S,w,O){const j=this.values,Ae=this.toRespond?j[O]===de?--this.toRespond:this.toRespond:0;j[O]=w,0===Ae&&(this.resultSelector?this._tryResultSelector(j):this.destination.next(j.slice()))}_tryResultSelector(S){let w;try{w=this.resultSelector.apply(this,S)}catch(O){return void this.destination.error(O)}this.destination.next(w)}}var st=H(1221),nt=H(6498),Re=H(8896);function De(T){return new nt.y(S=>{let w;try{w=T()}catch(j){return void S.error(j)}return(w?(0,ne.D)(w):(0,Re.c)()).subscribe(S)})}var ct=H(4843),me=H(1737),vt=H(1762),gt=H(8929),xt=H(9808),Be=H(4850),mt=H(7545),ye=H(2986),Oe=H(1059),ve=H(2198),ae=H(1709),Ce=H(7224);function Se(T,S){return(0,ae.zg)(T,S,1)}var lt=H(2868),J=H(1177);function Gt(T){return function(w){const O=new bt(T),j=w.lift(O);return O.caught=j}}class bt{constructor(S){this.selector=S}call(S,w){return w.subscribe(new at(S,this.selector,this.caught))}}class at extends J.Ds{constructor(S,w,O){super(S),this.selector=w,this.caught=O}error(S){if(!this.isStopped){let w;try{w=this.selector(S,this.caught)}catch(te){return void super.error(te)}this._unsubscribeAndRecycle();const O=new J.IY(this);this.add(O);const j=(0,J.ft)(w,O);j!==O&&this.add(j)}}}var $e=H(2014),Ue=H(3489),Xe=H(4231);function Qe(T){return function(w){return 0===T?(0,Re.c)():w.lift(new ht(T))}}class ht{constructor(S){if(this.total=S,this.total<0)throw new Xe.W}call(S,w){return w.subscribe(new ft(S,this.total))}}class ft extends Ue.L{constructor(S,w){super(S),this.total=w,this.ring=new Array,this.count=0}_next(S){const w=this.ring,O=this.total,j=this.count++;w.length<O?w.push(S):w[j%O]=S}_complete(){const S=this.destination;let w=this.count;if(w>0){const O=this.count>=this.total?this.total:this.count,j=this.ring;for(let te=0;te<O;te++){const Ae=w++%O;S.next(j[Ae])}}S.complete()}}var Ft=H(4907),Nt=H(7314),bn=H(5379);function In(T,S){const w=arguments.length>=2;return O=>O.pipe(T?(0,ve.h)((j,te)=>T(j,te,O)):bn.y,Qe(1),w?(0,Nt.d)(S):(0,Ft.T)(()=>new Le.K))}class Rn{constructor(S,w){this.predicate=S,this.inclusive=w}call(S,w){return w.subscribe(new Wn(S,this.predicate,this.inclusive))}}class Wn extends Ue.L{constructor(S,w,O){super(S),this.predicate=w,this.inclusive=O,this.index=0}_next(S){const w=this.destination;let O;try{O=this.predicate(S,this.index++)}catch(j){return void w.error(j)}this.nextOrComplete(S,O)}nextOrComplete(S,w){const O=this.destination;Boolean(w)?O.next(S):(this.inclusive&&O.next(S),O.complete())}}class Un{constructor(S){this.value=S}call(S,w){return w.subscribe(new or(S,this.value))}}class or extends Ue.L{constructor(S,w){super(S),this.value=w}_next(S){this.destination.next(this.value)}}var mr=H(2654);function zt(T){return S=>S.lift(new rr(T))}class rr{constructor(S){this.callback=S}call(S,w){return w.subscribe(new Pr(S,this.callback))}}class Pr extends Ue.L{constructor(S,w){super(S),this.add(new mr.w(w))}}var tr=H(4327),nr=H(9146),Cr=H(2313);const an="primary",fr=Symbol("RouteTitle");class Tn{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const w=this.params[S];return Array.isArray(w)?w[0]:w}return null}getAll(S){if(this.has(S)){const w=this.params[S];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function gn(T){return new Tn(T)}function Tt(T,S,w){const O=w.path.split("/");if(O.length>T.length||"full"===w.pathMatch&&(S.hasChildren()||O.length<T.length))return null;const j={};for(let te=0;te<O.length;te++){const Ae=O[te],Fe=T[te];if(Ae.startsWith(":"))j[Ae.substring(1)]=Fe;else if(Ae!==Fe.path)return null}return{consumed:T.slice(0,O.length),posParams:j}}function Bn(T,S){const w=T?Object.keys(T):void 0,O=S?Object.keys(S):void 0;if(!w||!O||w.length!=O.length)return!1;let j;for(let te=0;te<w.length;te++)if(j=w[te],!Dr(T[j],S[j]))return!1;return!0}function Dr(T,S){if(Array.isArray(T)&&Array.isArray(S)){if(T.length!==S.length)return!1;const w=[...T].sort(),O=[...S].sort();return w.every((j,te)=>O[te]===j)}return T===S}function Or(T){return Array.prototype.concat.apply([],T)}function jn(T){return T.length>0?T[T.length-1]:null}function Fn(T,S){for(const w in T)T.hasOwnProperty(w)&&S(T[w],w)}function si(T){return(0,a.CqO)(T)?T:(0,a.QGY)(T)?(0,ne.D)(Promise.resolve(T)):(0,z.of)(T)}const ni={exact:function Ln(T,S,w){if(!_n(T.segments,S.segments)||!Ne(T.segments,S.segments,w)||T.numberOfChildren!==S.numberOfChildren)return!1;for(const O in S.children)if(!T.children[O]||!Ln(T.children[O],S.children[O],w))return!1;return!0},subset:On},vn={exact:function un(T,S){return Bn(T,S)},subset:function Sn(T,S){return Object.keys(S).length<=Object.keys(T).length&&Object.keys(S).every(w=>Dr(T[w],S[w]))},ignored:()=>!0};function $t(T,S,w){return ni[w.paths](T.root,S.root,w.matrixParams)&&vn[w.queryParams](T.queryParams,S.queryParams)&&!("exact"===w.fragment&&T.fragment!==S.fragment)}function On(T,S,w){return je(T,S,S.segments,w)}function je(T,S,w,O){if(T.segments.length>w.length){const j=T.segments.slice(0,w.length);return!(!_n(j,w)||S.hasChildren()||!Ne(j,w,O))}if(T.segments.length===w.length){if(!_n(T.segments,w)||!Ne(T.segments,w,O))return!1;for(const j in S.children)if(!T.children[j]||!On(T.children[j],S.children[j],O))return!1;return!0}{const j=w.slice(0,T.segments.length),te=w.slice(T.segments.length);return!!(_n(T.segments,j)&&Ne(T.segments,j,O)&&T.children[an])&&je(T.children[an],S,te,O)}}function Ne(T,S,w){return S.every((O,j)=>vn[w](T[j].parameters,O.parameters))}class He{constructor(S,w,O){this.root=S,this.queryParams=w,this.fragment=O}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return pt.serialize(this)}}class dt{constructor(S,w){this.segments=S,this.children=w,this.parent=null,Fn(w,(O,j)=>O.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ve(this)}}class rt{constructor(S,w){this.path=S,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=gn(this.parameters)),this._parameterMap}toString(){return ar(this)}}function _n(T,S){return T.length===S.length&&T.every((w,O)=>w.path===S[O].path)}let wr=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return new Nr},providedIn:"root"}),T})();class Nr{parse(S){const w=new Zi(S);return new He(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(S){const w=`/${Me(S.root,!0)}`,O=function Fr(T){const S=Object.keys(T).map(w=>{const O=T[w];return Array.isArray(O)?O.map(j=>`${Mt(w)}=${Mt(j)}`).join("&"):`${Mt(w)}=${Mt(O)}`}).filter(w=>!!w);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${w}${O}${"string"==typeof S.fragment?`#${function hn(T){return encodeURI(T)}(S.fragment)}`:""}`}}const pt=new Nr;function Ve(T){return T.segments.map(S=>ar(S)).join("/")}function Me(T,S){if(!T.hasChildren())return Ve(T);if(S){const w=T.children[an]?Me(T.children[an],!1):"",O=[];return Fn(T.children,(j,te)=>{te!==an&&O.push(`${te}:${Me(j,!1)}`)}),O.length>0?`${w}(${O.join("//")})`:w}{const w=function hr(T,S){let w=[];return Fn(T.children,(O,j)=>{j===an&&(w=w.concat(S(O,j)))}),Fn(T.children,(O,j)=>{j!==an&&(w=w.concat(S(O,j)))}),w}(T,(O,j)=>j===an?[Me(T.children[an],!1)]:[`${j}:${Me(O,!1)}`]);return 1===Object.keys(T.children).length&&null!=T.children[an]?`${Ve(T)}/${w[0]}`:`${Ve(T)}/(${w.join("//")})`}}function Et(T){return encodeURIComponent(T).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mt(T){return Et(T).replace(/%3B/gi,";")}function fn(T){return Et(T).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zt(T){return decodeURIComponent(T)}function Cn(T){return Zt(T.replace(/\+/g,"%20"))}function ar(T){return`${fn(T.path)}${function Hr(T){return Object.keys(T).map(S=>`;${fn(S)}=${fn(T[S])}`).join("")}(T.parameters)}`}const ei=/^[^\/()?;=#]+/;function hi(T){const S=T.match(ei);return S?S[0]:""}const vr=/^[^=?&#]+/,Ii=/^[^&#]+/;class Zi{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dt([],{}):new dt([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let O={};return this.peekStartsWith("(")&&(O=this.parseParens(!1)),(S.length>0||Object.keys(w).length>0)&&(O[an]=new dt(S,w)),O}parseSegment(){const S=hi(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new a.vHH(4009,!1);return this.capture(S),new rt(Zt(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const w=hi(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const j=hi(this.remaining);j&&(O=j,this.capture(O))}S[Zt(w)]=Zt(O)}parseQueryParam(S){const w=function Pi(T){const S=T.match(vr);return S?S[0]:""}(this.remaining);if(!w)return;this.capture(w);let O="";if(this.consumeOptional("=")){const Ae=function zn(T){const S=T.match(Ii);return S?S[0]:""}(this.remaining);Ae&&(O=Ae,this.capture(O))}const j=Cn(w),te=Cn(O);if(S.hasOwnProperty(j)){let Ae=S[j];Array.isArray(Ae)||(Ae=[Ae],S[j]=Ae),Ae.push(te)}else S[j]=te}parseParens(S){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const O=hi(this.remaining),j=this.remaining[O.length];if("/"!==j&&")"!==j&&";"!==j)throw new a.vHH(4010,!1);let te;O.indexOf(":")>-1?(te=O.slice(0,O.indexOf(":")),this.capture(te),this.capture(":")):S&&(te=an);const Ae=this.parseChildren();w[te]=1===Object.keys(Ae).length?Ae[an]:new dt([],Ae),this.consumeOptional("//")}return w}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new a.vHH(4011,!1)}}function oi(T){return T.segments.length>0?new dt([],{[an]:T}):T}function wi(T){const S={};for(const O of Object.keys(T.children)){const te=wi(T.children[O]);(te.segments.length>0||te.hasChildren())&&(S[O]=te)}return function Qi(T){if(1===T.numberOfChildren&&T.children[an]){const S=T.children[an];return new dt(T.segments.concat(S.segments),S.children)}return T}(new dt(T.segments,S))}function Lr(T){return T instanceof He}function Fi(T,S,w,O,j){var te;if(0===w.length)return Ke(S.root,S.root,S.root,O,j);const Fe=function _e(T){if("string"==typeof T[0]&&1===T.length&&"/"===T[0])return new Ct(!0,0,T);let S=0,w=!1;const O=T.reduce((j,te,Ae)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Fe={};return Fn(te.outlets,(It,R)=>{Fe[R]="string"==typeof It?It.split("/"):It}),[...j,{outlets:Fe}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===Ae?(te.split("/").forEach((Fe,It)=>{0==It&&"."===Fe||(0==It&&""===Fe?w=!0:".."===Fe?S++:""!=Fe&&j.push(Fe))}),j):[...j,te]},[]);return new Ct(w,S,O)}(w);return Fe.toRoot()?Ke(S.root,S.root,new dt([],{}),O,j):function It(U){var Q;const fe=function Ot(T,S,w,O){if(T.isAbsolute)return new Ye(S.root,!0,0);if(-1===O)return new Ye(w,w===S.root,0);return function jt(T,S,w){let O=T,j=S,te=w;for(;te>j;){if(te-=j,O=O.parent,!O)throw new a.vHH(4005,!1);j=O.segments.length}return new Ye(O,!1,j-te)}(w,O+(ee(T.commands[0])?0:1),T.numberOfDoubleDots)}(Fe,S,null===(Q=T.snapshot)||void 0===Q?void 0:Q._urlSegment,U),qe=fe.processChildren?qn(fe.segmentGroup,fe.index,Fe.commands):An(fe.segmentGroup,fe.index,Fe.commands);return Ke(S.root,fe.segmentGroup,qe,O,j)}(null===(te=T.snapshot)||void 0===te?void 0:te._lastPathIndex)}function ee(T){return"object"==typeof T&&null!=T&&!T.outlets&&!T.segmentPath}function we(T){return"object"==typeof T&&null!=T&&T.outlets}function Ke(T,S,w,O,j){let Ae,te={};O&&Fn(O,(It,R)=>{te[R]=Array.isArray(It)?It.map(U=>`${U}`):`${It}`}),Ae=T===S?w:Je(T,S,w);const Fe=oi(wi(Ae));return new He(Fe,te,j)}function Je(T,S,w){const O={};return Fn(T.children,(j,te)=>{O[te]=j===S?w:Je(j,S,w)}),new dt(T.segments,O)}class Ct{constructor(S,w,O){if(this.isAbsolute=S,this.numberOfDoubleDots=w,this.commands=O,S&&O.length>0&&ee(O[0]))throw new a.vHH(4003,!1);const j=O.find(we);if(j&&j!==jn(O))throw new a.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ye{constructor(S,w,O){this.segmentGroup=S,this.processChildren=w,this.index=O}}function An(T,S,w){if(T||(T=new dt([],{})),0===T.segments.length&&T.hasChildren())return qn(T,S,w);const O=function pr(T,S,w){let O=0,j=S;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<T.segments.length;){if(O>=w.length)return te;const Ae=T.segments[j],Fe=w[O];if(we(Fe))break;const It=`${Fe}`,R=O<w.length-1?w[O+1]:null;if(j>0&&void 0===It)break;if(It&&R&&"object"==typeof R&&void 0===R.outlets){if(!_t(It,R,Ae))return te;O+=2}else{if(!_t(It,{},Ae))return te;O++}j++}return{match:!0,pathIndex:j,commandIndex:O}}(T,S,w),j=w.slice(O.commandIndex);if(O.match&&O.pathIndex<T.segments.length){const te=new dt(T.segments.slice(0,O.pathIndex),{});return te.children[an]=new dt(T.segments.slice(O.pathIndex),T.children),qn(te,0,j)}return O.match&&0===j.length?new dt(T.segments,{}):O.match&&!T.hasChildren()?kr(T,S,w):O.match?qn(T,0,j):kr(T,S,w)}function qn(T,S,w){if(0===w.length)return new dt(T.segments,{});{const O=function ln(T){return we(T[0])?T[0].outlets:{[an]:T}}(w),j={};return Fn(O,(te,Ae)=>{"string"==typeof te&&(te=[te]),null!==te&&(j[Ae]=An(T.children[Ae],S,te))}),Fn(T.children,(te,Ae)=>{void 0===O[Ae]&&(j[Ae]=te)}),new dt(T.segments,j)}}function kr(T,S,w){const O=T.segments.slice(0,S);let j=0;for(;j<w.length;){const te=w[j];if(we(te)){const It=et(te.outlets);return new dt(O,It)}if(0===j&&ee(w[0])){O.push(new rt(T.segments[S].path,Ze(w[0]))),j++;continue}const Ae=we(te)?te.outlets[an]:`${te}`,Fe=j<w.length-1?w[j+1]:null;Ae&&Fe&&ee(Fe)?(O.push(new rt(Ae,Ze(Fe))),j+=2):(O.push(new rt(Ae,{})),j++)}return new dt(O,{})}function et(T){const S={};return Fn(T,(w,O)=>{"string"==typeof w&&(w=[w]),null!==w&&(S[O]=kr(new dt([],{}),0,w))}),S}function Ze(T){const S={};return Fn(T,(w,O)=>S[O]=`${w}`),S}function _t(T,S,w){return T==w.path&&Bn(S,w.parameters)}class Ut{constructor(S,w){this.id=S,this.url=w}}class en extends Ut{constructor(S,w,O="imperative",j=null){super(S,w),this.type=0,this.navigationTrigger=O,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dn extends Ut{constructor(S,w,O){super(S,w),this.urlAfterRedirects=O,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Yn extends Ut{constructor(S,w,O,j){super(S,w),this.reason=O,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ui extends Ut{constructor(S,w,O,j){super(S,w),this.error=O,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Br extends Ut{constructor(S,w,O,j){super(S,w),this.urlAfterRedirects=O,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Os extends Ut{constructor(S,w,O,j){super(S,w),this.urlAfterRedirects=O,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends Ut{constructor(S,w,O,j,te){super(S,w),this.urlAfterRedirects=O,this.state=j,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ir extends Ut{constructor(S,w,O,j){super(S,w),this.urlAfterRedirects=O,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends Ut{constructor(S,w,O,j){super(S,w),this.urlAfterRedirects=O,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ji{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zr{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Us{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ta{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class es{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class js{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ar{constructor(S,w,O){this.routerEvent=S,this.position=w,this.anchor=O,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mi{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const w=this.pathFromRoot(S);return w.length>1?w[w.length-2]:null}children(S){const w=Js(S,this._root);return w?w.children.map(O=>O.value):[]}firstChild(S){const w=Js(S,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(S){const w=Hs(S,this._root);return w.length<2?[]:w[w.length-2].children.map(j=>j.value).filter(j=>j!==S)}pathFromRoot(S){return Hs(S,this._root).map(w=>w.value)}}function Js(T,S){if(T===S.value)return S;for(const w of S.children){const O=Js(T,w);if(O)return O}return null}function Hs(T,S){if(T===S.value)return[S];for(const w of S.children){const O=Hs(T,w);if(O.length)return O.unshift(S),O}return[]}class pi{constructor(S,w){this.value=S,this.children=w}toString(){return`TreeNode(${this.value})`}}function os(T){const S={};return T&&T.children.forEach(w=>S[w.value.outlet]=w),S}class fs extends mi{constructor(S,w){super(S),this.snapshot=w,ai(this,S)}toString(){return this.snapshot.toString()}}function vs(T,S){const w=function ps(T,S){const Ae=new ts([],{},{},"",{},an,S,null,T.root,-1,{});return new gs("",new pi(Ae,[]))}(T,S),O=new ke.X([new rt("",{})]),j=new ke.X({}),te=new ke.X({}),Ae=new ke.X({}),Fe=new ke.X(""),It=new Di(O,j,Ae,Fe,te,an,S,w.root);return It.snapshot=w.root,new fs(new pi(It,[]),w)}class Di{constructor(S,w,O,j,te,Ae,Fe,It){var R,U;this.url=S,this.params=w,this.queryParams=O,this.fragment=j,this.data=te,this.outlet=Ae,this.component=Fe,this.title=null!==(U=null===(R=this.data)||void 0===R?void 0:R.pipe((0,Be.U)(Q=>Q[fr])))&&void 0!==U?U:(0,z.of)(void 0),this._futureSnapshot=It}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(S=>gn(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(S=>gn(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function No(T,S="emptyOnly"){const w=T.pathFromRoot;let O=0;if("always"!==S)for(O=w.length-1;O>=1;){const j=w[O],te=w[O-1];if(j.routeConfig&&""===j.routeConfig.path)O--;else{if(te.component)break;O--}}return function Hi(T){return T.reduce((S,w)=>{var O;return{params:Object.assign(Object.assign({},S.params),w.params),data:Object.assign(Object.assign({},S.data),w.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},w.data),S.resolve),null===(O=w.routeConfig)||void 0===O?void 0:O.data),w._resolvedData)}},{params:{},data:{},resolve:{}})}(w.slice(O))}class ts{constructor(S,w,O,j,te,Ae,Fe,It,R,U,Q,fe){var qe;this.url=S,this.params=w,this.queryParams=O,this.fragment=j,this.data=te,this.outlet=Ae,this.component=Fe,this.title=null===(qe=this.data)||void 0===qe?void 0:qe[fr],this.routeConfig=It,this._urlSegment=R,this._lastPathIndex=U,this._correctedLastPathIndex=null!=fe?fe:U,this._resolve=Q}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(O=>O.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends mi{constructor(S,w){super(w),this.url=S,ai(this,w)}toString(){return Ys(this._root)}}function ai(T,S){S.value._routerState=T,S.children.forEach(w=>ai(T,w))}function Ys(T){const S=T.children.length>0?` { ${T.children.map(Ys).join(", ")} } `:"";return`${T.value}${S}`}function Gs(T){if(T.snapshot){const S=T.snapshot,w=T._futureSnapshot;T.snapshot=w,Bn(S.queryParams,w.queryParams)||T.queryParams.next(w.queryParams),S.fragment!==w.fragment&&T.fragment.next(w.fragment),Bn(S.params,w.params)||T.params.next(w.params),function yr(T,S){if(T.length!==S.length)return!1;for(let w=0;w<T.length;++w)if(!Bn(T[w],S[w]))return!1;return!0}(S.url,w.url)||T.url.next(w.url),Bn(S.data,w.data)||T.data.next(w.data)}else T.snapshot=T._futureSnapshot,T.data.next(T._futureSnapshot.data)}function _r(T,S){const w=Bn(T.params,S.params)&&function on(T,S){return _n(T,S)&&T.every((w,O)=>Bn(w.parameters,S[O].parameters))}(T.url,S.url);return w&&!(!T.parent!=!S.parent)&&(!T.parent||_r(T.parent,S.parent))}function Jn(T,S,w){if(w&&T.shouldReuseRoute(S.value,w.value.snapshot)){const O=w.value;O._futureSnapshot=S.value;const j=function _s(T,S,w){return S.children.map(O=>{for(const j of w.children)if(T.shouldReuseRoute(O.value,j.value.snapshot))return Jn(T,O,j);return Jn(T,O)})}(T,S,w);return new pi(O,j)}{if(T.shouldAttach(S.value)){const te=T.retrieve(S.value);if(null!==te){const Ae=te.route;return Ae.value._futureSnapshot=S.value,Ae.children=S.children.map(Fe=>Jn(T,Fe)),Ae}}const O=function Ns(T){return new Di(new ke.X(T.url),new ke.X(T.params),new ke.X(T.queryParams),new ke.X(T.fragment),new ke.X(T.data),T.outlet,T.component,T)}(S.value),j=S.children.map(te=>Jn(T,te));return new pi(O,j)}}const Rr="ngNavigationCancelingError";function as(T,S){const{redirectTo:w,navigationBehaviorOptions:O}=Lr(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,j=Ts(!1,0,S);return j.url=w,j.navigationBehaviorOptions=O,j}function Ts(T,S,w){const O=new Error("NavigationCancelingError: "+(T||""));return O[Rr]=!0,O.cancellationCode=S,w&&(O.url=w),O}function ls(T){return Es(T)&&Lr(T.url)}function Es(T){return T&&T[Rr]}class Ri{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vr,this.attachRef=null}}let Vr=(()=>{class T{constructor(){this.contexts=new Map}onChildOutletCreated(w,O){const j=this.getOrCreateContext(w);j.outlet=O,this.contexts.set(w,j)}onChildOutletDestroyed(w){const O=this.getContext(w);O&&(O.outlet=null,O.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let O=this.getContext(w);return O||(O=new Ri,this.contexts.set(w,O)),O}getContext(w){return this.contexts.get(w)||null}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Kn=!1;let eo=(()=>{class T{constructor(w,O,j,te,Ae){this.parentContexts=w,this.location=O,this.changeDetector=te,this.environmentInjector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=j||an,w.onChildOutletCreated(this.name,this)}ngOnDestroy(){var w;(null===(w=this.parentContexts.getContext(this.name))||void 0===w?void 0:w.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const w=this.parentContexts.getContext(this.name);w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Kn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Kn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Kn);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,O){this.activated=w,this._activatedRoute=O,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,O){if(this.isActivated)throw new a.vHH(4013,Kn);this._activatedRoute=w;const j=this.location,Ae=w._futureSnapshot.component,Fe=this.parentContexts.getOrCreateContext(this.name).children,It=new pa(w,Fe,j.injector);if(O&&function Ks(T){return!!T.resolveComponentFactory}(O)){const R=O.resolveComponentFactory(Ae);this.activated=j.createComponent(R,j.length,It)}else this.activated=j.createComponent(Ae,{index:j.length,injector:It,environmentInjector:null!=O?O:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return T.\u0275fac=function(w){return new(w||T)(a.Y36(Vr),a.Y36(a.s_b),a.$8M("name"),a.Y36(a.sBO),a.Y36(a.lqb))},T.\u0275dir=a.lG2({type:T,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),T})();class pa{constructor(S,w,O){this.route=S,this.childContexts=w,this.parent=O}get(S,w){return S===Di?this.route:S===Vr?this.childContexts:this.parent.get(S,w)}}let Ho=(()=>{class T{}return T.\u0275fac=function(w){return new(w||T)},T.\u0275cmp=a.Xpm({type:T,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(w,O){1&w&&a._UZ(0,"router-outlet")},dependencies:[eo],encapsulation:2}),T})();function ga(T,S){var w;return T.providers&&!T._injector&&(T._injector=(0,a.MMx)(T.providers,S,`Route: ${T.path}`)),null!==(w=T._injector)&&void 0!==w?w:S}function ko(T){const S=T.children&&T.children.map(ko),w=S?Object.assign(Object.assign({},T),{children:S}):Object.assign({},T);return!w.component&&!w.loadComponent&&(S||w.loadChildren)&&w.outlet&&w.outlet!==an&&(w.component=Ho),w}function Gi(T){return T.outlet||an}function Is(T,S){const w=T.filter(O=>Gi(O)===S);return w.push(...T.filter(O=>Gi(O)!==S)),w}function Ss(T){var S;if(!T)return null;if(null!==(S=T.routeConfig)&&void 0!==S&&S._injector)return T.routeConfig._injector;for(let w=T.parent;w;w=w.parent){const O=w.routeConfig;if(null!=O&&O._loadedInjector)return O._loadedInjector;if(null!=O&&O._injector)return O._injector}return null}class B{constructor(S,w,O,j){this.routeReuseStrategy=S,this.futureState=w,this.currState=O,this.forwardEvent=j}activate(S){const w=this.futureState._root,O=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,O,S),Gs(this.futureState.root),this.activateChildRoutes(w,O,S)}deactivateChildRoutes(S,w,O){const j=os(w);S.children.forEach(te=>{const Ae=te.value.outlet;this.deactivateRoutes(te,j[Ae],O),delete j[Ae]}),Fn(j,(te,Ae)=>{this.deactivateRouteAndItsChildren(te,O)})}deactivateRoutes(S,w,O){const j=S.value,te=w?w.value:null;if(j===te)if(j.component){const Ae=O.getContext(j.outlet);Ae&&this.deactivateChildRoutes(S,w,Ae.children)}else this.deactivateChildRoutes(S,w,O);else te&&this.deactivateRouteAndItsChildren(w,O)}deactivateRouteAndItsChildren(S,w){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,w):this.deactivateRouteAndOutlet(S,w)}detachAndStoreRouteSubtree(S,w){const O=w.getContext(S.value.outlet),j=O&&S.value.component?O.children:w,te=os(S);for(const Ae of Object.keys(te))this.deactivateRouteAndItsChildren(te[Ae],j);if(O&&O.outlet){const Ae=O.outlet.detach(),Fe=O.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:Ae,route:S,contexts:Fe})}}deactivateRouteAndOutlet(S,w){const O=w.getContext(S.value.outlet),j=O&&S.value.component?O.children:w,te=os(S);for(const Ae of Object.keys(te))this.deactivateRouteAndItsChildren(te[Ae],j);O&&O.outlet&&(O.outlet.deactivate(),O.children.onOutletDeactivated(),O.attachRef=null,O.resolver=null,O.route=null)}activateChildRoutes(S,w,O){const j=os(w);S.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],O),this.forwardEvent(new js(te.value.snapshot))}),S.children.length&&this.forwardEvent(new ta(S.value.snapshot))}activateRoutes(S,w,O){var j;const te=S.value,Ae=w?w.value:null;if(Gs(te),te===Ae)if(te.component){const Fe=O.getOrCreateContext(te.outlet);this.activateChildRoutes(S,w,Fe.children)}else this.activateChildRoutes(S,w,O);else if(te.component){const Fe=O.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const It=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),Fe.children.onOutletReAttached(It.contexts),Fe.attachRef=It.componentRef,Fe.route=It.route.value,Fe.outlet&&Fe.outlet.attach(It.componentRef,It.route.value),Gs(It.route.value),this.activateChildRoutes(S,null,Fe.children)}else{const It=Ss(te.snapshot),R=null!==(j=null==It?void 0:It.get(a._Vd))&&void 0!==j?j:null;Fe.attachRef=null,Fe.route=te,Fe.resolver=R,Fe.injector=It,Fe.outlet&&Fe.outlet.activateWith(te,Fe.injector),this.activateChildRoutes(S,null,Fe.children)}}else this.activateChildRoutes(S,null,O)}}class N{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class m{constructor(S,w){this.component=S,this.route=w}}function k(T,S,w){const O=T._root;return oe(O,S?S._root:null,w,[O.value])}function V(T,S){const w=Symbol(),O=S.get(T,w);return O===w?"function"!=typeof T||(0,a.Z0I)(T)?S.get(T):T:O}function oe(T,S,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=os(S);return T.children.forEach(Ae=>{(function ut(T,S,w,O,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=T.value,Ae=S?S.value:null,Fe=w?w.getContext(T.value.outlet):null;if(Ae&&te.routeConfig===Ae.routeConfig){const It=function Xt(T,S,w){if("function"==typeof w)return w(T,S);switch(w){case"pathParamsChange":return!_n(T.url,S.url);case"pathParamsOrQueryParamsChange":return!_n(T.url,S.url)||!Bn(T.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_r(T,S)||!Bn(T.queryParams,S.queryParams);default:return!_r(T,S)}}(Ae,te,te.routeConfig.runGuardsAndResolvers);It?j.canActivateChecks.push(new N(O)):(te.data=Ae.data,te._resolvedData=Ae._resolvedData),oe(T,S,te.component?Fe?Fe.children:null:w,O,j),It&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&j.canDeactivateChecks.push(new m(Fe.outlet.component,Ae))}else Ae&&mn(S,Fe,j),j.canActivateChecks.push(new N(O)),oe(T,null,te.component?Fe?Fe.children:null:w,O,j)})(Ae,te[Ae.value.outlet],w,O.concat([Ae.value]),j),delete te[Ae.value.outlet]}),Fn(te,(Ae,Fe)=>mn(Ae,w.getContext(Fe),j)),j}function mn(T,S,w){const O=os(T),j=T.value;Fn(O,(te,Ae)=>{mn(te,j.component?S?S.children.getContext(Ae):null:S,w)}),w.canDeactivateChecks.push(new m(j.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,j))}function Zn(T){return"function"==typeof T}function Co(T){return T instanceof Le.K||"EmptyError"===(null==T?void 0:T.name)}const ra=Symbol("INITIAL_VALUE");function Zs(){return(0,mt.w)(T=>ie(T.map(S=>S.pipe((0,ye.q)(1),(0,Oe.O)(ra)))).pipe((0,Be.U)(S=>{for(const w of S)if(!0!==w){if(w===ra)return ra;if(!1===w||w instanceof He)return w}return!0}),(0,ve.h)(S=>S!==ra),(0,ye.q)(1)))}function Kr(T){return(0,ct.z)((0,lt.b)(S=>{if(Lr(S))throw as(0,S)}),(0,Be.U)(S=>!0===S))}const Wr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $r(T,S,w,O,j){const te=Oi(T,S,w);return te.matched?function Gr(T,S,w,O){const j=S.canMatch;if(!j||0===j.length)return(0,z.of)(!0);const te=j.map(Ae=>{const Fe=V(Ae,T);return si(function bs(T){return T&&Zn(T.canMatch)}(Fe)?Fe.canMatch(S,w):T.runInContext(()=>Fe(S,w)))});return(0,z.of)(te).pipe(Zs(),Kr())}(O=ga(S,O),S,w).pipe((0,Be.U)(Ae=>!0===Ae?te:Object.assign({},Wr))):(0,z.of)(te)}function Oi(T,S,w){var O;if(""===S.path)return"full"===S.pathMatch&&(T.hasChildren()||w.length>0)?Object.assign({},Wr):{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const te=(S.matcher||Tt)(w,T,S);if(!te)return Object.assign({},Wr);const Ae={};Fn(te.posParams,(It,R)=>{Ae[R]=It.path});const Fe=te.consumed.length>0?Object.assign(Object.assign({},Ae),te.consumed[te.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:te.consumed,remainingSegments:w.slice(te.consumed.length),parameters:Fe,positionalParamSegments:null!==(O=te.posParams)&&void 0!==O?O:{}}}function ii(T,S,w,O,j="corrected"){if(w.length>0&&function to(T,S,w){return w.some(O=>Do(T,S,O)&&Gi(O)!==an)}(T,w,O)){const Ae=new dt(S,function ms(T,S,w,O){const j={};j[an]=O,O._sourceSegment=T,O._segmentIndexShift=S.length;for(const te of w)if(""===te.path&&Gi(te)!==an){const Ae=new dt([],{});Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,j[Gi(te)]=Ae}return j}(T,S,O,new dt(w,T.children)));return Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===w.length&&function no(T,S,w){return w.some(O=>Do(T,S,O))}(T,w,O)){const Ae=new dt(T.segments,function xi(T,S,w,O,j,te){const Ae={};for(const Fe of O)if(Do(T,w,Fe)&&!j[Gi(Fe)]){const It=new dt([],{});It._sourceSegment=T,It._segmentIndexShift="legacy"===te?T.segments.length:S.length,Ae[Gi(Fe)]=It}return Object.assign(Object.assign({},j),Ae)}(T,S,w,O,T.children,j));return Ae._sourceSegment=T,Ae._segmentIndexShift=S.length,{segmentGroup:Ae,slicedSegments:w}}const te=new dt(T.segments,T.children);return te._sourceSegment=T,te._segmentIndexShift=S.length,{segmentGroup:te,slicedSegments:w}}function Do(T,S,w){return(!(T.hasChildren()||S.length>0)||"full"!==w.pathMatch)&&""===w.path}function ho(T,S,w,O){return!!(Gi(T)===O||O!==an&&Do(S,w,T))&&("**"===T.path||Oi(S,T,w).matched)}function Qs(T,S,w){return 0===S.length&&!T.children[w]}const Vi=!1;class Ma{constructor(S){this.segmentGroup=S||null}}class rs{constructor(S){this.urlTree=S}}function Wi(T){return(0,me._)(new Ma(T))}function Dl(T){return(0,me._)(new rs(T))}class Ra{constructor(S,w,O,j,te){this.injector=S,this.configLoader=w,this.urlSerializer=O,this.urlTree=j,this.config=te,this.allowRedirects=!0}apply(){const S=ii(this.urlTree.root,[],[],this.config).segmentGroup,w=new dt(S.segments,S.children);return this.expandSegmentGroup(this.injector,this.config,w,an).pipe((0,Be.U)(te=>this.createUrlTree(wi(te),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gt(te=>{if(te instanceof rs)return this.allowRedirects=!1,this.match(te.urlTree);throw te instanceof Ma?this.noMatchError(te):te}))}match(S){return this.expandSegmentGroup(this.injector,this.config,S.root,an).pipe((0,Be.U)(j=>this.createUrlTree(wi(j),S.queryParams,S.fragment))).pipe(Gt(j=>{throw j instanceof Ma?this.noMatchError(j):j}))}noMatchError(S){return new a.vHH(4002,Vi)}createUrlTree(S,w,O){const j=oi(S);return new He(j,w,O)}expandSegmentGroup(S,w,O,j){return 0===O.segments.length&&O.hasChildren()?this.expandChildren(S,w,O).pipe((0,Be.U)(te=>new dt([],te))):this.expandSegment(S,O,w,O.segments,j,!0)}expandChildren(S,w,O){const j=[];for(const te of Object.keys(O.children))"primary"===te?j.unshift(te):j.push(te);return(0,ne.D)(j).pipe(Se(te=>{const Ae=O.children[te],Fe=Is(w,te);return this.expandSegmentGroup(S,Fe,Ae,te).pipe((0,Be.U)(It=>({segment:It,outlet:te})))}),(0,$e.R)((te,Ae)=>(te[Ae.outlet]=Ae.segment,te),{}),In())}expandSegment(S,w,O,j,te,Ae){return(0,ne.D)(O).pipe(Se(Fe=>this.expandSegmentAgainstRoute(S,w,O,Fe,j,te,Ae).pipe(Gt(R=>{if(R instanceof Ma)return(0,z.of)(null);throw R}))),(0,Ce.P)(Fe=>!!Fe),Gt((Fe,It)=>{if(Co(Fe))return Qs(w,j,te)?(0,z.of)(new dt([],{})):Wi(w);throw Fe}))}expandSegmentAgainstRoute(S,w,O,j,te,Ae,Fe){return ho(j,w,te,Ae)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(S,w,j,te,Ae):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,w,O,j,te,Ae):Wi(w):Wi(w)}expandSegmentAgainstRouteUsingRedirect(S,w,O,j,te,Ae){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,O,j,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(S,w,O,j,te,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,w,O,j){const te=this.applyRedirectCommands([],O.redirectTo,{});return O.redirectTo.startsWith("/")?Dl(te):this.lineralizeSegments(O,te).pipe((0,ae.zg)(Ae=>{const Fe=new dt(Ae,{});return this.expandSegment(S,Fe,w,Ae,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,w,O,j,te,Ae){const{matched:Fe,consumedSegments:It,remainingSegments:R,positionalParamSegments:U}=Oi(w,j,te);if(!Fe)return Wi(w);const Q=this.applyRedirectCommands(It,j.redirectTo,U);return j.redirectTo.startsWith("/")?Dl(Q):this.lineralizeSegments(j,Q).pipe((0,ae.zg)(fe=>this.expandSegment(S,w,O,fe.concat(R),Ae,!1)))}matchSegmentAgainstRoute(S,w,O,j,te){return"**"===O.path?(S=ga(O,S),O.loadChildren?(O._loadedRoutes?(0,z.of)({routes:O._loadedRoutes,injector:O._loadedInjector}):this.configLoader.loadChildren(S,O)).pipe((0,Be.U)(Fe=>(O._loadedRoutes=Fe.routes,O._loadedInjector=Fe.injector,new dt(j,{})))):(0,z.of)(new dt(j,{}))):$r(w,O,j,S).pipe((0,mt.w)(({matched:Ae,consumedSegments:Fe,remainingSegments:It})=>{var R;return Ae?(S=null!==(R=O._injector)&&void 0!==R?R:S,this.getChildConfig(S,O,j).pipe((0,ae.zg)(Q=>{var fe;const qe=null!==(fe=Q.injector)&&void 0!==fe?fe:S,wt=Q.routes,{segmentGroup:Ht,slicedSegments:sn}=ii(w,Fe,It,wt),Vn=new dt(Ht.segments,Ht.children);if(0===sn.length&&Vn.hasChildren())return this.expandChildren(qe,wt,Vn).pipe((0,Be.U)(ds=>new dt(Fe,ds)));if(0===wt.length&&0===sn.length)return(0,z.of)(new dt(Fe,{}));const gr=Gi(O)===te;return this.expandSegment(qe,Vn,wt,sn,gr?an:te,!0).pipe((0,Be.U)(Pn=>new dt(Fe.concat(Pn.segments),Pn.children)))}))):Wi(w)}))}getChildConfig(S,w,O){return w.children?(0,z.of)({routes:w.children,injector:S}):w.loadChildren?void 0!==w._loadedRoutes?(0,z.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function xn(T,S,w,O){const j=S.canLoad;if(void 0===j||0===j.length)return(0,z.of)(!0);const te=j.map(Ae=>{const Fe=V(Ae,T);return si(function Ai(T){return T&&Zn(T.canLoad)}(Fe)?Fe.canLoad(S,w):T.runInContext(()=>Fe(S,w)))});return(0,z.of)(te).pipe(Zs(),Kr())}(S,w,O).pipe((0,ae.zg)(j=>j?this.configLoader.loadChildren(S,w).pipe((0,lt.b)(te=>{w._loadedRoutes=te.routes,w._loadedInjector=te.injector})):function el(T){return(0,me._)(Ts(Vi,3))}())):(0,z.of)({routes:[],injector:S})}lineralizeSegments(S,w){let O=[],j=w.root;for(;;){if(O=O.concat(j.segments),0===j.numberOfChildren)return(0,z.of)(O);if(j.numberOfChildren>1||!j.children[an])return(0,me._)(new a.vHH(4e3,Vi));j=j.children[an]}}applyRedirectCommands(S,w,O){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),S,O)}applyRedirectCreateUrlTree(S,w,O,j){const te=this.createSegmentGroup(S,w.root,O,j);return new He(te,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(S,w){const O={};return Fn(S,(j,te)=>{if("string"==typeof j&&j.startsWith(":")){const Fe=j.substring(1);O[te]=w[Fe]}else O[te]=j}),O}createSegmentGroup(S,w,O,j){const te=this.createSegments(S,w.segments,O,j);let Ae={};return Fn(w.children,(Fe,It)=>{Ae[It]=this.createSegmentGroup(S,Fe,O,j)}),new dt(te,Ae)}createSegments(S,w,O,j){return w.map(te=>te.path.startsWith(":")?this.findPosParam(S,te,j):this.findOrReturn(te,O))}findPosParam(S,w,O){const j=O[w.path.substring(1)];if(!j)throw new a.vHH(4001,Vi);return j}findOrReturn(S,w){let O=0;for(const j of w){if(j.path===S.path)return w.splice(O),j;O++}return S}}class po{}class zr{constructor(S,w,O,j,te,Ae,Fe,It){this.injector=S,this.rootComponentType=w,this.config=O,this.urlTree=j,this.url=te,this.paramsInheritanceStrategy=Ae,this.relativeLinkResolution=Fe,this.urlSerializer=It}recognize(){const S=ii(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,an).pipe((0,Be.U)(w=>{if(null===w)return null;const O=new ts([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new pi(O,w),te=new gs(this.url,j);return this.inheritParamsAndData(te._root),te}))}inheritParamsAndData(S){const w=S.value,O=No(w,this.paramsInheritanceStrategy);w.params=Object.freeze(O.params),w.data=Object.freeze(O.data),S.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(S,w,O,j){return 0===O.segments.length&&O.hasChildren()?this.processChildren(S,w,O):this.processSegment(S,w,O,O.segments,j)}processChildren(S,w,O){return(0,ne.D)(Object.keys(O.children)).pipe(Se(j=>{const te=O.children[j],Ae=Is(w,j);return this.processSegmentGroup(S,Ae,te,j)}),(0,$e.R)((j,te)=>j&&te?(j.push(...te),j):null),function Qn(T,S=!1){return w=>w.lift(new Rn(T,S))}(j=>null!==j),(0,Nt.d)(null),In(),(0,Be.U)(j=>{if(null===j)return null;const te=sa(j);return function ma(T){T.sort((S,w)=>S.value.outlet===an?-1:w.value.outlet===an?1:S.value.outlet.localeCompare(w.value.outlet))}(te),te}))}processSegment(S,w,O,j,te){return(0,ne.D)(w).pipe(Se(Ae=>{var Fe;return this.processSegmentAgainstRoute(null!==(Fe=Ae._injector)&&void 0!==Fe?Fe:S,Ae,O,j,te)}),(0,Ce.P)(Ae=>!!Ae),Gt(Ae=>{if(Co(Ae))return Qs(O,j,te)?(0,z.of)([]):(0,z.of)(null);throw Ae}))}processSegmentAgainstRoute(S,w,O,j,te){var Ae,Fe;if(w.redirectTo||!ho(w,O,j,te))return(0,z.of)(null);let It;if("**"===w.path){const R=j.length>0?jn(j).parameters:{},U=Ws(O)+j.length,Q=new ts(j,R,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wn(w),Gi(w),null!==(Fe=null!==(Ae=w.component)&&void 0!==Ae?Ae:w._loadedComponent)&&void 0!==Fe?Fe:null,w,yi(O),U,En(w),U);It=(0,z.of)({snapshot:Q,consumedSegments:[],remainingSegments:[]})}else It=$r(O,w,j,S).pipe((0,Be.U)(({matched:R,consumedSegments:U,remainingSegments:Q,parameters:fe})=>{var qe,wt;if(!R)return null;const Ht=Ws(O)+U.length;return{snapshot:new ts(U,fe,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wn(w),Gi(w),null!==(wt=null!==(qe=w.component)&&void 0!==qe?qe:w._loadedComponent)&&void 0!==wt?wt:null,w,yi(O),Ht,En(w),Ht),consumedSegments:U,remainingSegments:Q}}));return It.pipe((0,mt.w)(R=>{var U,Q;if(null===R)return(0,z.of)(null);const{snapshot:fe,consumedSegments:qe,remainingSegments:wt}=R;S=null!==(U=w._injector)&&void 0!==U?U:S;const Ht=null!==(Q=w._loadedInjector)&&void 0!==Q?Q:S,sn=function Po(T){return T.children?T.children:T.loadChildren?T._loadedRoutes:[]}(w),{segmentGroup:Vn,slicedSegments:gr}=ii(O,qe,wt,sn.filter(Pn=>void 0===Pn.redirectTo),this.relativeLinkResolution);if(0===gr.length&&Vn.hasChildren())return this.processChildren(Ht,sn,Vn).pipe((0,Be.U)(Pn=>null===Pn?null:[new pi(fe,Pn)]));if(0===sn.length&&0===gr.length)return(0,z.of)([new pi(fe,[])]);const xr=Gi(w)===te;return this.processSegment(Ht,sn,Vn,gr,xr?an:te).pipe((0,Be.U)(Pn=>null===Pn?null:[new pi(fe,Pn)]))}))}}function ro(T){const S=T.value.routeConfig;return S&&""===S.path&&void 0===S.redirectTo}function sa(T){const S=[],w=new Set;for(const O of T){if(!ro(O)){S.push(O);continue}const j=S.find(te=>O.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...O.children),w.add(j)):S.push(O)}for(const O of w){const j=sa(O.children);S.push(new pi(O.value,j))}return S.filter(O=>!w.has(O))}function yi(T){let S=T;for(;S._sourceSegment;)S=S._sourceSegment;return S}function Ws(T){var S,w;let O=T,j=null!==(S=O._segmentIndexShift)&&void 0!==S?S:0;for(;O._sourceSegment;)O=O._sourceSegment,j+=null!==(w=O._segmentIndexShift)&&void 0!==w?w:0;return j-1}function wn(T){return T.data||{}}function En(T){return T.resolve||{}}function ya(T){return"string"==typeof T.title||null===T.title}function Fo(T){return(0,mt.w)(S=>{const w=T(S);return w?(0,ne.D)(w).pipe((0,Be.U)(()=>S)):(0,z.of)(S)})}let Wo=(()=>{class T{buildTitle(w){var O;let j,te=w.root;for(;void 0!==te;)j=null!==(O=this.getResolvedTitleForRoute(te))&&void 0!==O?O:j,te=te.children.find(Ae=>Ae.outlet===an);return j}getResolvedTitleForRoute(w){return w.data[fr]}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:function(){return(0,a.f3M)(zo)},providedIn:"root"}),T})(),zo=(()=>{class T extends Wo{constructor(w){super(),this.title=w}updateTitle(w){const O=this.buildTitle(w);void 0!==O&&this.title.setTitle(O)}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(Cr.Dx))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();class qo{}class fu extends class Na{shouldDetach(S){return!1}store(S,w){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,w){return S.routeConfig===w.routeConfig}}{}const oa=new a.OlP("",{providedIn:"root",factory:()=>({})}),va=new a.OlP("ROUTES");let cl=(()=>{class T{constructor(w,O){this.injector=w,this.compiler=O,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,z.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const O=si(w.loadComponent()).pipe((0,lt.b)(te=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=te}),zt(()=>{this.componentLoaders.delete(w)})),j=new vt.c(O,()=>new gt.xQ).pipe((0,tr.x)());return this.componentLoaders.set(w,j),j}loadChildren(w,O){if(this.childrenLoaders.get(O))return this.childrenLoaders.get(O);if(O._loadedRoutes)return(0,z.of)({routes:O._loadedRoutes,injector:O._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(O);const te=this.loadModuleFactoryOrRoutes(O.loadChildren).pipe((0,Be.U)(Fe=>{this.onLoadEndListener&&this.onLoadEndListener(O);let It,R,U=!1;Array.isArray(Fe)?R=Fe:(It=Fe.create(w).injector,R=Or(It.get(va,[],a.XFs.Self|a.XFs.Optional)));return{routes:R.map(ko),injector:It}}),zt(()=>{this.childrenLoaders.delete(O)})),Ae=new vt.c(te,()=>new gt.xQ).pipe((0,tr.x)());return this.childrenLoaders.set(O,Ae),Ae}loadModuleFactoryOrRoutes(w){return si(w()).pipe((0,ae.zg)(O=>O instanceof a.YKP||Array.isArray(O)?(0,z.of)(O):(0,ne.D)(this.compiler.compileModuleAsync(O))))}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(a.zs3),a.LFG(a.Sil))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();class Mi{}class er{shouldProcessUrl(S){return!0}extract(S){return S}merge(S,w){return S}}function Qr(T){throw T}function go(T,S,w){return S.parse("/")}const vi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Ko(){var T,S;const w=(0,a.f3M)(wr),O=(0,a.f3M)(Vr),j=(0,a.f3M)(xt.Ye),te=(0,a.f3M)(a.zs3),Ae=(0,a.f3M)(a.Sil),Fe=null!==(T=(0,a.f3M)(va,{optional:!0}))&&void 0!==T?T:[],It=null!==(S=(0,a.f3M)(oa,{optional:!0}))&&void 0!==S?S:{},R=(0,a.f3M)(zo),U=(0,a.f3M)(Wo,{optional:!0}),Q=(0,a.f3M)(Mi,{optional:!0}),fe=(0,a.f3M)(qo,{optional:!0}),qe=new di(null,w,O,j,te,Ae,Or(Fe));return Q&&(qe.urlHandlingStrategy=Q),fe&&(qe.routeReuseStrategy=fe),qe.titleStrategy=null!=U?U:R,function _a(T,S){T.errorHandler&&(S.errorHandler=T.errorHandler),T.malformedUriErrorHandler&&(S.malformedUriErrorHandler=T.malformedUriErrorHandler),T.onSameUrlNavigation&&(S.onSameUrlNavigation=T.onSameUrlNavigation),T.paramsInheritanceStrategy&&(S.paramsInheritanceStrategy=T.paramsInheritanceStrategy),T.relativeLinkResolution&&(S.relativeLinkResolution=T.relativeLinkResolution),T.urlUpdateStrategy&&(S.urlUpdateStrategy=T.urlUpdateStrategy),T.canceledNavigationResolution&&(S.canceledNavigationResolution=T.canceledNavigationResolution)}(It,qe),qe}let di=(()=>{class T{constructor(w,O,j,te,Ae,Fe,It){this.rootComponentType=w,this.urlSerializer=O,this.rootContexts=j,this.location=te,this.config=It,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new gt.xQ,this.errorHandler=Qr,this.malformedUriErrorHandler=go,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,z.of)(void 0),this.urlHandlingStrategy=new er,this.routeReuseStrategy=new fu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ae.get(cl),this.configLoader.onLoadEndListener=fe=>this.triggerEvent(new Zr(fe)),this.configLoader.onLoadStartListener=fe=>this.triggerEvent(new Ji(fe)),this.ngModule=Ae.get(a.h0i),this.console=Ae.get(a.c2e);const Q=Ae.get(a.R0b);this.isNgZoneEnabled=Q instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(It),this.currentUrlTree=function Yr(){return new He(new dt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vs(this.currentUrlTree,this.rootComponentType),this.transitions=new ke.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var w;return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}setupNavigations(w){const O=this.events;return w.pipe((0,ve.h)(j=>0!==j.id),(0,Be.U)(j=>Object.assign(Object.assign({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),(0,mt.w)(j=>{let te=!1,Ae=!1;return(0,z.of)(j).pipe((0,lt.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.rawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,mt.w)(Fe=>{const It=this.browserUrlTree.toString(),R=!this.navigated||Fe.extractedUrl.toString()!==It||It!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||R)&&this.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return To(Fe.source)&&(this.browserUrlTree=Fe.extractedUrl),(0,z.of)(Fe).pipe((0,mt.w)(Q=>{const fe=this.transitions.getValue();return O.next(new en(Q.id,this.serializeUrl(Q.extractedUrl),Q.source,Q.restoredState)),fe!==this.transitions.getValue()?Re.E:Promise.resolve(Q)}),function fo(T,S,w,O){return(0,mt.w)(j=>function Wa(T,S,w,O,j){return new Ra(T,S,w,O,j).apply()}(T,S,w,j.extractedUrl,O).pipe((0,Be.U)(te=>Object.assign(Object.assign({},j),{urlAfterRedirects:te}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lt.b)(Q=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Q.urlAfterRedirects}),j.urlAfterRedirects=Q.urlAfterRedirects}),function zs(T,S,w,O,j,te){return(0,ae.zg)(Ae=>function jl(T,S,w,O,j,te,Ae="emptyOnly",Fe="legacy"){return new zr(T,S,w,O,j,Ae,Fe,te).recognize().pipe((0,mt.w)(It=>null===It?function hu(T){return new nt.y(S=>S.error(T))}(new po):(0,z.of)(It)))}(T,S,w,Ae.urlAfterRedirects,O.serialize(Ae.urlAfterRedirects),O,j,te).pipe((0,Be.U)(Fe=>Object.assign(Object.assign({},Ae),{targetSnapshot:Fe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lt.b)(Q=>{if(j.targetSnapshot=Q.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Q.extras.skipLocationChange){const qe=this.urlHandlingStrategy.merge(Q.urlAfterRedirects,Q.rawUrl);this.setBrowserUrl(qe,Q)}this.browserUrlTree=Q.urlAfterRedirects}const fe=new Br(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(Q.urlAfterRedirects),Q.targetSnapshot);O.next(fe)}));if(R&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fe,extractedUrl:qe,source:wt,restoredState:Ht,extras:sn}=Fe,Vn=new en(fe,this.serializeUrl(qe),wt,Ht);O.next(Vn);const gr=vs(qe,this.rootComponentType).snapshot;return j=Object.assign(Object.assign({},Fe),{targetSnapshot:gr,urlAfterRedirects:qe,extras:Object.assign(Object.assign({},sn),{skipLocationChange:!1,replaceUrl:!1})}),(0,z.of)(j)}return this.rawUrlTree=Fe.rawUrl,Fe.resolve(null),Re.E}),(0,lt.b)(Fe=>{const It=new Os(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(It)}),(0,Be.U)(Fe=>j=Object.assign(Object.assign({},Fe),{guards:k(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)})),function ia(T,S){return(0,ae.zg)(w=>{const{targetSnapshot:O,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:Ae}}=w;return 0===Ae.length&&0===te.length?(0,z.of)(Object.assign(Object.assign({},w),{guardsResult:!0})):function F(T,S,w,O){return(0,ne.D)(T).pipe((0,ae.zg)(j=>function Pt(T,S,w,O,j){const te=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,z.of)(!0);const Ae=te.map(Fe=>{var It;const R=null!==(It=Ss(S))&&void 0!==It?It:j,U=V(Fe,R);return si(function ws(T){return T&&Zn(T.canDeactivate)}(U)?U.canDeactivate(T,S,w,O):R.runInContext(()=>U(T,S,w,O))).pipe((0,Ce.P)())});return(0,z.of)(Ae).pipe(Zs())}(j.component,j.route,w,S,O)),(0,Ce.P)(j=>!0!==j,!0))}(Ae,O,j,T).pipe((0,ae.zg)(Fe=>Fe&&function ti(T){return"boolean"==typeof T}(Fe)?function Z(T,S,w,O){return(0,ne.D)(S).pipe(Se(j=>(0,st.z)(function re(T,S){return null!==T&&S&&S(new Us(T)),(0,z.of)(!0)}(j.route.parent,O),function $(T,S){return null!==T&&S&&S(new es(T)),(0,z.of)(!0)}(j.route,O),function Dt(T,S,w){const O=S[S.length-1],te=S.slice(0,S.length-1).reverse().map(Ae=>function E(T){const S=T.routeConfig?T.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:T,guards:S}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>De(()=>{const Fe=Ae.guards.map(It=>{var R;const U=null!==(R=Ss(Ae.node))&&void 0!==R?R:w,Q=V(It,U);return si(function ns(T){return T&&Zn(T.canActivateChild)}(Q)?Q.canActivateChild(O,T):U.runInContext(()=>Q(O,T))).pipe((0,Ce.P)())});return(0,z.of)(Fe).pipe(Zs())}));return(0,z.of)(te).pipe(Zs())}(T,j.path,w),function Pe(T,S,w){const O=S.routeConfig?S.routeConfig.canActivate:null;if(!O||0===O.length)return(0,z.of)(!0);const j=O.map(te=>De(()=>{var Ae;const Fe=null!==(Ae=Ss(S))&&void 0!==Ae?Ae:w,It=V(te,Fe);return si(function ci(T){return T&&Zn(T.canActivate)}(It)?It.canActivate(S,T):Fe.runInContext(()=>It(S,T))).pipe((0,Ce.P)())}));return(0,z.of)(j).pipe(Zs())}(T,j.route,w))),(0,Ce.P)(j=>!0!==j,!0))}(O,te,T,S):(0,z.of)(Fe)),(0,Be.U)(Fe=>Object.assign(Object.assign({},w),{guardsResult:Fe})))})}(this.ngModule.injector,Fe=>this.triggerEvent(Fe)),(0,lt.b)(Fe=>{if(j.guardsResult=Fe.guardsResult,Lr(Fe.guardsResult))throw as(0,Fe.guardsResult);const It=new Sr(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.triggerEvent(It)}),(0,ve.h)(Fe=>!!Fe.guardsResult||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,"",3),!1)),Fo(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,z.of)(Fe).pipe((0,lt.b)(It=>{const R=new Ir(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(R)}),(0,mt.w)(It=>{let R=!1;return(0,z.of)(It).pipe(function cn(T,S){return(0,ae.zg)(w=>{const{targetSnapshot:O,guards:{canActivateChecks:j}}=w;if(!j.length)return(0,z.of)(w);let te=0;return(0,ne.D)(j).pipe(Se(Ae=>function kt(T,S,w,O){const j=T.routeConfig,te=T._resolve;return void 0!==(null==j?void 0:j.title)&&!ya(j)&&(te[fr]=j.title),function Qt(T,S,w,O){const j=function Ni(T){return[...Object.keys(T),...Object.getOwnPropertySymbols(T)]}(T);if(0===j.length)return(0,z.of)({});const te={};return(0,ne.D)(j).pipe((0,ae.zg)(Ae=>function Oa(T,S,w,O){var j;const te=null!==(j=Ss(S))&&void 0!==j?j:O,Ae=V(T,te);return si(Ae.resolve?Ae.resolve(S,w):te.runInContext(()=>Ae(S,w)))}(T[Ae],S,w,O).pipe((0,Ce.P)(),(0,lt.b)(Fe=>{te[Ae]=Fe}))),Qe(1),function ur(T){return S=>S.lift(new Un(T))}(te),Gt(Ae=>Co(Ae)?Re.E:(0,me._)(Ae)))}(te,T,S,O).pipe((0,Be.U)(Ae=>(T._resolvedData=Ae,T.data=No(T,w).resolve,j&&ya(j)&&(T.data[fr]=j.title),null)))}(Ae.route,O,T,S)),(0,lt.b)(()=>te++),Qe(1),(0,ae.zg)(Ae=>te===j.length?(0,z.of)(w):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lt.b)({next:()=>R=!0,complete:()=>{R||(this.restoreHistory(It),this.cancelNavigationTransition(It,"",2))}}))}),(0,lt.b)(It=>{const R=new Xn(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(R)}))}),Fo(Fe=>{const It=R=>{var U;const Q=[];(null===(U=R.routeConfig)||void 0===U?void 0:U.loadComponent)&&!R.routeConfig._loadedComponent&&Q.push(this.configLoader.loadComponent(R.routeConfig).pipe((0,lt.b)(fe=>{R.component=fe}),(0,Be.U)(()=>{})));for(const fe of R.children)Q.push(...It(fe));return Q};return ie(It(Fe.targetSnapshot.root)).pipe((0,Nt.d)(),(0,ye.q)(1))}),Fo(()=>this.afterPreactivation()),(0,Be.U)(Fe=>{const It=function gi(T,S,w){const O=Jn(T,S._root,w?w._root:void 0);return new fs(O,S)}(this.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return j=Object.assign(Object.assign({},Fe),{targetRouterState:It})}),(0,lt.b)(Fe=>{this.currentUrlTree=Fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Fe.urlAfterRedirects,Fe.rawUrl),this.routerState=Fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Fe),this.browserUrlTree=Fe.urlAfterRedirects)}),((T,S,w)=>(0,Be.U)(O=>(new B(S,O.targetRouterState,O.currentRouterState,w).activate(T),O)))(this.rootContexts,this.routeReuseStrategy,Fe=>this.triggerEvent(Fe)),(0,lt.b)({next(){te=!0},complete(){te=!0}}),zt(()=>{var Fe;te||Ae||this.cancelNavigationTransition(j,"",1),(null===(Fe=this.currentNavigation)||void 0===Fe?void 0:Fe.id)===j.id&&(this.currentNavigation=null)}),Gt(Fe=>{var It;if(Ae=!0,Es(Fe)){ls(Fe)||(this.navigated=!0,this.restoreHistory(j,!0));const R=new Yn(j.id,this.serializeUrl(j.extractedUrl),Fe.message,Fe.cancellationCode);if(O.next(R),ls(Fe)){const U=this.urlHandlingStrategy.merge(Fe.url,this.rawUrlTree),Q={skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||To(j.source)};this.scheduleNavigation(U,"imperative",null,Q,{resolve:j.resolve,reject:j.reject,promise:j.promise})}else j.resolve(!1)}else{this.restoreHistory(j,!0);const R=new ui(j.id,this.serializeUrl(j.extractedUrl),Fe,null!==(It=j.targetSnapshot)&&void 0!==It?It:void 0);O.next(R);try{j.resolve(this.errorHandler(Fe))}catch(U){j.reject(U)}}return Re.E}))}))}resetRootComponentType(w){this.rootComponentType=w,this.routerState.root.component=this.rootComponentType}setTransition(w){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),w))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const O="popstate"===w.type?"popstate":"hashchange";"popstate"===O&&setTimeout(()=>{var j;const te={replaceUrl:!0},Ae=null!==(j=w.state)&&void 0!==j&&j.navigationId?w.state:null;if(Ae){const It=Object.assign({},Ae);delete It.navigationId,delete It.\u0275routerPageId,0!==Object.keys(It).length&&(te.state=It)}const Fe=this.parseUrl(w.url);this.scheduleNavigation(Fe,O,Ae,te)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(w){this.events.next(w)}resetConfig(w){this.config=w.map(ko),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,O={}){const{relativeTo:j,queryParams:te,fragment:Ae,queryParamsHandling:Fe,preserveFragment:It}=O,R=j||this.routerState.root,U=It?this.currentUrlTree.fragment:Ae;let Q=null;switch(Fe){case"merge":Q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),te);break;case"preserve":Q=this.currentUrlTree.queryParams;break;default:Q=te||null}return null!==Q&&(Q=this.removeEmptyProps(Q)),Fi(R,this.currentUrlTree,w,Q,null!=U?U:null)}navigateByUrl(w,O={skipLocationChange:!1}){const j=Lr(w)?w:this.parseUrl(w),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,"imperative",null,O)}navigate(w,O={skipLocationChange:!1}){return function Ea(T){for(let S=0;S<T.length;S++){if(null==T[S])throw new a.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,O),O)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let O;try{O=this.urlSerializer.parse(w)}catch(j){O=this.malformedUriErrorHandler(j,this.urlSerializer,w)}return O}isActive(w,O){let j;if(j=!0===O?Object.assign({},vi):!1===O?Object.assign({},dn):O,Lr(w))return $t(this.currentUrlTree,w,j);const te=this.parseUrl(w);return $t(this.currentUrlTree,te,j)}removeEmptyProps(w){return Object.keys(w).reduce((O,j)=>{const te=w[j];return null!=te&&(O[j]=te),O},{})}processNavigations(){this.navigations.subscribe(w=>{var O;this.navigated=!0,this.lastSuccessfulId=w.id,this.currentPageId=w.targetPageId,this.events.next(new Dn(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(O=this.titleStrategy)||void 0===O||O.updateTitle(this.routerState.snapshot),w.resolve(!0)},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)})}scheduleNavigation(w,O,j,te,Ae){var Fe,It;if(this.disposed)return Promise.resolve(!1);let R,U,Q;Ae?(R=Ae.resolve,U=Ae.reject,Q=Ae.promise):Q=new Promise((wt,Ht)=>{R=wt,U=Ht});const fe=++this.navigationId;let qe;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(j=this.location.getState()),qe=j&&j.\u0275routerPageId?j.\u0275routerPageId:te.replaceUrl||te.skipLocationChange?null!==(Fe=this.browserPageId)&&void 0!==Fe?Fe:0:(null!==(It=this.browserPageId)&&void 0!==It?It:0)+1):qe=0,this.setTransition({id:fe,targetPageId:qe,source:O,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:w,extras:te,resolve:R,reject:U,promise:Q,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Q.catch(wt=>Promise.reject(wt))}setBrowserUrl(w,O){const j=this.urlSerializer.serialize(w),te=Object.assign(Object.assign({},O.extras.state),this.generateNgRouterState(O.id,O.targetPageId));this.location.isCurrentPathEqualTo(j)||O.extras.replaceUrl?this.location.replaceState(j,"",te):this.location.go(j,"",te)}restoreHistory(w,O=!1){var j,te;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)||0===Ae?this.currentUrlTree===(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)&&0===Ae&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(O&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(w,O,j){const te=new Yn(w.id,this.serializeUrl(w.extractedUrl),O,j);this.triggerEvent(te),w.resolve(!1)}generateNgRouterState(w,O){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:O}:{navigationId:w}}}return T.\u0275fac=function(w){a.$Z()},T.\u0275prov=a.Yz7({token:T,factory:function(){return Ko()},providedIn:"root"}),T})();function To(T){return"imperative"!==T}let Ti=(()=>{class T{constructor(w,O,j,te,Ae){this.router=w,this.route=O,this.tabIndexAttribute=j,this.renderer=te,this.el=Ae,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new gt.xQ,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,a.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,a.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,a.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){if(null!=this.tabIndexAttribute)return;const O=this.renderer,j=this.el.nativeElement;null!==w?O.setAttribute(j,"tabindex",w):O.removeAttribute(j,"tabindex")}ngOnChanges(w){this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return T.\u0275fac=function(w){return new(w||T)(a.Y36(di),a.Y36(Di),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},T.\u0275dir=a.lG2({type:T,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(w,O){1&w&&a.NdJ("click",function(){return O.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[a.TTD]}),T})();class So{}let gu=(()=>{class T{preload(w,O){return O().pipe(Gt(()=>(0,z.of)(null)))}}return T.\u0275fac=function(w){return new(w||T)},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})(),mu=(()=>{class T{constructor(w,O,j,te,Ae){this.router=w,this.injector=j,this.preloadingStrategy=te,this.loader=Ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,ve.h)(w=>w instanceof Dn),Se(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,O){var j,te,Ae;const Fe=[];for(const It of O){It.providers&&!It._injector&&(It._injector=(0,a.MMx)(It.providers,w,`Route: ${It.path}`));const R=null!==(j=It._injector)&&void 0!==j?j:w,U=null!==(te=It._loadedInjector)&&void 0!==te?te:R;It.loadChildren&&!It._loadedRoutes&&void 0===It.canLoad||It.loadComponent&&!It._loadedComponent?Fe.push(this.preloadConfig(R,It)):(It.children||It._loadedRoutes)&&Fe.push(this.processRoutes(U,null!==(Ae=It.children)&&void 0!==Ae?Ae:It._loadedRoutes))}return(0,ne.D)(Fe).pipe((0,nr.J)())}preloadConfig(w,O){return this.preloadingStrategy.preload(O,()=>{let j;j=O.loadChildren&&void 0===O.canLoad?this.loader.loadChildren(w,O):(0,z.of)(null);const te=j.pipe((0,ae.zg)(Ae=>{var Fe;return null===Ae?(0,z.of)(void 0):(O._loadedRoutes=Ae.routes,O._loadedInjector=Ae.injector,this.processRoutes(null!==(Fe=Ae.injector)&&void 0!==Fe?Fe:w,Ae.routes))}));if(O.loadComponent&&!O._loadedComponent){const Ae=this.loader.loadComponent(O);return(0,ne.D)([te,Ae]).pipe((0,nr.J)())}return te})}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(di),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(So),a.LFG(cl))},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();const Ao=new a.OlP("");let zl=(()=>{class T{constructor(w,O,j={}){this.router=w,this.viewportScroller=O,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(w=>{w instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Dn&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.router.parseUrl(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(w=>{w instanceof Ar&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,O){this.router.triggerEvent(new Ar(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,O))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return T.\u0275fac=function(w){a.$Z()},T.\u0275prov=a.Yz7({token:T,factory:T.\u0275fac}),T})();function mo(T,S){return{\u0275kind:T,\u0275providers:S}}function Ia(T){return[{provide:va,multi:!0,useValue:T}]}function yo(){const T=(0,a.f3M)(a.zs3);return S=>{var w,O;const j=T.get(a.z2F);if(S!==j.components[0])return;const te=T.get(di),Ae=T.get(As);1===T.get(za)&&te.initialNavigation(),null===(w=T.get(so,null,a.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(O=T.get(Ao,null,a.XFs.Optional))||void 0===O||O.init(),te.resetRootComponentType(j.componentTypes[0]),Ae.closed||(Ae.next(),Ae.unsubscribe())}}const As=new a.OlP("",{factory:()=>new gt.xQ}),za=new a.OlP("",{providedIn:"root",factory:()=>1});const so=new a.OlP("");function tl(T){return mo(0,[{provide:so,useExisting:mu},{provide:So,useExisting:T}])}const xs=new a.OlP("ROUTER_FORROOT_GUARD"),cs=[xt.Ye,{provide:wr,useClass:Nr},{provide:di,useFactory:Ko},Vr,{provide:Di,useFactory:function io(T){return T.routerState.root},deps:[di]},cl];function Xr(){return new a.PXZ("Router",di)}let yu=(()=>{class T{constructor(w){}static forRoot(w,O){return{ngModule:T,providers:[cs,[],Ia(w),{provide:xs,useFactory:ys,deps:[[di,new a.FiY,new a.tp0]]},{provide:oa,useValue:O||{}},null!=O&&O.useHash?{provide:xt.S$,useClass:xt.Do}:{provide:xt.S$,useClass:xt.b0},{provide:Ao,useFactory:()=>{const T=(0,a.f3M)(di),S=(0,a.f3M)(xt.EM),w=(0,a.f3M)(oa);return w.scrollOffset&&S.setOffset(w.scrollOffset),new zl(T,S,w)}},null!=O&&O.preloadingStrategy?tl(O.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:Xr},null!=O&&O.initialNavigation?nl(O):[],[{provide:Vo,useFactory:yo},{provide:a.tb,multi:!0,useExisting:Vo}]]}}static forChild(w){return{ngModule:T,providers:[Ia(w)]}}}return T.\u0275fac=function(w){return new(w||T)(a.LFG(xs,8))},T.\u0275mod=a.oAB({type:T}),T.\u0275inj=a.cJS({imports:[Ho]}),T})();function ys(T){return"guarded"}function nl(T){return["disabled"===T.initialNavigation?mo(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const S=(0,a.f3M)(di);return()=>{S.setUpLocationChangeListener()}}},{provide:za,useValue:2}]).\u0275providers:[],"enabledBlocking"===T.initialNavigation?mo(2,[{provide:za,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:S=>{const w=S.get(xt.V_,Promise.resolve());let O=!1;return()=>w.then(()=>new Promise(te=>{const Ae=S.get(di),Fe=S.get(As);(function j(te){S.get(di).events.pipe((0,ve.h)(Fe=>Fe instanceof Dn||Fe instanceof Yn||Fe instanceof ui),(0,Be.U)(Fe=>Fe instanceof Dn||Fe instanceof Yn&&(0===Fe.code||1===Fe.code)&&null),(0,ve.h)(Fe=>null!==Fe),(0,ye.q)(1)).subscribe(()=>{te()})})(()=>{te(!0),O=!0}),Ae.afterPreactivation=()=>(te(!0),O||Fe.closed?(0,z.of)(void 0):Fe),Ae.initialNavigation()}))}}]).\u0275providers:[]]}const Vo=new a.OlP("")},3942:(tn,ot,H)=>{"use strict";H.d(ot,{Z:()=>st});var a=H(2090),ne=H(4859),z=H(9681),ke=H(1877);class Le{constructor(Re,De){this._delegate=Re,this.firebase=De,(0,z._addComponent)(Re,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,z.deleteApp)(this._delegate)))}_getService(Re,De=z._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const me=this._delegate.container.getProvider(Re);return!me.isInitialized()&&"EXPLICIT"===(null===(ct=me.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&me.initialize(),me.getImmediate({identifier:De})}_removeServiceInstance(Re,De=z._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(De)}_addComponent(Re){(0,z._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,z._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function be(){const nt=function pe(nt){const Re={},De={__esModule:!0,initializeApp:function vt(mt,ye={}){const Oe=z.initializeApp(mt,ye);if((0,a.r3)(Re,Oe.name))return Re[Oe.name];const ve=new nt(Oe,De);return Re[Oe.name]=ve,ve},app:me,registerVersion:z.registerVersion,setLogLevel:z.setLogLevel,onLog:z.onLog,apps:null,SDK_VERSION:z.SDK_VERSION,INTERNAL:{registerComponent:function xt(mt){const ye=mt.name,Oe=ye.replace("-compat","");if(z._registerComponent(mt)&&"PUBLIC"===mt.type){const ve=(ae=me())=>{if("function"!=typeof ae[Oe])throw Ee.create("invalid-app-argument",{appName:ye});return ae[Oe]()};void 0!==mt.serviceProps&&(0,a.ZB)(ve,mt.serviceProps),De[Oe]=ve,nt.prototype[Oe]=function(...ae){return this._getService.bind(this,ye).apply(this,mt.multipleInstances?ae:[])}}return"PUBLIC"===mt.type?De[Oe]:null},removeApp:function ct(mt){delete Re[mt]},useAsService:function Be(mt,ye){return"serverAuth"===ye?null:ye},modularAPIs:z}};function me(mt){if(!(0,a.r3)(Re,mt=mt||z._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:mt});return Re[mt]}return De.default=De,Object.defineProperty(De,"apps",{get:function gt(){return Object.keys(Re).map(mt=>Re[mt])}}),me.App=nt,De}(Le);return nt.INTERNAL=Object.assign(Object.assign({},nt.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Re(De){(0,a.ZB)(nt,De)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),nt}(),de=new ke.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const nt=self.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=ce;!function Ge(nt){(0,z.registerVersion)("@firebase/app-compat","0.1.39",nt)}()},9681:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{FirebaseError:()=>ke.ZR,SDK_VERSION:()=>Wn,_DEFAULT_ENTRY_NAME:()=>at,_addComponent:()=>Qe,_addOrOverwriteComponent:()=>ht,_apps:()=>Ue,_clearComponents:()=>bn,_components:()=>Xe,_getProvider:()=>Ft,_registerComponent:()=>ft,_removeServiceInstance:()=>Nt,deleteApp:()=>mr,getApp:()=>Un,getApps:()=>or,initializeApp:()=>ur,onLog:()=>Pr,registerVersion:()=>rr,setLogLevel:()=>tr});var a=H(5861),ne=H(4859),z=H(1877),ke=H(2090),Le=H(8766);class he{constructor($t){this.container=$t}getPlatformInfoString(){return this.container.getProviders().map(un=>{if(function Ee(vn){const $t=vn.getComponent();return"VERSION"===(null==$t?void 0:$t.type)}(un)){const Ln=un.getImmediate();return`${Ln.library}/${Ln.version}`}return null}).filter(un=>un).join(" ")}}const pe="@firebase/app",ce=new z.Yd("@firebase/app"),at="[DEFAULT]",$e={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ue=new Map,Xe=new Map;function Qe(vn,$t){try{vn.container.addComponent($t)}catch(un){ce.debug(`Component ${$t.name} failed to register with FirebaseApp ${vn.name}`,un)}}function ht(vn,$t){vn.container.addOrOverwriteComponent($t)}function ft(vn){const $t=vn.name;if(Xe.has($t))return ce.debug(`There were multiple attempts to register component ${$t}.`),!1;Xe.set($t,vn);for(const un of Ue.values())Qe(un,vn);return!0}function Ft(vn,$t){const un=vn.container.getProvider("heartbeat").getImmediate({optional:!0});return un&&un.triggerHeartbeat(),vn.container.getProvider($t)}function Nt(vn,$t,un=at){Ft(vn,$t).clearInstance(un)}function bn(){Xe.clear()}const Qn=new ke.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rn{constructor($t,un,Ln){this._isDeleted=!1,this._options=Object.assign({},$t),this._config=Object.assign({},un),this._name=un.name,this._automaticDataCollectionEnabled=un.automaticDataCollectionEnabled,this._container=Ln,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($t){this.checkDestroyed(),this._automaticDataCollectionEnabled=$t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($t){this._isDeleted=$t}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Wn="9.14.0";function ur(vn,$t={}){let un=vn;"object"!=typeof $t&&($t={name:$t});const Ln=Object.assign({name:at,automaticDataCollectionEnabled:!1},$t),Sn=Ln.name;if("string"!=typeof Sn||!Sn)throw Qn.create("bad-app-name",{appName:String(Sn)});if(un||(un=(0,ke.aH)()),!un)throw Qn.create("no-options");const On=Ue.get(Sn);if(On){if((0,ke.vZ)(un,On.options)&&(0,ke.vZ)(Ln,On.config))return On;throw Qn.create("duplicate-app",{appName:Sn})}const je=new ne.H0(Sn);for(const He of Xe.values())je.addComponent(He);const Ne=new Rn(un,Ln,je);return Ue.set(Sn,Ne),Ne}function Un(vn=at){const $t=Ue.get(vn);if(!$t&&vn===at)return ur();if(!$t)throw Qn.create("no-app",{appName:vn});return $t}function or(){return Array.from(Ue.values())}function mr(vn){return zt.apply(this,arguments)}function zt(){return(zt=(0,a.Z)(function*(vn){const $t=vn.name;Ue.has($t)&&(Ue.delete($t),yield Promise.all(vn.container.getProviders().map(un=>un.delete())),vn.isDeleted=!0)})).apply(this,arguments)}function rr(vn,$t,un){var Ln;let Sn=null!==(Ln=$e[vn])&&void 0!==Ln?Ln:vn;un&&(Sn+=`-${un}`);const On=Sn.match(/\s|\//),je=$t.match(/\s|\//);if(On||je){const Ne=[`Unable to register library "${Sn}" with version "${$t}":`];return On&&Ne.push(`library name "${Sn}" contains illegal characters (whitespace or "/")`),On&&je&&Ne.push("and"),je&&Ne.push(`version name "${$t}" contains illegal characters (whitespace or "/")`),void ce.warn(Ne.join(" "))}ft(new ne.wA(`${Sn}-version`,()=>({library:Sn,version:$t}),"VERSION"))}function Pr(vn,$t){if(null!==vn&&"function"!=typeof vn)throw Qn.create("invalid-log-argument");(0,z.Am)(vn,$t)}function tr(vn){(0,z.Ub)(vn)}const an="firebase-heartbeat-store";let fr=null;function Tn(){return fr||(fr=(0,Le.X3)("firebase-heartbeat-database",1,{upgrade:(vn,$t)=>{0===$t&&vn.createObjectStore(an)}}).catch(vn=>{throw Qn.create("idb-open",{originalErrorMessage:vn.message})})),fr}function Tt(){return(Tt=(0,a.Z)(function*(vn){var $t;try{return(yield Tn()).transaction(an).objectStore(an).get(Dr(vn))}catch(un){if(un instanceof ke.ZR)ce.warn(un.message);else{const Ln=Qn.create("idb-get",{originalErrorMessage:null===($t=un)||void 0===$t?void 0:$t.message});ce.warn(Ln.message)}}})).apply(this,arguments)}function yr(vn,$t){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,a.Z)(function*(vn,$t){var un;try{const Sn=(yield Tn()).transaction(an,"readwrite");return yield Sn.objectStore(an).put($t,Dr(vn)),Sn.done}catch(Ln){if(Ln instanceof ke.ZR)ce.warn(Ln.message);else{const Sn=Qn.create("idb-set",{originalErrorMessage:null===(un=Ln)||void 0===un?void 0:un.message});ce.warn(Sn.message)}}})).apply(this,arguments)}function Dr(vn){return`${vn.name}!${vn.options.appId}`}class ji{constructor($t){this.container=$t,this._heartbeatsCache=null;const un=this.container.getProvider("app").getImmediate();this._storage=new ir(un),this._heartbeatsCachePromise=this._storage.read().then(Ln=>(this._heartbeatsCache=Ln,Ln))}triggerHeartbeat(){var $t=this;return(0,a.Z)(function*(){const Ln=$t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Sn=Fn();if(null===$t._heartbeatsCache&&($t._heartbeatsCache=yield $t._heartbeatsCachePromise),$t._heartbeatsCache.lastSentHeartbeatDate!==Sn&&!$t._heartbeatsCache.heartbeats.some(On=>On.date===Sn))return $t._heartbeatsCache.heartbeats.push({date:Sn,agent:Ln}),$t._heartbeatsCache.heartbeats=$t._heartbeatsCache.heartbeats.filter(On=>{const je=new Date(On.date).valueOf();return Date.now()-je<=2592e6}),$t._storage.overwrite($t._heartbeatsCache)})()}getHeartbeatsHeader(){var $t=this;return(0,a.Z)(function*(){if(null===$t._heartbeatsCache&&(yield $t._heartbeatsCachePromise),null===$t._heartbeatsCache||0===$t._heartbeatsCache.heartbeats.length)return"";const un=Fn(),{heartbeatsToSend:Ln,unsentEntries:Sn}=function si(vn,$t=1024){const un=[];let Ln=vn.slice();for(const Sn of vn){const On=un.find(je=>je.agent===Sn.agent);if(On){if(On.dates.push(Sn.date),Yr(un)>$t){On.dates.pop();break}}else if(un.push({agent:Sn.agent,dates:[Sn.date]}),Yr(un)>$t){un.pop();break}Ln=Ln.slice(1)}return{heartbeatsToSend:un,unsentEntries:Ln}}($t._heartbeatsCache.heartbeats),On=(0,ke.L)(JSON.stringify({version:2,heartbeats:Ln}));return $t._heartbeatsCache.lastSentHeartbeatDate=un,Sn.length>0?($t._heartbeatsCache.heartbeats=Sn,yield $t._storage.overwrite($t._heartbeatsCache)):($t._heartbeatsCache.heartbeats=[],$t._storage.overwrite($t._heartbeatsCache)),On})()}}function Fn(){return(new Date).toISOString().substring(0,10)}class ir{constructor($t){this.app=$t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,ke.hl)()&&(0,ke.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $t=this;return(0,a.Z)(function*(){return(yield $t._canUseIndexedDBPromise)&&(yield function gn(vn){return Tt.apply(this,arguments)}($t.app))||{heartbeats:[]}})()}overwrite($t){var un=this;return(0,a.Z)(function*(){var Ln;if(yield un._canUseIndexedDBPromise){const On=yield un.read();return yr(un.app,{lastSentHeartbeatDate:null!==(Ln=$t.lastSentHeartbeatDate)&&void 0!==Ln?Ln:On.lastSentHeartbeatDate,heartbeats:$t.heartbeats})}})()}add($t){var un=this;return(0,a.Z)(function*(){var Ln;if(yield un._canUseIndexedDBPromise){const On=yield un.read();return yr(un.app,{lastSentHeartbeatDate:null!==(Ln=$t.lastSentHeartbeatDate)&&void 0!==Ln?Ln:On.lastSentHeartbeatDate,heartbeats:[...On.heartbeats,...$t.heartbeats]})}})()}}function Yr(vn){return(0,ke.L)(JSON.stringify({version:2,heartbeats:vn})).length}!function ni(vn){ft(new ne.wA("platform-logger",$t=>new he($t),"PRIVATE")),ft(new ne.wA("heartbeat",$t=>new ji($t),"PRIVATE")),rr(pe,"0.8.4",vn),rr(pe,"0.8.4","esm2017"),rr("fire-js","")}("")},4859:(tn,ot,H)=>{"use strict";H.d(ot,{H0:()=>pe,wA:()=>z,zt:()=>Le});var a=H(5861),ne=H(2090);class z{constructor(ce,de,ie){this.name=ce,this.instanceFactory=de,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const ke="[DEFAULT]";class Le{constructor(ce,de){this.name=ce,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const de=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(de)){const ie=new ne.BH;if(this.instancesDeferred.set(de,ie),this.isInitialized(de)||this.shouldAutoInitialize())try{const Ie=this.getOrInitializeService({instanceIdentifier:de});Ie&&ie.resolve(Ie)}catch(Ie){}}return this.instancesDeferred.get(de).promise}getImmediate(ce){var de;const ie=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),Ie=null!==(de=null==ce?void 0:ce.optional)&&void 0!==de&&de;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ge){if(Ie)return null;throw Ge}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Ee(be){return"EAGER"===be.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:ke})}catch(de){}for(const[de,ie]of this.instancesDeferred.entries()){const Ie=this.normalizeInstanceIdentifier(de);try{const Ge=this.getOrInitializeService({instanceIdentifier:Ie});ie.resolve(Ge)}catch(Ge){}}}}clearInstance(ce=ke){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,a.Z)(function*(){const de=Array.from(ce.instances.values());yield Promise.all([...de.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...de.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=ke){return this.instances.has(ce)}getOptions(ce=ke){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:de={}}=ce,ie=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ie=this.getOrInitializeService({instanceIdentifier:ie,options:de});for(const[Ge,st]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ge)&&st.resolve(Ie);return Ie}onInit(ce,de){var ie;const Ie=this.normalizeInstanceIdentifier(de),Ge=null!==(ie=this.onInitCallbacks.get(Ie))&&void 0!==ie?ie:new Set;Ge.add(ce),this.onInitCallbacks.set(Ie,Ge);const st=this.instances.get(Ie);return st&&ce(st,Ie),()=>{Ge.delete(ce)}}invokeOnInitCallbacks(ce,de){const ie=this.onInitCallbacks.get(de);if(ie)for(const Ie of ie)try{Ie(ce,de)}catch(Ge){}}getOrInitializeService({instanceIdentifier:ce,options:de={}}){let ie=this.instances.get(ce);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(be=ce,be===ke?void 0:be),options:de}),this.instances.set(ce,ie),this.instancesOptions.set(ce,de),this.invokeOnInitCallbacks(ie,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,ie)}catch(Ie){}var be;return ie||null}normalizeInstanceIdentifier(ce=ke){return this.component?this.component.multipleInstances?ce:ke:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const de=this.getProvider(ce.name);if(de.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);de.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const de=new Le(ce,this);return this.providers.set(ce,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(tn,ot,H)=>{"use strict";H.d(ot,{Am:()=>be,Ub:()=>pe,Yd:()=>Ee,in:()=>ne});const a=[];var ne=(()=>{return(ce=ne||(ne={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",ne;var ce})();const z={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},ke=ne.INFO,Le={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},he=(ce,de,...ie)=>{if(de<ce.logLevel)return;const Ie=(new Date).toISOString(),Ge=Le[de];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Ge](`[${Ie}]  ${ce.name}:`,...ie)};class Ee{constructor(de){this.name=de,this._logLevel=ke,this._logHandler=he,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in ne))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?z[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...de),this._logHandler(this,ne.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...de),this._logHandler(this,ne.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...de),this._logHandler(this,ne.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...de),this._logHandler(this,ne.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...de),this._logHandler(this,ne.ERROR,...de)}}function pe(ce){a.forEach(de=>{de.setLogLevel(ce)})}function be(ce,de){for(const ie of a){let Ie=null;de&&de.level&&(Ie=z[de.level]),ie.userLogHandler=null===ce?null:(Ge,st,...nt)=>{const Re=nt.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(ct){return null}}).filter(De=>De).join(" ");st>=(null!=Ie?Ie:Ge.logLevel)&&ce({level:ne[st].toLowerCase(),message:Re,args:nt,type:Ge.name})}}}},8766:(tn,ot,H)=>{"use strict";H.d(ot,{Lj:()=>vt,X3:()=>me});var a=H(5861);let z,ke;const Ee=new WeakMap,pe=new WeakMap,be=new WeakMap,ce=new WeakMap,de=new WeakMap;let Ge={get(ye,Oe,ve){if(ye instanceof IDBTransaction){if("done"===Oe)return pe.get(ye);if("objectStoreNames"===Oe)return ye.objectStoreNames||be.get(ye);if("store"===Oe)return ve.objectStoreNames[1]?void 0:ve.objectStore(ve.objectStoreNames[0])}return De(ye[Oe])},set:(ye,Oe,ve)=>(ye[Oe]=ve,!0),has:(ye,Oe)=>ye instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in ye};function Re(ye){return"function"==typeof ye?function nt(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ke||(ke=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Oe){return ye.apply(ct(this),Oe),De(Ee.get(this))}:function(...Oe){return De(ye.apply(ct(this),Oe))}:function(Oe,...ve){const ae=ye.call(ct(this),Oe,...ve);return be.set(ae,Oe.sort?Oe.sort():[Oe]),De(ae)}}(ye):(ye instanceof IDBTransaction&&function Ie(ye){if(pe.has(ye))return;const Oe=new Promise((ve,ae)=>{const Ce=()=>{ye.removeEventListener("complete",Se),ye.removeEventListener("error",lt),ye.removeEventListener("abort",lt)},Se=()=>{ve(),Ce()},lt=()=>{ae(ye.error||new DOMException("AbortError","AbortError")),Ce()};ye.addEventListener("complete",Se),ye.addEventListener("error",lt),ye.addEventListener("abort",lt)});pe.set(ye,Oe)}(ye),((ye,Oe)=>Oe.some(ve=>ye instanceof ve))(ye,function Le(){return z||(z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ge):ye)}function De(ye){if(ye instanceof IDBRequest)return function ie(ye){const Oe=new Promise((ve,ae)=>{const Ce=()=>{ye.removeEventListener("success",Se),ye.removeEventListener("error",lt)},Se=()=>{ve(De(ye.result)),Ce()},lt=()=>{ae(ye.error),Ce()};ye.addEventListener("success",Se),ye.addEventListener("error",lt)});return Oe.then(ve=>{ve instanceof IDBCursor&&Ee.set(ve,ye)}).catch(()=>{}),de.set(Oe,ye),Oe}(ye);if(ce.has(ye))return ce.get(ye);const Oe=Re(ye);return Oe!==ye&&(ce.set(ye,Oe),de.set(Oe,ye)),Oe}const ct=ye=>de.get(ye);function me(ye,Oe,{blocked:ve,upgrade:ae,blocking:Ce,terminated:Se}={}){const lt=indexedDB.open(ye,Oe),J=De(lt);return ae&&lt.addEventListener("upgradeneeded",Gt=>{ae(De(lt.result),Gt.oldVersion,Gt.newVersion,De(lt.transaction))}),ve&&lt.addEventListener("blocked",()=>ve()),J.then(Gt=>{Se&&Gt.addEventListener("close",()=>Se()),Ce&&Gt.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),J}function vt(ye,{blocked:Oe}={}){const ve=indexedDB.deleteDatabase(ye);return Oe&&ve.addEventListener("blocked",()=>Oe()),De(ve).then(()=>{})}const gt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],Be=new Map;function mt(ye,Oe){if(!(ye instanceof IDBDatabase)||Oe in ye||"string"!=typeof Oe)return;if(Be.get(Oe))return Be.get(Oe);const ve=Oe.replace(/FromIndex$/,""),ae=Oe!==ve,Ce=xt.includes(ve);if(!(ve in(ae?IDBIndex:IDBObjectStore).prototype)||!Ce&&!gt.includes(ve))return;const Se=function(){var lt=(0,a.Z)(function*(J,...Gt){const bt=this.transaction(J,Ce?"readwrite":"readonly");let at=bt.store;return ae&&(at=at.index(Gt.shift())),(yield Promise.all([at[ve](...Gt),Ce&&bt.done]))[0]});return function(Gt){return lt.apply(this,arguments)}}();return Be.set(Oe,Se),Se}!function st(ye){Ge=ye(Ge)}(ye=>XE(QE({},ye),{get:(Oe,ve,ae)=>mt(Oe,ve)||ye.get(Oe,ve,ae),has:(Oe,ve)=>!!mt(Oe,ve)||ye.has(Oe,ve)}))},5861:(tn,ot,H)=>{"use strict";function a(z,ke,Le,he,Ee,pe,be){try{var ce=z[pe](be),de=ce.value}catch(ie){return void Le(ie)}ce.done?ke(de):Promise.resolve(de).then(he,Ee)}function ne(z){return function(){var ke=this,Le=arguments;return new Promise(function(he,Ee){var pe=z.apply(ke,Le);function be(de){a(pe,he,Ee,be,ce,"next",de)}function ce(de){a(pe,he,Ee,be,ce,"throw",de)}be(void 0)})}}H.d(ot,{Z:()=>ne})}},tn=>{tn(tn.s=6439)}]);